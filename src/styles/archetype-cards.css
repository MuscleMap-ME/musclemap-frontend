/**
 * MuscleMap Archetype Cards - Glassmorphism Styles
 * =================================================
 *
 * Specialized glassmorphism styles for archetype selection cards,
 * category tiles, and related components. Built on top of the
 * liquid glass design system tokens.
 *
 * Usage: Import this file after index.css
 * @import './archetype-cards.css';
 */

/* ============================================
   ARCHETYPE CARD BASE
   ============================================ */

.archetype-card {
  position: relative;
  display: flex;
  flex-direction: column;
  padding: var(--space-6);
  background: var(--glass-white-5);
  backdrop-filter: blur(var(--blur-lg));
  -webkit-backdrop-filter: blur(var(--blur-lg));
  border: 1px solid var(--border-default);
  border-radius: var(--radius-2xl);
  overflow: hidden;
  cursor: pointer;

  /* Combined shadow with inner glow */
  box-shadow:
    inset 0 1px 2px rgba(255, 255, 255, 0.08),
    0 4px 20px rgba(0, 0, 0, 0.4);

  /* Smooth transitions */
  transition:
    background var(--duration-normal) var(--ease-out),
    border-color var(--duration-normal) var(--ease-out),
    box-shadow var(--duration-normal) var(--ease-out),
    transform var(--duration-normal) var(--ease-spring);

  /* GPU acceleration */
  transform: translateZ(0);
  will-change: transform, box-shadow;

  /* Contain paint for performance */
  contain: layout style paint;
}

/* Specular highlight edge (top-left shine) */
.archetype-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 1px;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.15) 20%,
    rgba(255, 255, 255, 0.25) 50%,
    rgba(255, 255, 255, 0.15) 80%,
    transparent 100%
  );
  opacity: 0.8;
  pointer-events: none;
}

/* ============================================
   ARCHETYPE CARD HOVER STATE
   ============================================ */

.archetype-card-hover,
.archetype-card:hover {
  background: var(--glass-white-10);
  border-color: var(--border-luminous);
  box-shadow:
    inset 0 2px 4px rgba(255, 255, 255, 0.12),
    0 8px 40px rgba(0, 0, 0, 0.5),
    0 0 30px rgba(0, 102, 255, 0.2);
  transform: translateY(-6px) scale(1.02);
}

.archetype-card:hover::before {
  opacity: 1;
}

/* Focus state for accessibility */
.archetype-card:focus-visible {
  outline: 2px solid var(--brand-blue-500);
  outline-offset: 2px;
}

/* Active/pressed state */
.archetype-card:active {
  transform: translateY(-2px) scale(0.99);
  transition-duration: var(--duration-fast);
}

/* ============================================
   ARCHETYPE CARD SELECTED STATE
   ============================================ */

.archetype-card-selected,
.archetype-card[data-selected="true"],
.archetype-card.selected {
  background: var(--glass-brand-light);
  border-color: rgba(0, 102, 255, 0.4);
  box-shadow:
    inset 0 2px 4px rgba(255, 255, 255, 0.15),
    0 0 40px rgba(0, 102, 255, 0.5),
    0 12px 48px rgba(0, 0, 0, 0.6);
  transform: translateY(-4px) scale(1.01);
}

/* Selected glow ring */
.archetype-card-selected::after,
.archetype-card[data-selected="true"]::after,
.archetype-card.selected::after {
  content: '';
  position: absolute;
  inset: -2px;
  border-radius: calc(var(--radius-2xl) + 2px);
  background: linear-gradient(
    135deg,
    rgba(0, 102, 255, 0.6) 0%,
    rgba(139, 92, 246, 0.4) 50%,
    rgba(0, 102, 255, 0.6) 100%
  );
  z-index: -1;
  animation: selectedGlow 2s ease-in-out infinite;
}

@keyframes selectedGlow {
  0%, 100% {
    opacity: 0.6;
    filter: blur(4px);
  }
  50% {
    opacity: 1;
    filter: blur(8px);
  }
}

/* ============================================
   CATEGORY CARD (Smaller tiles)
   ============================================ */

.category-card {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: var(--space-3);
  padding: var(--space-4) var(--space-5);
  min-height: 120px;

  background: var(--glass-white-3);
  backdrop-filter: blur(var(--blur-md));
  -webkit-backdrop-filter: blur(var(--blur-md));
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-xl);

  box-shadow:
    inset 0 1px 1px rgba(255, 255, 255, 0.05),
    0 2px 12px rgba(0, 0, 0, 0.3);

  cursor: pointer;
  transition:
    background var(--duration-normal) var(--ease-out),
    border-color var(--duration-normal) var(--ease-out),
    box-shadow var(--duration-normal) var(--ease-out),
    transform var(--duration-normal) var(--ease-spring);

  transform: translateZ(0);
  will-change: transform;
}

.category-card:hover {
  background: var(--glass-white-8);
  border-color: var(--border-medium);
  box-shadow:
    inset 0 1px 2px rgba(255, 255, 255, 0.08),
    0 4px 20px rgba(0, 0, 0, 0.4);
  transform: translateY(-4px) scale(1.03);
}

.category-card.active,
.category-card[data-active="true"] {
  background: var(--glass-brand-subtle);
  border-color: rgba(0, 102, 255, 0.3);
  box-shadow:
    inset 0 1px 2px rgba(255, 255, 255, 0.1),
    0 0 20px rgba(0, 102, 255, 0.3),
    0 4px 16px rgba(0, 0, 0, 0.4);
}

/* ============================================
   3D TRANSFORM UTILITIES
   ============================================ */

/* Enable 3D transforms container */
.transform-3d-container {
  perspective: 1000px;
  perspective-origin: center center;
}

/* Card with 3D tilt effect */
.card-3d {
  transform-style: preserve-3d;
  transition: transform var(--duration-normal) var(--ease-out);
}

/* Subtle 3D tilt on hover (use with JS for mouse tracking) */
.card-3d-tilt {
  --rotate-x: 0deg;
  --rotate-y: 0deg;
  transform: rotateX(var(--rotate-x)) rotateY(var(--rotate-y));
}

/* Static 3D tilt variants */
.card-tilt-left {
  transform: perspective(1000px) rotateY(5deg);
}

.card-tilt-right {
  transform: perspective(1000px) rotateY(-5deg);
}

.card-tilt-up {
  transform: perspective(1000px) rotateX(-5deg);
}

.card-tilt-down {
  transform: perspective(1000px) rotateX(5deg);
}

/* Floating 3D effect */
.card-float-3d {
  animation: float3d 6s ease-in-out infinite;
}

@keyframes float3d {
  0%, 100% {
    transform: perspective(1000px) translateZ(0) rotateX(0deg) rotateY(0deg);
  }
  25% {
    transform: perspective(1000px) translateZ(20px) rotateX(2deg) rotateY(-2deg);
  }
  50% {
    transform: perspective(1000px) translateZ(30px) rotateX(0deg) rotateY(0deg);
  }
  75% {
    transform: perspective(1000px) translateZ(20px) rotateX(-2deg) rotateY(2deg);
  }
}

/* ============================================
   GRADIENT MESH BACKGROUNDS
   ============================================ */

/* Animated mesh gradient for archetype backgrounds */
.bg-mesh-archetype {
  position: relative;
  background-color: var(--void-base);
  overflow: hidden;
}

.bg-mesh-archetype::before {
  content: '';
  position: absolute;
  inset: -50%;
  background:
    radial-gradient(ellipse at 20% 30%, rgba(0, 102, 255, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 20%, rgba(139, 92, 246, 0.12) 0%, transparent 40%),
    radial-gradient(ellipse at 60% 70%, rgba(255, 51, 102, 0.1) 0%, transparent 50%),
    radial-gradient(ellipse at 30% 80%, rgba(0, 102, 255, 0.08) 0%, transparent 40%);
  animation: meshRotate 30s linear infinite;
  pointer-events: none;
}

@keyframes meshRotate {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* Static mesh gradient variants */
.bg-mesh-strength {
  background:
    radial-gradient(ellipse at 30% 20%, rgba(239, 68, 68, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 70% 80%, rgba(249, 115, 22, 0.1) 0%, transparent 50%),
    var(--void-base);
}

.bg-mesh-endurance {
  background:
    radial-gradient(ellipse at 20% 80%, rgba(34, 197, 94, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 30%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
    var(--void-base);
}

.bg-mesh-hybrid {
  background:
    radial-gradient(ellipse at 50% 20%, rgba(139, 92, 246, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at 20% 70%, rgba(0, 102, 255, 0.1) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 80%, rgba(255, 51, 102, 0.08) 0%, transparent 50%),
    var(--void-base);
}

.bg-mesh-wellness {
  background:
    radial-gradient(ellipse at 30% 30%, rgba(236, 72, 153, 0.12) 0%, transparent 50%),
    radial-gradient(ellipse at 70% 70%, rgba(234, 179, 8, 0.1) 0%, transparent 50%),
    var(--void-base);
}

/* ============================================
   CARD ENTRANCE ANIMATIONS
   ============================================ */

/* Base entrance animation */
@keyframes cardEntrance {
  0% {
    opacity: 0;
    transform: translateY(30px) scale(0.9);
  }
  100% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.animate-card-entrance {
  animation: cardEntrance 0.5s var(--ease-spring) forwards;
}

/* Staggered entrance for grid of cards */
.animate-card-entrance-stagger {
  opacity: 0;
  animation: cardEntrance 0.5s var(--ease-spring) forwards;
}

.animate-card-entrance-stagger:nth-child(1) { animation-delay: 0ms; }
.animate-card-entrance-stagger:nth-child(2) { animation-delay: 60ms; }
.animate-card-entrance-stagger:nth-child(3) { animation-delay: 120ms; }
.animate-card-entrance-stagger:nth-child(4) { animation-delay: 180ms; }
.animate-card-entrance-stagger:nth-child(5) { animation-delay: 240ms; }
.animate-card-entrance-stagger:nth-child(6) { animation-delay: 300ms; }
.animate-card-entrance-stagger:nth-child(7) { animation-delay: 360ms; }
.animate-card-entrance-stagger:nth-child(8) { animation-delay: 420ms; }
.animate-card-entrance-stagger:nth-child(9) { animation-delay: 480ms; }
.animate-card-entrance-stagger:nth-child(10) { animation-delay: 540ms; }
.animate-card-entrance-stagger:nth-child(11) { animation-delay: 600ms; }
.animate-card-entrance-stagger:nth-child(12) { animation-delay: 660ms; }

/* Slide in from different directions */
@keyframes slideInFromLeft {
  0% {
    opacity: 0;
    transform: translateX(-40px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInFromRight {
  0% {
    opacity: 0;
    transform: translateX(40px);
  }
  100% {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slideInFromBottom {
  0% {
    opacity: 0;
    transform: translateY(40px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-slide-in-left {
  animation: slideInFromLeft 0.5s var(--ease-out) forwards;
}

.animate-slide-in-right {
  animation: slideInFromRight 0.5s var(--ease-out) forwards;
}

.animate-slide-in-bottom {
  animation: slideInFromBottom 0.5s var(--ease-out) forwards;
}

/* Pop/bounce entrance */
@keyframes popEntrance {
  0% {
    opacity: 0;
    transform: scale(0.8);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-pop-entrance {
  animation: popEntrance 0.4s var(--ease-spring-bounce) forwards;
}

/* ============================================
   SHIMMER & LOADING STATES
   ============================================ */

.card-shimmer {
  position: relative;
  overflow: hidden;
}

.card-shimmer::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.08) 50%,
    transparent 100%
  );
  transform: translateX(-100%);
  animation: shimmer 2s ease-in-out infinite;
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

/* Skeleton loading card */
.card-skeleton {
  background: var(--glass-white-3);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-2xl);
  overflow: hidden;
}

.card-skeleton .skeleton-line {
  background: var(--glass-white-5);
  border-radius: var(--radius-sm);
  animation: skeletonPulse 1.5s ease-in-out infinite;
}

@keyframes skeletonPulse {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.7;
  }
}

/* ============================================
   ARCHETYPE ICON STYLES
   ============================================ */

.archetype-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 64px;
  height: 64px;
  background: var(--glass-white-10);
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-xl);
  box-shadow:
    inset 0 1px 2px rgba(255, 255, 255, 0.1),
    0 2px 8px rgba(0, 0, 0, 0.3);
  transition: all var(--duration-normal) var(--ease-out);
}

.archetype-card:hover .archetype-icon {
  background: var(--glass-white-15);
  box-shadow:
    inset 0 1px 2px rgba(255, 255, 255, 0.15),
    0 4px 16px rgba(0, 0, 0, 0.4),
    0 0 20px rgba(0, 102, 255, 0.2);
  transform: scale(1.05);
}

.archetype-card-selected .archetype-icon,
.archetype-card.selected .archetype-icon {
  background: var(--glass-brand-medium);
  border-color: rgba(0, 102, 255, 0.4);
  box-shadow:
    inset 0 1px 2px rgba(255, 255, 255, 0.15),
    0 0 30px rgba(0, 102, 255, 0.4);
}

/* ============================================
   ARCHETYPE BADGE/TAG STYLES
   ============================================ */

.archetype-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-1-5);
  padding: var(--space-1) var(--space-3);
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  text-transform: uppercase;
  letter-spacing: var(--tracking-wide);
  color: var(--text-secondary);
  background: var(--glass-white-8);
  border: 1px solid var(--border-subtle);
  border-radius: var(--radius-full);
}

.archetype-badge-primary {
  color: var(--brand-blue-300);
  background: var(--glass-brand-subtle);
  border-color: rgba(0, 102, 255, 0.2);
}

.archetype-badge-pulse {
  color: var(--brand-pulse-300);
  background: var(--glass-pulse-subtle);
  border-color: rgba(255, 51, 102, 0.2);
}

/* ============================================
   ACCESSIBILITY & REDUCED MOTION
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .archetype-card,
  .category-card,
  .card-3d,
  .card-float-3d,
  .animate-card-entrance,
  .animate-card-entrance-stagger,
  .animate-slide-in-left,
  .animate-slide-in-right,
  .animate-slide-in-bottom,
  .animate-pop-entrance {
    animation: none !important;
    transition-duration: 0.01ms !important;
  }

  .bg-mesh-archetype::before {
    animation: none;
  }

  .archetype-card-selected::after,
  .archetype-card[data-selected="true"]::after,
  .archetype-card.selected::after {
    animation: none;
    opacity: 0.8;
  }

  .card-shimmer::after {
    animation: none;
    display: none;
  }
}

/* Low power mode fallback */
@media (prefers-reduced-motion: reduce), (update: slow) {
  .archetype-card,
  .category-card {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: var(--void-surface);
  }
}

/* ============================================
   DARK MODE ADJUSTMENTS (if needed)
   ============================================ */

/* The design system is dark-first, but these ensure
   glass effects remain consistent in all scenarios */
@media (prefers-color-scheme: light) {
  .archetype-card,
  .category-card {
    /* On light mode, slightly increase opacity for visibility */
    background: rgba(0, 0, 0, 0.05);
    border-color: rgba(0, 0, 0, 0.1);
  }

  .archetype-card:hover,
  .category-card:hover {
    background: rgba(0, 0, 0, 0.08);
    border-color: rgba(0, 0, 0, 0.15);
  }
}
