/**
 * MuscleMap Styles - Main Entry Point
 *
 * This file serves as the entry point for the styles directory.
 * It imports from the consolidated source files to avoid duplication.
 *
 * Import hierarchy:
 * 1. Tailwind CSS base
 * 2. Design tokens (single source of truth)
 * 3. Font definitions
 * 4. Animation keyframes
 * 5. Reset & layout foundations
 * 6. Typography system
 * 7. Component styles
 */

@import "tailwindcss";

/* Core design system - consolidated tokens */
@import './tokens.css';
@import './fonts.css';
@import './animations.css';

/* Layout foundations */
@import './reset.css';
@import './layout.css';
@import './typography.css';

/* Progressive enhancement & fallbacks */
@import './fallback-cascade.css';

/* Component styles */
@import './archetype-cards.css';

/**
 * Tailwind Theme Extensions
 *
 * These extend Tailwind's theme with our brand colors and design tokens.
 * Uses @theme directive for Tailwind v4 compatibility.
 */
@theme {
  /* Brand Colors - Primary Blue Spectrum */
  --color-brand-blue-50: #e6f0ff;
  --color-brand-blue-100: #b3d4ff;
  --color-brand-blue-200: #80b8ff;
  --color-brand-blue-300: #4d9cff;
  --color-brand-blue-400: #1a80ff;
  --color-brand-blue-500: #0066ff;
  --color-brand-blue-600: #0052cc;
  --color-brand-blue-700: #003d99;
  --color-brand-blue-800: #002966;
  --color-brand-blue-900: #001433;

  /* Pulse Colors - Magenta Spectrum */
  --color-brand-pulse-50: #ffe6ec;
  --color-brand-pulse-100: #ffb3c4;
  --color-brand-pulse-200: #ff809c;
  --color-brand-pulse-300: #ff4d74;
  --color-brand-pulse-400: #ff1a4c;
  --color-brand-pulse-500: #ff3366;
  --color-brand-pulse-600: #cc2952;
  --color-brand-pulse-700: #991f3d;
  --color-brand-pulse-800: #661429;
  --color-brand-pulse-900: #330a14;

  /* Muscle Activation Colors */
  --color-muscle-chest: #ef4444;
  --color-muscle-back: #3b82f6;
  --color-muscle-shoulders: #f97316;
  --color-muscle-arms: #8b5cf6;
  --color-muscle-legs: #22c55e;
  --color-muscle-core: #eab308;
  --color-muscle-cardio: #ec4899;
}

/**
 * Glass Component Styles
 *
 * Core glass morphism components using design tokens from tokens.css.
 * All component classes are in @layer components for proper Tailwind ordering.
 */
@layer components {
  /* ============================================
     MESH GRADIENT BACKGROUNDS
     ============================================ */

  .bg-mesh-void {
    background-color: var(--void-base);
    background-image:
      radial-gradient(ellipse at 0% 0%, rgba(0, 102, 255, 0.08) 0%, transparent 50%),
      radial-gradient(ellipse at 100% 0%, rgba(139, 92, 246, 0.06) 0%, transparent 40%),
      radial-gradient(ellipse at 100% 100%, rgba(255, 51, 102, 0.04) 0%, transparent 50%),
      radial-gradient(ellipse at 0% 100%, rgba(0, 102, 255, 0.03) 0%, transparent 40%);
  }

  .bg-mesh-animated {
    background-color: var(--void-base);
    background-image:
      radial-gradient(ellipse at var(--mesh-x-1, 20%) var(--mesh-y-1, 20%), rgba(0, 102, 255, 0.15) 0%, transparent 50%),
      radial-gradient(ellipse at var(--mesh-x-2, 80%) var(--mesh-y-2, 10%), rgba(139, 92, 246, 0.12) 0%, transparent 40%),
      radial-gradient(ellipse at var(--mesh-x-3, 60%) var(--mesh-y-3, 80%), rgba(255, 51, 102, 0.08) 0%, transparent 50%);
    animation: mesh-drift 20s ease-in-out infinite;
  }

  /* ============================================
     GLASS SURFACE PRIMITIVES
     ============================================ */

  .glass {
    background: var(--glass-white-5);
    backdrop-filter: blur(var(--blur-md));
    -webkit-backdrop-filter: blur(var(--blur-md));
    border: 1px solid var(--border-default);
    box-shadow: var(--inner-glow-subtle), var(--shadow-sm);
  }

  .glass-subtle {
    background: var(--glass-white-3);
    backdrop-filter: blur(var(--blur-sm));
    -webkit-backdrop-filter: blur(var(--blur-sm));
    border: 1px solid var(--border-subtle);
    box-shadow: var(--inner-glow-subtle), var(--shadow-sm);
  }

  .glass-medium {
    background: var(--glass-white-8);
    backdrop-filter: blur(var(--blur-lg));
    -webkit-backdrop-filter: blur(var(--blur-lg));
    border: 1px solid var(--border-medium);
    box-shadow: var(--inner-glow-light), var(--shadow-md);
  }

  .glass-heavy {
    background: var(--glass-white-10);
    backdrop-filter: blur(var(--blur-xl));
    -webkit-backdrop-filter: blur(var(--blur-xl));
    border: 1px solid var(--border-strong);
    box-shadow: var(--inner-glow-medium), var(--shadow-lg);
  }

  .glass-brand {
    background: var(--glass-brand-light);
    backdrop-filter: blur(var(--blur-md));
    -webkit-backdrop-filter: blur(var(--blur-md));
    border: 1px solid rgba(0, 102, 255, 0.2);
    box-shadow: var(--inner-glow-subtle), var(--shadow-sm), var(--glow-brand-sm);
  }

  .glass-pulse {
    background: var(--glass-pulse-light);
    backdrop-filter: blur(var(--blur-md));
    -webkit-backdrop-filter: blur(var(--blur-md));
    border: 1px solid rgba(255, 51, 102, 0.2);
    box-shadow: var(--inner-glow-subtle), var(--shadow-sm), var(--glow-pulse-sm);
  }

  .glass-interactive {
    transition:
      background var(--duration-normal) var(--ease-out),
      border-color var(--duration-normal) var(--ease-out),
      box-shadow var(--duration-normal) var(--ease-out),
      transform var(--duration-normal) var(--ease-spring);
  }

  .glass-interactive:hover {
    background: var(--glass-white-10);
    border-color: var(--border-luminous);
    box-shadow: var(--inner-glow-light), var(--shadow-md);
    transform: translateY(-2px);
  }

  .glass-interactive:active {
    transform: translateY(0);
    transition-duration: var(--duration-fast);
  }

  /* ============================================
     LUMINOUS BORDERS
     ============================================ */

  .border-luminous {
    position: relative;
  }

  .border-luminous::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 1px;
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.2) 0%,
      rgba(255, 255, 255, 0.05) 50%,
      rgba(255, 255, 255, 0.1) 100%
    );
    mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    mask-composite: xor;
    -webkit-mask-composite: xor;
    pointer-events: none;
  }

  .border-prismatic::before {
    background: linear-gradient(
      135deg,
      var(--prismatic-1) 0%,
      var(--prismatic-2) 25%,
      var(--prismatic-3) 50%,
      var(--prismatic-4) 75%,
      var(--prismatic-5) 100%
    );
    animation: prismatic-shift 8s linear infinite;
  }

  /* ============================================
     GLOW EFFECTS
     ============================================ */

  .glow-brand {
    box-shadow: var(--glow-brand-md);
  }

  .glow-pulse {
    box-shadow: var(--glow-pulse-md);
  }

  .glow-breathing {
    animation: glow-breathe 3s ease-in-out infinite;
  }

  .glow-activation {
    animation: glow-activate 1.5s ease-in-out infinite;
  }

  /* ============================================
     NOISE TEXTURE OVERLAY
     ============================================ */

  .noise-overlay {
    position: relative;
  }

  .noise-overlay::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: var(--noise-subtle);
    pointer-events: none;
    mix-blend-mode: overlay;
  }

  /* ============================================
     BUTTON PRIMITIVES
     ============================================ */

  .btn-glass {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-2-5) var(--space-4);
    font-weight: var(--font-medium);
    font-size: var(--text-sm);
    color: var(--text-primary);
    background: var(--glass-white-10);
    backdrop-filter: blur(var(--blur-sm));
    -webkit-backdrop-filter: blur(var(--blur-sm));
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-lg);
    cursor: pointer;
    transition:
      background var(--duration-normal) var(--ease-out),
      border-color var(--duration-normal) var(--ease-out),
      box-shadow var(--duration-normal) var(--ease-out),
      transform var(--duration-fast) var(--ease-spring);
    box-shadow: var(--inner-glow-subtle);
  }

  .btn-glass:hover {
    background: var(--glass-white-15);
    border-color: var(--border-luminous);
    box-shadow: var(--inner-glow-light), var(--shadow-sm);
    transform: translateY(-1px);
  }

  .btn-glass:active {
    transform: translateY(0) scale(0.98);
    transition-duration: var(--duration-instant);
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--brand-blue-500), var(--brand-blue-600));
    border: 1px solid rgba(0, 102, 255, 0.3);
    box-shadow: var(--inner-glow-subtle), var(--glow-brand-sm);
  }

  .btn-primary:hover {
    background: linear-gradient(135deg, var(--brand-blue-400), var(--brand-blue-500));
    box-shadow: var(--inner-glow-light), var(--glow-brand-md);
  }

  .btn-pulse {
    background: linear-gradient(135deg, var(--brand-pulse-500), var(--brand-pulse-600));
    border: 1px solid rgba(255, 51, 102, 0.3);
    box-shadow: var(--inner-glow-subtle), var(--glow-pulse-sm);
  }

  .btn-pulse:hover {
    background: linear-gradient(135deg, var(--brand-pulse-400), var(--brand-pulse-500));
    box-shadow: var(--inner-glow-light), var(--glow-pulse-md);
  }

  /* ============================================
     CARD PRIMITIVES
     ============================================ */

  .card-glass {
    background: var(--glass-white-5);
    backdrop-filter: blur(var(--blur-md));
    -webkit-backdrop-filter: blur(var(--blur-md));
    border: 1px solid var(--border-default);
    border-radius: var(--radius-xl);
    box-shadow: var(--inner-glow-subtle), var(--shadow-sm);
    overflow: hidden;
  }

  .card-glass-interactive {
    transition:
      background var(--duration-normal) var(--ease-out),
      border-color var(--duration-normal) var(--ease-out),
      box-shadow var(--duration-normal) var(--ease-out),
      transform var(--duration-normal) var(--ease-spring);
  }

  .card-glass-interactive:hover {
    background: var(--glass-white-8);
    border-color: var(--border-medium);
    box-shadow: var(--inner-glow-light), var(--shadow-md);
    transform: translateY(-4px);
  }

  /* ============================================
     NAVIGATION GLASS
     ============================================ */

  .nav-glass {
    background: linear-gradient(
      180deg,
      var(--glass-white-8) 0%,
      var(--glass-white-5) 100%
    );
    backdrop-filter: blur(var(--blur-xl));
    -webkit-backdrop-filter: blur(var(--blur-xl));
    border-bottom: 1px solid var(--border-subtle);
    box-shadow: var(--shadow-sm);
  }

  .nav-glass-scroll {
    transition:
      background var(--duration-slow) var(--ease-out),
      backdrop-filter var(--duration-slow) var(--ease-out);
  }

  .nav-glass-scroll.scrolled {
    background: var(--glass-white-10);
    backdrop-filter: blur(var(--blur-2xl));
    -webkit-backdrop-filter: blur(var(--blur-2xl));
    border-bottom-color: var(--border-medium);
  }

  /* ============================================
     PROGRESS & LIQUID FILLS
     ============================================ */

  .progress-glass {
    background: var(--glass-white-5);
    border-radius: var(--radius-full);
    overflow: hidden;
    height: 8px;
  }

  .progress-fill {
    height: 100%;
    border-radius: var(--radius-full);
    background: linear-gradient(90deg, var(--brand-blue-500), var(--brand-blue-400));
    box-shadow: var(--glow-brand-sm);
    transition: width var(--duration-slow) var(--ease-spring);
  }

  .progress-fill-liquid {
    position: relative;
    overflow: hidden;
  }

  .progress-fill-liquid::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.3) 50%,
      transparent 100%
    );
    animation: shimmer 2s ease-in-out infinite;
  }

  /* ============================================
     MODAL & OVERLAY SYSTEM
     ============================================ */

  .overlay-backdrop {
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(var(--blur-sm));
    -webkit-backdrop-filter: blur(var(--blur-sm));
  }

  .modal-glass {
    background: var(--glass-white-8);
    backdrop-filter: blur(var(--blur-2xl));
    -webkit-backdrop-filter: blur(var(--blur-2xl));
    border: 1px solid var(--border-medium);
    border-radius: var(--radius-2xl);
    box-shadow: var(--inner-glow-medium), var(--shadow-xl);
  }

  /* ============================================
     FOCUS RING UTILITIES (Accessibility)
     ============================================ */

  .focus-ring {
    outline: none;
  }

  .focus-ring:focus {
    outline: none;
  }

  .focus-ring:focus-visible {
    outline: 2px solid var(--brand-blue-500);
    outline-offset: 2px;
  }

  .focus-ring-inset:focus-visible {
    outline-offset: -2px;
  }

  .focus-ring-brand:focus-visible {
    outline-color: var(--brand-blue-500);
    box-shadow: 0 0 0 4px rgba(0, 102, 255, 0.2);
  }

  .focus-ring-pulse:focus-visible {
    outline-color: var(--brand-pulse-500);
    box-shadow: 0 0 0 4px rgba(255, 51, 102, 0.2);
  }

  .focus-ring-success:focus-visible {
    outline-color: var(--muscle-legs);
    box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
  }

  .focus-ring-error:focus-visible {
    outline-color: var(--muscle-chest);
    box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2);
  }

  .focus-ring-glass:focus-visible {
    outline: 2px solid rgba(255, 255, 255, 0.5);
    outline-offset: 2px;
    box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1), 0 0 20px rgba(0, 102, 255, 0.3);
  }

  .focus-ring-lg:focus-visible {
    outline-width: 3px;
    outline-offset: 3px;
  }

  .focus-ring-none:focus-visible {
    outline: none;
    box-shadow: none;
  }

  /* Skip link for keyboard navigation */
  .skip-link {
    position: absolute;
    top: -40px;
    left: 0;
    padding: var(--space-2) var(--space-4);
    background: var(--brand-blue-500);
    color: white;
    font-weight: var(--font-semibold);
    border-radius: 0 0 var(--radius-md) 0;
    z-index: 10000;
    transition: top var(--duration-fast) var(--ease-out);
  }

  .skip-link:focus {
    top: 0;
  }

  .focus-trap-indicator {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* ============================================
     TEXT UTILITIES
     ============================================ */

  .text-glass {
    text-shadow: var(--text-glass-shadow);
  }

  .text-glass-glow {
    text-shadow: var(--text-glass-shadow), var(--text-glass-glow);
  }

  /* ============================================
     PERFORMANCE UTILITIES
     ============================================ */

  .gpu-accelerated {
    transform: translateZ(0);
    will-change: transform;
  }

  .contain-paint {
    contain: paint;
  }
}

/* ============================================
   BROWSER COMPATIBILITY FALLBACKS
   ============================================ */

/* Fallback for browsers without backdrop-filter support */
@supports not (backdrop-filter: blur(1px)) {
  .glass,
  .glass-subtle,
  .glass-medium,
  .glass-heavy,
  .glass-brand,
  .glass-pulse,
  .card-glass,
  .nav-glass,
  .modal-glass {
    background: rgba(15, 15, 25, 0.95) !important;
  }

  .card-glass {
    background: rgba(20, 20, 35, 0.98) !important;
  }
}

/* ============================================
   REDUCED MOTION & LOW POWER MODE
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .bg-mesh-animated,
  .glow-breathing,
  .glow-activation,
  .border-prismatic::before,
  .progress-fill-liquid::after {
    animation: none;
  }
}

@media (prefers-reduced-motion: reduce), (update: slow) {
  .glass,
  .glass-subtle,
  .glass-medium,
  .glass-heavy,
  .glass-brand,
  .glass-pulse,
  .nav-glass,
  .modal-glass {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: var(--void-surface);
  }
}
