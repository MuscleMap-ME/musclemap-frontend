@import "tailwindcss";

/* ============================================
   KNUTH-INSPIRED DESIGN SYSTEM (The Troika)
   Maximum Flexibility, Maximum User Choice, Maximum Performance
   ============================================ */
@import './reset.css';
@import './fonts.css';
@import './parametric-tokens.css';
@import './typography.css';
@import './layout.css';
@import './fallback-cascade.css';

/* Existing styles */
@import './archetype-cards.css';

/*
 * MuscleMap Liquid Glass Design System
 *
 * CSS custom properties and utility classes for the liquid glass aesthetic.
 * Using @theme for custom properties and @layer for utility classes.
 */

/* Custom theme tokens - extends Tailwind's theme layer */
@theme {
  /* Brand Colors - Primary Blue Spectrum (Logo Background) */
  --color-brand-blue-50: #e6f0ff;
  --color-brand-blue-100: #b3d4ff;
  --color-brand-blue-200: #80b8ff;
  --color-brand-blue-300: #4d9cff;
  --color-brand-blue-400: #1a80ff;
  --color-brand-blue-500: #0066ff;
  --color-brand-blue-600: #0052cc;
  --color-brand-blue-700: #003d99;
  --color-brand-blue-800: #002966;
  --color-brand-blue-900: #001433;

  /* Pulse Colors - Magenta Spectrum (Logo Accent) */
  --color-brand-pulse-50: #ffe6ec;
  --color-brand-pulse-100: #ffb3c4;
  --color-brand-pulse-200: #ff809c;
  --color-brand-pulse-300: #ff4d74;
  --color-brand-pulse-400: #ff1a4c;
  --color-brand-pulse-500: #ff3366;
  --color-brand-pulse-600: #cc2952;
  --color-brand-pulse-700: #991f3d;
  --color-brand-pulse-800: #661429;
  --color-brand-pulse-900: #330a14;

  /* Muscle Activation Colors */
  --color-muscle-chest: #ef4444;
  --color-muscle-back: #3b82f6;
  --color-muscle-shoulders: #f97316;
  --color-muscle-arms: #8b5cf6;
  --color-muscle-legs: #22c55e;
  --color-muscle-core: #eab308;
  --color-muscle-cardio: #ec4899;
}

/* Custom CSS outside of layers for raw CSS that must be included */
:root {
  /* ============================================
     BRAND COLORS - Extracted from Logo
     ============================================ */

  /* Primary Blue Spectrum (Logo Background) */
  --brand-blue-50: #e6f0ff;
  --brand-blue-100: #b3d4ff;
  --brand-blue-200: #80b8ff;
  --brand-blue-300: #4d9cff;
  --brand-blue-400: #1a80ff;
  --brand-blue-500: #0066ff;  /* Logo primary */
  --brand-blue-600: #0052cc;
  --brand-blue-700: #003d99;
  --brand-blue-800: #002966;
  --brand-blue-900: #001433;

  /* Magenta/Coral Spectrum (Logo Accent - "Pulse") */
  --brand-pulse-50: #ffe6ec;
  --brand-pulse-100: #ffb3c4;
  --brand-pulse-200: #ff809c;
  --brand-pulse-300: #ff4d74;
  --brand-pulse-400: #ff1a4c;
  --brand-pulse-500: #ff3366;  /* Logo accent */
  --brand-pulse-600: #cc2952;
  --brand-pulse-700: #991f3d;
  --brand-pulse-800: #661429;
  --brand-pulse-900: #330a14;

  /* ============================================
     SEMANTIC COLORS
     ============================================ */

  /* Void/Background - Deep space that glass floats on */
  --void-pure: #000000;
  --void-deep: #050508;
  --void-base: #0a0a0f;
  --void-elevated: #0f0f15;
  --void-surface: #14141c;

  /* Glass Surface Colors (with transparency) */
  /* Increased opacity values for better visibility on dark backgrounds */
  --glass-white-3: rgba(255, 255, 255, 0.08);
  --glass-white-5: rgba(255, 255, 255, 0.12);
  --glass-white-8: rgba(255, 255, 255, 0.15);
  --glass-white-10: rgba(255, 255, 255, 0.18);
  --glass-white-15: rgba(255, 255, 255, 0.22);
  --glass-white-20: rgba(255, 255, 255, 0.28);
  --glass-white-30: rgba(255, 255, 255, 0.38);

  /* Brand Glass - Blue tinted glass surfaces */
  --glass-brand-subtle: rgba(0, 102, 255, 0.05);
  --glass-brand-light: rgba(0, 102, 255, 0.10);
  --glass-brand-medium: rgba(0, 102, 255, 0.15);
  --glass-brand-strong: rgba(0, 102, 255, 0.25);

  /* Pulse Glass - For activation states */
  --glass-pulse-subtle: rgba(255, 51, 102, 0.05);
  --glass-pulse-light: rgba(255, 51, 102, 0.10);
  --glass-pulse-medium: rgba(255, 51, 102, 0.20);
  --glass-pulse-strong: rgba(255, 51, 102, 0.35);

  /* ============================================
     MUSCLE ACTIVATION COLORS (Bioluminescent)
     ============================================ */

  /* Each muscle group has: base, glow (for activation) */
  --muscle-chest: #ef4444;
  --muscle-chest-glow: rgba(239, 68, 68, 0.6);
  --muscle-back: #3b82f6;
  --muscle-back-glow: rgba(59, 130, 246, 0.6);
  --muscle-shoulders: #f97316;
  --muscle-shoulders-glow: rgba(249, 115, 22, 0.6);
  --muscle-arms: #8b5cf6;
  --muscle-arms-glow: rgba(139, 92, 246, 0.6);
  --muscle-legs: #22c55e;
  --muscle-legs-glow: rgba(34, 197, 94, 0.6);
  --muscle-core: #eab308;
  --muscle-core-glow: rgba(234, 179, 8, 0.6);
  --muscle-cardio: #ec4899;
  --muscle-cardio-glow: rgba(236, 72, 153, 0.6);

  /* ============================================
     TEXT COLORS
     ============================================ */

  --text-primary: #ffffff;
  --text-secondary: rgba(255, 255, 255, 0.7);
  --text-tertiary: rgba(255, 255, 255, 0.5);
  --text-quaternary: rgba(255, 255, 255, 0.35);
  --text-disabled: rgba(255, 255, 255, 0.25);

  /* Text on glass surfaces (slightly lifted) */
  --text-glass-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  --text-glass-glow: 0 0 20px rgba(255, 255, 255, 0.1);

  /* ============================================
     BORDER COLORS
     ============================================ */

  /* Increased border opacity for better visibility */
  --border-subtle: rgba(255, 255, 255, 0.10);
  --border-default: rgba(255, 255, 255, 0.15);
  --border-medium: rgba(255, 255, 255, 0.20);
  --border-strong: rgba(255, 255, 255, 0.30);

  /* Luminous borders (for active/hover states) */
  --border-luminous: rgba(255, 255, 255, 0.25);
  --border-brand-glow: rgba(0, 102, 255, 0.5);
  --border-pulse-glow: rgba(255, 51, 102, 0.5);

  /* Prismatic border gradient stops */
  --prismatic-1: rgba(255, 100, 100, 0.3);
  --prismatic-2: rgba(255, 200, 100, 0.3);
  --prismatic-3: rgba(100, 255, 200, 0.3);
  --prismatic-4: rgba(100, 150, 255, 0.3);
  --prismatic-5: rgba(200, 100, 255, 0.3);

  /* ============================================
     BLUR & GLASS PROPERTIES
     ============================================ */

  /* Backdrop blur intensities (higher = further back in z-space) */
  --blur-none: 0px;
  --blur-xs: 4px;
  --blur-sm: 8px;
  --blur-md: 12px;
  --blur-lg: 16px;
  --blur-xl: 24px;
  --blur-2xl: 32px;
  --blur-3xl: 48px;

  /* Glass noise texture opacity */
  --noise-subtle: 0.02;
  --noise-light: 0.04;
  --noise-medium: 0.06;

  /* ============================================
     SHADOWS & GLOWS
     ============================================ */

  /* Soft shadows for depth */
  --shadow-glass-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
  --shadow-glass-md: 0 4px 16px rgba(0, 0, 0, 0.4);
  --shadow-glass-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
  --shadow-glass-xl: 0 16px 48px rgba(0, 0, 0, 0.6);

  /* Inner glows for glass surfaces - enhanced for visibility */
  --inner-glow-subtle: inset 0 1px 1px rgba(255, 255, 255, 0.12);
  --inner-glow-light: inset 0 1px 2px rgba(255, 255, 255, 0.18);
  --inner-glow-medium: inset 0 1px 3px rgba(255, 255, 255, 0.25);

  /* Outer glow halos for interactive elements */
  --glow-brand-sm: 0 0 10px rgba(0, 102, 255, 0.3);
  --glow-brand-md: 0 0 20px rgba(0, 102, 255, 0.4);
  --glow-brand-lg: 0 0 30px rgba(0, 102, 255, 0.5);
  --glow-pulse-sm: 0 0 10px rgba(255, 51, 102, 0.3);
  --glow-pulse-md: 0 0 20px rgba(255, 51, 102, 0.4);
  --glow-pulse-lg: 0 0 30px rgba(255, 51, 102, 0.5);

  /* Specular highlights */
  --specular-edge: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.15) 0%,
    rgba(255, 255, 255, 0.05) 50%,
    rgba(255, 255, 255, 0) 100%
  );

  /* ============================================
     BORDER RADIUS (Logo-derived)
     ============================================ */

  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius-md: 8px;
  --radius-lg: 12px;   /* Logo primary radius */
  --radius-xl: 16px;
  --radius-2xl: 20px;
  --radius-3xl: 24px;
  --radius-full: 9999px;

  /* ============================================
     SPACING SCALE
     ============================================ */

  --space-0: 0px;
  --space-px: 1px;
  --space-0-5: 2px;
  --space-1: 4px;
  --space-1-5: 6px;
  --space-2: 8px;
  --space-2-5: 10px;
  --space-3: 12px;
  --space-3-5: 14px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-7: 28px;
  --space-8: 32px;
  --space-9: 36px;
  --space-10: 40px;
  --space-12: 48px;
  --space-14: 56px;
  --space-16: 64px;
  --space-20: 80px;
  --space-24: 96px;

  /* ============================================
     ANIMATION & TIMING
     ============================================ */

  /* Duration scale */
  --duration-instant: 50ms;
  --duration-fast: 100ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --duration-slower: 500ms;
  --duration-slowest: 800ms;

  /* Spring-based easing (simulated with cubic-bezier) */
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-spring-soft: cubic-bezier(0.22, 0.68, 0.35, 1.2);
  --ease-spring-bounce: cubic-bezier(0.34, 2.0, 0.64, 1);

  /* Standard easing */
  --ease-out: cubic-bezier(0.33, 1, 0.68, 1);
  --ease-in-out: cubic-bezier(0.65, 0, 0.35, 1);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);

  /* ============================================
     Z-INDEX LAYERS
     ============================================ */

  --z-base: 0;
  --z-elevated: 10;
  --z-dropdown: 100;
  --z-sticky: 200;
  --z-overlay: 300;
  --z-modal: 400;
  --z-popover: 500;
  --z-toast: 600;
  --z-tooltip: 700;

  /* ============================================
     TYPOGRAPHY
     ============================================ */

  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-mono: 'SF Mono', 'Fira Code', 'Consolas', monospace;

  /* Font sizes with line heights */
  --text-xs: 0.75rem;      /* 12px */
  --text-sm: 0.875rem;     /* 14px */
  --text-base: 1rem;       /* 16px */
  --text-lg: 1.125rem;     /* 18px */
  --text-xl: 1.25rem;      /* 20px */
  --text-2xl: 1.5rem;      /* 24px */
  --text-3xl: 1.875rem;    /* 30px */
  --text-4xl: 2.25rem;     /* 36px */
  --text-5xl: 3rem;        /* 48px */
  --text-6xl: 3.75rem;     /* 60px */

  /* Font weights */
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;
  --font-extrabold: 800;
  --font-black: 900;

  /* Letter spacing for headings (premium feel) */
  --tracking-tighter: -0.05em;
  --tracking-tight: -0.025em;
  --tracking-normal: 0em;
  --tracking-wide: 0.025em;
  --tracking-wider: 0.05em;
  --tracking-widest: 0.1em;

  /* Line heights */
  --leading-none: 1;
  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;
  --leading-loose: 2;
}

/* Wrap all custom utility classes in @layer components so they're included in the build */
@layer components {

/* ============================================
   MESH GRADIENT BACKGROUNDS
   ============================================ */

/* Aurora/Nebula atmosphere - subtle by default */
.bg-mesh-void {
  background-color: var(--void-base);
  background-image:
    radial-gradient(ellipse at 0% 0%, rgba(0, 102, 255, 0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 100% 0%, rgba(139, 92, 246, 0.06) 0%, transparent 40%),
    radial-gradient(ellipse at 100% 100%, rgba(255, 51, 102, 0.04) 0%, transparent 50%),
    radial-gradient(ellipse at 0% 100%, rgba(0, 102, 255, 0.03) 0%, transparent 40%);
}

/* Animated mesh gradient for hero sections */
.bg-mesh-animated {
  background-color: var(--void-base);
  background-image:
    radial-gradient(ellipse at var(--mesh-x-1, 20%) var(--mesh-y-1, 20%), rgba(0, 102, 255, 0.15) 0%, transparent 50%),
    radial-gradient(ellipse at var(--mesh-x-2, 80%) var(--mesh-y-2, 10%), rgba(139, 92, 246, 0.12) 0%, transparent 40%),
    radial-gradient(ellipse at var(--mesh-x-3, 60%) var(--mesh-y-3, 80%), rgba(255, 51, 102, 0.08) 0%, transparent 50%);
  animation: mesh-drift 20s ease-in-out infinite;
}

@keyframes mesh-drift {
  0%, 100% {
    --mesh-x-1: 20%;
    --mesh-y-1: 20%;
    --mesh-x-2: 80%;
    --mesh-y-2: 10%;
    --mesh-x-3: 60%;
    --mesh-y-3: 80%;
  }
  33% {
    --mesh-x-1: 40%;
    --mesh-y-1: 30%;
    --mesh-x-2: 70%;
    --mesh-y-2: 25%;
    --mesh-x-3: 30%;
    --mesh-y-3: 70%;
  }
  66% {
    --mesh-x-1: 25%;
    --mesh-y-1: 45%;
    --mesh-x-2: 85%;
    --mesh-y-2: 15%;
    --mesh-x-3: 50%;
    --mesh-y-3: 85%;
  }
}

/* ============================================
   GLASS SURFACE PRIMITIVES
   ============================================ */

/* Base glass surface - use as foundation */
.glass {
  background: var(--glass-white-5);
  backdrop-filter: blur(var(--blur-md));
  -webkit-backdrop-filter: blur(var(--blur-md));
  border: 1px solid var(--border-default);
  box-shadow:
    var(--inner-glow-subtle),
    var(--shadow-glass-sm);
}

/* Glass depth variants */
.glass-subtle {
  background: var(--glass-white-3);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: 1px solid var(--border-subtle);
  box-shadow:
    var(--inner-glow-subtle),
    var(--shadow-glass-sm);
}

.glass-medium {
  background: var(--glass-white-8);
  backdrop-filter: blur(var(--blur-lg));
  -webkit-backdrop-filter: blur(var(--blur-lg));
  border: 1px solid var(--border-medium);
  box-shadow:
    var(--inner-glow-light),
    var(--shadow-glass-md);
}

.glass-heavy {
  background: var(--glass-white-10);
  backdrop-filter: blur(var(--blur-xl));
  -webkit-backdrop-filter: blur(var(--blur-xl));
  border: 1px solid var(--border-strong);
  box-shadow:
    var(--inner-glow-medium),
    var(--shadow-glass-lg);
}

/* Brand-tinted glass */
.glass-brand {
  background: var(--glass-brand-light);
  backdrop-filter: blur(var(--blur-md));
  -webkit-backdrop-filter: blur(var(--blur-md));
  border: 1px solid rgba(0, 102, 255, 0.2);
  box-shadow:
    var(--inner-glow-subtle),
    var(--shadow-glass-sm),
    var(--glow-brand-sm);
}

/* Pulse-tinted glass (for active/workout states) */
.glass-pulse {
  background: var(--glass-pulse-light);
  backdrop-filter: blur(var(--blur-md));
  -webkit-backdrop-filter: blur(var(--blur-md));
  border: 1px solid rgba(255, 51, 102, 0.2);
  box-shadow:
    var(--inner-glow-subtle),
    var(--shadow-glass-sm),
    var(--glow-pulse-sm);
}

/* Interactive glass hover state */
.glass-interactive {
  transition:
    background var(--duration-normal) var(--ease-out),
    border-color var(--duration-normal) var(--ease-out),
    box-shadow var(--duration-normal) var(--ease-out),
    transform var(--duration-normal) var(--ease-spring);
}

.glass-interactive:hover {
  background: var(--glass-white-10);
  border-color: var(--border-luminous);
  box-shadow:
    var(--inner-glow-light),
    var(--shadow-glass-md);
  transform: translateY(-2px);
}

.glass-interactive:active {
  transform: translateY(0);
  transition-duration: var(--duration-fast);
}

/* ============================================
   LUMINOUS BORDERS
   ============================================ */

.border-luminous {
  position: relative;
}

.border-luminous::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  padding: 1px;
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.2) 0%,
    rgba(255, 255, 255, 0.05) 50%,
    rgba(255, 255, 255, 0.1) 100%
  );
  mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
  mask-composite: xor;
  -webkit-mask-composite: xor;
  pointer-events: none;
}

/* Prismatic border (rainbow edge refraction) */
.border-prismatic::before {
  background: linear-gradient(
    135deg,
    var(--prismatic-1) 0%,
    var(--prismatic-2) 25%,
    var(--prismatic-3) 50%,
    var(--prismatic-4) 75%,
    var(--prismatic-5) 100%
  );
  animation: prismatic-shift 8s linear infinite;
}

@keyframes prismatic-shift {
  0% { filter: hue-rotate(0deg); }
  100% { filter: hue-rotate(360deg); }
}

/* ============================================
   GLOW EFFECTS
   ============================================ */

.glow-brand {
  box-shadow: var(--glow-brand-md);
}

.glow-pulse {
  box-shadow: var(--glow-pulse-md);
}

/* Breathing glow animation (for logo/pulse elements) */
.glow-breathing {
  animation: glow-breathe 3s ease-in-out infinite;
}

@keyframes glow-breathe {
  0%, 100% {
    box-shadow: 0 0 15px rgba(255, 51, 102, 0.3);
  }
  50% {
    box-shadow: 0 0 25px rgba(255, 51, 102, 0.5);
  }
}

/* Muscle activation glow animation */
.glow-activation {
  animation: glow-activate 1.5s ease-in-out infinite;
}

@keyframes glow-activate {
  0%, 100% {
    opacity: 0.6;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
}

/* ============================================
   NOISE TEXTURE OVERLAY
   ============================================ */

.noise-overlay {
  position: relative;
}

.noise-overlay::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  opacity: var(--noise-subtle);
  pointer-events: none;
  mix-blend-mode: overlay;
}

/* ============================================
   BUTTON PRIMITIVES
   ============================================ */

.btn-glass {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2);
  padding: var(--space-2-5) var(--space-4);
  font-weight: var(--font-medium);
  font-size: var(--text-sm);
  color: var(--text-primary);
  background: var(--glass-white-10);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-lg);
  cursor: pointer;
  transition:
    background var(--duration-normal) var(--ease-out),
    border-color var(--duration-normal) var(--ease-out),
    box-shadow var(--duration-normal) var(--ease-out),
    transform var(--duration-fast) var(--ease-spring);
  box-shadow: var(--inner-glow-subtle);
}

.btn-glass:hover {
  background: var(--glass-white-15);
  border-color: var(--border-luminous);
  box-shadow:
    var(--inner-glow-light),
    var(--shadow-glass-sm);
  transform: translateY(-1px);
}

.btn-glass:active {
  transform: translateY(0) scale(0.98);
  transition-duration: var(--duration-instant);
}

/* Primary CTA button */
.btn-primary {
  background: linear-gradient(135deg, var(--brand-blue-500), var(--brand-blue-600));
  border: 1px solid rgba(0, 102, 255, 0.3);
  box-shadow:
    var(--inner-glow-subtle),
    var(--glow-brand-sm);
}

.btn-primary:hover {
  background: linear-gradient(135deg, var(--brand-blue-400), var(--brand-blue-500));
  box-shadow:
    var(--inner-glow-light),
    var(--glow-brand-md);
}

/* Pulse/Action button (for workout actions) */
.btn-pulse {
  background: linear-gradient(135deg, var(--brand-pulse-500), var(--brand-pulse-600));
  border: 1px solid rgba(255, 51, 102, 0.3);
  box-shadow:
    var(--inner-glow-subtle),
    var(--glow-pulse-sm);
}

.btn-pulse:hover {
  background: linear-gradient(135deg, var(--brand-pulse-400), var(--brand-pulse-500));
  box-shadow:
    var(--inner-glow-light),
    var(--glow-pulse-md);
}

/* ============================================
   CARD PRIMITIVES
   ============================================ */

.card-glass {
  background: var(--glass-white-5);
  backdrop-filter: blur(var(--blur-md));
  -webkit-backdrop-filter: blur(var(--blur-md));
  border: 1px solid var(--border-default);
  border-radius: var(--radius-xl);
  box-shadow:
    var(--inner-glow-subtle),
    var(--shadow-glass-sm);
  overflow: hidden;
}

.card-glass-interactive {
  transition:
    background var(--duration-normal) var(--ease-out),
    border-color var(--duration-normal) var(--ease-out),
    box-shadow var(--duration-normal) var(--ease-out),
    transform var(--duration-normal) var(--ease-spring);
}

.card-glass-interactive:hover {
  background: var(--glass-white-8);
  border-color: var(--border-medium);
  box-shadow:
    var(--inner-glow-light),
    var(--shadow-glass-md);
  transform: translateY(-4px);
}

/* Fallback for browsers that don't support backdrop-filter (e.g., Brave on iOS) */
@supports not (backdrop-filter: blur(1px)) {
  .glass,
  .glass-subtle,
  .glass-medium,
  .glass-heavy,
  .glass-brand,
  .glass-pulse,
  .card-glass,
  .nav-glass,
  .modal-glass {
    background: rgba(15, 15, 25, 0.95) !important;
  }

  .card-glass {
    background: rgba(20, 20, 35, 0.98) !important;
  }
}

/* ============================================
   NAVIGATION GLASS
   ============================================ */

.nav-glass {
  background: linear-gradient(
    180deg,
    var(--glass-white-8) 0%,
    var(--glass-white-5) 100%
  );
  backdrop-filter: blur(var(--blur-xl));
  -webkit-backdrop-filter: blur(var(--blur-xl));
  border-bottom: 1px solid var(--border-subtle);
  box-shadow: var(--shadow-glass-sm);
}

/* Nav glass that intensifies on scroll */
.nav-glass-scroll {
  transition:
    background var(--duration-slow) var(--ease-out),
    backdrop-filter var(--duration-slow) var(--ease-out);
}

.nav-glass-scroll.scrolled {
  background: var(--glass-white-10);
  backdrop-filter: blur(var(--blur-2xl));
  -webkit-backdrop-filter: blur(var(--blur-2xl));
  border-bottom-color: var(--border-medium);
}

/* ============================================
   PROGRESS & LIQUID FILLS
   ============================================ */

.progress-glass {
  background: var(--glass-white-5);
  border-radius: var(--radius-full);
  overflow: hidden;
  height: 8px;
}

.progress-fill {
  height: 100%;
  border-radius: var(--radius-full);
  background: linear-gradient(90deg, var(--brand-blue-500), var(--brand-blue-400));
  box-shadow: var(--glow-brand-sm);
  transition: width var(--duration-slow) var(--ease-spring);
}

/* Liquid fill animation */
.progress-fill-liquid {
  position: relative;
  overflow: hidden;
}

.progress-fill-liquid::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    90deg,
    transparent 0%,
    rgba(255, 255, 255, 0.3) 50%,
    transparent 100%
  );
  animation: liquid-shimmer 2s ease-in-out infinite;
}

@keyframes liquid-shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* ============================================
   MODAL & OVERLAY SYSTEM
   ============================================ */

.overlay-backdrop {
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(var(--blur-sm));
  -webkit-backdrop-filter: blur(var(--blur-sm));
}

.modal-glass {
  background: var(--glass-white-8);
  backdrop-filter: blur(var(--blur-2xl));
  -webkit-backdrop-filter: blur(var(--blur-2xl));
  border: 1px solid var(--border-medium);
  border-radius: var(--radius-2xl);
  box-shadow:
    var(--inner-glow-medium),
    var(--shadow-glass-xl);
}

/* ============================================
   ACCESSIBILITY & REDUCED MOTION
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .bg-mesh-animated {
    animation: none;
  }

  .glow-breathing,
  .glow-activation,
  .border-prismatic::before,
  .progress-fill-liquid::after {
    animation: none;
  }
}

/* Low power mode / battery saver fallback */
@media (prefers-reduced-motion: reduce), (update: slow) {
  .glass,
  .glass-subtle,
  .glass-medium,
  .glass-heavy,
  .glass-brand,
  .glass-pulse,
  .nav-glass,
  .modal-glass {
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    background: var(--void-surface);
  }
}

/* ============================================
   FOCUS RING UTILITIES (Accessibility)
   ============================================ */

/* Base focus ring - visible only on keyboard focus */
.focus-ring {
  outline: none;
}

.focus-ring:focus {
  outline: none;
}

.focus-ring:focus-visible {
  outline: 2px solid var(--brand-blue-500);
  outline-offset: 2px;
}

/* Focus ring variants */
.focus-ring-inset:focus-visible {
  outline-offset: -2px;
}

.focus-ring-brand:focus-visible {
  outline-color: var(--brand-blue-500);
  box-shadow: 0 0 0 4px rgba(0, 102, 255, 0.2);
}

.focus-ring-pulse:focus-visible {
  outline-color: var(--brand-pulse-500);
  box-shadow: 0 0 0 4px rgba(255, 51, 102, 0.2);
}

.focus-ring-success:focus-visible {
  outline-color: var(--muscle-legs);
  box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
}

.focus-ring-error:focus-visible {
  outline-color: var(--muscle-chest);
  box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2);
}

/* Glass-style focus ring with glow */
.focus-ring-glass:focus-visible {
  outline: 2px solid rgba(255, 255, 255, 0.5);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1), 0 0 20px rgba(0, 102, 255, 0.3);
}

/* Large focus ring for touch targets */
.focus-ring-lg:focus-visible {
  outline-width: 3px;
  outline-offset: 3px;
}

/* No focus ring (use sparingly, only when custom focus state is provided) */
.focus-ring-none:focus-visible {
  outline: none;
  box-shadow: none;
}

/* Keyboard navigation indicator - adds skip-to-content support */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  padding: var(--space-2) var(--space-4);
  background: var(--brand-blue-500);
  color: white;
  font-weight: var(--font-semibold);
  border-radius: 0 0 var(--radius-md) 0;
  z-index: 10000;
  transition: top var(--duration-fast) var(--ease-out);
}

.skip-link:focus {
  top: 0;
}

/* Focus trap indicator for modal/dialog */
.focus-trap-indicator {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Text on glass surfaces */
.text-glass {
  text-shadow: var(--text-glass-shadow);
}

.text-glass-glow {
  text-shadow: var(--text-glass-shadow), var(--text-glass-glow);
}

/* GPU acceleration hint */
.gpu-accelerated {
  transform: translateZ(0);
  will-change: transform;
}

/* Contain paint for performance */
.contain-paint {
  contain: paint;
}

} /* End of @layer components */
