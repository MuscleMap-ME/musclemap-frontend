/**
 * MuscleMap Typography System - Knuth-Inspired Variable Fonts
 *
 * Self-hosted fonts that work on:
 * - iOS Lockdown Mode + Brave Shields
 * - All ad blockers and privacy tools
 * - Corporate proxies and VPN filters
 *
 * The Troika: Maximum Flexibility, Maximum User Choice, Maximum Performance
 */

/* ==========================================================================
   VARIABLE FONTS (Primary - Used when supported)
   ========================================================================== */

/**
 * Inter Variable - Primary UI font
 * Full weight range 100-900, supports optical sizing
 */
@font-face {
  font-family: 'Inter var';
  font-style: normal;
  font-weight: 100 900;
  font-display: swap;
  src: url('/fonts/inter-var.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

/**
 * JetBrains Mono Variable - Monospace font for code and numbers
 * Full weight range, excellent for data display
 */
@font-face {
  font-family: 'JetBrains Mono var';
  font-style: normal;
  font-weight: 100 800;
  font-display: swap;
  src: url('/fonts/jetbrains-mono-var.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

/**
 * Source Serif 4 Variable - Elegant display font
 * Used for headings and emphasis, Knuth-inspired serif
 */
@font-face {
  font-family: 'Source Serif var';
  font-style: normal;
  font-weight: 200 900;
  font-display: swap;
  src: url('/fonts/source-serif-var.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

/**
 * Latin Modern Roman - The Computer Modern successor
 * Donald Knuth's typography tradition for mathematical precision
 */
@font-face {
  font-family: 'Latin Modern';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/latin-modern-roman.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Latin Modern';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('/fonts/latin-modern-roman-bold.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

/* ==========================================================================
   STATIC FONTS (Fallback - For older browsers)
   ========================================================================== */

/* Inter - Static weight fallbacks */
@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/inter-regular.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 500;
  font-display: swap;
  src: url('/fonts/inter-medium.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: url('/fonts/inter-semibold.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Inter';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('/fonts/inter-bold.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

/* JetBrains Mono - Static weight fallbacks */
@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/jetbrains-mono-regular.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'JetBrains Mono';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: url('/fonts/jetbrains-mono-bold.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

/* Bebas Neue - Display/Heading font (keeping for backwards compatibility) */
@font-face {
  font-family: 'Bebas Neue';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: url('/fonts/bebas-neue.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA,
    U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193,
    U+2212, U+2215, U+FEFF, U+FFFD;
}

/* ==========================================================================
   FONT STACKS - Progressive Enhancement
   ========================================================================== */

:root {
  /* Primary Sans - Uses variable font when supported, falls back to static */
  --font-sans: 'Inter var', 'Inter', -apple-system, BlinkMacSystemFont,
    'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;

  /* Serif - Latin Modern for Knuth tradition, Source Serif for modern display */
  --font-serif: 'Latin Modern', 'Source Serif var', Georgia, 'Times New Roman',
    serif;

  /* Display - For large headings and impact text */
  --font-display: 'Source Serif var', 'Bebas Neue', 'Impact',
    'Haettenschweiler', 'Arial Narrow Bold', sans-serif;

  /* Monospace - Variable mono for data, code, and numbers */
  --font-mono: 'JetBrains Mono var', 'JetBrains Mono', 'SF Mono', 'Monaco',
    'Inconsolata', 'Fira Mono', 'Droid Sans Mono', 'Source Code Pro', monospace;

  /* Math - For TU calculations and mathematical notation (lazy loaded) */
  --font-math: 'Latin Modern', 'STIX Two Math', 'Cambria Math', serif;

  /* Body alias for semantic use */
  --font-body: var(--font-sans);

  /* ==========================================================================
     OPENTYPE FEATURES - Knuth-Inspired Typography
     ========================================================================== */

  /* Default feature settings for body text */
  --font-features-body: 'kern' 1, 'liga' 1, 'calt' 1;

  /* Feature settings for numeric data (tabular, lining) */
  --font-features-data: 'kern' 1, 'tnum' 1, 'lnum' 1;

  /* Feature settings for headings (discretionary ligatures) */
  --font-features-heading: 'kern' 1, 'liga' 1, 'dlig' 1;

  /* Feature settings for code (no ligatures for clarity) */
  --font-features-code: 'kern' 1, 'liga' 0, 'calt' 0;
}

/* ==========================================================================
   OPTICAL SIZING - Size-specific adjustments
   ========================================================================== */

/* Enable optical sizing by default */
html {
  font-optical-sizing: auto;
}

/* Small text (captions, labels) - increase weight slightly */
.text-xs,
.text-sm,
[data-size='small'] {
  font-weight: calc(var(--font-weight, 400) + 20);
}

/* Large display text - optical adjustments */
.text-4xl,
.text-5xl,
.text-6xl,
[data-size='display'] {
  letter-spacing: -0.02em;
  font-feature-settings: var(--font-features-heading);
}

/* ==========================================================================
   WRITING MODE SUPPORT - Bidirectional Typography
   ========================================================================== */

/* RTL languages */
:lang(ar),
:lang(he),
:lang(fa),
:lang(ur) {
  direction: rtl;
  text-align: start;
}

/* Vertical writing modes (Japanese, Chinese traditional) */
:lang(ja-vertical),
:lang(zh-Hant-vertical) {
  writing-mode: vertical-rl;
  text-orientation: mixed;
}

/* ==========================================================================
   SCRIPT-SPECIFIC FONT STACKS (Extended i18n Support)
   ========================================================================== */

/* Arabic script */
:lang(ar),
:lang(fa),
:lang(ur) {
  --font-sans: 'Noto Sans Arabic', 'Geeza Pro', 'Inter var', 'Inter', sans-serif;
  --font-serif: 'Noto Serif Arabic', 'Latin Modern', serif;
}

/* Hebrew script */
:lang(he) {
  --font-sans: 'Noto Sans Hebrew', 'Arial Hebrew', 'Inter var', 'Inter',
    sans-serif;
  --font-serif: 'Noto Serif Hebrew', 'Latin Modern', serif;
}

/* CJK (Chinese, Japanese, Korean) */
:lang(ja),
:lang(zh),
:lang(ko) {
  --font-sans: 'Noto Sans CJK', 'Hiragino Sans', 'Microsoft YaHei', 'Inter var',
    'Inter', sans-serif;
  --font-serif: 'Noto Serif CJK', 'Source Han Serif', 'Latin Modern', serif;
}

/* Devanagari (Hindi) */
:lang(hi) {
  --font-sans: 'Noto Sans Devanagari', 'Inter var', 'Inter', sans-serif;
  --font-serif: 'Noto Serif Devanagari', 'Latin Modern', serif;
}

/* Thai */
:lang(th) {
  --font-sans: 'Noto Sans Thai', 'Thonburi', 'Inter var', 'Inter', sans-serif;
}
