const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-lRm7_35X.js","assets/react-vendor-D1NxaRNd.js","assets/illustrations-CFkZtwGd.js","assets/index-DJKXoZu6.js","assets/leaflet-vendor-CIGW-MKW.css","assets/reactflow-vendor-B5DZHykP.css","assets/index-CaSYh-k2.css"])))=>i.map(i=>d[i]);
import{A as I,m as y,h as Z,_ as ee}from"./index-DJKXoZu6.js";import{r as a,j as e,a as se,L as te}from"./react-vendor-D1NxaRNd.js";import{c as N}from"./recharts-vendor-BziRPEEi.js";import{h as J}from"./illustrations-CFkZtwGd.js";import{M as X}from"./MuscleViewer-CmpFEol0.js";import{M as V}from"./MuscleActivationBadge-B2oOFpT9.js";import{g as ae}from"./auth-BTLITScD.js";import{P as le}from"./HapticButton-CPy_gq-Y.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./refresh-cw-CWujyU-k.js";const re=15*1024*1024,Y=["image/jpeg","image/png","image/webp","image/heic","image/heif"],ie=({exerciseId:s,exerciseName:n,currentImageUrl:h,onUploadSuccess:x,onClose:r})=>{const[o,g]=a.useState(!1),[m,U]=a.useState(null),[M,B]=a.useState(null),[R,b]=a.useState(!1),[S,u]=a.useState(0),[w,c]=a.useState(null),[k,C]=a.useState(null),E=a.useRef(null),P=a.useCallback(d=>{d.preventDefault(),g(!0)},[]),T=a.useCallback(d=>{d.preventDefault(),g(!1)},[]),_=a.useCallback(d=>Y.includes(d.type)?d.size>re?"Image is too large. Maximum size is 15MB.":null:"Please upload a JPEG, PNG, or WebP image.",[]),z=a.useCallback(d=>{d.preventDefault(),g(!1),c(null);const p=d.dataTransfer.files[0];if(!p)return;const L=_(p);if(L){c(L);return}U(p),B(URL.createObjectURL(p))},[_]),D=a.useCallback(d=>{c(null);const p=d.target.files?.[0];if(!p)return;const L=_(p);if(L){c(L);return}U(p),B(URL.createObjectURL(p))},[_]),W=a.useCallback(async()=>{if(m){b(!0),c(null),u(0);try{const d=new FormData;d.append("exerciseId",s),d.append("image",m);const p=await new Promise((L,t)=>{const l=new XMLHttpRequest;l.open("POST","/api/exercise-images/upload");const j=ae();if(j)l.setRequestHeader("Authorization",`Bearer ${j}`);else{t(new Error("You must be logged in to upload images"));return}l.upload.addEventListener("progress",i=>{i.lengthComputable&&u(Math.round(i.loaded/i.total*100))}),l.addEventListener("load",()=>{if(l.status>=200&&l.status<300){const i=JSON.parse(l.responseText);L({id:i.submission.id,thumbnailUrl:i.submission.thumbnailUrl,status:i.submission.status,message:i.message})}else if(l.status===401)t(new Error("Session expired. Please refresh the page and try again."));else try{const i=JSON.parse(l.responseText);t(new Error(i.message||i.error||"Upload failed"))}catch{t(new Error("Upload failed"))}}),l.addEventListener("error",()=>t(new Error("Network error"))),l.send(d)});C(p),x?.(p)}catch(d){c(d instanceof Error?d.message:"Upload failed. Please try again.")}finally{b(!1)}}},[m,s,x]),f=a.useCallback(()=>{U(null),B(null),c(null),C(null),u(0),E.current&&(E.current.value="")},[]);return se.useEffect(()=>()=>{M&&URL.revokeObjectURL(M)},[M]),e.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Contribute Image"}),r&&e.jsx("button",{onClick:r,className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(I,{mode:"wait",children:k?e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-emerald-500/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:k.message}),k.status==="approved"&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-500/20 text-emerald-400 rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),e.jsx("span",{className:"font-medium",children:"+25 credits earned!"})]}),k.status==="pending"&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-500/20 text-amber-400 rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium",children:"Pending review - credits awarded upon approval"})]}),e.jsx("button",{onClick:f,className:"mt-4 text-sm text-violet-400 hover:text-violet-300",children:"Upload another"})]}):m?e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-black/50 mb-4",children:[e.jsx("img",{src:M,alt:"Preview",className:"w-full h-48 object-contain"}),!R&&e.jsx("button",{onClick:f,className:"absolute top-2 right-2 p-2 bg-black/50 hover:bg-black/70 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex items-center gap-3 mb-4 p-3 bg-white/5 rounded-lg",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-white truncate",children:m.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(m.size/1024/1024).toFixed(2)," MB"]})]})}),R&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${S}%`},className:"h-full bg-gradient-to-r from-violet-500 to-violet-400"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:S<100?`Uploading... ${S}%`:"Processing..."})]}),w&&e.jsx("div",{className:"mb-4 p-3 bg-rose-500/10 border border-rose-500/30 rounded-lg",children:e.jsx("p",{className:"text-sm text-rose-400",children:w})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:f,disabled:R,className:"flex-1 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:W,disabled:R,className:"flex-1 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:R?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Image"})]})]}):e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsxs("div",{onDragOver:P,onDragLeave:T,onDrop:z,onClick:()=>E.current?.click(),className:N("border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-all",o?"border-violet-500 bg-violet-500/10":"border-white/20 hover:border-white/40 hover:bg-white/5"),children:[e.jsx("input",{ref:E,type:"file",accept:Y.join(","),onChange:D,className:"hidden"}),e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-violet-500/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-violet-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("p",{className:"text-white font-medium mb-1",children:o?"Drop your image here":"Drag & drop or click to upload"}),e.jsx("p",{className:"text-gray-500 text-sm mb-3",children:"JPEG, PNG, WebP up to 15MB"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-violet-500/20 text-violet-400 rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),e.jsx("span",{className:"font-medium",children:"Earn 25 credits"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-white/5 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 mb-2",children:"Photo Guidelines"}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-emerald-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Show the exercise being performed clearly"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-emerald-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Good lighting and visibility"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-rose-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),e.jsx("span",{children:"No inappropriate content"})]})]})]}),w&&e.jsx("div",{className:"mt-4 p-3 bg-rose-500/10 border border-rose-500/30 rounded-lg",children:e.jsx("p",{className:"text-sm text-rose-400",children:w})})]})})]})},oe=({exerciseId:s,exerciseName:n,hasImage:h,onUploadSuccess:x})=>{const[r,o]=a.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>o(!0),className:N("flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors",h?"bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white":"bg-violet-500/20 hover:bg-violet-500/30 text-violet-400"),children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),h?"Suggest better image":"Add image (+25 credits)"]}),e.jsx(I,{children:r&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80",onClick:()=>o(!1),children:e.jsx(y.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:g=>g.stopPropagation(),className:"w-full max-w-md",children:e.jsx(ie,{exerciseId:s,exerciseName:n,onUploadSuccess:g=>{x?.(g)},onClose:()=>o(!1)})})})})]})},Q=a.lazy(()=>ee(()=>import("./index-lRm7_35X.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(s=>({default:s.ExerciseIllustration}))),v={Back:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})}),Search:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Filter:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Dumbbell:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16m-7 6h7"})}),Clock:()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Target:()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),Body:()=>e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"5",r:"2.5",strokeWidth:1.5}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4m0 0l-3 8m3-8l3 8m-6-7l-3-1m9 1l3-1"})]}),Close:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})},F={1:{label:"Beginner",color:"text-emerald-400 bg-emerald-500/20"},2:{label:"Easy",color:"text-teal-400 bg-teal-500/20"},3:{label:"Moderate",color:"text-amber-400 bg-amber-500/20"},4:{label:"Hard",color:"text-orange-400 bg-orange-500/20"},5:{label:"Expert",color:"text-rose-400 bg-rose-500/20"}},ne=[{id:"all",label:"All"},{id:"bodyweight",label:"Bodyweight"},{id:"kettlebell",label:"Kettlebell"},{id:"freeweight",label:"Free Weights"}],G={chest:{name:"Chest",icon:"ðŸ’ª",color:"from-red-500 to-rose-600",subcategories:{push:{name:"Push Exercises",icon:"ðŸ‹ï¸"},fly:{name:"Fly Movements",icon:"ðŸ¦…"},press:{name:"Press Variations",icon:"â¬†ï¸"}}},back:{name:"Back",icon:"ðŸ¦´",color:"from-blue-500 to-indigo-600",subcategories:{pull:{name:"Pull Exercises",icon:"ðŸ”™"},row:{name:"Row Variations",icon:"ðŸš£"},lat:{name:"Lat Focus",icon:"ðŸ“"}}},shoulders:{name:"Shoulders",icon:"ðŸŽ¯",color:"from-orange-500 to-amber-600",subcategories:{press:{name:"Overhead Press",icon:"â¬†ï¸"},lateral:{name:"Lateral Raises",icon:"â†”ï¸"},rear:{name:"Rear Delts",icon:"ðŸ”„"}}},arms:{name:"Arms",icon:"ðŸ’ª",color:"from-purple-500 to-violet-600",subcategories:{biceps:{name:"Biceps",icon:"ðŸ’ª"},triceps:{name:"Triceps",icon:"ðŸ”º"},forearms:{name:"Forearms",icon:"âœŠ"}}},legs:{name:"Legs",icon:"ðŸ¦µ",color:"from-green-500 to-emerald-600",subcategories:{quads:{name:"Quadriceps",icon:"ðŸ¦µ"},hamstrings:{name:"Hamstrings",icon:"ðŸƒ"},calves:{name:"Calves",icon:"ðŸ‘Ÿ"}}},glutes:{name:"Glutes",icon:"ðŸ‘",color:"from-pink-500 to-rose-600",subcategories:{hip_thrust:{name:"Hip Thrusts",icon:"â¬†ï¸"},squat:{name:"Squat Variations",icon:"ðŸ‹ï¸"},isolation:{name:"Isolation",icon:"ðŸŽ¯"}}},core:{name:"Core",icon:"ðŸ”¥",color:"from-yellow-500 to-orange-600",subcategories:{abs:{name:"Abs",icon:"ðŸŽ¯"},obliques:{name:"Obliques",icon:"â†—ï¸"},lower_back:{name:"Lower Back",icon:"ðŸ”™"}}},cardio:{name:"Cardio",icon:"â¤ï¸",color:"from-cyan-500 to-blue-600",subcategories:{hiit:{name:"HIIT",icon:"âš¡"},steady:{name:"Steady State",icon:"ðŸƒ"},plyo:{name:"Plyometrics",icon:"ðŸ¦˜"}}},full_body:{name:"Full Body",icon:"ðŸ†",color:"from-violet-500 to-purple-600",subcategories:{compound:{name:"Compound Lifts",icon:"ðŸ‹ï¸"},functional:{name:"Functional",icon:"âš¡"},olympic:{name:"Olympic",icon:"ðŸ¥‡"}}}},ce={"chest-upper":"chest","chest-mid":"chest","chest-lower":"chest","pec-minor":"chest",chest:"chest","pectoralis major":"chest","pectoralis minor":"chest","upper chest":"chest","lower chest":"chest",lats:"back",rhomboids:"back","traps-upper":"back","traps-mid":"back","traps-lower":"back","erector-spinae":"back","teres-major":"back","teres-minor":"back",infraspinatus:"back",back:"back","latissimus dorsi":"back",trapezius:"back",traps:"back","erector spinae":"back","delt-front":"shoulders","delt-side":"shoulders","delt-rear":"shoulders","rotator-cuff":"shoulders",shoulders:"shoulders",deltoids:"shoulders","anterior deltoid":"shoulders","lateral deltoid":"shoulders","posterior deltoid":"shoulders","front delts":"shoulders","side delts":"shoulders","rear delts":"shoulders","bicep-long":"arms","bicep-short":"arms","tricep-long":"arms","tricep-lateral":"arms","tricep-medial":"arms",brachialis:"arms",brachioradialis:"arms","forearm-flexors":"arms","forearm-extensors":"arms",biceps:"arms",triceps:"arms",forearms:"arms","quad-rectus":"legs","quad-vastus-lat":"legs","quad-vastus-med":"legs","quad-vastus-int":"legs","hamstring-bicep":"legs","hamstring-semi-t":"legs","hamstring-semi-m":"legs",gastrocnemius:"legs",soleus:"legs","tibialis-ant":"legs",adductors:"legs",abductors:"legs",quadriceps:"legs",quads:"legs",hamstrings:"legs",calves:"legs","glute-max":"glutes","glute-med":"glutes","glute-min":"glutes","hip-flexors":"glutes","tensor-fl":"glutes",glutes:"glutes","gluteus maximus":"glutes","gluteus medius":"glutes","hip flexors":"glutes","rectus-abdominis":"core","obliques-ext":"core","obliques-int":"core","transverse-abdominis":"core",serratus:"core","lower-back":"core",abs:"core",abdominals:"core","rectus abdominis":"core",obliques:"core","transverse abdominis":"core","lower back":"core",core:"core"},de=s=>{if(s.category)return s.category;const n=s.primaryMuscles?.[0]?.toLowerCase();return n&&ce[n]||"full_body"},K=()=>e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-violet-500/10 to-purple-500/10 animate-pulse rounded-lg"}),H=s=>{const n=[],h={"chest-upper":"chest","chest-mid":"chest","chest-lower":"chest","pec-minor":"chest",lats:"lats",rhomboids:"upper_back","traps-upper":"traps","traps-mid":"traps","traps-lower":"traps","erector-spinae":"lower_back","teres-major":"upper_back","teres-minor":"upper_back","delt-front":"front_delts","delt-side":"side_delts","delt-rear":"rear_delts","bicep-long":"biceps","bicep-short":"biceps",brachialis:"biceps","tricep-long":"triceps","tricep-lateral":"triceps","tricep-medial":"triceps",brachioradialis:"forearms","forearm-flexors":"forearms","forearm-extensors":"forearms","quad-rectus":"quads","quad-vastus-lat":"quads","quad-vastus-med":"quads","quad-vastus-int":"quads","hamstring-bicep":"hamstrings","hamstring-semi-t":"hamstrings","hamstring-semi-m":"hamstrings",gastrocnemius:"calves",soleus:"calves","glute-max":"glutes","glute-med":"glutes","glute-min":"glutes","hip-flexors":"hip_flexors",adductors:"adductors","rectus-abdominis":"abs","obliques-ext":"obliques","obliques-int":"obliques",chest:"chest",back:"upper_back",shoulders:"front_delts",biceps:"biceps",triceps:"triceps",forearms:"forearms",quadriceps:"quads",quads:"quads",hamstrings:"hamstrings",calves:"calves",glutes:"glutes",abs:"abs",core:"abs",obliques:"obliques"};return s.primaryMuscles?.forEach(x=>{const r=h[x.toLowerCase()]||x.toLowerCase();n.find(o=>o.id===r)||n.push({id:r,intensity:1,isPrimary:!0})}),s.secondaryMuscles?.forEach(x=>{const r=h[x.toLowerCase()]||x.toLowerCase();n.find(o=>o.id===r)||n.push({id:r,intensity:.5,isPrimary:!1})}),n},$=({exercise:s,onClick:n})=>{const h=F[s.difficulty]||F[2],x=s.illustration?.hasIllustration||J(s.id),r=!!s.imageUrl,o=a.useMemo(()=>H(s),[s]);return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(s),className:"bg-white/5 border border-white/10 rounded-xl overflow-hidden cursor-pointer hover:bg-white/10 transition-all",children:[r?e.jsxs("div",{className:"relative h-32 bg-[#0d0d12] border-b border-white/5 overflow-hidden",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-contain",loading:"lazy"}),e.jsx("div",{className:"absolute bottom-1 right-1 text-[8px] text-gray-500 bg-black/60 px-1 rounded",children:s.imageUrl?.includes("free-exercise-db")?"free-exercise-db":"wger.de"})]}):x?e.jsx("div",{className:"relative h-32 bg-[#0d0d12] border-b border-white/5",children:e.jsx(a.Suspense,{fallback:e.jsx(K,{}),children:e.jsx(Q,{exerciseId:s.id,exerciseName:s.name,primaryMuscles:s.primaryMuscles,size:"sm",showMuscleLabels:!1,interactive:!1,className:"w-full h-full"})})}):o.length>0?e.jsxs("div",{className:"relative h-32 bg-gradient-to-br from-[#0d0d12] via-[#12121a] to-[#0f0f18] border-b border-white/5 flex items-center justify-center",children:[e.jsx(V,{muscles:o,size:72,showGlow:!0}),e.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex items-center justify-between",children:[e.jsx("span",{className:"text-[8px] text-gray-400 bg-black/60 px-1.5 py-0.5 rounded capitalize truncate max-w-[60%]",children:s.primaryMuscles?.slice(0,2).join(", ")||s.type||"bodyweight"}),e.jsx("span",{className:"text-[8px] text-violet-400/70 bg-violet-500/10 px-1.5 py-0.5 rounded",children:"No image"})]})]}):null,e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-white",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[o.length>0&&e.jsx(V,{muscles:o,size:28,showGlow:!1}),e.jsx("span",{className:N("text-xs px-2 py-0.5 rounded-full",h.color),children:h.label})]})]}),e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2 mb-3",children:s.description||"No description available"}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v.Clock,{}),e.jsxs("span",{children:[s.estimatedSeconds||45,"s"]})]}),s.isCompound&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v.Target,{}),e.jsx("span",{children:"Compound"})]}),s.primaryMuscles?.length>0&&e.jsx("div",{className:"text-gray-400",children:s.primaryMuscles.slice(0,2).join(", ")})]})]})]})},me=({exercise:s,onClose:n})=>{if(!s)return null;const h=F[s.difficulty]||F[2],x=s.illustration?.hasIllustration||J(s.id),r=!!s.imageUrl,o=H(s),g=r||x;return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:n,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:m=>m.stopPropagation(),className:"bg-gray-900 border border-white/10 rounded-2xl max-w-lg w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"relative border-b border-white/10 rounded-t-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex",children:[r?e.jsxs("div",{className:"flex-1 h-48 bg-[#0d0d12] relative",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-contain"}),e.jsxs("div",{className:"absolute bottom-2 left-2 text-[10px] text-gray-400 bg-black/70 px-2 py-0.5 rounded",children:["Image: ",s.imageUrl?.includes("free-exercise-db")?"free-exercise-db":"wger.de"," (",s.imageLicense||"CC-BY-SA",")"]})]}):x?e.jsx("div",{className:"flex-1 h-48 bg-[#0d0d12]",children:e.jsx(a.Suspense,{fallback:e.jsx(K,{}),children:e.jsx(Q,{exerciseId:s.id,exerciseName:s.name,primaryMuscles:s.primaryMuscles,size:"md",showMuscleLabels:!0,interactive:!0,className:"w-full h-full"})})}):null,o.length>0&&e.jsx("div",{className:N("h-48 bg-[#0d0d12]",g?"w-40 border-l border-white/5":"flex-1"),children:e.jsx(X,{muscles:o,mode:"inline",interactive:!1,showLabels:!1,autoRotate:!0,className:"w-full h-full"})})]}),e.jsx("div",{className:"px-4 py-2 bg-black/30 border-t border-white/5",children:e.jsx(oe,{exerciseId:s.id,exerciseName:s.name,hasImage:r,onUploadSuccess:()=>{}})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:N("text-xs px-2 py-0.5 rounded-full",h.color),children:h.label}),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:s.type})]})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-white/10 rounded-lg transition-all",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[s.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Description"}),e.jsx("p",{className:"text-white",children:s.description})]}),s.cues&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Cues"}),e.jsx("p",{className:"text-white",children:s.cues})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Duration"}),e.jsxs("div",{className:"text-white font-medium",children:[s.estimatedSeconds||45,"s"]})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Rest"}),e.jsxs("div",{className:"text-white font-medium",children:[s.restSeconds||60,"s"]})]})]}),s.primaryMuscles?.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Primary Muscles"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.primaryMuscles.map(m=>e.jsx("span",{className:"px-2 py-1 bg-violet-500/20 text-violet-400 rounded-lg text-xs",children:m},m))})]}),s.equipmentRequired?.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Equipment Required"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.equipmentRequired.map(m=>e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded-lg text-xs",children:m},m))})]}),s.locations?.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Available Locations"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.locations.map(m=>e.jsx("span",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded-lg text-xs capitalize",children:m},m))})]})]})]})]})})},he=({category:s,exerciseCount:n,onClick:h})=>e.jsxs(y.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:h,className:N("relative overflow-hidden rounded-2xl p-4 text-left transition-all","bg-gradient-to-br",s.color,"hover:shadow-lg hover:shadow-black/20"),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"text-4xl mb-3",children:s.icon}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:n})]}),e.jsx("h3",{className:"text-lg font-bold text-white",children:s.name}),e.jsxs("p",{className:"text-xs text-white/70 mt-1",children:[Object.keys(s.subcategories||{}).length," subcategories"]})]});function Le(){const[s,n]=a.useState([]),[h,x]=a.useState(!0),[r,o]=a.useState(""),[g,m]=a.useState("all"),[U,M]=a.useState(null),[B,R]=a.useState(!1),[b,S]=a.useState(null),[u,w]=a.useState("categories"),[c,k]=a.useState([]),C=a.useRef(null),E=a.useRef(!1);a.useEffect(()=>{E.current&&C.current&&requestAnimationFrame(()=>{C.current?.focus();const t=C.current?.value.length||0;C.current?.setSelectionRange(t,t),E.current=!1})},[u]);const P=a.useCallback(async()=>{try{const l=await(await fetch("/api/exercises")).json();if(l.data){const j=l.data.map(i=>{let q=[];if(Array.isArray(i.primaryMuscles))q=i.primaryMuscles;else if(typeof i.primaryMuscles=="string"){const A=i.primaryMuscles.match(/^\{(.+)\}$/);A?q=A[1].split(",").map(O=>O.replace(/^"|"$/g,"").trim()).filter(Boolean):q=i.primaryMuscles.split(",").map(O=>O.trim()).filter(Boolean)}return{...i,primaryMuscles:q,category:de({...i,primaryMuscles:q})}});n(j)}}catch{}},[]);a.useEffect(()=>{P().finally(()=>x(!1))},[P]);const T=a.useCallback(async()=>{Z("light"),await P()},[P]),_=s.reduce((t,l)=>{const j=l.category||"full_body";return t[j]=(t[j]||0)+1,t},{}),z=a.useCallback(t=>{k(l=>l.includes(t)?l.filter(j=>j!==t):[...l,t])},[]),D=a.useMemo(()=>c.map(t=>({id:t,intensity:1,isPrimary:!0})),[c]),W=a.useCallback(t=>{if(c.length===0)return!0;const l=H(t);return c.some(j=>l.some(i=>i.id===j))},[c]),f=s.filter(t=>{const l=!r||t.name.toLowerCase().includes(r.toLowerCase())||t.description?.toLowerCase().includes(r.toLowerCase())||t.primaryMuscles?.some(A=>A.toLowerCase().includes(r.toLowerCase())),j=g==="all"||t.type===g,i=!b||t.category===b,q=W(t);return l&&j&&i&&q}),d=t=>{S(t),w("list")},p=()=>{S(null),k([]),w("categories"),o("")},L=()=>{k([])};return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-40 bg-[#0a0a0f]/80 backdrop-blur-xl border-b border-white/5",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[u==="list"&&b?e.jsx("button",{onClick:p,className:"p-2 hover:bg-white/10 rounded-lg transition-all",children:e.jsx(v.Back,{})}):e.jsx(te,{to:"/dashboard",className:"p-2 hover:bg-white/10 rounded-lg transition-all",children:e.jsx(v.Back,{})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-lg",children:b?G[b]?.name:"Exercise Library"}),b&&e.jsxs("p",{className:"text-xs text-gray-400",children:[f.length," exercises"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{u==="muscle"?p():(w("muscle"),S(null))},className:N("p-2 rounded-lg transition-all",u==="muscle"?"bg-violet-500/20 text-violet-400":"hover:bg-white/10 text-gray-400"),title:"Find exercises by muscle",children:e.jsx(v.Body,{})}),e.jsx("button",{onClick:()=>{u==="categories"||u==="muscle"?(w("list"),S(null),k([])):p()},className:N("p-2 rounded-lg transition-all text-xs",u==="list"?"bg-violet-500/20 text-violet-400":"hover:bg-white/10 text-gray-400"),children:u==="categories"||u==="muscle"?"ðŸ“‹ List":"ðŸ“‚ Groups"}),e.jsx("button",{onClick:()=>R(!B),className:N("p-2 rounded-lg transition-all",B?"bg-violet-500/20 text-violet-400":"hover:bg-white/10"),children:e.jsx(v.Filter,{})})]})]})}),e.jsx(le,{onRefresh:T,className:"min-h-screen",children:e.jsx("main",{className:"pt-20 pb-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[u==="muscle"&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-300",children:"Find Exercises by Muscle"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Click on muscles to find exercises that target them"})]}),c.length>0&&e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-white/10 hover:bg-white/20 rounded-lg transition-all",children:[e.jsx(v.Close,{}),"Clear (",c.length,")"]})]}),e.jsx("div",{className:"bg-gradient-to-b from-[#0d0d15] to-[#0a0a10] rounded-2xl border border-white/10 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex justify-center",children:e.jsx(X,{muscles:D,mode:"card",interactive:!0,showLabels:!0,autoRotate:c.length===0,onMuscleClick:z,className:"w-full max-w-[280px]",style:{height:360}})}),e.jsxs("div",{className:"w-full lg:w-1/2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:c.length>0?"Selected Muscles":"Click a muscle to start"}),c.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:c.map(t=>e.jsxs("button",{onClick:()=>z(t),className:"flex items-center gap-1.5 px-3 py-1.5 bg-violet-500/20 text-violet-400 rounded-full text-sm hover:bg-violet-500/30 transition-all",children:[t.replace(/_/g," ").replace(/\b\w/g,l=>l.toUpperCase()),e.jsx("span",{className:"text-violet-300",children:"Ã—"})]},t))}):e.jsx("div",{className:"text-gray-500 text-sm mb-4",children:"Select muscles from the model to find matching exercises"}),e.jsx("div",{className:"p-3 bg-white/5 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Matching exercises"}),e.jsx("span",{className:"text-2xl font-bold text-white",children:f.length})]})})]})]})}),f.length>0?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.slice(0,20).map(t=>e.jsx($,{exercise:t,onClick:M},t.id)),f.length>20&&e.jsx("div",{className:"col-span-full text-center py-4",children:e.jsxs("p",{className:"text-gray-500 text-sm",children:["Showing 20 of ",f.length," exercises. Use search or select more muscles to narrow down."]})})]}):c.length>0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v.Dumbbell,{}),e.jsx("p",{className:"text-gray-400 mt-2",children:"No exercises found for selected muscles"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try selecting different muscles"})]}):null]}),u==="categories"&&!b&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-300",children:"Browse by Muscle Group"}),h?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[...Array(9)].map((t,l)=>e.jsx("div",{className:"h-32 rounded-2xl bg-white/5 animate-pulse"},l))}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-8",children:Object.entries(G).map(([t,l])=>e.jsx(he,{category:l,exerciseCount:_[t]||0,onClick:()=>d(t)},t))}),e.jsxs("div",{className:"border-t border-white/10 pt-6 mt-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-300",children:"Quick Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400",children:e.jsx(v.Search,{})}),e.jsx("input",{ref:u==="categories"?C:void 0,type:"text",value:r,onChange:t=>{o(t.target.value),t.target.value&&(E.current=!0,w("list"))},placeholder:"Search all exercises...",className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-violet-500 transition-all"})]})]})]}),(u==="list"||b)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400",children:e.jsx(v.Search,{})}),e.jsx("input",{ref:u==="list"?C:void 0,type:"text",value:r,onChange:t=>o(t.target.value),placeholder:b?`Search ${G[b]?.name} exercises...`:"Search exercises, muscles...",className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-violet-500 transition-all"})]}),e.jsx(I,{children:B&&e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-2 pb-2",children:ne.map(t=>e.jsx("button",{onClick:()=>m(t.id),className:N("px-4 py-2 rounded-lg text-sm font-medium transition-all",g===t.id?"bg-violet-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:t.label},t.id))})})}),e.jsx("div",{className:"text-sm text-gray-500 mb-4",children:h?"Loading...":`${f.length} exercises`}),h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"})}):f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v.Dumbbell,{}),e.jsx("p",{className:"text-gray-400 mt-2",children:"No exercises found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(t=>e.jsx($,{exercise:t,onClick:M},t.id))})]})]})})}),e.jsx(I,{children:U&&e.jsx(me,{exercise:U,onClose:()=>M(null)})})]})}export{Le as default};
