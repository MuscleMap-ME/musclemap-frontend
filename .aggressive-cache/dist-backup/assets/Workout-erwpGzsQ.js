const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-B7oIBsQB.js","assets/react-vendor-D847gc3Q.js","assets/illustrations-CFkZtwGd.js","assets/index-BenlCWrk.js","assets/leaflet-vendor-CIGW-MKW.css","assets/reactflow-vendor-B5DZHykP.css","assets/index-RS_-44vA.css"])))=>i.map(i=>d[i]);
import{I as ae,l as ye,G as Be,_ as Ge}from"./index-BenlCWrk.js";import{r as n,j as e,u as $e,L as We}from"./react-vendor-D847gc3Q.js";import{T as ve}from"./TipCard-D10aHUp_.js";import{h as ze}from"./illustrations-CFkZtwGd.js";import{M as ge}from"./MuscleViewer-B98yWJND.js";import{M as qe}from"./MuscleActivationBadge-cpoXSpHm.js";import"./apollo-vendor-BNHFeEEc.js";import"./reactflow-vendor-CYb5nRwM.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-CxtoZpzE.js";import"./leaflet-vendor-DZbo3Ov0.js";const Fe="musclemap-sessions",Ve=1,U="active_session";let V=null;function Ue(){return V||(V=new Promise((l,c)=>{const i=indexedDB.open(Fe,Ve);i.onerror=()=>{c(i.error)},i.onsuccess=()=>{l(i.result)},i.onupgradeneeded=d=>{const x=d.target.result;x.objectStoreNames.contains(U)||x.createObjectStore(U,{keyPath:"id"})}}),V)}async function Ye(){try{const i=(await Ue()).transaction(U,"readwrite").objectStore(U);await new Promise((d,x)=>{const b=i.delete("current");b.onsuccess=()=>d(),b.onerror=()=>x(b.error)})}catch{}}let f=null;const Je=5e3,He=3e4;let se=0;async function Ke(l,c=!1){if(!localStorage.getItem("token"))return;const d=Date.now();if(c||d-se>He){f&&(clearTimeout(f),f=null);try{await ae.post("/sessions",be(l)),se=d}catch{}return}f&&clearTimeout(f),f=setTimeout(async()=>{try{await ae.post("/sessions",be(l)),se=Date.now()}catch{}f=null},Je)}async function Qe(l,c){if(localStorage.getItem("token"))try{await ae.delete("/sessions/active",{data:{reason:l,workoutId:c}})}catch{}}function be(l){return{sessionId:l.sessionId,startedAt:l.startTime,pausedAt:l.pausedAt,totalPausedTime:l.totalPausedTime,workoutPlan:l.workoutPlan||{exercises:l.exercises},currentExerciseIndex:l.currentExerciseIndex,currentSetIndex:l.currentSetIndex,sets:l.sets,totalVolume:l.totalVolume,totalReps:l.totalReps,estimatedCalories:l.estimatedCalories,musclesWorked:l.musclesWorked,sessionPRs:l.sessionPRs,restTimer:l.restTimer,exerciseGroups:l.exerciseGroups,activeGroup:l.activeGroup,activeGroupExerciseIndex:l.activeGroupExerciseIndex,activeGroupRound:l.activeGroupRound,groupSets:l.groupSets,clientVersion:l.clientVersion}}async function Xe(l="completed",c){f&&(clearTimeout(f),f=null),await Ye(),await Qe(l,c)}function Ze({exerciseId:l,delay:c=2e3}){const[i,d]=n.useState(null),[x,b]=n.useState(!1),[y,C]=n.useState(!1);return n.useEffect(()=>{if(!l)return;d(null),b(!1),C(!1),(async()=>{try{const S=await ye(`/tips/exercise/${l}`);S?.data&&(d(S.data),setTimeout(()=>b(!0),c))}catch{}})()},[l,c]),!i||!x||y?null:e.jsx("div",{className:"animate-fadeIn",children:e.jsx(ve,{tip:i,onDismiss:()=>C(!0),compact:!0})})}const es={first_workout:"ðŸŽ‰",workouts_10:"ðŸ”¥",workouts_50:"âš¡",workouts_100:"ðŸ†",streak_7:"ðŸ“…",streak_30:"ðŸ—“ï¸",exercises_100:"ðŸ’¯",reps_1000:"ðŸŽ¯",reps_10000:"ðŸš€",hours_10:"â±ï¸"};function ss({milestone:l,onContinue:c}){if(!l)return null;const i=es[l.id]||"ðŸ…";return e.jsxs("div",{className:"bg-gradient-to-b from-yellow-500/20 via-amber-500/10 to-transparent rounded-2xl p-6 border border-yellow-500/30 text-center",children:[e.jsxs("div",{className:"relative inline-block mb-4",children:[e.jsx("div",{className:"text-6xl animate-bounce",children:i}),e.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-black",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),e.jsx("h3",{className:"text-xl font-bold text-yellow-400 mb-1",children:"Milestone Achieved!"}),e.jsx("p",{className:"text-2xl font-bold text-white mb-2",children:l.name}),l.description&&e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:l.description}),c&&e.jsx("button",{onClick:c,className:"mt-4 px-6 py-2 bg-yellow-500 hover:bg-yellow-400 text-black font-medium rounded-lg transition-colors",children:"Awesome!"})]})}function ts({workout:l,onClose:c}){const[i,d]=n.useState(null),[x,b]=n.useState(null),[y,C]=n.useState(!0),[g,S]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const v=await ye("/tips/completion",{method:"POST",body:{goals:l?.goals||[]}});d(v?.data?.tip),b(v?.data?.milestone)}catch{}finally{C(!1)}})()},[l?.goals]);const j=[{icon:"â±ï¸",value:l?.duration||"-",label:"minutes",color:"text-blue-400"},{icon:"ðŸ‹ï¸",value:l?.exerciseCount||l?.exercises?.length||"-",label:"exercises",color:"text-yellow-400"},{icon:"ðŸ”¥",value:l?.totalSets||"-",label:"sets",color:"text-orange-400"},{icon:"ðŸ’ª",value:l?.totalTU?Math.round(l.totalTU):"-",label:"TU earned",color:"text-purple-400"}];return e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-gray-900 rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"relative pt-8 pb-4 px-6 text-center overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-2 h-2 bg-yellow-400 rounded-full animate-ping",style:{animationDelay:"0s"}}),e.jsx("div",{className:"absolute top-4 right-1/4 w-2 h-2 bg-purple-400 rounded-full animate-ping",style:{animationDelay:"0.2s"}}),e.jsx("div",{className:"absolute top-2 left-1/2 w-2 h-2 bg-pink-400 rounded-full animate-ping",style:{animationDelay:"0.4s"}})]}),e.jsx("div",{className:"text-6xl mb-3",children:"ðŸŽ‰"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Workout Complete!"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Great job staying consistent"})]}),e.jsx("div",{className:"px-6 pb-4",children:e.jsx("div",{className:"grid grid-cols-4 gap-2",children:j.map((N,v)=>e.jsxs("div",{className:"bg-gray-800 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-lg mb-1",children:N.icon}),e.jsx("div",{className:`text-lg font-bold ${N.color}`,children:N.value}),e.jsx("div",{className:"text-xs text-gray-500",children:N.label})]},v))})}),x&&g&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx(ss,{milestone:x,onContinue:()=>S(!1)})}),!y&&i&&(!x||!g)&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx(ve,{tip:i})}),y&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("div",{className:"bg-gray-800 rounded-xl p-4 animate-pulse",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-gray-700 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-700 rounded w-1/2"})]})]})})}),e.jsx("div",{className:"px-6 pb-6",children:e.jsx("button",{onClick:c,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white font-medium rounded-xl transition-colors",children:"Done"})})]})})}const ls=n.lazy(()=>Ge(()=>import("./index-B7oIBsQB.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(l=>({default:l.ExerciseIllustration}))),as={"chest-upper":"chest","chest-mid":"chest","chest-lower":"chest",pectoralis:"chest",pec:"chest","back-upper":"upper_back","back-mid":"lats","back-lower":"lower_back",latissimus:"lats",rhomboids:"upper_back",trapezius:"traps",traps:"traps","rear-delts":"rear_delts","front-delts":"front_delts","side-delts":"side_delts",shoulders:"front_delts",deltoid:"front_delts",biceps:"biceps",triceps:"triceps",forearms:"forearms",quadriceps:"quads",quads:"quads",hamstrings:"hamstrings",glutes:"glutes",calves:"calves",abs:"abs",obliques:"obliques",core:"abs","hip-flexors":"hip_flexors",adductors:"adductors",erector:"lower_back"};function I(l){const c=l.toLowerCase().replace(/[_\s]/g,"-");return as[c]||c.replace(/-/g,"_")}const rs=[{value:15,label:"15 min",description:"Quick session"},{value:30,label:"30 min",description:"Standard"},{value:45,label:"45 min",description:"Extended"},{value:60,label:"60 min",description:"Full workout"}],te=[{value:"gym",label:"Gym",icon:"ðŸ‹ï¸"},{value:"home",label:"Home",icon:"ðŸ "},{value:"park",label:"Park",icon:"ðŸŒ³"},{value:"hotel",label:"Hotel",icon:"ðŸ¨"},{value:"office",label:"Office",icon:"ðŸ¢"}],ns={gym:[{value:"barbell",label:"Barbell",icon:"ðŸ‹ï¸"},{value:"dumbbells",label:"Dumbbells",icon:"ðŸ”©"},{value:"cable_machine",label:"Cable Machine",icon:"âš™ï¸"},{value:"leg_press",label:"Leg Press",icon:"ðŸ¦µ"},{value:"lat_pulldown",label:"Lat Pulldown",icon:"ðŸ“"},{value:"bench",label:"Bench",icon:"ðŸª‘"},{value:"squat_rack",label:"Squat Rack",icon:"ðŸ—ï¸"},{value:"smith_machine",label:"Smith Machine",icon:"ðŸ”§"},{value:"rowing_machine",label:"Row Machine",icon:"ðŸš£"},{value:"treadmill",label:"Treadmill",icon:"ðŸƒ"},{value:"elliptical",label:"Elliptical",icon:"â­•"},{value:"kettlebell",label:"Kettlebell",icon:"ðŸ””"}],home:[{value:"dumbbells",label:"Dumbbells",icon:"ðŸ”©"},{value:"pullup_bar",label:"Pull-up Bar",icon:"ðŸ”²"},{value:"kettlebell",label:"Kettlebell",icon:"ðŸ””"},{value:"bands",label:"Resistance Bands",icon:"âž°"},{value:"yoga_mat",label:"Yoga Mat",icon:"ðŸ§˜"},{value:"foam_roller",label:"Foam Roller",icon:"ðŸ›¼"},{value:"jump_rope",label:"Jump Rope",icon:"ðŸª¢"},{value:"stability_ball",label:"Stability Ball",icon:"âšª"}],park:[{value:"pullup_bar",label:"Pull-up Bar",icon:"ðŸ”²"},{value:"parallel_bars",label:"Parallel Bars",icon:"â¸ï¸"},{value:"bench",label:"Park Bench",icon:"ðŸª‘"},{value:"bands",label:"Resistance Bands",icon:"âž°"},{value:"jump_rope",label:"Jump Rope",icon:"ðŸª¢"},{value:"stairs",label:"Stairs",icon:"ðŸ“¶"}],hotel:[{value:"bands",label:"Resistance Bands",icon:"âž°"},{value:"dumbbells",label:"Hotel Dumbbells",icon:"ðŸ”©"},{value:"yoga_mat",label:"Yoga Mat",icon:"ðŸ§˜"},{value:"chair",label:"Chair",icon:"ðŸ’º"},{value:"treadmill",label:"Treadmill",icon:"ðŸƒ"}],office:[{value:"bands",label:"Resistance Bands",icon:"âž°"},{value:"chair",label:"Office Chair",icon:"ðŸ’º"},{value:"desk",label:"Desk",icon:"ðŸ–¥ï¸"},{value:"stairs",label:"Stairs",icon:"ðŸ“¶"}]},is=[{value:"dumbbells",label:"Dumbbells",icon:"ðŸ”©"},{value:"pullup_bar",label:"Pull-up Bar",icon:"ðŸ”²"},{value:"kettlebell",label:"Kettlebell",icon:"ðŸ””"},{value:"bands",label:"Resistance Bands",icon:"âž°"},{value:"barbell",label:"Barbell",icon:"ðŸ‹ï¸"}],cs=[{value:"strength",label:"Strength",icon:"ðŸ’ª"},{value:"hypertrophy",label:"Muscle Growth",icon:"ðŸ“ˆ"},{value:"endurance",label:"Endurance",icon:"ðŸƒ"},{value:"fat_loss",label:"Fat Loss",icon:"ðŸ”¥"}],je=[{id:"chest",name:"Chest",icon:"ðŸª¶",match:["ch_","pec","chest"]},{id:"back",name:"Back",icon:"ðŸ”§",match:["bk_","lat","romboid","trap","back"]},{id:"shoulders",name:"Shoulders",icon:"ðŸ’ª",match:["sh_","delt","shoulder"]},{id:"arms",name:"Arms",icon:"ðŸ’ª",match:["ar_","bicep","tricep","forearm"]},{id:"legs",name:"Legs",icon:"ðŸ¦µ",match:["lg_","quad","hamstring","calf","leg"]},{id:"glutes",name:"Glutes",icon:"ðŸ‘",match:["glute"]},{id:"core",name:"Core",icon:"ðŸ¤³",match:["core","ab","oblique"]}];function le(l){if(!l||!l.length)return null;const c=(l[0]||"").toLowerCase();for(const i of je)if(i.match.some(d=>c.includes(d)))return i;return null}const fe={barbell:{c:"from-red-500 to-orange-500"},dumbbell:{c:"from-blue-500 to-purple-500"},bodyweight:{c:"from-green-500 to-teal-500"},kettlebell:{c:"from-yellow-500 to-orange-500"},machine:{c:"from-gray-500 to-gray-700"},cable:{c:"from-purple-500 to-pink-500"},default:{c:"from-gray-600 to-gray-700"}};function vs(){const{token:l}=Be(),c=$e(),[i,d]=n.useState("select"),[x,b]=n.useState(!0),[y,C]=n.useState(30),[g,S]=n.useState("gym"),[j,N]=n.useState([]),[v,Ne]=n.useState(["strength"]),[h,Y]=n.useState(null),[p,M]=n.useState(0),[J,we]=n.useState([]),[H,ke]=n.useState(""),[G,re]=n.useState(null),[o,R]=n.useState([]),[K,A]=n.useState(!1),[w,Q]=n.useState(null),[O,ne]=n.useState(3),[$,X]=n.useState(!1),[ie,ce]=n.useState(null),[D,oe]=n.useState(10),[L,de]=n.useState(0),[W,E]=n.useState(null),[ue,me]=n.useState(null),T=n.useRef(null),Z=n.useRef(null);n.useEffect(()=>{(i==="workout"||i==="manual")&&!T.current&&(T.current=`session-${Date.now()}-${Math.random().toString(36).slice(2)}`,Z.current=Date.now())},[i]);const xe=n.useCallback(async s=>{if(!l||!T.current||s.length===0)return;const t={sessionId:T.current,isActive:!0,startTime:Z.current||Date.now(),pausedAt:null,totalPausedTime:0,exercises:s.map(r=>({id:r.id,name:r.name,primaryMuscles:r.primaryMuscles||r.primary_muscles||[],secondaryMuscles:r.secondaryMuscles||r.secondary_muscles||[]})),currentExercise:s[s.length-1]||null,currentExerciseIndex:s.length-1,currentSetIndex:0,sets:s.map((r,a)=>({id:`set-${a}`,exerciseId:r.id,exerciseName:r.name,weight:r.weight||0,reps:r.reps||0,tag:"working",timestamp:Date.now()})),totalVolume:s.reduce((r,a)=>r+(a.weight||0)*(a.reps||0)*(a.sets||1),0),totalReps:s.reduce((r,a)=>r+(a.reps||0)*(a.sets||1),0),estimatedCalories:s.length*50,musclesWorked:[...new Set(s.flatMap(r=>r.primaryMuscles||r.primary_muscles||[]))],sessionPRs:[],exerciseGroups:[],activeGroupExerciseIndex:0,activeGroupRound:1,groupSets:[],clientVersion:1};try{await Ke(t,!1)}catch{}},[l]);n.useEffect(()=>{o.length>0&&(i==="workout"||i==="manual")&&xe(o)},[o,i,xe]),n.useEffect(()=>{N([])},[g]);const Se=ns[g]||is,z=()=>{if(!h)return[];const s=[];return h.warmup&&s.push(...h.warmup.map(t=>({...t,phase:"warmup"}))),h.exercises&&s.push(...h.exercises.map(t=>({...t,phase:"main"}))),h.cooldown&&s.push(...h.cooldown.map(t=>({...t,phase:"cooldown"}))),s},q=n.useMemo(()=>{const s={};return o.forEach(t=>{const r=t.primaryMuscles||t.primary_muscles||[],a=t.secondaryMuscles||t.secondary_muscles||[],m=t.sets||3,u=t.reps||10,k=Math.min(1,m*u/50);r.forEach(_=>{const P=I(_),B=s[P]||{intensity:0};s[P]={intensity:Math.min(1,B.intensity+k*.4),isPrimary:!0}}),a.forEach(_=>{const P=I(_),B=s[P]||{intensity:0,isPrimary:!1};B.isPrimary?s[P].intensity=Math.min(1,B.intensity+k*.2):s[P]={intensity:Math.min(1,B.intensity+k*.2),isPrimary:!1}})}),Object.entries(s).map(([t,{intensity:r,isPrimary:a}])=>({id:t,intensity:r,isPrimary:a}))},[o]),_e=n.useMemo(()=>{if(!h)return[];const t=z()[p];if(!t)return[];const r=[],a=t.primaryMuscles||t.primary_muscles||[],m=t.secondaryMuscles||t.secondary_muscles||[];return a.forEach(u=>{r.push({id:I(u),intensity:1,isPrimary:!0})}),m.forEach(u=>{r.push({id:I(u),intensity:.5,isPrimary:!1})}),r},[h,p]);n.useEffect(()=>{i==="manual"&&J.length===0&&(A(!0),fetch("/api/exercises").then(s=>s.json()).then(s=>{const r=(s.data||s.exercises||[]).map(a=>({...a,primary_muscles:typeof a.primaryMuscles=="string"?a.primaryMuscles.split(",").map(m=>m.trim()).filter(Boolean):a.primaryMuscles||[]}));we(r),A(!1)}).catch(()=>A(!1)))},[i,J.length]);const Ce=async()=>{A(!0),me(null);try{const s=await fetch("/api/prescription/generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l}`},body:JSON.stringify({timeAvailable:y,location:g,equipment:j,goals:v})}),t=await s.json();if(!s.ok)throw new Error(t.error?.message||"Failed to generate workout");const r=t.data;Y(r),M(0),d("workout")}catch(s){me(s.message||"Failed to generate workout. Try different constraints.")}finally{A(!1)}},Me=s=>{N(t=>t.includes(s)?t.filter(r=>r!==s):[...t,s])},Ee=s=>{Ne(t=>t.includes(s)?t.length>1?t.filter(r=>r!==s):t:[...t,s])},F=n.useRef(!1),pe=async()=>{if(F.current||o.length===0)return;F.current=!0,X(!0);const s=[...o];try{const t=s.filter(u=>{const k=u.id&&typeof u.id=="string"&&!u.id.startsWith("activity-"),_=!u.isActivity;return k&&_}).map(u=>({exerciseId:u.id,sets:u.sets||3,reps:typeof u.reps=="number"?u.reps:10,weight:u.weight||void 0}));if(t.length===0){alert("No exercises to log. Complete at least one exercise (not just warmup/cooldown) to save your workout."),F.current=!1,X(!1);return}const r=`workout-${Date.now()}-${Math.random().toString(36).slice(2)}`,a=await fetch("/api/workouts",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l},body:JSON.stringify({exercises:t,idempotencyKey:r,notes:`${o.length} exercises completed`})}),m=await a.json();a.ok&&m.data?(T.current&&(await Xe("completed",m.data.id),T.current=null,Z.current=null),ce({tuEarned:m.data.totalTU,characterStats:m.data.characterStats}),R([])):alert(m.error?.message||m.error||"Failed to complete workout")}catch{alert("Error completing workout. Please try again.")}finally{F.current=!1,X(!1)}},Te=J.filter(s=>{const t=!H||s.name.toLowerCase().includes(H.toLowerCase()),r=le(s.primary_muscles),a=!G||r&&r.id===G;return t&&a}).slice(0,24);async function Pe(){if(w)try{await fetch("/api/workouts/exercise",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l},body:JSON.stringify({exerciseId:w.id,sets:O,reps:D,weight:L})}),R([...o,{...w,sets:O,reps:D,weight:L}]),E(w.name),setTimeout(()=>E(null),2e3),Q(null)}catch{}}const Ie=s=>fe[s.type]||fe.default,ee=s=>{const t=le(s.primary_muscles||s.primaryMuscles);return t?t.icon:"ðŸ’ª"},he=s=>{const t=le(s.primary_muscles||s.primaryMuscles);return t?t.name:""},Re=async s=>{const t=s.id||s.exerciseId;if(s.isActivity||!t){R([...o,{id:`activity-${Date.now()}`,name:s.name||s.description||"Activity",sets:s.sets||1,reps:s.reps||1,weight:0,isActivity:!0}]),E(s.name||s.description),setTimeout(()=>E(null),2e3);const a=z();p<a.length-1&&M(p+1);return}try{await fetch("/api/workouts/exercise",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+l},body:JSON.stringify({exerciseId:t,sets:s.sets,reps:typeof s.reps=="number"?s.reps:10,weight:0})}),R([...o,{id:t,name:s.name,sets:s.sets,reps:s.reps,weight:0,primaryMuscles:s.primaryMuscles}]),E(s.name),setTimeout(()=>E(null),2e3);const a=z();p<a.length-1&&M(p+1)}catch{}},Ae=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white pb-24",children:[e.jsx("header",{className:"bg-gray-900/80 backdrop-blur-lg p-4 sticky top-0 z-10 border-b border-gray-700/30",children:e.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[e.jsxs(We,{to:"/dashboard",className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx("span",{children:"â†"}),e.jsx("img",{src:"/logo.png",alt:"MuscleMap",className:"w-6 h-6 rounded-md"})]}),e.jsx("h1",{className:"text-xl font-bold",children:"Start Workout"}),e.jsx("div",{})]})}),e.jsxs("main",{className:"max-w-lg mx-auto p-4 space-y-6",children:[ue&&e.jsx("div",{className:"bg-red-500/20 border border-red-500 rounded-xl p-4 text-red-200",children:ue}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm text-gray-400 uppercase mb-3",children:"How long do you have?"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:rs.map(s=>e.jsxs("button",{onClick:()=>C(s.value),className:`p-3 rounded-xl text-center transition-all ${y===s.value?"bg-purple-600 ring-2 ring-purple-400":"bg-gray-800 hover:bg-gray-700"}`,children:[e.jsx("div",{className:"font-bold",children:s.label}),e.jsx("div",{className:"text-xs text-gray-400",children:s.description})]},s.value))})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm text-gray-400 uppercase mb-3",children:"Where are you?"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:te.map(s=>e.jsxs("button",{onClick:()=>S(s.value),className:`p-3 rounded-xl text-center transition-all ${g===s.value?"bg-purple-600 ring-2 ring-purple-400":"bg-gray-800 hover:bg-gray-700"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:s.icon}),e.jsx("div",{className:"text-xs",children:s.label})]},s.value))})]}),e.jsxs("section",{children:[e.jsxs("h2",{className:"text-sm text-gray-400 uppercase mb-3",children:["Available at ",te.find(s=>s.value===g)?.label||"Location"," (optional)"]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2 max-h-48 overflow-y-auto",children:Se.map(s=>e.jsxs("button",{onClick:()=>Me(s.value),className:`p-3 rounded-xl text-center transition-all ${j.includes(s.value)?"bg-green-600 ring-2 ring-green-400":"bg-gray-800 hover:bg-gray-700"}`,children:[e.jsx("div",{className:"text-2xl mb-1",children:s.icon}),e.jsx("div",{className:"text-xs leading-tight",children:s.label})]},s.value))}),j.length===0&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"No equipment selected = bodyweight exercises"}),j.length>0&&e.jsxs("p",{className:"text-xs text-green-400 mt-2",children:[j.length," item",j.length>1?"s":""," selected"]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-sm text-gray-400 uppercase mb-3",children:"Your Goal"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:cs.map(s=>e.jsxs("button",{onClick:()=>Ee(s.value),className:`p-3 rounded-xl text-left transition-all ${v.includes(s.value)?"bg-blue-600 ring-2 ring-blue-400":"bg-gray-800 hover:bg-gray-700"}`,children:[e.jsx("span",{className:"text-xl mr-2",children:s.icon}),e.jsx("span",{className:"font-medium",children:s.label})]},s.value))})]}),e.jsx("button",{onClick:Ce,disabled:K,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 py-4 rounded-2xl font-bold text-lg transition-all disabled:opacity-50",children:K?"Generating...":"Generate Workout"}),e.jsx("button",{onClick:()=>d("manual"),className:"w-full bg-gray-800 hover:bg-gray-700 py-3 rounded-xl text-gray-400 text-sm",children:"Or browse all exercises manually"})]})]}),Oe=()=>{const s=z(),t=s[p],r=s.length>0?(p+1)/s.length*100:0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white pb-24",children:[W&&e.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 bg-green-500 px-8 py-4 rounded-2xl font-bold animate-bounce",children:["Done: ",W]}),e.jsx("header",{className:"bg-gray-900/80 backdrop-blur-lg p-4 sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("button",{onClick:()=>{d("select"),Y(null)},className:"text-blue-400",children:"â† Exit"}),e.jsx("h1",{className:"text-xl font-bold",children:"Your Workout"}),e.jsxs("div",{className:"bg-green-600 px-3 py-1 rounded-full text-sm font-bold",children:[o.length,"/",s.length]})]}),e.jsx("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-green-500 to-emerald-400 transition-all duration-300",style:{width:`${r}%`}})})]})}),e.jsxs("main",{className:"max-w-lg mx-auto p-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl overflow-hidden mb-6 border border-white/5",children:[e.jsxs("button",{onClick:()=>b(!x),className:"w-full p-3 flex items-center justify-between text-left",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ”¥"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"Muscle Activation"}),e.jsxs("div",{className:"text-xs text-gray-400",children:[q.length," muscle groups worked"]})]})]}),e.jsx("svg",{className:`w-5 h-5 text-gray-400 transition-transform ${x?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&e.jsx("div",{className:"p-4 pt-0",children:e.jsxs("div",{className:"flex gap-4 items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Current Exercise"}),e.jsx(ge,{muscles:_e,mode:"compact",interactive:!1,showLabels:!1,autoRotate:!1,className:"w-full",style:{height:140}}),t&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2 justify-center",children:t.primaryMuscles?.slice(0,3).map(a=>e.jsx("span",{className:"bg-purple-500/30 text-purple-200 px-2 py-0.5 rounded text-xs",children:a},a))})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-gray-500 uppercase mb-2",children:"Workout Total"}),e.jsx(ge,{muscles:q,mode:"compact",interactive:!1,showLabels:!1,autoRotate:!1,className:"w-full",style:{height:140}}),q.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mt-2 justify-center",children:q.slice(0,3).map(a=>e.jsx("span",{className:"bg-green-500/30 text-green-200 px-2 py-0.5 rounded text-xs",children:a.id.replace(/_/g," ")},a.id))})]})]})})]}),e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-2",children:[e.jsxs("span",{children:[h?.actualDuration||y," min"]}),e.jsxs("span",{children:[te.find(a=>a.value===g)?.icon," ",g]}),e.jsxs("span",{children:[s.length," exercises"]})]}),h?.muscleCoverage&&e.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(h.muscleCoverage).slice(0,6).map(a=>e.jsx("span",{className:"bg-gray-700 px-2 py-1 rounded text-xs",children:a},a))})]}),t&&e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-blue-600 rounded-3xl overflow-hidden mb-6 shadow-2xl",children:[t.id&&ze(t.id)&&e.jsx("div",{className:"h-40 bg-black/20",children:e.jsx(n.Suspense,{fallback:e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-white/5 to-white/10 animate-pulse"}),children:e.jsx(ls,{exerciseId:t.id,exerciseName:t.name,primaryMuscles:t.primaryMuscles,size:"md",showMuscleLabels:!1,interactive:!1,className:"w-full h-full"})})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide opacity-70 mb-2",children:t.phase==="warmup"?"Warm-up":t.phase==="cooldown"?"Cool-down":`Exercise ${p+1-(h?.warmup?.length||0)}`}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:t.name}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-white/20 rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:t.sets}),e.jsx("div",{className:"text-xs opacity-80",children:"Sets"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-3xl font-bold",children:t.reps}),e.jsx("div",{className:"text-xs opacity-80",children:"Reps"})]}),e.jsxs("div",{className:"bg-white/20 rounded-xl p-3 text-center",children:[e.jsxs("div",{className:"text-3xl font-bold",children:[t.restSeconds,"s"]}),e.jsx("div",{className:"text-xs opacity-80",children:"Rest"})]})]}),t.notes&&e.jsx("p",{className:"text-sm opacity-80 mb-4",children:t.notes}),e.jsx("div",{className:"flex gap-2 text-xs opacity-70 flex-wrap",children:t.primaryMuscles?.map(a=>e.jsx("span",{className:"bg-white/10 px-2 py-1 rounded",children:a},a))})]})]}),t&&e.jsx("div",{className:"mb-6",children:e.jsx(Ze,{exerciseId:t.exerciseId,delay:1500})}),t&&e.jsxs("div",{className:"flex gap-3 mb-6",children:[e.jsx("button",{onClick:()=>p>0&&M(p-1),disabled:p===0,className:"flex-1 bg-gray-700 hover:bg-gray-600 disabled:opacity-50 py-4 rounded-xl font-bold",children:"Previous"}),e.jsx("button",{onClick:()=>Re(t),className:"flex-[2] bg-green-600 hover:bg-green-500 py-4 rounded-xl font-bold text-lg",children:"Done"}),e.jsx("button",{onClick:()=>p<s.length-1&&M(p+1),disabled:p===s.length-1,className:"flex-1 bg-gray-700 hover:bg-gray-600 disabled:opacity-50 py-4 rounded-xl font-bold",children:"Skip"})]}),o.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm text-gray-400 uppercase mb-3",children:"Completed"}),e.jsx("div",{className:"space-y-2",children:o.map((a,m)=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-600 w-8 h-8 rounded-full flex items-center justify-center text-sm",children:"âœ“"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsxs("div",{className:"text-xs text-gray-400",children:[a.sets," x ",a.reps]})]})]},m))})]}),o.length>0&&e.jsx("button",{onClick:pe,disabled:$,className:"w-full bg-gradient-to-r from-green-600 to-emerald-500 hover:from-green-500 hover:to-emerald-400 py-4 rounded-2xl font-bold text-lg transition-all",children:$?"Completing...":`Complete Workout (${o.length} exercises)`}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-sm text-gray-400 uppercase mb-3",children:"All Exercises"}),e.jsx("div",{className:"space-y-2",children:s.map((a,m)=>{const u=o.some(_=>_.name===a.name),k=m===p;return e.jsxs("button",{onClick:()=>M(m),className:`w-full text-left rounded-xl p-3 flex items-center gap-3 transition-all ${k?"bg-purple-600":u?"bg-gray-800 opacity-60":"bg-gray-800 hover:bg-gray-700"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm ${u?"bg-green-600":k?"bg-white/20":"bg-gray-700"}`,children:u?"âœ“":m+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsxs("div",{className:"text-xs text-gray-400",children:[a.sets," x ",a.reps," | ",a.phase]})]})]},m)})})]})]})]})},De=()=>e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white pb-24",children:[W&&e.jsxs("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 bg-green-500 px-8 py-4 rounded-2xl font-bold animate-bounce",children:[W,"!"]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-end justify-center",onClick:()=>Q(null),children:e.jsxs("div",{className:"bg-gray-800 rounded-t-3xl p-6 w-full max-w-lg",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("span",{className:"text-5xl",children:ee(w)}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:w.name}),e.jsx("p",{className:"text-gray-400",children:he(w)})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Sets"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>ne(Math.max(1,O-1)),className:"bg-gray-700 w-10 h-10 rounded-full text-xl",children:"-"}),e.jsx("span",{className:"text-3xl font-bold w-12 text-center",children:O}),e.jsx("button",{onClick:()=>ne(O+1),className:"bg-gray-700 w-10 h-10 rounded-full text-xl",children:"+"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Reps"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>oe(Math.max(1,D-1)),className:"bg-gray-700 w-10 h-10 rounded-full text-xl",children:"-"}),e.jsx("span",{className:"text-3xl font-bold w-12 text-center",children:D}),e.jsx("button",{onClick:()=>oe(D+1),className:"bg-gray-700 w-10 h-10 rounded-full text-xl",children:"+"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"lbs"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2",children:[e.jsx("button",{onClick:()=>de(Math.max(0,L-5)),className:"bg-gray-700 w-10 h-10 rounded-full text-xl",children:"-"}),e.jsx("span",{className:"text-3xl font-bold w-12 text-center",children:L}),e.jsx("button",{onClick:()=>de(L+5),className:"bg-gray-700 w-10 h-10 rounded-full text-xl",children:"+"})]})]})]}),e.jsx("button",{onClick:Pe,className:"w-full bg-green-600 hover:bg-green-700 py-4 rounded-2xl font-bold text-lg",children:"Log Exercise"})]})}),e.jsx("header",{className:"bg-gray-900/80 backdrop-blur-lg p-4 sticky top-0 z-10 border-b border-gray-700/30",children:e.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>d("select"),className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx("span",{children:"â†"}),e.jsx("img",{src:"/logo.png",alt:"MuscleMap",className:"w-6 h-6 rounded-md"})]}),e.jsx("h1",{className:"text-xl font-bold",children:"Browse Exercises"}),e.jsxs("div",{className:"bg-green-600 px-3 py-1 rounded-full text-sm font-bold",children:[o.length," logged"]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto p-4",children:[o.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-sm text-gray-400 mb-2 uppercase",children:"Today's Workout"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.map((s,t)=>e.jsxs("div",{className:"bg-gray-800 rounded-xl p-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:ee(s)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm truncate",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-400",children:[s.sets,"x",s.reps," ",s.weight>0?`${s.weight}lb`:""]})]})]},t))}),e.jsx("button",{onClick:pe,disabled:$,className:"w-full bg-green-600 hover:bg-green-500 py-4 rounded-2xl font-bold text-lg mt-4 transition-all",children:$?"Completing...":"Complete Workout"})]}),e.jsx("input",{type:"text",placeholder:"Search exercises...",value:H,onChange:s=>ke(s.target.value),className:"w-full bg-gray-800 rounded-2xl p-4 mb-4 text-lg"}),e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-4 mb-4",children:[e.jsx("button",{onClick:()=>re(null),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap ${G?"bg-gray-700":"bg-purple-600"}`,children:"All"}),je.map(s=>e.jsxs("button",{onClick:()=>re(s.id),className:`px-4 py-2 rounded-full text-sm font-bold whitespace-nowrap ${G===s.id?"bg-purple-600":"bg-gray-700"}`,children:[s.icon," ",s.name]},s.id))]}),K?e.jsx("div",{className:"text-center py-12 text-gray-400",children:"Loading exercises..."}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:Te.map(s=>{const t=[...(s.primary_muscles||[]).map(r=>({id:I(r),intensity:1,isPrimary:!0})),...(s.secondary_muscles||[]).slice(0,2).map(r=>({id:I(r),intensity:.5,isPrimary:!1}))];return e.jsxs("button",{onClick:()=>Q(s),className:`bg-gradient-to-br ${Ie(s).c} rounded-2xl p-3 text-left hover:scale-105 active:scale-95 transition-all shadow-lg relative`,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("div",{className:"text-3xl",children:ee(s)}),t.length>0&&e.jsx(qe,{muscles:t,size:"xs",className:"opacity-90"})]}),e.jsx("div",{className:"font-bold text-sm truncate mt-1",children:s.name}),e.jsx("div",{className:"text-xs opacity-80",children:he(s)})]},s.id)})})]})]}),Le=()=>ie&&e.jsx(ts,{workout:{duration:y,exerciseCount:o.length,totalSets:o.reduce((s,t)=>s+(t.sets||0),0),totalTU:ie.tuEarned||0,exercises:o,goals:v},onClose:()=>{ce(null),d("select"),Y(null),R([]),c("/dashboard")}});return e.jsxs(e.Fragment,{children:[Le(),i==="select"&&Ae(),i==="workout"&&Oe(),i==="manual"&&De()]})}export{vs as default};
