import{r as t,j as e,L as R}from"./react-vendor-D1NxaRNd.js";import{i as n}from"./index-Bcbmw5yO.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-BziRPEEi.js";const N=[{id:"high_five",icon:"ðŸ–ï¸",name:"High Five"},{id:"fist_bump",icon:"ðŸ‘Š",name:"Fist Bump"},{id:"clap",icon:"ðŸ‘",name:"Applause"},{id:"fire",icon:"ðŸ”¥",name:"On Fire"},{id:"rocket",icon:"ðŸš€",name:"Rocket"}];function D(){const[l,b]=t.useState("send"),[o,f]=t.useState([]),[x,S]=t.useState([]),[m,w]=t.useState([]),[r,_]=t.useState({sent:0,received:0,unread:0}),[F,g]=t.useState(!0),[a,h]=t.useState(null),[i,k]=t.useState("high_five"),[p,u]=t.useState(""),[v,j]=t.useState(!1);t.useEffect(()=>{y()},[]);const y=async()=>{g(!0);try{const[s,d,L,E]=await Promise.all([n.highFives.users(),n.highFives.received(),n.highFives.sent(),n.highFives.stats()]);f(s.users||[]),S(d.encouragements||[]),w(L.encouragements||[]),_(E)}catch{}g(!1)},C=async()=>{if(!a)return alert("Select someone to encourage!");j(!0);try{const s=await n.highFives.send({recipient_id:a.id,type:i,message:p});s.error?alert(s.error):(h(null),u(""),y())}catch{alert("Failed to send")}j(!1)},c=s=>N.find(d=>d.id===s)?.icon||"ðŸ–ï¸";return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white pb-24",children:[e.jsx("header",{className:"bg-gray-800 p-4 sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsx(R,{to:"/community",className:"text-blue-400",children:"â† Back"}),e.jsx("h1",{className:"text-xl font-bold",children:"ðŸ–ï¸ High Fives"}),e.jsx("div",{className:"w-16"})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto p-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-green-600/20 border border-green-600 rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.sent}),e.jsx("div",{className:"text-xs text-gray-400",children:"Sent"})]}),e.jsxs("div",{className:"bg-purple-600/20 border border-purple-600 rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.received}),e.jsx("div",{className:"text-xs text-gray-400",children:"Received"})]}),e.jsxs("div",{className:"bg-yellow-600/20 border border-yellow-600 rounded-xl p-3 text-center",children:[e.jsx("div",{className:"text-2xl font-bold",children:r.unread}),e.jsx("div",{className:"text-xs text-gray-400",children:"Unread"})]})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["send","received","sent"].map(s=>e.jsxs("button",{onClick:()=>b(s),className:"flex-1 py-2 rounded-full capitalize "+(l===s?"bg-purple-600":"bg-gray-700"),children:[s," ",s==="received"&&r.unread>0&&e.jsx("span",{className:"bg-red-500 text-xs px-1.5 py-0.5 rounded-full ml-1",children:r.unread})]},s))}),F?e.jsx("div",{className:"text-center py-8 animate-pulse",children:"Loading..."}):l==="send"?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:"Select someone to encourage:"}),e.jsx("div",{className:"space-y-2 max-h-52 overflow-y-auto",children:o.length===0?e.jsx("div",{className:"text-center text-gray-500 py-4",children:"No other users yet"}):o.map(s=>e.jsxs("button",{onClick:()=>h(s),className:"w-full bg-gray-800 p-3 rounded-xl flex items-center gap-3 transition-all "+(a?.id===s.id?"ring-2 ring-purple-500 bg-gray-700":"hover:bg-gray-750"),children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center font-bold text-lg",children:s.username?.[0]?.toUpperCase()||"?"}),e.jsxs("div",{className:"text-left flex-1",children:[e.jsx("div",{className:"font-bold",children:s.username}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Level ",s.level||1," â€¢ ",s.current_archetype||"Explorer"]})]}),a?.id===s.id&&e.jsx("span",{className:"text-green-400 text-xl",children:"âœ“"})]},s.id))}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-400 mt-4",children:"Choose encouragement:"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:N.map(s=>e.jsx("button",{onClick:()=>k(s.id),className:"p-3 rounded-xl text-center transition-all "+(i===s.id?"bg-purple-600 scale-110":"bg-gray-800 hover:bg-gray-700"),children:e.jsx("div",{className:"text-2xl",children:s.icon})},s.id))}),e.jsx("textarea",{placeholder:"Add a message (optional)",value:p,onChange:s=>u(s.target.value),className:"w-full bg-gray-800 p-3 rounded-xl h-20 resize-none"}),e.jsx("button",{onClick:C,disabled:v,className:"w-full bg-green-600 hover:bg-green-700 py-3 rounded-xl font-bold transition-all disabled:opacity-50",children:v?"Sending...":`Send ${c(i)} to ${a.username}`})]})]}):l==="received"?e.jsx("div",{className:"space-y-3",children:x.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No encouragements yet. Keep training! ðŸ’ª"}):x.map(s=>e.jsx("div",{className:"bg-gray-800 p-4 rounded-xl transition-all "+(s.read_at?"":"border-l-4 border-purple-500"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:c(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold",children:[s.sender_name," sent you a ",s.type.replace("_"," "),"!"]}),s.message&&e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:['"',s.message,'"']}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(s.created_at).toLocaleString()})]})]})},s.id))}):e.jsx("div",{className:"space-y-3",children:m.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8",children:"You haven't sent any encouragements yet. Spread the love!"}):m.map(s=>e.jsx("div",{className:"bg-gray-800 p-4 rounded-xl",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-3xl",children:c(s.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-bold",children:["You sent a ",s.type.replace("_"," ")," to ",s.recipient_name]}),s.message&&e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:['"',s.message,'"']}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(s.created_at).toLocaleString()})]})]})},s.id))})]})]})}export{D as default};
