import{r as c,j as e,u as Z,L as U}from"./react-vendor-D847gc3Q.js";import{c as ee,a as se,b as te,I as ae,h as P,R as le,J as q,m as j,A as R,B as $,P as re,G as ie,K as I,N as ne,f as v,i as M}from"./index-RH5w6CoJ.js";import{G as oe}from"./GlassSurface-CuHevRGA.js";import"./GlassButton-BHLjyHT2.js";import{T as z}from"./timer-D5VwGTYg.js";import{C as V}from"./chevron-down-8qfxLTcy.js";import{C as ce}from"./chevron-up-CSQudoIG.js";import{C as D}from"./check-BwEwzcUt.js";import{V as de,a as me}from"./volume-x-CSGQqdtN.js";import{M as xe}from"./minus-CliOZsZK.js";import{R as B}from"./rotate-ccw-BeRXOok6.js";import{H as he}from"./history-BYrBF1iW.js";import{R as W}from"./refresh-cw-V3SVxxnM.js";import{T as ue}from"./trash-2-DzQDghuT.js";import{T as H}from"./triangle-alert-CwnhX6zm.js";import{C as be}from"./chevron-right-DnZtTtPX.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BNHFeEEc.js";import"./reactflow-vendor-CYb5nRwM.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-CxtoZpzE.js";const ge=[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]],pe=ee("vibrate",ge),je=[{id:"beep",label:"Beep",icon:$},{id:"chime",label:"Chime",icon:$},{id:"bell",label:"Bell",icon:$}];function ye({className:l="",compact:n=!1,showExerciseDefaults:u=!1,exercises:b=[]}){const[m,p]=c.useState(!n),[i,g]=c.useState(!1),{defaultDuration:a,presets:d,setDefault:y,setExerciseDefault:w}=se(),{settings:r,update:f,playSound:N}=te(),S=ae(s=>s.exerciseRestDefaults),h=c.useCallback((s,o)=>{f({[s]:o}),P("light")},[f]),A=c.useCallback(()=>{f(le),y(90),P("medium")},[f,y]),E=c.useCallback(()=>{N("complete"),P("light")},[N]),_=s=>{if(s<60)return`${s}s`;const o=Math.floor(s/60),k=s%60;return k>0?`${o}m ${k}s`:`${o}m`};return n&&!m?e.jsxs("button",{onClick:()=>p(!0),className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-800/50 hover:bg-gray-800 text-gray-400 hover:text-gray-300 transition-colors ${l}`,children:[e.jsx(z,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["Rest Timer: ",_(a)]}),e.jsx(V,{className:"w-4 h-4"})]}):e.jsxs(oe,{className:`overflow-hidden ${l}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:e.jsx(z,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:"Rest Timer Settings"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Configure your rest timer preferences"})]})]}),n&&e.jsx("button",{onClick:()=>p(!1),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-400",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Default Rest Duration"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:d.map(s=>e.jsx("button",{onClick:()=>y(s.seconds),className:`py-2.5 px-3 rounded-lg text-sm font-medium transition-all ${a===s.seconds?"bg-blue-500/30 text-blue-400 border border-blue-500/40 ring-1 ring-blue-500/20":"bg-gray-800/50 text-gray-400 hover:bg-gray-800 hover:text-gray-300"}`,children:s.label},s.seconds))}),e.jsx("p",{className:"text-xs text-gray-500",children:d.find(s=>s.seconds===a)?.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>h("autoStartAfterSet",!r.autoStartAfterSet),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${r.autoStartAfterSet?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Auto-start"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${r.autoStartAfterSet?"bg-blue-500":"bg-gray-600"}`,children:r.autoStartAfterSet&&e.jsx(D,{className:"w-3 h-3 text-white"})})]}),e.jsxs("button",{onClick:()=>h("soundEnabled",!r.soundEnabled),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${r.soundEnabled?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[r.soundEnabled?e.jsx(de,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sound"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${r.soundEnabled?"bg-blue-500":"bg-gray-600"}`,children:r.soundEnabled&&e.jsx(D,{className:"w-3 h-3 text-white"})})]}),e.jsxs("button",{onClick:()=>h("vibrationEnabled",!r.vibrationEnabled),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${r.vibrationEnabled?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Vibration"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${r.vibrationEnabled?"bg-blue-500":"bg-gray-600"}`,children:r.vibrationEnabled&&e.jsx(D,{className:"w-3 h-3 text-white"})})]}),e.jsxs("button",{onClick:()=>h("showFloatingTimer",!r.showFloatingTimer),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${r.showFloatingTimer?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Float"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${r.showFloatingTimer?"bg-blue-500":"bg-gray-600"}`,children:r.showFloatingTimer&&e.jsx(D,{className:"w-3 h-3 text-white"})})]})]}),e.jsxs("button",{onClick:()=>g(!i),className:"flex items-center justify-between w-full py-2 text-sm text-gray-400 hover:text-gray-300",children:[e.jsx("span",{children:"Advanced Settings"}),e.jsx(j.div,{animate:{rotate:i?180:0},transition:{duration:.2},children:e.jsx(V,{className:"w-4 h-4"})})]}),e.jsx(R,{children:i&&e.jsxs(j.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-4 overflow-hidden",children:[r.soundEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Sound Volume"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:r.soundVolume,onChange:s=>h("soundVolume",parseFloat(s.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Quiet"}),e.jsxs("span",{children:[Math.round(r.soundVolume*100),"%"]}),e.jsx("span",{children:"Loud"})]})]}),r.soundEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Alert Sound"}),e.jsx("button",{onClick:E,className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"Preview"})]}),e.jsx("div",{className:"flex gap-2",children:je.map(s=>e.jsx("button",{onClick:()=>h("soundType",s.id),className:`flex-1 py-2 px-3 rounded-lg text-sm transition-all ${r.soundType===s.id?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-800/50 text-gray-400 hover:bg-gray-800"}`,children:s.label},s.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Warning at (seconds remaining)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>h("countdownWarningAt",Math.max(5,r.countdownWarningAt-5)),className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsxs("span",{className:"flex-1 text-center text-xl font-mono text-white",children:[r.countdownWarningAt,"s"]}),e.jsx("button",{onClick:()=>h("countdownWarningAt",Math.min(30,r.countdownWarningAt+5)),className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400",children:e.jsx(re,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Quick adjust buttons (+/-)"}),e.jsx("div",{className:"flex gap-2",children:[15,30,60].map(s=>e.jsxs("button",{onClick:()=>h("quickAdjustAmount",s),className:`flex-1 py-2 px-3 rounded-lg text-sm transition-all ${r.quickAdjustAmount===s?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-800/50 text-gray-400 hover:bg-gray-800"}`,children:[s,"s"]},s))})]})]})}),u&&b.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Per-Exercise Rest Times"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:b.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-800/30",children:[e.jsx("span",{className:"text-sm text-gray-300 truncate flex-1",children:s.name}),e.jsx("select",{value:S[s.id]||a,onChange:o=>w(s.id,parseInt(o.target.value)),className:"ml-3 bg-gray-700 border border-gray-600 rounded-lg px-2 py-1 text-sm text-white",children:d.map(o=>e.jsx("option",{value:o.seconds,children:o.label},o.seconds))})]},s.id))})]}),e.jsxs("button",{onClick:A,className:"flex items-center justify-center gap-2 w-full py-2 text-sm text-gray-400 hover:text-gray-300 border-t border-gray-800 pt-4",children:[e.jsx(B,{className:"w-4 h-4"}),"Reset to Defaults"]})]})]})}const fe=[{id:"barbell",name:"Barbell",icon:"ðŸ‹ï¸"},{id:"dumbbell",name:"Dumbbells",icon:"ðŸ’ª"},{id:"kettlebell",name:"Kettlebell",icon:"ðŸ””"},{id:"cable",name:"Cable Machine",icon:"ðŸ”—"},{id:"machine",name:"Machines",icon:"âš™ï¸"},{id:"bodyweight",name:"Bodyweight",icon:"ðŸ¤¸"},{id:"bands",name:"Bands",icon:"ã€°ï¸"},{id:"pullupbar",name:"Pull-up Bar",icon:"ðŸ“"}],Ne=({selected:l,onChange:n,options:u=fe,title:b,className:m=""})=>{const p=i=>{l.includes(i)?n(l.filter(g=>g!==i)):n([...l,i])};return e.jsxs("div",{className:m,children:[b&&e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:b}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:u.map(i=>{const g=l.includes(i.id);return e.jsxs("button",{onClick:()=>p(i.id),className:`p-4 rounded-xl border text-left transition-all ${g?"bg-teal-500/20 border-teal-500/50 text-teal-300":"bg-slate-800/50 border-slate-700/50 text-slate-400 hover:border-slate-600"}`,children:[e.jsx("span",{className:"text-2xl block mb-2",children:i.icon}),e.jsx("p",{className:"font-medium text-sm",children:i.name})]},i.id)})})]})},J=({unit:l,onChange:n,label:u,className:b=""})=>e.jsxs("div",{className:b,children:[u&&e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:u}),e.jsx("div",{className:"flex bg-slate-800 rounded-xl p-1 w-fit",children:["lbs","kg"].map(m=>e.jsx("button",{onClick:()=>n(m),className:`px-6 py-2.5 rounded-lg text-sm font-medium uppercase transition-all ${l===m?"bg-teal-500 text-white shadow-md":"text-slate-400 hover:text-white"}`,children:m},m))})]});function ve(){const l=Z(),{token:n}=ie(),[u,b]=c.useState([]),[m,p]=c.useState(null),[i,g]=c.useState(!0),[a,d]=c.useState(!1),[y,w]=c.useState(!1),[r,f]=c.useState(!1),[N,S]=c.useState(null),[h,A]=c.useState(""),[E,_]=c.useState(""),[s,o]=c.useState(!1),[k,F]=c.useState("");c.useEffect(()=>{async function t(){if(n)try{const[x,C]=await Promise.all([v("/api/journey/snapshots?limit=5",{headers:{Authorization:`Bearer ${n}`}}),v("/api/journey/settings",{headers:{Authorization:`Bearer ${n}`}})]);if(x.ok){const T=await x.json();b(T.data?.snapshots||[])}if(C.ok){const T=await C.json();p(T.data)}}catch{}finally{g(!1)}}t()},[n]);const Y=async()=>{if(!(!h.trim()||s)){o(!0);try{const t=await v("/api/journey/snapshots",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({name:h.trim(),description:E.trim()||void 0})});if(t.ok){const x=await t.json();b(C=>[x.data,...C]),d(!1),A(""),_("")}}catch{}finally{o(!1)}}},G=async t=>{if(!s){o(!0);try{(await v(`/api/journey/snapshots/${t.id}/restore`,{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({components:["archetype","profile","equipment"]})})).ok&&(S(null),window.location.reload())}catch{}finally{o(!1)}}},K=async t=>{if(!s){o(!0);try{(await v(`/api/journey/snapshots/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`}})).ok&&b(C=>C.filter(T=>T.id!==t))}catch{}finally{o(!1)}}},L=async t=>{if(!s){o(!0);try{(await v("/api/journey/restart-onboarding",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({clearArchetype:t})})).ok&&(w(!1),l("/onboarding"))}catch{}finally{o(!1)}}},Q=async()=>{if(!(k!=="FRESH START"||s)){o(!0);try{(await v("/api/journey/fresh-start",{method:"POST",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({confirmPhrase:"FRESH START"})})).ok&&(f(!1),l("/onboarding"))}catch{}finally{o(!1)}}},X=async()=>{if(!m)return;const t=!m.autoSnapshotEnabled;try{await v("/api/journey/settings",{method:"PUT",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({autoSnapshotEnabled:t})}),p(x=>x?{...x,autoSnapshotEnabled:t}:null)}catch{}},O=t=>new Date(t).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});return i?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/3"}),e.jsx("div",{className:"h-20 bg-gray-700 rounded"}),e.jsx("div",{className:"h-20 bg-gray-700 rounded"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center gap-3 p-4 bg-blue-900/30 border border-blue-600/30 rounded-xl hover:bg-blue-900/40 transition-colors text-left",children:[e.jsx(I,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Create Snapshot"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Save current progress"})]})]}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-3 p-4 bg-purple-900/30 border border-purple-600/30 rounded-xl hover:bg-purple-900/40 transition-colors text-left",children:[e.jsx(B,{className:"w-5 h-5 text-purple-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Restart Setup"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Redo onboarding"})]})]})]}),m&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-green-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Auto-Snapshots"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Save before archetype changes"})]})]}),e.jsx("button",{onClick:X,className:`w-12 h-6 rounded-full transition-all duration-200 ${m.autoSnapshotEnabled?"bg-green-600":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform duration-200 mx-0.5 ${m.autoSnapshotEnabled?"translate-x-6":""}`})})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Recent Snapshots (",m?.totalSnapshots||u.length,")"]})}),e.jsx("div",{className:"space-y-2",children:u.slice(0,3).map(t=>e.jsx("div",{className:"p-3 bg-gray-700/50 rounded-xl",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:t.name}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-2 mt-1",children:[e.jsx(q,{className:"w-3 h-3"}),O(t.createdAt),t.archetypeId&&e.jsx("span",{className:"text-purple-400",children:t.archetypeId})]}),t.totalTu>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(t.totalTu).toLocaleString()," TU | ",t.totalWorkouts," workouts"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[t.isRestorable&&e.jsx("button",{onClick:()=>S(t),className:"p-2 text-blue-400 hover:bg-blue-900/30 rounded-lg transition-colors",title:"Restore",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>K(t.id),className:"p-2 text-red-400 hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(ue,{className:"w-4 h-4"})})]})]})},t.id))})]}),e.jsx("div",{className:"border-t border-gray-700 pt-4",children:e.jsxs("button",{onClick:()=>f(!0),className:"w-full flex items-center justify-between p-4 bg-red-900/20 border border-red-600/30 rounded-xl hover:bg-red-900/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-red-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-red-400",children:"Fresh Start"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Reset all progress (backup saved)"})]})]}),e.jsx(be,{className:"w-5 h-5 text-gray-500"})]})}),e.jsx(R,{children:a&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>d(!1),children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full",onClick:t=>t.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-blue-400"}),"Create Snapshot"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Save your current progress so you can return to this point later."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:h,onChange:t=>A(t.target.value),placeholder:"e.g., Before trying powerlifting",className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description (optional)"}),e.jsx("textarea",{value:E,onChange:t=>_(t.target.value),placeholder:"Notes about this snapshot...",className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 resize-none",rows:2,maxLength:500})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>d(!1),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:!h.trim()||s,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 rounded-lg font-medium",children:s?"Saving...":"Create"})]})]})})}),e.jsx(R,{children:y&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>w(!1),children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full",onClick:t=>t.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-purple-400"}),"Restart Onboarding"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Go through the setup process again. Your workout history will be preserved."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>L(!1),disabled:s,className:"w-full p-4 bg-purple-900/30 border border-purple-600/30 rounded-xl hover:bg-purple-900/40 transition-colors text-left",children:[e.jsx("div",{className:"font-medium",children:"Keep Current Archetype"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Skip archetype selection, just update equipment"})]}),e.jsxs("button",{onClick:()=>L(!0),disabled:s,className:"w-full p-4 bg-blue-900/30 border border-blue-600/30 rounded-xl hover:bg-blue-900/40 transition-colors text-left",children:[e.jsx("div",{className:"font-medium",children:"Choose New Archetype"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Start fresh with archetype selection"})]})]}),e.jsx("button",{onClick:()=>w(!1),className:"w-full mt-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"})]})})}),e.jsx(R,{children:N&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>S(null),children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full",onClick:t=>t.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-blue-400"}),"Restore Snapshot"]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 rounded-xl mb-4",children:[e.jsx("div",{className:"font-medium",children:N.name}),e.jsx("div",{className:"text-sm text-gray-400 mt-1",children:O(N.createdAt)}),N.archetypeId&&e.jsxs("div",{className:"text-sm text-purple-400 mt-1",children:["Archetype: ",N.archetypeId]})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"This will restore your archetype, profile, and equipment settings to this snapshot. Your workout history will not be affected."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>S(null),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"}),e.jsx("button",{onClick:()=>G(N),disabled:s,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 rounded-lg font-medium",children:s?"Restoring...":"Restore"})]})]})})}),e.jsx(R,{children:r&&e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:e.jsxs(j.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-red-600/50 rounded-xl p-6 max-w-md w-full",onClick:t=>t.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-red-400",children:[e.jsx(H,{className:"w-5 h-5"}),"Fresh Start"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-300",children:"This will reset all your progress:"}),e.jsxs("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Your archetype will be cleared"}),e.jsx("li",{children:"Your equipment settings will be reset"}),e.jsx("li",{children:"Your goals will be cancelled"}),e.jsx("li",{children:"You'll need to redo onboarding"})]}),e.jsx("p",{className:"text-sm text-green-400",children:"Your workout history will be preserved, and a backup snapshot will be created automatically."}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Type ",e.jsx("span",{className:"text-red-400 font-mono",children:"FRESH START"})," to confirm:"]}),e.jsx("input",{type:"text",value:k,onChange:t=>F(t.target.value),placeholder:"FRESH START",className:"w-full p-3 bg-gray-700 border border-red-600/30 rounded-lg text-white font-mono"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{f(!1),F("")},className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"}),e.jsx("button",{onClick:Q,disabled:k!=="FRESH START"||s,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-500 disabled:opacity-50 rounded-lg font-medium",children:s?"Resetting...":"Reset Everything"})]})]})})})]})}const we=[{id:"dark",name:"Dark",bg:"#111827",icon:"ðŸŒ™"},{id:"light",name:"Light",bg:"#f9fafb",icon:"â˜€ï¸",textDark:!0},{id:"midnight",name:"Midnight",bg:"#0f172a",icon:"ðŸŒŒ"},{id:"ocean",name:"Ocean",bg:"#0c4a6e",icon:"ðŸŒŠ",level:5},{id:"forest",name:"Forest",bg:"#14532d",icon:"ðŸŒ²",level:10},{id:"sunset",name:"Sunset",bg:"#7c2d12",icon:"ðŸŒ…",level:15},{id:"cosmic",name:"Cosmic",bg:"#1e1b4b",icon:"âœ¨",level:25}];function He(){const[l,n]=c.useState({theme:"dark",reduced_motion:0,high_contrast:0,text_size:"normal",is_public:0,show_location:0,show_progress:1}),[u,b]=c.useState(1),[m,p]=c.useState(!1);c.useEffect(()=>{Promise.all([M.settings.fetch(),M.profile.get()]).then(([a,d])=>{a.settings?n(y=>({...y,...a.settings})):n(y=>({...y,...a})),d.level&&b(d.level)}).catch(()=>{})},[]);const i=async a=>{p(!0),n(d=>({...d,...a}));try{await M.settings.update(a),a.theme&&localStorage.setItem("musclemap_theme",a.theme)}catch{}p(!1)},g=({value:a,onChange:d})=>e.jsx("button",{onClick:d,className:"w-14 h-8 rounded-full transition-all duration-200 "+(a?"bg-purple-600":"bg-gray-600"),children:e.jsx("div",{className:"w-6 h-6 bg-white rounded-full transition-transform duration-200 mx-1 "+(a?"translate-x-6":"")})});return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white pb-24",children:[e.jsx("header",{className:"bg-gray-800/90 backdrop-blur-lg p-4 sticky top-0 z-10 border-b border-gray-700/50",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs(U,{to:"/dashboard",className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx("span",{children:"â†"}),e.jsx("img",{src:"/logo.png",alt:"MuscleMap",className:"w-6 h-6 rounded-md"})]}),e.jsx("h1",{className:"text-xl font-bold",children:"âš™ï¸ Settings"}),e.jsx("div",{className:"w-16",children:m&&e.jsx("span",{className:"text-xs text-gray-400",children:"Saving..."})})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsxs("h2",{className:"font-bold mb-4 flex items-center gap-2",children:["ðŸŽ¨ Theme ",e.jsxs("span",{className:"text-xs text-gray-400 font-normal",children:["Level ",u]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:we.map(a=>{const d=a.level&&u<a.level;return e.jsxs("button",{onClick:()=>!d&&i({theme:a.id}),disabled:d,className:"p-3 rounded-xl border-2 transition-all "+(l.theme===a.id?"border-purple-500 scale-105":"border-transparent")+(d?" opacity-40 cursor-not-allowed":" hover:scale-102"),style:{backgroundColor:a.bg,color:a.textDark?"#111":"#fff"},children:[e.jsx("div",{className:"text-xl",children:a.icon}),e.jsx("div",{className:"text-xs font-bold mt-1",children:a.name}),d&&e.jsxs("div",{className:"text-xs opacity-75",children:["ðŸ”’ Lv",a.level]})]},a.id)})})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"â™¿ Accessibility"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Reduced Motion"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Minimize animations"})]}),e.jsx(g,{value:l.reduced_motion,onChange:()=>i({reduced_motion:l.reduced_motion?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"High Contrast"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Increase text visibility"})]}),e.jsx(g,{value:l.high_contrast,onChange:()=>i({high_contrast:l.high_contrast?0:1})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-2",children:"Text Size"}),e.jsx("div",{className:"flex gap-2",children:["small","normal","large","xlarge"].map(a=>e.jsx("button",{onClick:()=>i({text_size:a}),className:"flex-1 py-2 rounded-xl capitalize transition-all "+(l.text_size===a?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"),children:a==="xlarge"?"XL":a},a))})]})]})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Rest Timer"}),e.jsx(ye,{compact:!0,className:"bg-transparent border-0 p-0"})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Units"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(J,{label:"Weight Units",value:l.weight_unit||"lbs",options:[{value:"lbs",label:"lbs"},{value:"kg",label:"kg"}],onChange:a=>i({weight_unit:a})}),e.jsx(J,{label:"Distance Units",value:l.distance_unit||"mi",options:[{value:"mi",label:"mi"},{value:"km",label:"km"}],onChange:a=>i({distance_unit:a})})]})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Available Equipment"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select equipment you have access to for personalized workout recommendations"}),e.jsx(Ne,{selected:l.equipment||[],onChange:a=>i({equipment:a}),equipment:[{id:"barbell",name:"Barbell",icon:"ðŸ‹ï¸"},{id:"dumbbells",name:"Dumbbells",icon:"ðŸ’ª"},{id:"cables",name:"Cables",icon:"ðŸ”—"},{id:"bench",name:"Bench",icon:"ðŸª‘"},{id:"kettlebell",name:"Kettlebell",icon:"âš¡"},{id:"resistance",name:"Resistance Bands",icon:"ðŸŽ¯"},{id:"pullup_bar",name:"Pull-up Bar",icon:"ðŸ“"},{id:"machines",name:"Machines",icon:"ðŸ”§"}]})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Journey & Progress"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Manage your fitness journey, create snapshots, or start fresh"}),e.jsx(ve,{})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Privacy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(U,{to:"/community",state:{tab:"privacy"},className:"block p-4 bg-green-900/30 border border-green-600/30 rounded-xl hover:bg-green-900/40 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ›¡ï¸"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Privacy Mode & Data Controls"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Opt out of community features, manage data collection"})]})]}),e.jsx("span",{className:"text-gray-400",children:"â†’"})]})}),e.jsx("div",{className:"pt-2 border-t border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Quick settings (for full control, use Privacy Mode above)"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Public Profile"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Appear in leaderboards & community"})]}),e.jsx(g,{value:l.is_public,onChange:()=>i({is_public:l.is_public?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Show Location"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Share your city with others"})]}),e.jsx(g,{value:l.show_location,onChange:()=>i({show_location:l.show_location?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Show Progress"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Let others see your TU"})]}),e.jsx(g,{value:l.show_progress,onChange:()=>i({show_progress:l.show_progress?0:1})})]})]})]})]})]})}export{He as default};
