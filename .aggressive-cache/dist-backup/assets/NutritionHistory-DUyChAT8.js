import{r as h,j as e,L as M}from"./react-vendor-D1NxaRNd.js";import{G as f}from"./GlassSurface-BMiMerMg.js";import{G as C}from"./GlassButton-DQNtzddB.js";import{G as S}from"./GlassNav-DLJ5VPS6.js";import{G,a as k}from"./GlassMobileNav-BjhVj0Er.js";import{M as P}from"./MeshBackground-5ZvDS217.js";import{b as $}from"./useNutrition--fGlaCr0.js";import{a as T,i as L}from"./nutritionStore-nIf4l8hd.js";import{A as F}from"./arrow-left-Dv1u8CrY.js";import{a7 as y,l as A,a6 as H}from"./index-Ttza9pip.js";import{C as O}from"./chevron-left-DY0v74vK.js";import{C as B}from"./chevron-right-DyfMhYqG.js";import{T as W}from"./trending-down-DbMFtXFC.js";import{M as Y}from"./minus-Cr430EcM.js";import{C as E}from"./check-Tx9k-4dF.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./recharts-vendor-BziRPEEi.js";import"./d3-vendor-mcDw60ct.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";function I({date:n,data:t,goals:s,isToday:i,isSelected:a,onClick:x}){const c=t&&(t.totalCalories>0||t.mealCount>0),r=t&&s&&t.totalCalories>=s.calories*.9&&t.totalCalories<=s.calories*1.1,o=t&&s&&t.totalProteinG>=s.proteinG*.9,d=new Date(n).getDate();return e.jsxs("button",{onClick:()=>x(n),className:`relative aspect-square p-1 rounded-xl transition-colors ${a?"bg-green-500/30 border border-green-500/50":i?"bg-white/10 border border-white/20":"hover:bg-white/5"}`,children:[e.jsx("span",{className:`text-sm ${i?"text-green-400 font-bold":"text-gray-400"}`,children:d}),c&&e.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex justify-center gap-0.5",children:[r&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-400"}),o&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-400"}),!r&&!o&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gray-500"})]})]})}function J({month:n,year:t,data:s,goals:i,selectedDate:a,onSelectDate:x}){const c=new Date().toISOString().split("T")[0],r=new Date(t,n,1),o=new Date(t,n+1,0),d=r.getDay(),g=o.getDate(),m=[];for(let l=0;l<d;l++)m.push(null);for(let l=1;l<=g;l++){const p=`${t}-${String(n+1).padStart(2,"0")}-${String(l).padStart(2,"0")}`;m.push(p)}const u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:u.map(l=>e.jsx("div",{className:"text-center text-xs text-gray-500 py-2",children:l},l))}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:m.map((l,p)=>l?e.jsx(I,{date:l,data:s[l],goals:i,isToday:l===c,isSelected:l===a,onClick:x},l):e.jsx("div",{className:"aspect-square"},`empty-${p}`))})]})}function q({date:n,data:t,goals:s}){const i=o=>new Date(o).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"});if(!t)return e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:i(n)}),e.jsx("p",{className:"text-gray-400",children:"No data logged for this day"})]});const a=s?t.totalCalories/s.calories*100:0,x=s?t.totalProteinG/s.proteinG*100:0,c=s?t.totalCarbsG/s.carbsG*100:0,r=s?t.totalFatG/s.fatG*100:0;return e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:i(n)}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t.totalCalories}),e.jsx("p",{className:"text-xs text-gray-400",children:"Calories"}),s&&e.jsxs("p",{className:`text-xs mt-1 ${a>=90&&a<=110?"text-green-400":"text-gray-500"}`,children:[Math.round(a),"% of goal"]})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[t.totalProteinG,"g"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Protein"}),s&&e.jsxs("p",{className:`text-xs mt-1 ${x>=90?"text-green-400":"text-gray-500"}`,children:[Math.round(x),"% of goal"]})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:[t.totalCarbsG,"g"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"}),s&&e.jsxs("p",{className:`text-xs mt-1 ${c>=90?"text-green-400":"text-gray-500"}`,children:[Math.round(c),"% of goal"]})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[t.totalFatG,"g"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Fat"}),s&&e.jsxs("p",{className:`text-xs mt-1 ${r>=90?"text-green-400":"text-gray-500"}`,children:[Math.round(r),"% of goal"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.wasWorkoutDay&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-orange-500/20 text-orange-400 text-sm rounded-full",children:[e.jsx(y,{className:"w-3 h-3"}),"Workout Day"]}),t.metCalorieGoal&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-green-500/20 text-green-400 text-sm rounded-full",children:[e.jsx(E,{className:"w-3 h-3"}),"Hit Calorie Goal"]}),t.metProteinGoal&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-blue-500/20 text-blue-400 text-sm rounded-full",children:[e.jsx(H,{className:"w-3 h-3"}),"Hit Protein Goal"]}),e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white/10 text-gray-300 text-sm rounded-full",children:[t.mealCount," meals logged"]})]})]})}function R({data:n,goals:t}){const s=Object.keys(n).filter(r=>n[r]?.totalCalories>0),i=s.length;if(i===0)return null;const a=Math.round(s.reduce((r,o)=>r+n[o].totalCalories,0)/i),x=Math.round(s.reduce((r,o)=>r+n[o].totalProteinG,0)/i),c=s.filter(r=>{const o=n[r].totalCalories;return t&&o>=t.calories*.9&&o<=t.calories*1.1}).length;return s.sort().reverse().reduce((r,o,d,g)=>{if(d===0)return 1;const m=new Date(g[d-1]),u=new Date(o);return(m-u)/(1e3*60*60*24)===1?r+1:r},0),e.jsxs(f,{className:"p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"This Month's Summary"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:a}),e.jsx("p",{className:"text-xs text-gray-400",children:"Avg Calories/Day"}),t&&e.jsxs("p",{className:`text-xs mt-1 flex items-center justify-center gap-1 ${a>t.calories?"text-orange-400":"text-green-400"}`,children:[a>t.calories?e.jsx(A,{className:"w-3 h-3"}):a<t.calories*.9?e.jsx(W,{className:"w-3 h-3"}):e.jsx(Y,{className:"w-3 h-3"}),Math.abs(a-t.calories)," from goal"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[x,"g"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Avg Protein/Day"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-blue-400",children:c}),e.jsx("p",{className:"text-xs text-gray-400",children:"Days On Target"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Math.round(c/i*100),"% success rate"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-orange-400",children:i}),e.jsx("p",{className:"text-xs text-gray-400",children:"Days Logged"})]})]})]})}function me(){const n=T(),t=L();$();const[s,i]=h.useState(new Date().getMonth()),[a,x]=h.useState(new Date().getFullYear()),[c,r]=h.useState(new Date().toISOString().split("T")[0]),[o,d]=h.useState({}),[g,m]=h.useState(!0),u=["January","February","March","April","May","June","July","August","September","October","November","December"],l=h.useCallback(async()=>{m(!0);const b={},v=new Date(a,s+1,0).getDate();for(let j=1;j<=v;j++){const D=`${a}-${String(s+1).padStart(2,"0")}-${String(j).padStart(2,"0")}`;Math.random()>.3&&(b[D]={totalCalories:Math.floor(1500+Math.random()*1e3),totalProteinG:Math.floor(100+Math.random()*100),totalCarbsG:Math.floor(150+Math.random()*100),totalFatG:Math.floor(50+Math.random()*50),mealCount:Math.floor(2+Math.random()*4),wasWorkoutDay:Math.random()>.5,metCalorieGoal:Math.random()>.4,metProteinGoal:Math.random()>.3})}d(b),m(!1)},[s,a]);h.useEffect(()=>{l()},[l]);const p=()=>{s===0?(i(11),x(a-1)):i(s-1)},w=()=>{s===11?(i(0),x(a+1)):i(s+1)},N=s===new Date().getMonth()&&a===new Date().getFullYear();return e.jsxs("div",{className:"min-h-screen bg-gray-950",children:[e.jsx(P,{}),e.jsx(S,{}),e.jsx(G,{}),e.jsx("main",{className:"lg:pl-64 pt-16 pb-24 lg:pb-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[e.jsx(M,{to:"/nutrition",children:e.jsx(C,{variant:"ghost",size:"sm",children:e.jsx(F,{className:"w-4 h-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"History"}),e.jsx("p",{className:"text-gray-400",children:"View your nutrition trends"})]})]}),t&&e.jsxs(f,{className:"p-4 mb-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/20 flex items-center justify-center",children:e.jsx(y,{className:"w-5 h-5 text-orange-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium",children:[t.currentLoggingStreak," Day Streak"]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Best: ",t.longestLoggingStreak," days"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Goal Streak"}),e.jsxs("p",{className:"text-white font-medium",children:[t.currentGoalStreak," days"]})]})]}),e.jsx(R,{data:o,goals:n}),e.jsxs(f,{className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:p,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(O,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("h2",{className:"text-xl font-semibold text-white",children:[u[s]," ",a]}),e.jsx("button",{onClick:w,disabled:N,className:`p-2 rounded-full transition-colors ${N?"opacity-30 cursor-not-allowed":"hover:bg-white/10"}`,children:e.jsx(B,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"}),"Hit calorie goal"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400"}),"Hit protein goal"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gray-500"}),"Logged (off target)"]})]}),g?e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-green-500 border-t-transparent rounded-full animate-spin"})}):e.jsx(J,{month:s,year:a,data:o,goals:n,selectedDate:c,onSelectDate:r})]}),e.jsx(q,{date:c,data:o[c],goals:n})]})}),e.jsx(k,{})]})}export{me as default};
