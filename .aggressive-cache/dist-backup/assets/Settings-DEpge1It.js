import{r as n,j as e,d as Z,L as _}from"./react-vendor-D1NxaRNd.js";import{e as ee,a5 as se,ae as te,af as ae,h as z,ag as le,a8 as J,m as N,A as D,B,P as re,H as ie,ah as H,ai as ne,f as k,b as $}from"./index-QAQBjRPo.js";import{G as oe}from"./GlassSurface-BMiMerMg.js";import"./GlassButton-B8uhIzUj.js";import{T as F}from"./timer-DhyeRMPd.js";import{C as V}from"./chevron-down-DmJAzKxm.js";import{C as ce}from"./chevron-up-Lz7fQhI6.js";import{C as M}from"./check-CJhBNca1.js";import{V as de,a as me}from"./volume-x-Dj-9eodM.js";import{M as xe}from"./minus-CnX7g-Kc.js";import{R as U}from"./rotate-ccw-BEAB0qFj.js";import{H as he}from"./history-2EVcq7j1.js";import{R as W}from"./refresh-cw-CZ5wdwkw.js";import{T as ue}from"./trash-2-CpWt3xGA.js";import{T as q}from"./triangle-alert-RMfJinKA.js";import{C as ge}from"./chevron-right-DZCuNR1C.js";import{u as be}from"./preferencesStore-DIBSEgNq.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-BziRPEEi.js";const pe=[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]],je=ee("vibrate",pe),ye=[{id:"beep",label:"Beep",icon:B},{id:"chime",label:"Chime",icon:B},{id:"bell",label:"Bell",icon:B}];function fe({className:r="",compact:i=!1,showExerciseDefaults:u=!1,exercises:g=[]}){const[h,x]=n.useState(!i),[o,p]=n.useState(!1),{defaultDuration:v,presets:f,setDefault:C,setExerciseDefault:w}=se(),{settings:l,update:j,playSound:y}=te(),S=ae(t=>t.exerciseRestDefaults),d=n.useCallback((t,s)=>{j({[t]:s}),z("light")},[j]),T=n.useCallback(()=>{j(le),C(90),z("medium")},[j,C]),R=n.useCallback(()=>{y("complete"),z("light")},[y]),b=t=>{if(t<60)return`${t}s`;const s=Math.floor(t/60),c=t%60;return c>0?`${s}m ${c}s`:`${s}m`};return i&&!h?e.jsxs("button",{onClick:()=>x(!0),className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-800/50 hover:bg-gray-800 text-gray-400 hover:text-gray-300 transition-colors ${r}`,children:[e.jsx(F,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["Rest Timer: ",b(v)]}),e.jsx(V,{className:"w-4 h-4"})]}):e.jsxs(oe,{className:`overflow-hidden ${r}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:e.jsx(F,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:"Rest Timer Settings"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Configure your rest timer preferences"})]})]}),i&&e.jsx("button",{onClick:()=>x(!1),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-400",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Default Rest Duration"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:f.map(t=>e.jsx("button",{onClick:()=>C(t.seconds),className:`py-2.5 px-3 rounded-lg text-sm font-medium transition-all ${v===t.seconds?"bg-blue-500/30 text-blue-400 border border-blue-500/40 ring-1 ring-blue-500/20":"bg-gray-800/50 text-gray-400 hover:bg-gray-800 hover:text-gray-300"}`,children:t.label},t.seconds))}),e.jsx("p",{className:"text-xs text-gray-500",children:f.find(t=>t.seconds===v)?.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>d("autoStartAfterSet",!l.autoStartAfterSet),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${l.autoStartAfterSet?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Auto-start"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${l.autoStartAfterSet?"bg-blue-500":"bg-gray-600"}`,children:l.autoStartAfterSet&&e.jsx(M,{className:"w-3 h-3 text-white"})})]}),e.jsxs("button",{onClick:()=>d("soundEnabled",!l.soundEnabled),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${l.soundEnabled?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l.soundEnabled?e.jsx(de,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sound"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${l.soundEnabled?"bg-blue-500":"bg-gray-600"}`,children:l.soundEnabled&&e.jsx(M,{className:"w-3 h-3 text-white"})})]}),e.jsxs("button",{onClick:()=>d("vibrationEnabled",!l.vibrationEnabled),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${l.vibrationEnabled?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Vibration"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${l.vibrationEnabled?"bg-blue-500":"bg-gray-600"}`,children:l.vibrationEnabled&&e.jsx(M,{className:"w-3 h-3 text-white"})})]}),e.jsxs("button",{onClick:()=>d("showFloatingTimer",!l.showFloatingTimer),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${l.showFloatingTimer?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Float"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${l.showFloatingTimer?"bg-blue-500":"bg-gray-600"}`,children:l.showFloatingTimer&&e.jsx(M,{className:"w-3 h-3 text-white"})})]})]}),e.jsxs("button",{onClick:()=>p(!o),className:"flex items-center justify-between w-full py-2 text-sm text-gray-400 hover:text-gray-300",children:[e.jsx("span",{children:"Advanced Settings"}),e.jsx(N.div,{animate:{rotate:o?180:0},transition:{duration:.2},children:e.jsx(V,{className:"w-4 h-4"})})]}),e.jsx(D,{children:o&&e.jsxs(N.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-4 overflow-hidden",children:[l.soundEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Sound Volume"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:l.soundVolume,onChange:t=>d("soundVolume",parseFloat(t.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Quiet"}),e.jsxs("span",{children:[Math.round(l.soundVolume*100),"%"]}),e.jsx("span",{children:"Loud"})]})]}),l.soundEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Alert Sound"}),e.jsx("button",{onClick:R,className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"Preview"})]}),e.jsx("div",{className:"flex gap-2",children:ye.map(t=>e.jsx("button",{onClick:()=>d("soundType",t.id),className:`flex-1 py-2 px-3 rounded-lg text-sm transition-all ${l.soundType===t.id?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-800/50 text-gray-400 hover:bg-gray-800"}`,children:t.label},t.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Warning at (seconds remaining)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>d("countdownWarningAt",Math.max(5,l.countdownWarningAt-5)),className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsxs("span",{className:"flex-1 text-center text-xl font-mono text-white",children:[l.countdownWarningAt,"s"]}),e.jsx("button",{onClick:()=>d("countdownWarningAt",Math.min(30,l.countdownWarningAt+5)),className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400",children:e.jsx(re,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Quick adjust buttons (+/-)"}),e.jsx("div",{className:"flex gap-2",children:[15,30,60].map(t=>e.jsxs("button",{onClick:()=>d("quickAdjustAmount",t),className:`flex-1 py-2 px-3 rounded-lg text-sm transition-all ${l.quickAdjustAmount===t?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-800/50 text-gray-400 hover:bg-gray-800"}`,children:[t,"s"]},t))})]})]})}),u&&g.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Per-Exercise Rest Times"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:g.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-800/30",children:[e.jsx("span",{className:"text-sm text-gray-300 truncate flex-1",children:t.name}),e.jsx("select",{value:S[t.id]||v,onChange:s=>w(t.id,parseInt(s.target.value)),className:"ml-3 bg-gray-700 border border-gray-600 rounded-lg px-2 py-1 text-sm text-white",children:f.map(s=>e.jsx("option",{value:s.seconds,children:s.label},s.seconds))})]},t.id))})]}),e.jsxs("button",{onClick:T,className:"flex items-center justify-center gap-2 w-full py-2 text-sm text-gray-400 hover:text-gray-300 border-t border-gray-800 pt-4",children:[e.jsx(U,{className:"w-4 h-4"}),"Reset to Defaults"]})]})]})}const Ne=[{id:"barbell",name:"Barbell",icon:"üèãÔ∏è"},{id:"dumbbell",name:"Dumbbells",icon:"üí™"},{id:"kettlebell",name:"Kettlebell",icon:"üîî"},{id:"cable",name:"Cable Machine",icon:"üîó"},{id:"machine",name:"Machines",icon:"‚öôÔ∏è"},{id:"bodyweight",name:"Bodyweight",icon:"ü§∏"},{id:"bands",name:"Bands",icon:"„Ä∞Ô∏è"},{id:"pullupbar",name:"Pull-up Bar",icon:"üìè"}],ve=({selected:r,onChange:i,options:u=Ne,title:g,className:h=""})=>{const x=o=>{r.includes(o)?i(r.filter(p=>p!==o)):i([...r,o])};return e.jsxs("div",{className:h,children:[g&&e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:g}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:u.map(o=>{const p=r.includes(o.id);return e.jsxs("button",{onClick:()=>x(o.id),className:`p-4 rounded-xl border text-left transition-all ${p?"bg-teal-500/20 border-teal-500/50 text-teal-300":"bg-slate-800/50 border-slate-700/50 text-slate-400 hover:border-slate-600"}`,children:[e.jsx("span",{className:"text-2xl block mb-2",children:o.icon}),e.jsx("p",{className:"font-medium text-sm",children:o.name})]},o.id)})})]})},L=({value:r,onChange:i,label:u,options:g=[{value:"lbs",label:"lbs"},{value:"kg",label:"kg"}],className:h=""})=>e.jsxs("div",{className:h,children:[u&&e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:u}),e.jsx("div",{className:"flex bg-slate-800 rounded-xl p-1 w-fit",children:g.map(x=>e.jsx("button",{onClick:()=>i(x.value),className:`px-6 py-2.5 rounded-lg text-sm font-medium uppercase transition-all ${r===x.value?"bg-teal-500 text-white shadow-md":"text-slate-400 hover:text-white"}`,children:x.label},x.value))})]});function we(){const r=Z(),{token:i}=ie(),[u,g]=n.useState([]),[h,x]=n.useState(null),[o,p]=n.useState(!0),[v,f]=n.useState(!1),[C,w]=n.useState(!1),[l,j]=n.useState(!1),[y,S]=n.useState(null),[d,T]=n.useState(""),[R,b]=n.useState(""),[t,s]=n.useState(!1),[c,A]=n.useState("");n.useEffect(()=>{async function a(){if(i)try{const[m,E]=await Promise.all([k("/api/journey/snapshots?limit=5",{headers:{Authorization:`Bearer ${i}`}}),k("/api/journey/settings",{headers:{Authorization:`Bearer ${i}`}})]);if(m.ok){const P=await m.json();g(P.data?.snapshots||[])}if(E.ok){const P=await E.json();x(P.data)}}catch{}finally{p(!1)}}a()},[i]);const Y=async()=>{if(!(!d.trim()||t)){s(!0);try{const a=await k("/api/journey/snapshots",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({name:d.trim(),description:R.trim()||void 0})});if(a.ok){const m=await a.json();g(E=>[m.data,...E]),f(!1),T(""),b("")}}catch{}finally{s(!1)}}},K=async a=>{if(!t){s(!0);try{(await k(`/api/journey/snapshots/${a.id}/restore`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({components:["archetype","profile","equipment"]})})).ok&&(S(null),window.location.reload())}catch{}finally{s(!1)}}},Q=async a=>{if(!t){s(!0);try{(await k(`/api/journey/snapshots/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}})).ok&&g(E=>E.filter(P=>P.id!==a))}catch{}finally{s(!1)}}},O=async a=>{if(!t){s(!0);try{(await k("/api/journey/restart-onboarding",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({clearArchetype:a})})).ok&&(w(!1),r("/onboarding"))}catch{}finally{s(!1)}}},G=async()=>{if(!(c!=="FRESH START"||t)){s(!0);try{(await k("/api/journey/fresh-start",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({confirmPhrase:"FRESH START"})})).ok&&(j(!1),r("/onboarding"))}catch{}finally{s(!1)}}},X=async()=>{if(!h)return;const a=!h.autoSnapshotEnabled;try{await k("/api/journey/settings",{method:"PUT",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({autoSnapshotEnabled:a})}),x(m=>m?{...m,autoSnapshotEnabled:a}:null)}catch{}},I=a=>new Date(a).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});return o?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/3"}),e.jsx("div",{className:"h-20 bg-gray-700 rounded"}),e.jsx("div",{className:"h-20 bg-gray-700 rounded"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-3 p-4 bg-blue-900/30 border border-blue-600/30 rounded-xl hover:bg-blue-900/40 transition-colors text-left",children:[e.jsx(H,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Create Snapshot"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Save current progress"})]})]}),e.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-3 p-4 bg-purple-900/30 border border-purple-600/30 rounded-xl hover:bg-purple-900/40 transition-colors text-left",children:[e.jsx(U,{className:"w-5 h-5 text-purple-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Restart Setup"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Redo onboarding"})]})]})]}),h&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-green-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Auto-Snapshots"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Save before archetype changes"})]})]}),e.jsx("button",{onClick:X,className:`w-12 h-6 rounded-full transition-all duration-200 ${h.autoSnapshotEnabled?"bg-green-600":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform duration-200 mx-0.5 ${h.autoSnapshotEnabled?"translate-x-6":""}`})})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Recent Snapshots (",h?.totalSnapshots||u.length,")"]})}),e.jsx("div",{className:"space-y-2",children:u.slice(0,3).map(a=>e.jsx("div",{className:"p-3 bg-gray-700/50 rounded-xl",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:a.name}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-2 mt-1",children:[e.jsx(J,{className:"w-3 h-3"}),I(a.createdAt),a.archetypeId&&e.jsx("span",{className:"text-purple-400",children:a.archetypeId})]}),a.totalTu>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(a.totalTu).toLocaleString()," TU | ",a.totalWorkouts," workouts"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[a.isRestorable&&e.jsx("button",{onClick:()=>S(a),className:"p-2 text-blue-400 hover:bg-blue-900/30 rounded-lg transition-colors",title:"Restore",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Q(a.id),className:"p-2 text-red-400 hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(ue,{className:"w-4 h-4"})})]})]})},a.id))})]}),e.jsx("div",{className:"border-t border-gray-700 pt-4",children:e.jsxs("button",{onClick:()=>j(!0),className:"w-full flex items-center justify-between p-4 bg-red-900/20 border border-red-600/30 rounded-xl hover:bg-red-900/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-5 h-5 text-red-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-red-400",children:"Fresh Start"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Reset all progress (backup saved)"})]})]}),e.jsx(ge,{className:"w-5 h-5 text-gray-500"})]})}),e.jsx(D,{children:v&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:e.jsxs(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full",onClick:a=>a.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(H,{className:"w-5 h-5 text-blue-400"}),"Create Snapshot"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Save your current progress so you can return to this point later."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:d,onChange:a=>T(a.target.value),placeholder:"e.g., Before trying powerlifting",className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description (optional)"}),e.jsx("textarea",{value:R,onChange:a=>b(a.target.value),placeholder:"Notes about this snapshot...",className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 resize-none",rows:2,maxLength:500})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:!d.trim()||t,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 rounded-lg font-medium",children:t?"Saving...":"Create"})]})]})})}),e.jsx(D,{children:C&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>w(!1),children:e.jsxs(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full",onClick:a=>a.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"w-5 h-5 text-purple-400"}),"Restart Onboarding"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Go through the setup process again. Your workout history will be preserved."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>O(!1),disabled:t,className:"w-full p-4 bg-purple-900/30 border border-purple-600/30 rounded-xl hover:bg-purple-900/40 transition-colors text-left",children:[e.jsx("div",{className:"font-medium",children:"Keep Current Archetype"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Skip archetype selection, just update equipment"})]}),e.jsxs("button",{onClick:()=>O(!0),disabled:t,className:"w-full p-4 bg-blue-900/30 border border-blue-600/30 rounded-xl hover:bg-blue-900/40 transition-colors text-left",children:[e.jsx("div",{className:"font-medium",children:"Choose New Archetype"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Start fresh with archetype selection"})]})]}),e.jsx("button",{onClick:()=>w(!1),className:"w-full mt-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"})]})})}),e.jsx(D,{children:y&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>S(null),children:e.jsxs(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full",onClick:a=>a.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-blue-400"}),"Restore Snapshot"]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 rounded-xl mb-4",children:[e.jsx("div",{className:"font-medium",children:y.name}),e.jsx("div",{className:"text-sm text-gray-400 mt-1",children:I(y.createdAt)}),y.archetypeId&&e.jsxs("div",{className:"text-sm text-purple-400 mt-1",children:["Archetype: ",y.archetypeId]})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"This will restore your archetype, profile, and equipment settings to this snapshot. Your workout history will not be affected."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>S(null),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"}),e.jsx("button",{onClick:()=>K(y),disabled:t,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 rounded-lg font-medium",children:t?"Restoring...":"Restore"})]})]})})}),e.jsx(D,{children:l&&e.jsx(N.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>j(!1),children:e.jsxs(N.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-red-600/50 rounded-xl p-6 max-w-md w-full",onClick:a=>a.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-red-400",children:[e.jsx(q,{className:"w-5 h-5"}),"Fresh Start"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-300",children:"This will reset all your progress:"}),e.jsxs("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Your archetype will be cleared"}),e.jsx("li",{children:"Your equipment settings will be reset"}),e.jsx("li",{children:"Your goals will be cancelled"}),e.jsx("li",{children:"You'll need to redo onboarding"})]}),e.jsx("p",{className:"text-sm text-green-400",children:"Your workout history will be preserved, and a backup snapshot will be created automatically."}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Type ",e.jsx("span",{className:"text-red-400 font-mono",children:"FRESH START"})," to confirm:"]}),e.jsx("input",{type:"text",value:c,onChange:a=>A(a.target.value),placeholder:"FRESH START",className:"w-full p-3 bg-gray-700 border border-red-600/30 rounded-lg text-white font-mono"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{j(!1),A("")},className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"}),e.jsx("button",{onClick:G,disabled:c!=="FRESH START"||t,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-500 disabled:opacity-50 rounded-lg font-medium",children:t?"Resetting...":"Reset Everything"})]})]})})})]})}const Se=[{id:"dark",name:"Dark",bg:"#111827",icon:"üåô"},{id:"light",name:"Light",bg:"#f9fafb",icon:"‚òÄÔ∏è",textDark:!0},{id:"midnight",name:"Midnight",bg:"#0f172a",icon:"üåå"},{id:"ocean",name:"Ocean",bg:"#0c4a6e",icon:"üåä",level:5},{id:"forest",name:"Forest",bg:"#14532d",icon:"üå≤",level:10},{id:"sunset",name:"Sunset",bg:"#7c2d12",icon:"üåÖ",level:15},{id:"cosmic",name:"Cosmic",bg:"#1e1b4b",icon:"‚ú®",level:25}];function Je(){const[r,i]=n.useState({theme:"dark",reduced_motion:0,high_contrast:0,text_size:"normal",is_public:0,show_location:0,show_progress:1}),[u,g]=n.useState(1),[h,x]=n.useState(!1),[o,p]=n.useState(!0),{weight:v,height:f,distance:C,setWeightUnit:w,setHeightUnit:l,setDistanceUnit:j,setMetric:y,setImperial:S,isMetric:d,isImperial:T}=be();n.useEffect(()=>{Promise.all([$.settings.fetch(),$.profile.get()]).then(([s,c])=>{s.settings?i(A=>({...A,...s.settings})):i(A=>({...A,...s})),c.level&&g(c.level)}).catch(()=>{}),$.get("/messaging/privacy").then(s=>{s.data?.data?.messagingEnabled!==void 0&&p(s.data.data.messagingEnabled)}).catch(()=>{})},[]);const R=async()=>{const s=!o;p(s);try{await $.put("/messaging/privacy",{enabled:s})}catch{p(!s)}},b=async s=>{x(!0),i(c=>({...c,...s}));try{await $.settings.update(s),s.theme&&localStorage.setItem("musclemap_theme",s.theme)}catch{}x(!1)},t=({value:s,onChange:c})=>e.jsx("button",{onClick:c,className:"w-14 h-8 rounded-full transition-all duration-200 "+(s?"bg-purple-600":"bg-gray-600"),children:e.jsx("div",{className:"w-6 h-6 bg-white rounded-full transition-transform duration-200 mx-1 "+(s?"translate-x-6":"")})});return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white pb-24",children:[e.jsx("header",{className:"bg-gray-800/90 backdrop-blur-lg p-4 sticky top-0 z-10 border-b border-gray-700/50",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs(_,{to:"/dashboard",className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx("span",{children:"‚Üê"}),e.jsx("img",{src:"/logo.png",alt:"MuscleMap",className:"w-6 h-6 rounded-md"})]}),e.jsx("h1",{className:"text-xl font-bold",children:"‚öôÔ∏è Settings"}),e.jsx("div",{className:"w-16",children:h&&e.jsx("span",{className:"text-xs text-gray-400",children:"Saving..."})})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsxs("h2",{className:"font-bold mb-4 flex items-center gap-2",children:["üé® Theme ",e.jsxs("span",{className:"text-xs text-gray-400 font-normal",children:["Level ",u]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:Se.map(s=>{const c=s.level&&u<s.level;return e.jsxs("button",{onClick:()=>!c&&b({theme:s.id}),disabled:c,className:"p-3 rounded-xl border-2 transition-all "+(r.theme===s.id?"border-purple-500 scale-105":"border-transparent")+(c?" opacity-40 cursor-not-allowed":" hover:scale-102"),style:{backgroundColor:s.bg,color:s.textDark?"#111":"#fff"},children:[e.jsx("div",{className:"text-xl",children:s.icon}),e.jsx("div",{className:"text-xs font-bold mt-1",children:s.name}),c&&e.jsxs("div",{className:"text-xs opacity-75",children:["üîí Lv",s.level]})]},s.id)})})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"‚ôø Accessibility"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Reduced Motion"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Minimize animations"})]}),e.jsx(t,{value:r.reduced_motion,onChange:()=>b({reduced_motion:r.reduced_motion?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"High Contrast"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Increase text visibility"})]}),e.jsx(t,{value:r.high_contrast,onChange:()=>b({high_contrast:r.high_contrast?0:1})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-2",children:"Text Size"}),e.jsx("div",{className:"flex gap-2",children:["small","normal","large","xlarge"].map(s=>e.jsx("button",{onClick:()=>b({text_size:s}),className:"flex-1 py-2 rounded-xl capitalize transition-all "+(r.text_size===s?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"),children:s==="xlarge"?"XL":s},s))})]})]})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Rest Timer"}),e.jsx(fe,{compact:!0,className:"bg-transparent border-0 p-0"})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"üìè Units"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsxs("button",{onClick:()=>y(),className:`flex-1 p-3 rounded-xl border-2 transition-all ${d?"border-purple-500 bg-purple-500/20":"border-gray-700 hover:border-gray-600"}`,children:[e.jsx("div",{className:"font-medium",children:"Metric"}),e.jsx("div",{className:"text-xs text-gray-400",children:"kg, cm, km"})]}),e.jsxs("button",{onClick:()=>S(),className:`flex-1 p-3 rounded-xl border-2 transition-all ${T?"border-purple-500 bg-purple-500/20":"border-gray-700 hover:border-gray-600"}`,children:[e.jsx("div",{className:"font-medium",children:"Imperial"}),e.jsx("div",{className:"text-xs text-gray-400",children:"lbs, in, mi"})]})]}),e.jsx("div",{className:"text-xs text-gray-500 mb-4",children:"Or customize individual units:"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(L,{label:"Weight",value:v,options:[{value:"lbs",label:"Pounds (lbs)"},{value:"kg",label:"Kilograms (kg)"}],onChange:s=>w(s)}),e.jsx(L,{label:"Height & Circumferences",value:f,options:[{value:"cm",label:"Centimeters (cm)"},{value:"ft_in",label:"Feet & Inches"}],onChange:s=>l(s)}),e.jsx(L,{label:"Distance",value:C,options:[{value:"km",label:"Kilometers (km)"},{value:"mi",label:"Miles (mi)"}],onChange:s=>j(s)})]})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Available Equipment"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select equipment you have access to for personalized workout recommendations"}),e.jsx(ve,{selected:r.equipment||[],onChange:s=>b({equipment:s}),equipment:[{id:"barbell",name:"Barbell",icon:"üèãÔ∏è"},{id:"dumbbells",name:"Dumbbells",icon:"üí™"},{id:"cables",name:"Cables",icon:"üîó"},{id:"bench",name:"Bench",icon:"ü™ë"},{id:"kettlebell",name:"Kettlebell",icon:"‚ö°"},{id:"resistance",name:"Resistance Bands",icon:"üéØ"},{id:"pullup_bar",name:"Pull-up Bar",icon:"üìè"},{id:"machines",name:"Machines",icon:"üîß"}]})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Journey & Progress"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Manage your fitness journey, create snapshots, or start fresh"}),e.jsx(we,{})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Privacy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(_,{to:"/community",state:{tab:"privacy"},className:"block p-4 bg-green-900/30 border border-green-600/30 rounded-xl hover:bg-green-900/40 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üõ°Ô∏è"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Privacy Mode & Data Controls"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Opt out of community features, manage data collection"})]})]}),e.jsx("span",{className:"text-gray-400",children:"‚Üí"})]})}),e.jsx("div",{className:"pt-2 border-t border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Quick settings (for full control, use Privacy Mode above)"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Public Profile"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Appear in leaderboards & community"})]}),e.jsx(t,{value:r.is_public,onChange:()=>b({is_public:r.is_public?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Show Location"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Share your city with others"})]}),e.jsx(t,{value:r.show_location,onChange:()=>b({show_location:r.show_location?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Show Progress"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Let others see your TU"})]}),e.jsx(t,{value:r.show_progress,onChange:()=>b({show_progress:r.show_progress?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Allow Messages"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Let others send you direct messages"})]}),e.jsx(t,{value:o,onChange:R})]}),e.jsx(_,{to:"/messages",className:"block p-3 bg-gray-700/50 rounded-xl hover:bg-gray-700 transition-colors mt-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‚úâÔ∏è"}),e.jsx("span",{className:"text-sm",children:"Manage Blocked Users"})]}),e.jsx("span",{className:"text-gray-400 text-sm",children:"‚Üí"})]})})]})]})]})]})}export{Je as default};
