import{r as c,j as e,L as B}from"./react-vendor-D1NxaRNd.js";import{k as $,K as ge,x as xe,i as p,ad as he,a8 as ue,aw as d,P as ye,m as x,J as pe,A as F,X as be,q as fe}from"./index-DJKXoZu6.js";import{u as je}from"./preferencesStore-iXijXuRn.js";import{A as Ne}from"./arrow-left-Br1tJfXa.js";import{C as ve}from"./chevron-down-C7okSaly.js";import{S as we}from"./square-pen-DL-biRJF.js";import{T as ke}from"./trash-2-CeFkK5Sw.js";import{M as _e}from"./minus-rCFfZUeH.js";import{T as Ce}from"./trending-down-CEqyLBWb.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-BziRPEEi.js";const Se=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],V=$("scale",Se);const Me=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Ue=$("settings-2",Me),C={KG_TO_LBS:2.20462,LBS_TO_KG:.453592,CM_TO_IN:.393701,IN_TO_CM:2.54};function Te(s){return s*C.KG_TO_LBS}function Le(s){return s*C.LBS_TO_KG}function W(s,n){return n==="kg"?s:Te(s)}function De(s,n){return n==="kg"?s:Le(s)}function Fe(s){return s*C.CM_TO_IN}function Ie(s){return s*C.IN_TO_CM}function P(s,n){return n==="cm"?s:Fe(s)}function Pe(s,n){return n==="cm"?s:Ie(s)}function Ae(s){return s==="cm"?"cm":"in"}const b=[{key:"weight_kg",label:"Weight",baseUnit:"kg",category:"weight",icon:V},{key:"body_fat_percentage",label:"Body Fat",baseUnit:"percent",category:"composition",icon:he},{key:"lean_mass_kg",label:"Lean Mass",baseUnit:"kg",category:"composition",icon:ue},{key:"neck_cm",label:"Neck",baseUnit:"cm",category:"upper",icon:d},{key:"shoulders_cm",label:"Shoulders",baseUnit:"cm",category:"upper",icon:d},{key:"chest_cm",label:"Chest",baseUnit:"cm",category:"upper",icon:d},{key:"left_bicep_cm",label:"Left Bicep",baseUnit:"cm",category:"upper",icon:d},{key:"right_bicep_cm",label:"Right Bicep",baseUnit:"cm",category:"upper",icon:d},{key:"left_forearm_cm",label:"Left Forearm",baseUnit:"cm",category:"upper",icon:d},{key:"right_forearm_cm",label:"Right Forearm",baseUnit:"cm",category:"upper",icon:d},{key:"waist_cm",label:"Waist",baseUnit:"cm",category:"lower",icon:d},{key:"hips_cm",label:"Hips",baseUnit:"cm",category:"lower",icon:d},{key:"left_thigh_cm",label:"Left Thigh",baseUnit:"cm",category:"lower",icon:d},{key:"right_thigh_cm",label:"Right Thigh",baseUnit:"cm",category:"lower",icon:d},{key:"left_calf_cm",label:"Left Calf",baseUnit:"cm",category:"lower",icon:d},{key:"right_calf_cm",label:"Right Calf",baseUnit:"cm",category:"lower",icon:d}];function E(s,n,g){switch(s.baseUnit){case"kg":return n;case"cm":return g;case"percent":return"%";default:return""}}function I(s,n,g,i){switch(n){case"kg":return W(s,g);case"cm":return P(s,i);case"percent":return s;default:return s}}function Oe(s,n,g,i){switch(n){case"kg":return De(s,g);case"cm":return Pe(s,i);case"percent":return s;default:return s}}const R=[{id:"all",label:"All"},{id:"weight",label:"Weight"},{id:"composition",label:"Body Comp"},{id:"upper",label:"Upper Body"},{id:"lower",label:"Lower Body"}];function Ye(){const{isAuthenticated:s}=ge(),{toast:n,error:g}=xe(),{weight:i,height:j,setWeightUnit:S,setHeightUnit:M}=je(),m=Ae(j),[U,H]=c.useState([]),[A,z]=c.useState(null),[K,G]=c.useState(null),[T,q]=c.useState(30),[J,Q]=c.useState(!0),[N,X]=c.useState("all"),[Y,h]=c.useState(!1),[v,f]=c.useState(null),[L,Z]=c.useState(!1),[ee,D]=c.useState(!1),[o,u]=c.useState({measurement_date:new Date().toISOString().split("T")[0]}),[w,O]=c.useState({weight:i,length:m}),k=c.useCallback(async()=>{try{const[t,a,r]=await Promise.all([p.get("/body-measurements?limit=100"),p.get("/body-measurements/latest"),p.get(`/body-measurements/comparison?days=${T}`)]);H(t.data?.measurements||[]),z(a.data?.measurement||null),G(r.data?.comparison||null)}catch{}finally{Q(!1)}},[T]);c.useEffect(()=>{s&&k()},[s,k]);const te=async()=>{if(!b.some(r=>o[r.key]!==void 0&&o[r.key]!==null&&o[r.key]!=="")){g("Please enter at least one measurement");return}if(!o.measurement_date){g("Please select a date");return}const a={measurement_date:o.measurement_date,notes:o.notes};for(const r of b){const l=o[r.key];l!=null&&(a[r.key]=Oe(l,r.baseUnit,w.weight,w.length))}try{v?(await p.put(`/body-measurements/${v.id}`,a),n("Measurement updated!")):(await p.post("/body-measurements",a),n("Measurement added!")),h(!1),f(null),u({measurement_date:new Date().toISOString().split("T")[0]}),k()}catch{g("Failed to save measurement")}},se=async t=>{if(confirm("Delete this measurement?"))try{await p.delete(`/body-measurements/${t}`),n("Measurement deleted"),k()}catch{g("Failed to delete measurement")}},ae=t=>{f(t),O({weight:i,length:m});const a={measurement_date:t.measurement_date.split("T")[0],notes:t.notes};for(const r of b){const l=t[r.key];l!=null&&(a[r.key]=I(l,r.baseUnit,i,m))}u(a),h(!0)},re=c.useMemo(()=>N==="all"?b:b.filter(t=>t.category===N),[N]),ne=(t,a=!1)=>t==null||t===0?{icon:_e,color:"text-gray-400",bg:"bg-gray-500/20"}:(a?t<0:t>0)?{icon:fe,color:"text-green-400",bg:"bg-green-500/20"}:{icon:Ce,color:"text-red-400",bg:"bg-red-500/20"};return s?e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white pb-24",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-gray-950/95 backdrop-blur-lg border-b border-gray-800",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{to:"/stats",className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400 hover:text-white",children:e.jsx(Ne,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Body Measurements"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Track your progress over time",e.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-800 rounded text-xs",children:i==="kg"?"Metric":"Imperial"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>D(!0),className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400 hover:text-white",title:"Unit settings",children:e.jsx(Ue,{className:"w-5 h-5"})}),e.jsxs("button",{onClick:()=>{f(null),O({weight:i,length:m}),u({measurement_date:new Date().toISOString().split("T")[0]}),h(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium",children:[e.jsx(ye,{className:"w-4 h-4"}),"Add"]})]})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1 -mx-4 px-4",children:R.map(t=>e.jsx("button",{onClick:()=>X(t.id),className:`px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap transition-all ${N===t.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:text-white"}`,children:t.label},t.id))})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[U.length===0&&e.jsx(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-green-500/20 to-teal-500/20 border border-green-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-white mb-1",children:"Track Your Body Transformation"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Measure consistently (weekly or bi-weekly) at the same time of day for accurate progress tracking. Track more than just weight - circumferences show muscle growth!"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 text-xs",children:[e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded-lg",children:"â° Measure in the morning"}),e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded-lg",children:"ðŸ“Š Compare over 30+ days"}),e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded-lg",children:"ðŸ’ª Track arm & leg gains"})]})]})]})}),J?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(t=>e.jsx("div",{className:"h-24 bg-gray-900 rounded-2xl animate-pulse"},t))}):A===null?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-900 flex items-center justify-center",children:e.jsx(V,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No measurements yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start tracking your body measurements"}),e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg",children:"Add First Measurement"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Progress"}),e.jsxs("select",{value:T,onChange:t=>q(parseInt(t.target.value)),className:"px-3 py-2 bg-gray-900 border border-gray-800 rounded-lg text-sm",children:[e.jsx("option",{value:7,children:"vs 7 days ago"}),e.jsx("option",{value:30,children:"vs 30 days ago"}),e.jsx("option",{value:90,children:"vs 90 days ago"}),e.jsx("option",{value:180,children:"vs 6 months ago"}),e.jsx("option",{value:365,children:"vs 1 year ago"})]})]}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:re.map(t=>{const a=A[t.key],r=K?.[t.key],l=r?.change,ie=r?.changePercent,le=t.key==="weight_kg"||t.key==="waist_cm",_=ne(l,le),ce=_.icon,oe=t.icon;if(a==null)return null;const de=I(a,t.baseUnit,i,m),me=E(t,i,m);let y=null;return l!=null&&(y=I(Math.abs(l),t.baseUnit,i,m),l<0&&(y=-y)),e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-900 rounded-xl p-4 border border-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-gray-800 rounded-lg",children:e.jsx(oe,{className:"w-4 h-4 text-blue-400"})}),e.jsx("span",{className:"text-sm text-gray-400",children:t.label})]}),y!==null&&e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${_.bg}`,children:[e.jsx(ce,{className:`w-3.5 h-3.5 ${_.color}`}),e.jsxs("span",{className:`text-xs font-medium ${_.color}`,children:[y>0?"+":"",y.toFixed(1)," (",ie,"%)"]})]})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-2xl font-bold",children:de.toFixed(1)}),e.jsx("span",{className:"text-gray-500",children:me})]})]},t.key)})}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("button",{onClick:()=>Z(!L),className:"flex items-center justify-between w-full p-4 bg-gray-900 rounded-xl border border-gray-800 hover:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(pe,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-medium",children:"Measurement History"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",U.length," entries)"]})]}),e.jsx(ve,{className:`w-5 h-5 text-gray-400 transition-transform ${L?"rotate-180":""}`})]}),e.jsx(F,{children:L&&e.jsx(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx("div",{className:"mt-3 space-y-2",children:U.slice(0,20).map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:new Date(t.measurement_date).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-xs text-gray-500",children:[t.weight_kg&&e.jsxs("span",{children:["Weight: ",W(t.weight_kg,i).toFixed(1),i]}),t.body_fat_percentage&&e.jsxs("span",{children:["BF: ",t.body_fat_percentage,"%"]}),t.chest_cm&&e.jsxs("span",{children:["Chest: ",P(t.chest_cm,m).toFixed(1),m]}),t.waist_cm&&e.jsxs("span",{children:["Waist: ",P(t.waist_cm,m).toFixed(1),m]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>ae(t),className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400",children:e.jsx(we,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>se(t.id),className:"p-2 hover:bg-gray-800 rounded-lg text-red-400",children:e.jsx(ke,{className:"w-4 h-4"})})]})]},t.id))})})})]})]})]}),e.jsx(F,{children:Y&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm overflow-y-auto",children:e.jsx("div",{className:"min-h-screen flex items-start justify-center p-4 pt-20",children:e.jsxs(x.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},className:"w-full max-w-lg bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsx("h2",{className:"text-lg font-bold",children:v?"Edit Measurement":"Add Measurement"}),e.jsx("button",{onClick:()=>{h(!1),f(null)},className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400",children:e.jsx(be,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:o.measurement_date||"",onChange:t=>u({...o,measurement_date:t.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),R.slice(1).map(t=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:t.label}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.filter(a=>a.category===t.id).map(a=>{const r=E(a,w.weight,w.length);return e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[a.label," (",r,")"]}),e.jsx("input",{type:"number",step:"0.1",value:o[a.key]??"",onChange:l=>u({...o,[a.key]:l.target.value?parseFloat(l.target.value):void 0}),placeholder:"â€”",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm"})]},a.key)})})]},t.id)),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:o.notes||"",onChange:t=>u({...o,notes:t.target.value}),placeholder:"Optional notes...",rows:2,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg resize-none"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-800",children:[e.jsx("button",{onClick:()=>{h(!1),f(null)},className:"px-4 py-2 text-gray-400 hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:te,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium",children:v?"Update":"Save"})]})]})})})}),e.jsx(F,{children:ee&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4",onClick:()=>D(!1),children:e.jsxs(x.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},onClick:t=>t.stopPropagation(),className:"w-full max-w-sm bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-800",children:[e.jsx("h2",{className:"text-lg font-bold",children:"Unit Preferences"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Choose your preferred measurement units"})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weight"}),e.jsx("div",{className:"flex bg-gray-800 rounded-xl p-1",children:["kg","lbs"].map(t=>e.jsx("button",{onClick:()=>S(t),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all ${i===t?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:t==="kg"?"Kilograms (kg)":"Pounds (lbs)"},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Height & Circumferences"}),e.jsx("div",{className:"flex bg-gray-800 rounded-xl p-1",children:["cm","ft_in"].map(t=>e.jsx("button",{onClick:()=>M(t),className:`flex-1 px-4 py-2 rounded-lg text-sm font-medium transition-all ${j===t?"bg-blue-600 text-white":"text-gray-400 hover:text-white"}`,children:t==="cm"?"Centimeters (cm)":"Inches (in)"},t))})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-800",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Quick presets"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{S("kg"),M("cm")},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium border transition-all ${i==="kg"&&j==="cm"?"border-blue-500 bg-blue-500/10 text-blue-400":"border-gray-700 text-gray-400 hover:border-gray-600"}`,children:"Metric (kg/cm)"}),e.jsx("button",{onClick:()=>{S("lbs"),M("ft_in")},className:`flex-1 px-3 py-2 rounded-lg text-sm font-medium border transition-all ${i==="lbs"&&j==="ft_in"?"border-blue-500 bg-blue-500/10 text-blue-400":"border-gray-700 text-gray-400 hover:border-gray-600"}`,children:"Imperial (lbs/in)"})]})]})]}),e.jsx("div",{className:"p-4 border-t border-gray-800",children:e.jsx("button",{onClick:()=>D(!1),className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium",children:"Done"})})]})})})]}):e.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Sign in Required"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Please sign in to track body measurements"}),e.jsx(B,{to:"/login",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Sign In"})]})})}export{Ye as default};
