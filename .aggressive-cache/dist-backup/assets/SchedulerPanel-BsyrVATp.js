import{r as i,j as e}from"./react-vendor-D847gc3Q.js";import{G as v}from"./GlassSurface-DZwHl8aR.js";import{L as $}from"./loader-circle-C8DGvtTi.js";import{aH as S,P as L,X as O,aF as W,Z as K,J as B}from"./index-C9UYgovZ.js";import{R as Q}from"./refresh-cw-BlL42zdN.js";import{T as V}from"./triangle-alert-VfNCqVZ_.js";import{P as J}from"./pause-7XyUv2OB.js";import{C as P}from"./circle-x-DDriIEP2.js";import{T as q}from"./timer-3Pxopg84.js";import{C as M}from"./chevron-down-Co_pN3je.js";import{C as D}from"./chevron-right-BjkLm8zf.js";import{H}from"./history-BrCw2d04.js";import{P as Y}from"./pen-C2JPh_2m.js";import{T as ee}from"./trash-2-Bc0IVnS1.js";import{C as T}from"./circle-check-big-D2RK95cA.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./recharts-vendor-d8oTApeF.js";import"./d3-vendor-DkU_Wy0v.js";import"./apollo-vendor-BNHFeEEc.js";import"./reactflow-vendor-5ig9bY2l.js";const j="/api/admin/scheduler",se=[{label:"Every minute",value:"* * * * *"},{label:"Every 5 minutes",value:"*/5 * * * *"},{label:"Every 15 minutes",value:"*/15 * * * *"},{label:"Every 30 minutes",value:"*/30 * * * *"},{label:"Every hour",value:"0 * * * *"},{label:"Every 6 hours",value:"0 */6 * * *"},{label:"Every 12 hours",value:"0 */12 * * *"},{label:"Daily at midnight",value:"0 0 * * *"},{label:"Daily at 6 AM",value:"0 6 * * *"},{label:"Weekly on Sunday",value:"0 0 * * 0"},{label:"Monthly on 1st",value:"0 0 1 * *"}];function z(s){if(!s)return"Invalid cron expression";const h=s.split(" ");if(h.length!==5)return"Invalid cron expression";const[r,c,a,d,x]=h;if(s==="* * * * *")return"Every minute";if(s.startsWith("*/")&&h.slice(1).every(l=>l==="*")){const l=r.replace("*/","");return`Every ${l} minute${l!=="1"?"s":""}`}if(r==="0"&&c.startsWith("*/")&&a==="*"&&d==="*"&&x==="*"){const l=c.replace("*/","");return`Every ${l} hour${l!=="1"?"s":""}`}if(r==="0"&&c!=="*"&&a==="*"&&d==="*"&&x==="*")return`Daily at ${c.padStart(2,"0")}:00`;if(r==="0"&&c==="0"&&a==="*"&&d==="*"&&x!=="*")return`Weekly on ${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][parseInt(x)]||x}`;if(r==="0"&&c==="0"&&a!=="*"&&d==="*"&&x==="*")return`Monthly on day ${a}`;let o="";return r!=="*"&&(o+=`At minute ${r}`),c!=="*"&&(o+=o?`, hour ${c}`:`At hour ${c}`),a!=="*"&&(o+=`, on day ${a}`),d!=="*"&&(o+=`, in month ${d}`),x!=="*"&&(o+=`, on weekday ${x}`),o||"Custom schedule"}function E(s){if(!s)return"N/A";const h=new Date(s);if(isNaN(h.getTime()))return"N/A";const c=h-new Date,a=Math.round(c/6e4);if(a>0&&a<60)return`in ${a} min${a!==1?"s":""}`;if(a>=60&&a<1440){const d=Math.round(a/60);return`in ${d} hour${d!==1?"s":""}`}return h.toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function R(s){return!s&&s!==0?"N/A":s<1e3?`${s}ms`:s<6e4?`${(s/1e3).toFixed(1)}s`:`${(s/6e4).toFixed(1)}m`}function te({status:s}){const h={active:{color:"bg-green-500/20 text-green-400",icon:T,label:"Active"},paused:{color:"bg-yellow-500/20 text-yellow-400",icon:J,label:"Paused"},running:{color:"bg-blue-500/20 text-blue-400",icon:$,label:"Running",animate:!0},error:{color:"bg-red-500/20 text-red-400",icon:P,label:"Error"},disabled:{color:"bg-gray-500/20 text-gray-400",icon:J,label:"Disabled"}},r=h[s]||h.disabled,c=r.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${r.color}`,children:[e.jsx(c,{className:`w-3 h-3 ${r.animate?"animate-spin":""}`}),r.label]})}function ae({job:s,onToggle:h,onRunNow:r,onEdit:c,onDelete:a,loading:d}){const[x,o]=i.useState(!1),l=s.status==="running";return e.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:border-white/20 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-white truncate",children:s.name}),e.jsx(te,{status:s.status})]}),s.description&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 truncate",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>r(s.id),disabled:d||l,className:"p-1.5 rounded bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 transition-colors disabled:opacity-50",title:"Run Now",children:l?e.jsx($,{className:"w-4 h-4 animate-spin"}):e.jsx(K,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(s.id,s.status!=="active"),disabled:d||l,className:`p-1.5 rounded transition-colors disabled:opacity-50 ${s.status==="active"?"bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400":"bg-green-500/20 hover:bg-green-500/30 text-green-400"}`,title:s.status==="active"?"Pause":"Enable",children:s.status==="active"?e.jsx(J,{className:"w-4 h-4"}):e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c(s),disabled:d||l,className:"p-1.5 rounded bg-white/5 hover:bg-white/10 text-gray-400 transition-colors disabled:opacity-50",title:"Edit",children:e.jsx(Y,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(s.id),disabled:d||l,className:"p-1.5 rounded bg-red-500/20 hover:bg-red-500/30 text-red-400 transition-colors disabled:opacity-50",title:"Delete",children:e.jsx(ee,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsxs("div",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(q,{className:"w-3 h-3"}),"Cron"]}),e.jsx("div",{className:"text-white font-mono mt-0.5",children:s.cron}),e.jsx("div",{className:"text-gray-500 mt-0.5",children:z(s.cron)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsxs("div",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),"Next Run"]}),e.jsx("div",{className:"text-white mt-0.5",children:E(s.nextRun)})]})]}),s.lastRun&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5",children:[e.jsxs("button",{onClick:()=>o(!x),className:"w-full flex items-center justify-between text-xs text-gray-400 hover:text-gray-300",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-3 h-3"}),"Last run: ",E(s.lastRun),s.lastDuration&&e.jsxs("span",{className:"text-gray-500",children:["(",R(s.lastDuration),")"]})]}),x?e.jsx(M,{className:"w-3 h-3"}):e.jsx(D,{className:"w-3 h-3"})]}),x&&s.history?.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:s.history.slice(0,5).map((b,f)=>e.jsxs("div",{className:`flex items-center justify-between text-xs px-2 py-1 rounded ${b.success?"bg-green-500/10":"bg-red-500/10"}`,children:[e.jsxs("span",{className:b.success?"text-green-400":"text-red-400",children:[b.success?e.jsx(T,{className:"w-3 h-3 inline mr-1"}):e.jsx(P,{className:"w-3 h-3 inline mr-1"}),E(b.timestamp)]}),e.jsx("span",{className:"text-gray-400",children:R(b.duration)})]},f))})]})]})}function re({job:s,onSave:h,onClose:r,loading:c}){const[a,d]=i.useState({name:s?.name||"",description:s?.description||"",cron:s?.cron||"0 * * * *",handler:s?.handler||"",enabled:s?.status==="active"||!s}),[x,o]=i.useState("preset"),[l,b]=i.useState({}),f=(n,y)=>{d(g=>({...g,[n]:y})),b(g=>({...g,[n]:null}))},N=n=>{d(y=>({...y,cron:n.value}))},A=()=>{const n={};return a.name.trim()||(n.name="Name is required"),a.cron.trim()||(n.cron="Cron expression is required"),a.handler.trim()||(n.handler="Handler is required"),a.cron.split(" ").length!==5&&(n.cron="Invalid cron expression (must have 5 parts)"),b(n),Object.keys(n).length===0},w=n=>{n.preventDefault(),A()&&h({...a,id:s?.id})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"w-full max-w-lg bg-gray-900/95 border border-white/10 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-cyan-400"}),s?"Edit Job":"Add New Job"]}),e.jsx("button",{onClick:r,className:"p-1 rounded hover:bg-white/10 transition-colors",children:e.jsx(O,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("form",{onSubmit:w,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Job Name *"}),e.jsx("input",{type:"text",value:a.name,onChange:n=>f("name",n.target.value),placeholder:"e.g., Daily Cleanup",className:`w-full px-3 py-2 bg-white/5 border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 ${l.name?"border-red-500":"border-white/10"}`}),l.name&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:a.description,onChange:n=>f("description",n.target.value),placeholder:"What does this job do?",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Handler *"}),e.jsx("input",{type:"text",value:a.handler,onChange:n=>f("handler",n.target.value),placeholder:"e.g., cleanup:stale-sessions",className:`w-full px-3 py-2 bg-white/5 border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 font-mono text-sm ${l.handler?"border-red-500":"border-white/10"}`}),l.handler&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:l.handler}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"The registered handler function to execute"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Schedule *"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("button",{type:"button",onClick:()=>o("preset"),className:`px-3 py-1 text-xs rounded transition-colors ${x==="preset"?"bg-cyan-500/20 text-cyan-400":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:"Presets"}),e.jsx("button",{type:"button",onClick:()=>o("custom"),className:`px-3 py-1 text-xs rounded transition-colors ${x==="custom"?"bg-cyan-500/20 text-cyan-400":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:"Custom"})]}),x==="preset"?e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto p-1",children:se.map(n=>e.jsxs("button",{type:"button",onClick:()=>N(n),className:`px-3 py-2 text-left rounded border transition-colors ${a.cron===n.value?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400":"bg-white/5 border-white/10 text-gray-300 hover:bg-white/10"}`,children:[e.jsx("div",{className:"text-sm",children:n.label}),e.jsx("div",{className:"text-xs font-mono text-gray-500",children:n.value})]},n.value))}):e.jsxs("div",{children:[e.jsx("input",{type:"text",value:a.cron,onChange:n=>f("cron",n.target.value),placeholder:"* * * * *",className:`w-full px-3 py-2 bg-white/5 border rounded-lg text-white font-mono focus:outline-none focus:ring-2 focus:ring-cyan-500/50 ${l.cron?"border-red-500":"border-white/10"}`}),e.jsxs("div",{className:"mt-2 p-2 bg-white/5 rounded text-xs",children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Format: minute hour day-of-month month day-of-week"}),e.jsxs("div",{className:"flex gap-2 text-gray-500 font-mono",children:[e.jsx("span",{children:"0-59"}),e.jsx("span",{children:"0-23"}),e.jsx("span",{children:"1-31"}),e.jsx("span",{children:"1-12"}),e.jsx("span",{children:"0-6"})]})]})]}),l.cron&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:l.cron}),e.jsx("div",{className:"mt-2 p-2 bg-cyan-500/10 border border-cyan-500/20 rounded",children:e.jsxs("div",{className:"text-xs text-cyan-400 flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),z(a.cron)]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"Enable Job"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Job will run according to schedule"})]}),e.jsx("button",{type:"button",onClick:()=>f("enabled",!a.enabled),className:`relative w-11 h-6 rounded-full transition-colors ${a.enabled?"bg-cyan-500":"bg-gray-600"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${a.enabled?"left-6":"left-1"}`})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/10",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-2 bg-cyan-500 hover:bg-cyan-600 rounded-lg text-white font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(T,{className:"w-4 h-4"}),s?"Update Job":"Create Job"]})})]})]})]})})}function ne({history:s,loading:h}){return h?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx($,{className:"w-6 h-6 animate-spin text-cyan-400"})}):!s||s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(H,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No execution history yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-400 border-b border-white/10",children:[e.jsx("th",{className:"pb-2 pr-4",children:"Job"}),e.jsx("th",{className:"pb-2 pr-4",children:"Status"}),e.jsx("th",{className:"pb-2 pr-4",children:"Started"}),e.jsx("th",{className:"pb-2 pr-4",children:"Duration"}),e.jsx("th",{className:"pb-2",children:"Result"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:s.map((r,c)=>e.jsxs("tr",{className:"hover:bg-white/5",children:[e.jsx("td",{className:"py-2 pr-4",children:e.jsx("span",{className:"font-medium text-white",children:r.jobName})}),e.jsx("td",{className:"py-2 pr-4",children:r.success?e.jsxs("span",{className:"inline-flex items-center gap-1 text-green-400",children:[e.jsx(T,{className:"w-3 h-3"}),"Success"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 text-red-400",children:[e.jsx(P,{className:"w-3 h-3"}),"Failed"]})}),e.jsx("td",{className:"py-2 pr-4 text-gray-300",children:E(r.timestamp)}),e.jsx("td",{className:"py-2 pr-4 text-gray-300 font-mono",children:R(r.duration)}),e.jsx("td",{className:"py-2 text-gray-400 truncate max-w-xs",title:r.result||r.error,children:r.error?e.jsx("span",{className:"text-red-400",children:r.error}):r.result||"-"})]},c))})]})})}function $e(){const[s,h]=i.useState([]),[r,c]=i.useState([]),[a,d]=i.useState(!0),[x,o]=i.useState(!1),[l,b]=i.useState(!1),[f,N]=i.useState(null),[A,w]=i.useState(null),[n,y]=i.useState(!1),[g,F]=i.useState("jobs"),u=i.useCallback(()=>{try{const t=localStorage.getItem("musclemap-auth");if(t){const k=JSON.parse(t);if(k?.state?.token)return{Authorization:`Bearer ${k.state.token}`}}const m=localStorage.getItem("musclemap_token");return m?{Authorization:`Bearer ${m}`}:{}}catch{return{}}},[]),p=i.useCallback(async()=>{try{const t=await fetch(`${j}/jobs`,{headers:u()});if(t.ok){const m=await t.json();h(m.jobs||[]),N(null)}else{const m=await t.json().catch(()=>({}));N(m.error||"Failed to fetch jobs")}}catch{N("Failed to connect to scheduler API")}finally{d(!1)}},[u]),C=i.useCallback(async()=>{b(!0);try{const t=await fetch(`${j}/history`,{headers:u()});if(t.ok){const m=await t.json();c(m.history||[])}}catch{}finally{b(!1)}},[u]),U=i.useCallback(async(t,m)=>{o(!0);try{(await fetch(`${j}/jobs/${t}/${m?"enable":"disable"}`,{method:"POST",headers:u()})).ok&&p()}catch{}finally{o(!1)}},[u,p]),_=i.useCallback(async t=>{o(!0);try{(await fetch(`${j}/jobs/${t}/run`,{method:"POST",headers:u()})).ok&&(p(),C())}catch{}finally{o(!1)}},[u,p,C]),G=i.useCallback(async t=>{if(window.confirm("Are you sure you want to delete this job?")){o(!0);try{(await fetch(`${j}/jobs/${t}`,{method:"DELETE",headers:u()})).ok&&p()}catch{}finally{o(!1)}}},[u,p]),X=i.useCallback(async t=>{o(!0);try{const m=!!t.id;(await fetch(m?`${j}/jobs/${t.id}`:`${j}/jobs`,{method:m?"PUT":"POST",headers:{"Content-Type":"application/json",...u()},body:JSON.stringify({name:t.name,description:t.description,cron:t.cron,handler:t.handler,enabled:t.enabled})})).ok&&(y(!1),w(null),p())}catch{}finally{o(!1)}},[u,p]),Z=i.useCallback(t=>{w(t),y(!0)},[]),I=i.useCallback(()=>{w(null),y(!0)},[]);return i.useEffect(()=>{p(),C();const t=setInterval(()=>{p()},3e4);return()=>clearInterval(t)},[p,C]),a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx($,{className:"w-8 h-8 animate-spin text-cyan-400"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(S,{className:"w-6 h-6 text-cyan-400"}),"Scheduled Tasks"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Manage automated jobs and cron schedules"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 transition-colors",children:[e.jsx(Q,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Refresh"})]}),e.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-cyan-500 hover:bg-cyan-600 transition-colors",children:[e.jsx(L,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-sm text-white font-medium",children:"Add Job"})]})]})]}),f&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[e.jsx(V,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-red-400",children:f})}),e.jsx("button",{onClick:()=>N(null),className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(O,{className:"w-4 h-4 text-red-400"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(S,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Total Jobs"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:s.length})]}),e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(W,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Active"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:s.filter(t=>t.status==="active").length})]}),e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(J,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Paused"})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:s.filter(t=>t.status==="paused"||t.status==="disabled").length})]}),e.jsxs(v,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(P,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Errors"})]}),e.jsx("div",{className:"text-2xl font-bold text-red-400",children:s.filter(t=>t.status==="error").length})]})]}),e.jsxs(v,{className:"p-4",children:[e.jsxs("button",{onClick:()=>F(g==="jobs"?"":"jobs"),className:"w-full flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-cyan-400"}),"Scheduled Jobs (",s.length,")"]}),g==="jobs"?e.jsx(M,{className:"w-4 h-4 text-gray-400"}):e.jsx(D,{className:"w-4 h-4 text-gray-400"})]}),g==="jobs"&&(s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(S,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No scheduled jobs yet"}),e.jsxs("button",{onClick:I,className:"mt-3 inline-flex items-center gap-2 px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 rounded-lg transition-colors",children:[e.jsx(L,{className:"w-4 h-4"}),"Create your first job"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(t=>e.jsx(ae,{job:t,onToggle:U,onRunNow:_,onEdit:Z,onDelete:G,loading:x},t.id))}))]}),e.jsxs(v,{className:"p-4",children:[e.jsxs("button",{onClick:()=>{F(g==="history"?"":"history"),g!=="history"&&C()},className:"w-full flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4 text-purple-400"}),"Execution History"]}),g==="history"?e.jsx(M,{className:"w-4 h-4 text-gray-400"}):e.jsx(D,{className:"w-4 h-4 text-gray-400"})]}),g==="history"&&e.jsx(ne,{history:r,loading:l})]}),n&&e.jsx(re,{job:A,onSave:X,onClose:()=>{y(!1),w(null)},loading:x})]})}export{$e as default};
