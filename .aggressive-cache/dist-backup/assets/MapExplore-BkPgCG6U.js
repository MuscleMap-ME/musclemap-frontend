const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/World3DRenderer-DJCcZ2Dr.js","assets/index-CfuVQjw9.js","assets/react-vendor-D1NxaRNd.js","assets/building-2-BAAx-cFV.js","assets/gauge-fWLbc5yp.js","assets/arrow-left-DRuo6dW0.js","assets/minimize-2-9ZXz9G3i.js","assets/leaflet-vendor-CIGW-MKW.css","assets/reactflow-vendor-B5DZHykP.css","assets/index-9dT335t6.css","assets/ConstellationRenderer-DvK5ULFq.js","assets/IsometricRenderer-rXmYmiGV.js"])))=>i.map(i=>d[i]);
import{j as s,r as l,d as X,k as Z,u as ee,a as F,L as te}from"./react-vendor-D1NxaRNd.js";import{k as ie,_ as N,m as y,b8 as se,S as oe,y as ae,X as ne,Z as re,A as S}from"./index-CfuVQjw9.js";import{B as le}from"./building-2-BAAx-cFV.js";import{G as ce}from"./gauge-fWLbc5yp.js";import{A as de}from"./arrow-left-DRuo6dW0.js";import{a as he,M as ue}from"./minimize-2-9ZXz9G3i.js";const me=[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],pe=ie("zap-off",me);function ge(){const o=navigator;return{memory:o.deviceMemory??null,cores:o.hardwareConcurrency??4,dpr:Math.min(window.devicePixelRatio||1,2),effectiveType:o.connection?.effectiveType??null,prefersReducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,prefersHighContrast:window.matchMedia("(prefers-contrast: high)").matches,supportsWebGL2:fe(),supportsOffscreenCanvas:typeof OffscreenCanvas<"u"}}function fe(){try{return!!document.createElement("canvas").getContext("webgl2")}catch{return!1}}function ye(o){return o.prefersReducedMotion||o.effectiveType==="2g"||o.effectiveType==="slow-2g"||o.memory!==null&&o.memory<4||!o.supportsWebGL2?"lite":o.memory!==null&&o.memory>=8&&o.cores>=4&&(o.effectiveType==="4g"||o.effectiveType===null)?"high":"medium"}function be(o=500){return new Promise(e=>{let i=0;const t=performance.now();function a(){if(i++,performance.now()-t<o)requestAnimationFrame(a);else{const n=performance.now()-t;e(Math.round(i/n*1e3))}}requestAnimationFrame(a)})}class ve{metrics=new Map;enabled;constructor(e=!1){this.enabled=e}log(e,i){this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(i),this.enabled}start(e){const i=performance.now();return()=>{this.log(e,performance.now()-i)}}report(){const e={};return this.metrics.forEach((i,t)=>{if(i.length===0)return;const a=i.reduce((n,r)=>n+r,0);e[t]={avg:a/i.length,min:Math.min(...i),max:Math.max(...i),samples:i.length}}),e}clear(){this.metrics.clear()}}const D=new ve;function xe(o,e){let i=!1;return function(...t){i||(o.apply(this,t),i=!0,setTimeout(()=>{i=!1},e))}}function I(o){const e=window.devicePixelRatio||1;switch(o){case"lite":return 1;case"medium":return Math.min(e,1.5);case"high":return Math.min(e,2);default:return 1}}class A{canvas=null;ctx=null;data=null;renderNodes=[];width=0;height=0;dpr=1;animationId=null;lastFrameTime=0;frameCount=0;fps=60;activeNodeId=null;highlightedCategory=null;searchQuery="";hoveredNode=null;onClickCallback=null;onHoverCallback=null;animationProgress=0;isInitializing=!0;async initialize(e,i){const t=D.start("liteRenderer.init");if(this.data=i,this.dpr=I("lite"),this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.canvas.setAttribute("role","img"),this.canvas.setAttribute("aria-label","Interactive navigation map"),e.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d",{alpha:!1,desynchronized:!0}),!this.ctx)throw new Error("Failed to get 2D canvas context");this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("click",this.handleClick),this.canvas.addEventListener("touchstart",this.handleTouch,{passive:!0}),this.canvas.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),this.resize(e.clientWidth,e.clientHeight),this.buildRenderNodes(),this.isInitializing=!0,this.animationProgress=0,this.startRenderLoop(),t()}buildRenderNodes(){this.data&&(this.renderNodes=this.data.nodes.map((e,i)=>{const t=e.position;return{node:e,x:t.x*this.width,y:t.y*this.height,radius:this.calculateNodeRadius(e),hovered:!1,active:e.id===this.activeNodeId,filtered:!0,opacity:0}}),this.applyFilters())}calculateNodeRadius(e){return e.metadata?.nodeCount?30:18}startRenderLoop=()=>{const e=i=>{this.frameCount++,i-this.lastFrameTime>=1e3&&(this.fps=this.frameCount,this.frameCount=0,this.lastFrameTime=i),this.isInitializing&&this.animationProgress<1&&(this.animationProgress=Math.min(1,this.animationProgress+.05),this.renderNodes.forEach((t,a)=>{const n=a*.03,r=Math.max(0,(this.animationProgress-n)/(1-n));t.opacity=this.easeOutCubic(Math.min(1,r))}),this.animationProgress>=1&&(this.isInitializing=!1)),this.draw(),this.animationId=requestAnimationFrame(e)};this.animationId=requestAnimationFrame(e)};easeOutCubic(e){return 1-Math.pow(1-e,3)}draw(){if(!this.ctx||!this.canvas)return;const e=this.ctx;e.fillStyle="#0a0a0f",e.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawGrid(e),this.drawConnections(e),this.drawNodes(e)}drawGrid(e){const i=40*this.dpr;e.strokeStyle="rgba(255, 255, 255, 0.03)",e.lineWidth=1;for(let t=0;t<this.canvas.width;t+=i)e.beginPath(),e.moveTo(t,0),e.lineTo(t,this.canvas.height),e.stroke();for(let t=0;t<this.canvas.height;t+=i)e.beginPath(),e.moveTo(0,t),e.lineTo(this.canvas.width,t),e.stroke()}drawConnections(e){this.renderNodes.forEach(i=>{!i.filtered||!i.node.connections||i.node.connections.forEach(t=>{const a=this.renderNodes.find(f=>f.node.id===t);if(!a||!a.filtered)return;const n=this.renderNodes.indexOf(i),r=this.renderNodes.indexOf(a);if(n>r)return;const h=i.x*this.dpr,u=i.y*this.dpr,c=a.x*this.dpr,p=a.y*this.dpr,g=e.createLinearGradient(h,u,c,p),m=Math.min(i.opacity,a.opacity)*.3;g.addColorStop(0,`rgba(255, 255, 255, ${m})`),g.addColorStop(1,`rgba(255, 255, 255, ${m*.5})`),e.strokeStyle=g,e.lineWidth=1.5*this.dpr,e.setLineDash([5*this.dpr,5*this.dpr]),e.beginPath(),e.moveTo(h,u),e.lineTo(c,p),e.stroke(),e.setLineDash([])})})}drawNodes(e){[...this.renderNodes].sort((t,a)=>t.active?1:a.active?-1:t.hovered?1:a.hovered?-1:0).forEach(t=>{if(!t.filtered||t.opacity<=0)return;const a=t.x*this.dpr,n=t.y*this.dpr,r=t.radius*this.dpr*(t.hovered?1.15:1)*(t.active?1.2:1),h=t.node.metadata?.color||"#ffffff",[u,c,p]=this.hexToRgb(h);if(t.active||t.hovered){const m=r*(t.active?2:1.5),f=e.createRadialGradient(a,n,r,a,n,m);f.addColorStop(0,`rgba(${u}, ${c}, ${p}, ${t.opacity*.4})`),f.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=f,e.beginPath(),e.arc(a,n,m,0,Math.PI*2),e.fill()}e.beginPath(),e.arc(a,n,r,0,Math.PI*2);const g=e.createRadialGradient(a-r*.3,n-r*.3,0,a,n,r);if(g.addColorStop(0,`rgba(${u}, ${c}, ${p}, ${t.opacity})`),g.addColorStop(1,`rgba(${Math.floor(u*.7)}, ${Math.floor(c*.7)}, ${Math.floor(p*.7)}, ${t.opacity})`),e.fillStyle=g,e.fill(),e.strokeStyle=`rgba(255, 255, 255, ${t.opacity*(t.active?.8:t.hovered?.5:.2)})`,e.lineWidth=(t.active?2:1)*this.dpr,e.stroke(),t.node.metadata?.icon&&(e.font=`${r*.9}px system-ui, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=`rgba(255, 255, 255, ${t.opacity})`,e.fillText(t.node.metadata.icon,a,n)),t.hovered||t.active){const m=t.node.shortLabel||t.node.label;e.font=`bold ${14*this.dpr}px system-ui, -apple-system, sans-serif`,e.textAlign="center",e.textBaseline="top";const f=e.measureText(m),w=8*this.dpr,x=a,k=n+r+12*this.dpr;e.fillStyle=`rgba(0, 0, 0, ${t.opacity*.8})`,e.beginPath(),e.roundRect(x-f.width/2-w,k-2*this.dpr,f.width+w*2,20*this.dpr,4*this.dpr),e.fill(),e.fillStyle=`rgba(255, 255, 255, ${t.opacity})`,e.fillText(m,x,k)}})}hexToRgb(e){const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:[255,255,255]}handleMouseMove=xe(e=>{if(!this.canvas)return;const i=this.canvas.getBoundingClientRect(),t=(e.clientX-i.left)*(this.canvas.width/i.width)/this.dpr,a=(e.clientY-i.top)*(this.canvas.height/i.height)/this.dpr;this.updateHover(t,a)},16);handleClick=()=>{this.hoveredNode&&this.onClickCallback?.(this.hoveredNode.node)};touchPosition=null;handleTouch=e=>{if(!this.canvas||e.touches.length===0)return;const i=this.canvas.getBoundingClientRect(),t=(e.touches[0].clientX-i.left)*(this.canvas.width/i.width)/this.dpr,a=(e.touches[0].clientY-i.top)*(this.canvas.height/i.height)/this.dpr;this.touchPosition={x:t,y:a},this.updateHover(t,a)};handleTouchEnd=()=>{this.touchPosition&&this.hoveredNode&&this.onClickCallback?.(this.hoveredNode.node),this.touchPosition=null,this.renderNodes.forEach(e=>{e.hovered=!1}),this.hoveredNode=null,this.onHoverCallback?.(null),this.canvas&&(this.canvas.style.cursor="default")};updateHover(e,i){let t=null;for(const a of this.renderNodes){if(!a.filtered)continue;const n=e-a.x,r=i-a.y,h=a.radius*1.2;if(n*n+r*r<h*h){t=a;break}}this.renderNodes.forEach(a=>{a.hovered=a===t}),t!==this.hoveredNode&&(this.hoveredNode=t,this.canvas.style.cursor=t?"pointer":"default",this.onHoverCallback?.(t?.node||null))}setActiveNode(e){this.activeNodeId=e,this.renderNodes.forEach(i=>{i.active=i.node.id===e})}setHighlightedCategory(e){this.highlightedCategory=e,this.applyFilters()}setSearchFilter(e){this.searchQuery=e.toLowerCase(),this.applyFilters()}applyFilters(){this.renderNodes.forEach(e=>{let i=!0;this.highlightedCategory&&e.node.category!==this.highlightedCategory&&(i=!1),this.searchQuery&&(`${e.node.label} ${e.node.shortLabel||""} ${e.node.metadata?.description||""}`.toLowerCase().includes(this.searchQuery)||(i=!1)),e.filtered=i,i?e.opacity<1&&(e.opacity=Math.min(1,e.opacity+.1)):e.opacity=Math.max(0,e.opacity-.1)})}resize(e,i){this.width=e,this.height=i,this.canvas&&(this.canvas.width=e*this.dpr,this.canvas.height=i*this.dpr),this.buildRenderNodes(),this.isInitializing||this.renderNodes.forEach(t=>{t.opacity=t.filtered?1:0})}setQualityLevel(e){this.dpr=I(e),this.canvas&&(this.canvas.width=this.width*this.dpr,this.canvas.height=this.height*this.dpr)}dispose(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.canvas&&(this.canvas.removeEventListener("mousemove",this.handleMouseMove),this.canvas.removeEventListener("click",this.handleClick),this.canvas.removeEventListener("touchstart",this.handleTouch),this.canvas.removeEventListener("touchend",this.handleTouchEnd),this.canvas.parentElement?.removeChild(this.canvas)),this.canvas=null,this.ctx=null,this.renderNodes=[],this.onClickCallback=null,this.onHoverCallback=null}onNodeClick(e){this.onClickCallback=e}onNodeHover(e){this.onHoverCallback=e}getFPS(){return this.fps}}async function we(o,e){if(e==="lite")return new A;switch(o){case"world":{const{World3DRenderer:i}=await N(async()=>{const{World3DRenderer:t}=await import("./World3DRenderer-DJCcZ2Dr.js");return{World3DRenderer:t}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));return new i}case"constellation":{const{ConstellationRenderer:i}=await N(async()=>{const{ConstellationRenderer:t}=await import("./ConstellationRenderer-DvK5ULFq.js");return{ConstellationRenderer:t}},__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]));return new i}case"isometric":{const{IsometricRenderer:i}=await N(async()=>{const{IsometricRenderer:t}=await import("./IsometricRenderer-rXmYmiGV.js");return{IsometricRenderer:t}},__vite__mapDeps([11,1,2,3,4,5,6,7,8,9]));return new i}default:return new A}}function Ce(o){switch(o){case"world":N(()=>import("./World3DRenderer-DJCcZ2Dr.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));break;case"constellation":N(()=>import("./ConstellationRenderer-DvK5ULFq.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]));break;case"isometric":N(()=>import("./IsometricRenderer-rXmYmiGV.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9]));break}}const z=[{id:"training",label:"Training",color:"#FF6B6B",icon:"ðŸ’ª",nodeCount:8},{id:"progress",label:"Progress",color:"#4ECDC4",icon:"ðŸ“Š",nodeCount:6},{id:"community",label:"Community",color:"#9B59B6",icon:"ðŸ‘¥",nodeCount:7},{id:"economy",label:"Economy",color:"#F39C12",icon:"ðŸ’°",nodeCount:5},{id:"health",label:"Health",color:"#2ECC71",icon:"â¤ï¸",nodeCount:5},{id:"account",label:"Account",color:"#95A5A6",icon:"âš™ï¸",nodeCount:4}];function Ne(){return[{id:"training-workout",label:"Workout",shortLabel:"Workout",category:"training",route:"/workout",position:{x:.15,y:.35,z:.5},metadata:{color:"#FF6B6B",icon:"ðŸ‹ï¸",description:"Start your workout session"},connections:["training-exercises","training-journey"]},{id:"training-exercises",label:"Exercises",shortLabel:"Exercises",category:"training",route:"/exercises",position:{x:.25,y:.25,z:.45},metadata:{color:"#FF6B6B",icon:"ðŸ“",description:"Browse exercise library"},connections:["training-workout"]},{id:"training-journey",label:"Journey",shortLabel:"Journey",category:"training",route:"/journey",position:{x:.2,y:.45,z:.55},metadata:{color:"#FF6B6B",icon:"ðŸ—ºï¸",description:"Your fitness journey"},connections:["training-workout","training-skills"]},{id:"training-skills",label:"Skills",shortLabel:"Skills",category:"training",route:"/skills",position:{x:.1,y:.5,z:.6},metadata:{color:"#FF6B6B",icon:"âš”ï¸",description:"Skill tree progression"},connections:["training-journey","training-martial"]},{id:"training-martial",label:"Martial Arts",shortLabel:"Martial",category:"training",route:"/martial-arts",position:{x:.05,y:.4,z:.5},metadata:{color:"#FF6B6B",icon:"ðŸ¥‹",description:"Martial arts training"},connections:["training-skills"]},{id:"training-pt",label:"PT Tests",shortLabel:"PT Tests",category:"training",route:"/pt-tests",position:{x:.3,y:.35,z:.4},metadata:{color:"#FF6B6B",icon:"ðŸŽ–ï¸",description:"Physical fitness tests"},connections:["training-exercises","training-career"]},{id:"training-career",label:"Career Readiness",shortLabel:"Career",category:"training",route:"/career-readiness",position:{x:.35,y:.45,z:.45},metadata:{color:"#FF6B6B",icon:"ðŸŽ¯",description:"Career fitness goals"},connections:["training-pt"]},{id:"training-adventure",label:"Adventure Map",shortLabel:"Adventure",category:"training",route:"/adventure-map",position:{x:.15,y:.55,z:.5},metadata:{color:"#FF6B6B",icon:"ðŸ—ºï¸",description:"RPG-style navigation"},connections:["training-journey"]}]}function ke(){return[{id:"progress-dashboard",label:"Dashboard",shortLabel:"Dashboard",category:"progress",route:"/dashboard",position:{x:.5,y:.3,z:.5},metadata:{color:"#4ECDC4",icon:"ðŸ“±",description:"Your fitness dashboard"},connections:["progress-stats","progress-records"]},{id:"progress-stats",label:"Statistics",shortLabel:"Stats",category:"progress",route:"/stats",position:{x:.55,y:.2,z:.45},metadata:{color:"#4ECDC4",icon:"ðŸ“ˆ",description:"Detailed statistics"},connections:["progress-dashboard"]},{id:"progress-records",label:"Personal Records",shortLabel:"Records",category:"progress",route:"/personal-records",position:{x:.6,y:.35,z:.5},metadata:{color:"#4ECDC4",icon:"ðŸ†",description:"Your personal bests"},connections:["progress-dashboard","progress-achievements"]},{id:"progress-achievements",label:"Achievements",shortLabel:"Achieve",category:"progress",route:"/achievements",position:{x:.65,y:.25,z:.45},metadata:{color:"#4ECDC4",icon:"ðŸŽ–ï¸",description:"Earned achievements"},connections:["progress-records","progress-progression"]},{id:"progress-progression",label:"Progression",shortLabel:"Progress",category:"progress",route:"/progression",position:{x:.5,y:.4,z:.55},metadata:{color:"#4ECDC4",icon:"ðŸ“Š",description:"Character progression"},connections:["progress-achievements"]},{id:"progress-photos",label:"Progress Photos",shortLabel:"Photos",category:"progress",route:"/progress-photos",position:{x:.45,y:.2,z:.4},metadata:{color:"#4ECDC4",icon:"ðŸ“·",description:"Visual progress tracking"},connections:["progress-stats"]}]}function Le(){return[{id:"community-hub",label:"Community Hub",shortLabel:"Community",category:"community",route:"/community",position:{x:.75,y:.5,z:.5},metadata:{color:"#9B59B6",icon:"ðŸ ",description:"Community dashboard"},connections:["community-crews","community-rivals","community-competitions"]},{id:"community-crews",label:"Crews",shortLabel:"Crews",category:"community",route:"/crews",position:{x:.8,y:.4,z:.45},metadata:{color:"#9B59B6",icon:"ðŸ‘¥",description:"Join or create crews"},connections:["community-hub"]},{id:"community-rivals",label:"Rivals",shortLabel:"Rivals",category:"community",route:"/rivals",position:{x:.85,y:.55,z:.55},metadata:{color:"#9B59B6",icon:"âš”ï¸",description:"Challenge your rivals"},connections:["community-hub"]},{id:"community-competitions",label:"Competitions",shortLabel:"Compete",category:"community",route:"/competitions",position:{x:.7,y:.6,z:.6},metadata:{color:"#9B59B6",icon:"ðŸ†",description:"Join competitions"},connections:["community-hub","community-highfives"]},{id:"community-highfives",label:"High Fives",shortLabel:"High 5s",category:"community",route:"/highfives",position:{x:.8,y:.65,z:.55},metadata:{color:"#9B59B6",icon:"ðŸ–ï¸",description:"Give and receive high fives"},connections:["community-competitions"]},{id:"community-messages",label:"Messages",shortLabel:"Messages",category:"community",route:"/messages",position:{x:.9,y:.5,z:.5},metadata:{color:"#9B59B6",icon:"ðŸ’¬",description:"Direct messages"},connections:["community-hub"]},{id:"community-live",label:"Live Activity",shortLabel:"Live",category:"community",route:"/live",position:{x:.75,y:.35,z:.4},metadata:{color:"#9B59B6",icon:"ðŸ“¡",description:"Live activity feed"},connections:["community-hub"]}]}function je(){return[{id:"economy-credits",label:"Credits",shortLabel:"Credits",category:"economy",route:"/credits",position:{x:.4,y:.7,z:.5},metadata:{color:"#F39C12",icon:"ðŸ’Ž",description:"Your credit balance"},connections:["economy-wallet","economy-marketplace"]},{id:"economy-wallet",label:"Wallet",shortLabel:"Wallet",category:"economy",route:"/wallet",position:{x:.35,y:.8,z:.55},metadata:{color:"#F39C12",icon:"ðŸ‘›",description:"Manage your wallet"},connections:["economy-credits"]},{id:"economy-marketplace",label:"Marketplace",shortLabel:"Market",category:"economy",route:"/marketplace",position:{x:.5,y:.75,z:.55},metadata:{color:"#F39C12",icon:"ðŸª",description:"Buy and sell items"},connections:["economy-credits","economy-skins"]},{id:"economy-skins",label:"Skins Store",shortLabel:"Skins",category:"economy",route:"/skins",position:{x:.55,y:.85,z:.6},metadata:{color:"#F39C12",icon:"ðŸŽ¨",description:"Customize your look"},connections:["economy-marketplace"]},{id:"economy-collection",label:"Collection",shortLabel:"Collection",category:"economy",route:"/collection",position:{x:.45,y:.85,z:.5},metadata:{color:"#F39C12",icon:"ðŸ“¦",description:"Your item collection"},connections:["economy-marketplace"]}]}function Ee(){return[{id:"health-overview",label:"Wellness",shortLabel:"Wellness",category:"health",route:"/wellness",position:{x:.2,y:.75,z:.5},metadata:{color:"#2ECC71",icon:"â¤ï¸",description:"Wellness overview"},connections:["health-recovery","health-nutrition","health-goals"]},{id:"health-recovery",label:"Recovery",shortLabel:"Recovery",category:"health",route:"/recovery",position:{x:.15,y:.85,z:.55},metadata:{color:"#2ECC71",icon:"ðŸ˜´",description:"Rest and recovery"},connections:["health-overview"]},{id:"health-nutrition",label:"Nutrition",shortLabel:"Nutrition",category:"health",route:"/nutrition",position:{x:.25,y:.85,z:.55},metadata:{color:"#2ECC71",icon:"ðŸ¥—",description:"Nutrition tracking"},connections:["health-overview"]},{id:"health-goals",label:"Goals",shortLabel:"Goals",category:"health",route:"/goals",position:{x:.3,y:.75,z:.45},metadata:{color:"#2ECC71",icon:"ðŸŽ¯",description:"Set your goals"},connections:["health-overview","health-limitations"]},{id:"health-limitations",label:"Limitations",shortLabel:"Limits",category:"health",route:"/limitations",position:{x:.35,y:.85,z:.5},metadata:{color:"#2ECC71",icon:"âš ï¸",description:"Track limitations"},connections:["health-goals"]}]}function Me(){return[{id:"account-profile",label:"Profile",shortLabel:"Profile",category:"account",route:"/profile",position:{x:.9,y:.2,z:.5},metadata:{color:"#95A5A6",icon:"ðŸ‘¤",description:"Your profile"},connections:["account-settings","account-trainers"]},{id:"account-settings",label:"Settings",shortLabel:"Settings",category:"account",route:"/settings",position:{x:.95,y:.3,z:.45},metadata:{color:"#95A5A6",icon:"âš™ï¸",description:"App settings"},connections:["account-profile"]},{id:"account-trainers",label:"Trainers",shortLabel:"Trainers",category:"account",route:"/trainers",position:{x:.85,y:.15,z:.55},metadata:{color:"#95A5A6",icon:"ðŸƒ",description:"Find trainers"},connections:["account-profile"]},{id:"account-plugins",label:"Plugins",shortLabel:"Plugins",category:"account",route:"/plugins",position:{x:.95,y:.15,z:.5},metadata:{color:"#95A5A6",icon:"ðŸ”Œ",description:"Manage plugins"},connections:["account-settings"]}]}function _(){return{nodes:[...Ne(),...ke(),...Le(),...je(),...Ee(),...Me()],categories:z,edges:[],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString()}}}function B(){const o={training:{x:.2,y:.3,z:.5},progress:{x:.5,y:.2,z:.5},community:{x:.8,y:.3,z:.5},economy:{x:.35,y:.7,z:.5},health:{x:.2,y:.7,z:.5},account:{x:.8,y:.7,z:.5}};return{nodes:z.map(e=>({id:e.id,label:e.label,category:e.id,route:Se(e.id),position:o[e.id]||{x:.5,y:.5,z:.5},metadata:{color:e.color,icon:e.icon,description:`${e.nodeCount} features`,nodeCount:e.nodeCount}})),categories:z,metadata:{version:"1.0.0",lastUpdated:new Date().toISOString()}}}function Se(o){return{training:"/workout",progress:"/dashboard",community:"/community",economy:"/credits",health:"/wellness",account:"/profile"}[o]||"/dashboard"}const ze=[{type:"world",label:"Globe",icon:s.jsx(se,{className:"w-4 h-4"})},{type:"constellation",label:"Stars",icon:s.jsx(oe,{className:"w-4 h-4"})},{type:"isometric",label:"Rooms",icon:s.jsx(le,{className:"w-4 h-4"})}];function Re({currentView:o,onViewChange:e,onViewHover:i,disabled:t=!1}){return s.jsx("div",{className:`
        flex items-center gap-1 p-1
        bg-glass-dark-30 backdrop-blur-glass-md
        border border-glass-default rounded-glass-lg
      `,role:"tablist","aria-label":"Map visualization style",children:ze.map(a=>{const n=o===a.type;return s.jsxs("button",{onClick:()=>e(a.type),onMouseEnter:()=>i?.(a.type),onFocus:()=>i?.(a.type),disabled:t,role:"tab","aria-selected":n,"aria-controls":`map-view-${a.type}`,className:`
              relative flex items-center gap-2 px-3 py-1.5 rounded-glass-md
              text-sm font-medium transition-colors duration-fast
              ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"}
              ${n?"text-white":"text-white/60 hover:text-white/80"}
            `,children:[n&&s.jsx(y.div,{layoutId:"viewSelector-active",className:"absolute inset-0 bg-glass-brand-medium rounded-glass-md",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),s.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[a.icon,s.jsx("span",{className:"hidden sm:inline",children:a.label})]})]},a.type)})})}function Pe({value:o,onChange:e,placeholder:i="Search..."}){const t=l.useRef(null);l.useEffect(()=>{const n=r=>{(r.metaKey||r.ctrlKey)&&r.key==="k"&&(r.preventDefault(),t.current?.focus())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[]);const a=()=>{e(""),t.current?.focus()};return s.jsxs("div",{className:`
        relative flex items-center
        bg-glass-dark-30 backdrop-blur-glass-md
        border border-glass-default rounded-glass-lg
        focus-within:border-glass-brand-glow focus-within:shadow-glow-brand-sm
        transition-all duration-fast
      `,children:[s.jsx(ae,{className:"absolute left-3 w-4 h-4 text-white/40 pointer-events-none"}),s.jsx("input",{ref:t,type:"text",value:o,onChange:n=>e(n.target.value),placeholder:i,className:`
          w-full min-w-[120px] sm:min-w-[200px] py-1.5 pl-9 pr-8
          bg-transparent text-white text-sm
          placeholder:text-white/30
          focus:outline-none
        `,"aria-label":"Search map features"}),o&&s.jsx("button",{onClick:a,className:`
            absolute right-2 p-1 rounded-full
            text-white/40 hover:text-white/80 hover:bg-glass-white-10
            transition-colors duration-fast
          `,"aria-label":"Clear search",children:s.jsx(ne,{className:"w-3 h-3"})}),!o&&s.jsx("span",{className:"absolute right-3 hidden sm:inline text-white/20 text-xs",children:"âŒ˜K"})]})}function Te({categories:o,selectedCategory:e,onCategorySelect:i}){return s.jsxs("div",{className:`
        absolute bottom-4 left-1/2 -translate-x-1/2 z-10
        flex items-center gap-2 px-3 py-2
        bg-glass-dark-30 backdrop-blur-glass-md
        border border-glass-default rounded-glass-xl
      `,role:"group","aria-label":"Filter by category",children:[s.jsx("button",{onClick:()=>i(null),className:`
          px-3 py-1 rounded-glass-md text-xs font-medium
          transition-all duration-fast
          ${e===null?"bg-glass-white-15 text-white":"text-white/50 hover:text-white/80 hover:bg-glass-white-5"}
        `,"aria-pressed":e===null,children:"All"}),o.map(t=>{const a=e===t.id;return s.jsxs("button",{onClick:()=>i(a?null:t.id),className:`
              relative flex items-center gap-1.5 px-3 py-1 rounded-glass-md
              text-xs font-medium transition-all duration-fast
              ${a?"text-white":"text-white/50 hover:text-white/80"}
            `,"aria-pressed":a,style:{backgroundColor:a?`${t.color}33`:void 0},children:[s.jsx(y.span,{className:"w-2 h-2 rounded-full",style:{backgroundColor:t.color},animate:{scale:a?1.2:1,boxShadow:a?`0 0 8px ${t.color}`:"none"}}),s.jsx("span",{className:"hidden sm:inline",children:t.label}),s.jsx("span",{className:"sm:hidden",children:t.icon}),s.jsx("span",{className:"hidden md:inline text-white/30 ml-1",children:t.nodeCount})]},t.id)})]})}function Fe({node:o}){return s.jsxs(y.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:`
        absolute top-20 left-1/2 -translate-x-1/2 z-20
        px-4 py-3 min-w-[200px] max-w-[300px]
        bg-glass-dark-40 backdrop-blur-glass-lg
        border border-glass-default rounded-glass-lg
        shadow-glass-lg
      `,role:"tooltip",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[o.metadata?.icon&&s.jsx("span",{className:"text-2xl",children:o.metadata.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-white font-semibold text-sm truncate",children:o.label}),o.metadata?.description&&s.jsx("p",{className:"text-white/60 text-xs mt-1",children:o.metadata.description}),s.jsx("p",{className:"text-white/30 text-xs mt-2 font-mono",children:o.route})]})]}),s.jsx("div",{className:`
          absolute -top-2 left-1/2 -translate-x-1/2
          w-4 h-4 rotate-45
          bg-glass-dark-40 border-l border-t border-glass-default
        `})]})}const $={lite:"Lite",medium:"Med",high:"High"},Ie={lite:"text-yellow-400",medium:"text-blue-400",high:"text-green-400"};function Ae({level:o,fps:e,onToggle:i}){const t=e>=50?"text-green-400":e>=30?"text-yellow-400":"text-red-400";return s.jsxs("button",{onClick:i,className:`
        flex items-center gap-2 px-2 py-1
        bg-glass-dark-30 backdrop-blur-glass-md
        border border-glass-default rounded-glass-md
        hover:bg-glass-white-5 transition-colors duration-fast
        text-xs
      `,title:`Quality: ${$[o]} | FPS: ${e}
Click to toggle`,children:[s.jsxs("span",{className:`flex items-center gap-1 ${Ie[o]}`,children:[o==="lite"?s.jsx(pe,{className:"w-3 h-3"}):s.jsx(re,{className:"w-3 h-3"}),s.jsx("span",{className:"hidden sm:inline",children:$[o]})]}),s.jsx("span",{className:"w-px h-3 bg-white/20"}),s.jsxs("span",{className:`flex items-center gap-1 ${t}`,children:[s.jsx(ce,{className:"w-3 h-3"}),s.jsx("span",{children:e})]})]})}function _e({mode:o}){const e=o==="compact"?6:12;return s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-void-base",children:s.jsxs("div",{className:"relative w-full h-full max-w-md max-h-80",children:[Array.from({length:e}).map((i,t)=>{const a=t/e*Math.PI*2,n=o==="compact"?30:40,r=50+Math.cos(a)*n,h=50+Math.sin(a)*n;return s.jsx(y.div,{className:"absolute w-4 h-4 rounded-full bg-glass-white-10",style:{left:`${r}%`,top:`${h}%`,transform:"translate(-50%, -50%)"},animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:1.5,delay:t*.1,repeat:1/0,ease:"easeInOut"}},t)}),s.jsx(y.div,{className:`
            absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
            w-12 h-12 rounded-full border-2 border-brand-blue-500/30
            border-t-brand-blue-500
          `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),s.jsx(y.p,{className:`
            absolute bottom-8 left-1/2 -translate-x-1/2
            text-white/40 text-sm
          `,animate:{opacity:[.4,.8,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"Loading map..."}),o==="full"&&s.jsx("svg",{className:"absolute inset-0 w-full h-full opacity-10",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:Array.from({length:e}).map((i,t)=>{const a=t/e*Math.PI*2,n=(t+1)/e*Math.PI*2,r=50+Math.cos(a)*40,h=50+Math.sin(a)*40,u=50+Math.cos(n)*40,c=50+Math.sin(n)*40;return s.jsx(y.line,{x1:r,y1:h,x2:u,y2:c,stroke:"white",strokeWidth:"0.5",strokeDasharray:"2,2",animate:{strokeDashoffset:[0,4]},transition:{duration:1,repeat:1/0,ease:"linear"}},t)})})]})})}const Be="constellation",$e=24;function De({mode:o,initialView:e,currentRoute:i,onNavigate:t,className:a=""}){const n=X(),[r,h]=Z(),u=l.useRef(null),c=l.useRef(null),[p,g]=l.useState(!0),[m,f]=l.useState(r.get("view")||e||Be),[w,x]=l.useState("medium"),[k,O]=l.useState(null),[E,H]=l.useState(""),[M,G]=l.useState(null),[W,Q]=l.useState(()=>typeof window<"u"?!localStorage.getItem("mapMenuOnboardingDismissed"):!0),[V,R]=l.useState(60);l.useEffect(()=>{const d=ge(),b=ye(d);x(b)},[]),l.useEffect(()=>{if(!u.current)return;let d=!0;const b=u.current;return(async()=>{for(g(!0),c.current&&(c.current.dispose(),c.current=null);b.firstChild;)b.removeChild(b.firstChild);const L=o==="compact"?B():_(),j=o==="compact"?"lite":w;try{const T=D.start("mapMenu.rendererInit"),C=await we(m,j);if(!d){C.dispose();return}if(await C.initialize(b,L),C.onNodeClick(v=>{t?t(v.route):n(v.route)}),C.onNodeHover(O),i){const v=L.nodes.find(K=>K.route===i);v&&C.setActiveNode(v.id)}c.current=C,T(),j!=="lite"&&setTimeout(async()=>{const v=await be();R(v),v<$e&&d&&x("lite")},1e3),g(!1)}catch{x("lite"),g(!1)}})(),()=>{d=!1,c.current?.dispose()}},[m,w,o,i,n,t]),l.useEffect(()=>{if(!u.current||!c.current)return;const d=new ResizeObserver(b=>{for(const P of b){const{width:L,height:j}=P.contentRect;c.current?.resize(L,j)}});return d.observe(u.current),()=>d.disconnect()},[]),l.useEffect(()=>{h(d=>(d.set("view",m),d),{replace:!0})},[m,h]),l.useEffect(()=>{c.current?.setSearchFilter(E)},[E]),l.useEffect(()=>{c.current?.setHighlightedCategory(M)},[M]),l.useEffect(()=>{const d=setInterval(()=>{c.current&&R(c.current.getFPS())},1e3);return()=>clearInterval(d)},[]);const Y=l.useCallback(d=>{Ce(d)},[]),q=l.useCallback(()=>{Q(!1),localStorage.setItem("mapMenuOnboardingDismissed","true")},[]),U=l.useCallback(()=>{x(d=>d==="lite"?"high":"lite")},[]),J=o==="compact"?B():_();return s.jsxs("div",{className:`
        relative flex flex-col overflow-hidden rounded-glass-xl
        bg-void-base border border-glass-default
        ${o==="compact"?"w-full h-[200px] max-w-md":"w-full h-full min-h-[500px]"}
        ${a}
      `,role:"navigation","aria-label":"Interactive map navigation",children:[s.jsxs("div",{className:"absolute top-4 left-4 right-4 z-10 flex flex-wrap items-center gap-3",children:[s.jsx(Re,{currentView:m,onViewChange:f,onViewHover:Y,disabled:p}),o==="full"&&s.jsx(Pe,{value:E,onChange:H,placeholder:"Search features..."}),s.jsx("div",{className:"ml-auto",children:s.jsx(Ae,{level:w,fps:V,onToggle:U})})]}),s.jsx("div",{ref:u,className:"flex-1 min-h-0","aria-busy":p,children:s.jsx(S,{children:p&&s.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-5",children:s.jsx(_e,{mode:o})})})}),o==="full"&&s.jsx(Te,{categories:J.categories,selectedCategory:M,onCategorySelect:G}),s.jsx(S,{children:k&&s.jsx(Fe,{node:k})}),s.jsx(S,{children:W&&o==="full"&&s.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`
              absolute bottom-20 left-1/2 -translate-x-1/2 z-20
              bg-glass-white-10 backdrop-blur-glass-md
              border border-glass-default rounded-glass-lg
              px-5 py-3 flex items-center gap-4
            `,role:"dialog","aria-label":"Navigation tips",children:[s.jsx("p",{className:"text-white/80 text-sm",children:"Navigate MuscleMap visually! Click on any node to explore."}),s.jsx("button",{onClick:q,className:`
                px-4 py-1.5 rounded-glass-md
                bg-brand-blue-500 hover:bg-brand-blue-600
                text-white text-sm font-semibold
                transition-colors duration-fast
              `,children:"Got it"})]})}),o==="full"&&!p&&s.jsx("div",{className:"absolute bottom-4 left-4 text-white/30 text-xs",children:"Scroll to zoom â€¢ Drag to rotate"})]})}function Oe(){const o=ee(),[e,i]=F.useState(!1),t=async()=>{document.fullscreenElement?(await document.exitFullscreen(),i(!1)):(await document.documentElement.requestFullscreen(),i(!0))};return F.useEffect(()=>{const a=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",a),()=>document.removeEventListener("fullscreenchange",a)},[]),s.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-void-base",children:[s.jsx("header",{className:`
        fixed top-0 left-0 right-0 z-50
        bg-glass-dark-30 backdrop-blur-glass-lg
        border-b border-glass-default
      `,children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[s.jsxs(te,{to:"/dashboard",className:`
              flex items-center gap-2 px-3 py-1.5 rounded-glass-md
              text-white/70 hover:text-white hover:bg-glass-white-5
              transition-colors duration-fast
            `,children:[s.jsx(de,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Back"})]}),s.jsx("h1",{className:"text-white font-semibold",children:"Explore MuscleMap"}),s.jsx("button",{onClick:t,className:`
              flex items-center gap-2 px-3 py-1.5 rounded-glass-md
              text-white/70 hover:text-white hover:bg-glass-white-5
              transition-colors duration-fast
            `,"aria-label":e?"Exit fullscreen":"Enter fullscreen",children:e?s.jsx(he,{className:"w-4 h-4"}):s.jsx(ue,{className:"w-4 h-4"})})]})}),s.jsx("main",{className:"pt-14 h-screen",children:s.jsx(De,{mode:"full",currentRoute:o.pathname,className:"h-full rounded-none"})})]})}const qe=Object.freeze(Object.defineProperty({__proto__:null,default:Oe},Symbol.toStringTag,{value:"Module"}));export{qe as M,I as g,D as p};
