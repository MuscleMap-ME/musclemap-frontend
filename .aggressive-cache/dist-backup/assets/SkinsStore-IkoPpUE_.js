import{r,j as e,L as y}from"./react-vendor-D1NxaRNd.js";import{c as i}from"./recharts-vendor-BziRPEEi.js";import{K as F,A as K,m as b}from"./index-IJRH5ohh.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./d3-vendor-mcDw60ct.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";const n={Back:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})}),Check:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Lock:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Sparkle:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Close:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})},c={common:{label:"Common",color:"from-gray-500 to-gray-600",border:"border-gray-500/30",bg:"bg-gray-500/10"},uncommon:{label:"Uncommon",color:"from-green-500 to-emerald-600",border:"border-green-500/30",bg:"bg-green-500/10"},rare:{label:"Rare",color:"from-blue-500 to-cyan-600",border:"border-blue-500/30",bg:"bg-blue-500/10"},epic:{label:"Epic",color:"from-purple-500 to-violet-600",border:"border-purple-500/30",bg:"bg-purple-500/10"},legendary:{label:"Legendary",color:"from-amber-400 to-orange-500",border:"border-amber-500/30",bg:"bg-amber-500/10"}},V=["all","dashboard_theme","avatar_frame","badge","effect"],Y=[{id:"store",label:"Store"},{id:"owned",label:"Owned"},{id:"unlockable",label:"Unlockable"}];function ae(){const{token:l}=F(),[v,N]=r.useState([]),[d,S]=r.useState([]),[C,L]=r.useState([]),[q,z]=r.useState([]),[B,A]=r.useState(!0),[g,R]=r.useState("store"),[h,$]=r.useState("all"),[p,O]=r.useState("all"),[a,m]=r.useState(null),[f,E]=r.useState(null);r.useEffect(()=>{x()},[]);const x=async()=>{try{const[s,t,o,u,T]=await Promise.all([fetch("/api/skins",{headers:{Authorization:`Bearer ${l}`}}),fetch("/api/skins/owned",{headers:{Authorization:`Bearer ${l}`}}),fetch("/api/skins/equipped",{headers:{Authorization:`Bearer ${l}`}}),fetch("/api/skins/unlockable",{headers:{Authorization:`Bearer ${l}`}}),fetch("/api/economy/wallet",{headers:{Authorization:`Bearer ${l}`}})]),[W,U,I,G,H]=await Promise.all([s.json(),t.json(),o.json(),u.json(),T.json()]);N(W.skins||[]),S(U.skins||[]),L(I.skins||[]),z(G.skins||[]),E(H)}catch{}finally{A(!1)}},P=async s=>{try{(await(await fetch(`/api/skins/${s}/purchase`,{method:"POST",headers:{Authorization:`Bearer ${l}`}})).json()).success&&(m(null),x())}catch{}},_=async s=>{try{(await(await fetch(`/api/skins/${s}/equip`,{method:"POST",headers:{Authorization:`Bearer ${l}`}})).json()).success&&x()}catch{}},M=async s=>{try{(await(await fetch(`/api/skins/${s}/unequip`,{method:"POST",headers:{Authorization:`Bearer ${l}`}})).json()).success&&x()}catch{}},j=()=>{let s=[];switch(g){case"store":s=v;break;case"owned":s=d;break;case"unlockable":s=q;break}return h!=="all"&&(s=s.filter(t=>t.category===h)),p!=="all"&&(s=s.filter(t=>t.rarity===p)),s},k=s=>d.some(t=>t.id===s),w=s=>C.some(t=>t.id===s),D=({skin:s})=>{const t=c[s.rarity]||c.common,o=k(s.id),u=w(s.id);return e.jsxs(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.02},onClick:()=>m(s),className:i("relative overflow-hidden rounded-2xl border cursor-pointer transition-all",t.border,t.bg),children:[u&&e.jsx("div",{className:"absolute top-2 right-2 z-10 w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center",children:e.jsx(n.Check,{})}),e.jsx("div",{className:i("h-24 bg-gradient-to-br",t.color,"opacity-20")}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:i("px-2 py-0.5 text-xs font-medium rounded-full bg-gradient-to-r text-white",t.color),children:t.label}),o&&e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-white/10",children:"Owned"})]}),e.jsx("h3",{className:"font-semibold mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2",children:s.description}),!o&&e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsxs("span",{className:"font-bold",children:[s.price," credits"]}),s.unlock_requirement&&e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(n.Lock,{}),s.credits_required," generated"]})]})]})]})};return B?e.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white pb-8",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-[#0a0a0f]/80 backdrop-blur-xl border-b border-white/5",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(y,{to:"/dashboard",className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(n.Back,{})}),e.jsx("h1",{className:"text-xl font-semibold",children:"Customization"})]}),e.jsxs(y,{to:"/wallet",className:"flex items-center gap-2 px-3 py-2 bg-white/5 hover:bg-white/10 rounded-xl transition-all",children:[e.jsx(n.Sparkle,{}),e.jsx("span",{className:"font-semibold",children:f?.wallet?.balance||0})]})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-6",children:[e.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-xl mb-6",children:Y.map(s=>e.jsxs("button",{onClick:()=>R(s.id),className:i("flex-1 py-2.5 text-sm font-medium rounded-lg transition-all",g===s.id?"bg-white/10 text-white":"text-gray-400 hover:text-white"),children:[s.label,s.id==="owned"&&d.length>0&&e.jsx("span",{className:"ml-2 px-1.5 py-0.5 text-xs bg-white/10 rounded-full",children:d.length})]},s.id))}),e.jsx("div",{className:"flex flex-wrap gap-3 mb-6",children:e.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-xl",children:["all",...Object.keys(c)].map(s=>e.jsx("button",{onClick:()=>O(s),className:i("px-3 py-1.5 text-sm font-medium rounded-lg transition-all capitalize",p===s?"bg-white/10 text-white":"text-gray-400 hover:text-white"),children:s},s))})}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-6 scrollbar-hide",children:V.map(s=>e.jsx("button",{onClick:()=>$(s),className:i("px-4 py-2 text-sm font-medium rounded-xl whitespace-nowrap transition-all capitalize",h===s?"bg-violet-600 text-white":"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10"),children:s.replace("_"," ")},s))}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:j().map(s=>e.jsx(D,{skin:s},s.id))}),j().length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx(n.Sparkle,{}),e.jsx("p",{className:"text-gray-400 mt-2",children:"No items found"})]})]}),e.jsx(K,{children:a&&e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>m(null),children:e.jsxs(b.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:s=>s.stopPropagation(),className:"bg-[#12121a] border border-white/10 rounded-2xl w-full max-w-md overflow-hidden",children:[e.jsx("div",{className:i("h-32 bg-gradient-to-br",c[a.rarity]?.color||"from-gray-500 to-gray-600")}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:i("px-2 py-0.5 text-xs font-medium rounded-full bg-gradient-to-r text-white",c[a.rarity]?.color),children:c[a.rarity]?.label}),e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-white/10 capitalize",children:a.category?.replace("_"," ")})]}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:a.name}),e.jsx("p",{className:"text-gray-400 mb-6",children:a.description}),k(a.id)?e.jsx("div",{className:"space-y-3",children:w(a.id)?e.jsx("button",{onClick:()=>M(a.id),className:"w-full py-3 bg-white/10 hover:bg-white/20 rounded-xl font-semibold transition-all",children:"Unequip"}):e.jsx("button",{onClick:()=>_(a.id),className:"w-full py-3 bg-violet-600 hover:bg-violet-700 rounded-xl font-semibold transition-all",children:"Equip"})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Price"}),e.jsxs("span",{className:"text-xl font-bold",children:[a.price," credits"]})]}),a.unlock_requirement?e.jsxs("div",{className:"p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-2 text-amber-400 mb-2",children:[e.jsx(n.Lock,{}),e.jsx("span",{className:"font-medium",children:"Unlock Required"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Generate ",a.credits_required," credits to unlock this item"]})]}):e.jsx("button",{onClick:()=>P(a.id),disabled:(f?.wallet?.balance||0)<a.price,className:"w-full py-3 bg-violet-600 hover:bg-violet-700 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl font-semibold transition-all",children:"Purchase"})]})]}),e.jsx("button",{onClick:()=>m(null),className:"absolute top-4 right-4 p-2 rounded-xl bg-black/20 hover:bg-black/40 transition-all",children:e.jsx(n.Close,{})})]})})})]})}export{ae as default};
