import{ae as u,ag as i,ah as y}from"./index-DbqQayjh.js";const n={enabled:!1,preferences:null,goals:null,todaysMeals:[],todaysSummary:null,selectedDate:new Date().toISOString().split("T")[0],streaks:null,archetypeProfile:null,isLoading:!1,error:null,quickLogOpen:!1,quickLogMealType:"lunch",searchQuery:"",searchResults:[],recentFoods:[],frequentFoods:[]},t=u(i((e,r)=>({...n,setEnabled:a=>e({enabled:a}),setPreferences:a=>e({preferences:a,enabled:a?.enabled??!1}),setGoals:a=>e({goals:a}),setTodaysSummary:a=>e({todaysSummary:a}),setTodaysMeals:a=>e({todaysMeals:a}),addMealToToday:a=>e(o=>({todaysMeals:[...o.todaysMeals,a],todaysSummary:o.todaysSummary?{...o.todaysSummary,totalCalories:o.todaysSummary.totalCalories+a.totalCalories,totalProteinG:o.todaysSummary.totalProteinG+a.totalProteinG,totalCarbsG:o.todaysSummary.totalCarbsG+a.totalCarbsG,totalFatG:o.todaysSummary.totalFatG+a.totalFatG,mealCount:o.todaysSummary.mealCount+1}:null})),removeMealFromToday:a=>e(o=>{const s=o.todaysMeals.find(l=>l.id===a);return s?{todaysMeals:o.todaysMeals.filter(l=>l.id!==a),todaysSummary:o.todaysSummary?{...o.todaysSummary,totalCalories:o.todaysSummary.totalCalories-s.totalCalories,totalProteinG:o.todaysSummary.totalProteinG-s.totalProteinG,totalCarbsG:o.todaysSummary.totalCarbsG-s.totalCarbsG,totalFatG:o.todaysSummary.totalFatG-s.totalFatG,mealCount:o.todaysSummary.mealCount-1}:null}:o}),updateMealInToday:(a,o)=>e(s=>({todaysMeals:s.todaysMeals.map(l=>l.id===a?{...l,...o}:l)})),setSelectedDate:a=>e({selectedDate:a}),setStreaks:a=>e({streaks:a}),setArchetypeProfile:a=>e({archetypeProfile:a}),setLoading:a=>e({isLoading:a}),setError:a=>e({error:a}),clearError:()=>e({error:null}),openQuickLog:(a="lunch")=>e({quickLogOpen:!0,quickLogMealType:a}),closeQuickLog:()=>e({quickLogOpen:!1}),setSearchQuery:a=>e({searchQuery:a}),setSearchResults:a=>e({searchResults:a}),setRecentFoods:a=>e({recentFoods:a}),setFrequentFoods:a=>e({frequentFoods:a}),loadDashboard:a=>e({enabled:a.enabled,preferences:a.preferences,goals:a.goals,todaysSummary:a.todaySummary,todaysMeals:a.todaySummary?.meals||[],streaks:a.streaks,archetypeProfile:a.archetypeProfile,recentFoods:a.recentMeals||[]}),reset:()=>e(n),getRemainingCalories:()=>{const{todaysSummary:a,goals:o}=r();return o?(o.calories||0)-(a?.totalCalories||0):0},getRemainingProtein:()=>{const{todaysSummary:a,goals:o}=r();return o?(o.proteinG||0)-(a?.totalProteinG||0):0},getRemainingCarbs:()=>{const{todaysSummary:a,goals:o}=r();return o?(o.carbsG||0)-(a?.totalCarbsG||0):0},getRemainingFat:()=>{const{todaysSummary:a,goals:o}=r();return o?(o.fatG||0)-(a?.totalFatG||0):0},getCalorieProgress:()=>{const{todaysSummary:a,goals:o}=r();return o?.calories?Math.min(100,(a?.totalCalories||0)/o.calories*100):0},getProteinProgress:()=>{const{todaysSummary:a,goals:o}=r();return o?.proteinG?Math.min(100,(a?.totalProteinG||0)/o.proteinG*100):0},getCarbsProgress:()=>{const{todaysSummary:a,goals:o}=r();return o?.carbsG?Math.min(100,(a?.totalCarbsG||0)/o.carbsG*100):0},getFatProgress:()=>{const{todaysSummary:a,goals:o}=r();return o?.fatG?Math.min(100,(a?.totalFatG||0)/o.fatG*100):0}}),{name:"nutrition-storage",storage:y(()=>localStorage),partialize:e=>({enabled:e.enabled,selectedDate:e.selectedDate,recentFoods:e.recentFoods.slice(0,10)})})),m=()=>t(e=>e.enabled),d=()=>t(e=>e.preferences),S=()=>t(e=>e.goals),g=()=>t(e=>e.todaysSummary),f=()=>t(e=>e.todaysMeals),G=()=>t(e=>e.streaks),p=()=>t(e=>e.archetypeProfile),F=()=>t(e=>e.quickLogOpen),M=()=>t(e=>e.quickLogMealType),C=()=>t(e=>e.recentFoods),P=()=>t(e=>e.frequentFoods);export{S as a,g as b,t as c,F as d,M as e,C as f,P as g,f as h,G as i,p as j,d as k,m as u};
