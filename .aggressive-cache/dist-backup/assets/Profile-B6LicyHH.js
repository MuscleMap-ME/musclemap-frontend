import{r as i,j as e,L as z}from"./react-vendor-D847gc3Q.js";import{G as B,i as c}from"./index-MC6c9alI.js";import{a as _,b as E}from"./sanitize-CfVRSXz9.js";import"./LevelUpEffect-BZgulBsP.js";import"./LootDrop-CykAwyFM.js";import{X as I}from"./XPProgress-BHYmMqBR.js";import{W as $}from"./WeeklyHeatmap-BGHzi2nT.js";import{M as O}from"./MuscleViewer-DeJ89Z2Y.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BNHFeEEc.js";import"./reactflow-vendor-5ig9bY2l.js";import"./d3-vendor-DkU_Wy0v.js";import"./recharts-vendor-d8oTApeF.js";const J=[{id:"back_pain",name:"Back Pain",icon:"ğŸ¤´"},{id:"knee_issue",name:"Knee Issues",icon:"ğŸ¦µ"},{id:"shoulder_injury",name:"Shoulder Injury",icon:"ğŸ’ª"},{id:"wrist_pain",name:"Wrist Pain",icon:"ğŸ–"},{id:"limited_mobility",name:"Limited Mobility",icon:"ğŸ¦¼\uFEFF"},{id:"heart_condition",name:"Heart Condition",icon:"â¤ï¸"},{id:"breathing",name:"Breathing Issues",icon:"ğŸ«"},{id:"pregnant",name:"Pregnant",icon:"ğŸ¤°"}],W=[{id:"dumbbells",name:"Dumbbells",icon:"ğŸª¦"},{id:"barbell",name:"Barbell",icon:"ğŸ‹"},{id:"kettlebells",name:"Kettlebells",icon:"ğŸ”¹"},{id:"pullup_bar",name:"Pull-up Bar",icon:"ğŸªµ"},{id:"bench",name:"Bench",icon:"ğŸª°"},{id:"resistance_bands",name:"Resistance Bands",icon:"ğŸ¯"},{id:"jump_rope",name:"Jump Rope",icon:"ğŸª¢"},{id:"yoga_mat",name:"Yoga Mat",icon:"ğŸ¤¾"}];function se(){const{token:d,user:S,login:q}=B(),[a,n]=i.useState(null),[u,P]=i.useState([]),[x,C]=i.useState([]),[A,p]=i.useState(!0),[h,g]=i.useState(!1),[r,M]=i.useState("profile"),[T,b]=i.useState(!1),[y,v]=i.useState({}),j=i.useCallback(async()=>{if(!d){p(!1);return}try{const[s,t,l]=await Promise.all([c.profile.get(),c.profile.avatars().catch(()=>({avatars:[]})),c.profile.themes().catch(()=>({themes:[]}))]);n({...s,limitations:JSON.parse(s.limitations||"[]"),equipment_inventory:JSON.parse(s.equipment_inventory||"[]")}),P(t.avatars||[]),C(l.themes||[])}catch{}finally{p(!1)}},[d]),f=i.useCallback(async()=>{try{const t=await(await fetch("/api/muscles/activations")).json();if(t.data&&Array.isArray(t.data)){const l={};t.data.forEach(w=>{l[w.muscleId]=w.activation}),v(l)}}catch{v({chest:65,front_delts:45,biceps:30,abs:20,quads:50,lats:35,traps:40,glutes:55})}},[]),N=i.useMemo(()=>Object.entries(y).map(([s,t])=>({id:s,intensity:t/100,isPrimary:t>50})),[y]);i.useEffect(()=>{j(),f()},[j,f]);async function L(){g(!0);try{const s={...a,username:_(a.username||""),age:E(a.age,{min:1,max:150,defaultValue:null}),gender:_(a.gender||""),limitations:JSON.stringify(a.limitations),equipment_inventory:JSON.stringify(a.equipment_inventory)};await c.profile.update(s),q({...S,...a},d),b(!0),setTimeout(()=>b(!1),2e3)}catch{}g(!1)}function k(s,t){return s.includes(t)?s.filter(l=>l!==t):[...s,t]}if(A)return e.jsx("div",{className:"min-h-screen bg-gray-900 text-white flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-3xl",children:"ğŸ‘¤ Loading..."})});const o=a?.level||1,m={common:"bg-gray-600",uncommon:"bg-green-600",rare:"bg-blue-600",epic:"bg-purple-600",legendary:"bg-yellow-500"};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white pb-24",children:[T&&e.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 bg-green-500 px-8 py-4 rounded-2xl font-bold animate-bounce",children:"âœˆ Saved!"}),e.jsx("header",{className:"bg-gray-900/80 backdrop-blur-lg p-4 sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[e.jsx(z,{to:"/dashboard",className:"text-blue-400",children:"â† Back"}),e.jsx("h1",{className:"text-xl font-bold",children:"ğŸ‘¤â€ğŸ’ª Profile"}),e.jsx("button",{onClick:L,disabled:h,className:"bg-green-600 px-4 py-2 rounded-full font-bold",children:h?"...":"Save"})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto p-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-600 to-pink-600 rounded-2xl p-6 mb-6 text-center",children:[e.jsx("div",{className:"text-6xl mb-2",children:a?.avatar_id?"ğŸ‰":"ğŸ‘€"}),e.jsx("div",{className:"text-2xl font-bold",children:a?.username}),e.jsx(I,{currentXP:a?.xp||0,xpForNextLevel:1e3,level:o,levelTitle:o<=5?"Beginner":o<=15?"Intermediate":o<=30?"Advanced":"Elite",colorScheme:"light"})]}),e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsx("h3",{className:"text-sm text-gray-400 uppercase mb-3",children:"This Week's Activity"}),e.jsx($,{data:a?.weeklyActivity||[2,1,3,0,2,1,0],colorScheme:"purple",showTooltip:!0})]}),e.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:["profile","physique","health","equipment","avatar","theme"].map(s=>e.jsx("button",{onClick:()=>M(s),className:`px-4 py-2 rounded-full font-bold capitalize whitespace-nowrap ${r===s?"bg-purple-600":"bg-gray-700"}`,children:s==="physique"?"ğŸ’ª Physique":s},s))}),r==="profile"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Age"}),e.jsx("input",{type:"number",value:a?.age||"",onChange:s=>n({...a,age:Number(s.target.value)}),className:"w-full bg-gray-800 rounded-xl p-4 text-lg",placeholder:"Enter your age"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Gender"}),e.jsx("div",{className:"grid grid-cols-3 gap-2 mt-2",children:["male","female","other"].map(s=>e.jsx("button",{onClick:()=>n({...a,gender:s}),className:`p-3 rounded-xl font-bold capitalize ${a?.gender===s?"bg-purple-600":"bg-gray-700"}`,children:s},s))})]})]}),r==="physique"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Your Physique"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Based on your training history"})]}),e.jsx("div",{className:"bg-gray-800 rounded-2xl p-4",children:e.jsx(O,{muscles:N,mode:"card",interactive:!0,showLabels:!0,autoRotate:!0,initialView:"front",className:"w-full max-w-[300px] mx-auto",style:{height:360}})}),e.jsxs("div",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h4",{className:"text-sm text-gray-400 uppercase mb-3",children:"Muscle Development"}),e.jsx("div",{className:"space-y-3",children:N.slice(0,6).map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-white/80 text-sm w-24 capitalize",children:s.id.replace(/_/g," ")}),e.jsx("div",{className:"flex-1 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full rounded-full bg-gradient-to-r from-purple-500 to-pink-500",style:{width:`${s.intensity*100}%`}})}),e.jsxs("span",{className:"text-white/60 text-xs w-10 text-right",children:[Math.round(s.intensity*100),"%"]})]},s.id))})]}),e.jsx("div",{className:"bg-gradient-to-br from-purple-600/20 to-pink-600/20 rounded-2xl p-4 border border-purple-500/30",children:e.jsxs("p",{className:"text-sm text-gray-300",children:["ğŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Your physique visualization updates based on your workout history. Train consistently to see your progress!"]})})]}),r==="health"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"Select any limitations so we can adjust your workouts:"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:J.map(s=>e.jsxs("button",{onClick:()=>n({...a,limitations:k(a?.limitations||[],s.id)}),className:`p-4 rounded-xl text-left transition-all ${(a?.limitations||[]).includes(s.id)?"bg-red-600 ring-2 ring-red-400":"bg-gray-700"}`,children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsx("span",{className:"ml-2 font-bold",children:s.name})]},s.id))})]}),r==="equipment"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"What equipment do you have access to?"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:W.map(s=>e.jsxs("button",{onClick:()=>n({...a,equipment_inventory:k(a?.equipment_inventory||[],s.id)}),className:`p-4 rounded-xl text-left transition-all ${(a?.equipment_inventory||[]).includes(s.id)?"bg-green-600 ring-2 ring-green-400":"bg-gray-700"}`,children:[e.jsx("span",{className:"text-2xl",children:s.icon}),e.jsx("span",{className:"ml-2 font-bold",children:s.name})]},s.id))})]}),r==="avatar"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"Choose your mascot (unlock more by leveling up!):"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:u.length>0?u.map(s=>{const t=s.unlock_level>o;return e.jsxs("button",{onClick:()=>!t&&n({...a,avatar_id:s.id}),disabled:t,className:`p-4 rounded-2xl text-center transition-all ${t?"opacity-40 cursor-not-allowed bg-gray-800":a?.avatar_id===s.id?"bg-purple-600 ring-2 ring-purple-400":"bg-gray-700 hover:bg-gray-600"}`,children:[e.jsx("div",{className:"text-4xl mb-2",children:t?"ğŸ”’":"ğŸ¾"}),e.jsx("div",{className:"font-bold text-sm",children:s.name}),e.jsx("div",{className:`text-xs mt-1 px-2 py-1 rounded-full inline-block ${m[s.rarity]||"rarityColors.common"}`,children:s.rarity}),t&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Lvl ",s.unlock_level]})]},s.id)}):e.jsx("div",{className:"col-span-3 text-center text-gray-500 py-8",children:"No avatars available yet"})})]}),r==="theme"&&e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400 mb-4",children:"Choose your app theme:"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:x.length>0?x.map(s=>{const t=s.unlock_level>o,l=JSON.parse(s.colors||"{}");return e.jsxs("button",{onClick:()=>!t&&n({...a,theme:s.id}),disabled:t,className:`p-4 rounded-2xl text-center transition-all ${t?"opacity-40 cursor-not-allowed":a?.theme===s.id?"ring-2 ring-purple-400":""}`,style:{background:l.primary},children:[e.jsx("div",{className:"h-8 w-full rounded-lg mb-2",style:{background:l.accent}}),e.jsx("div",{className:"font-bold",children:s.name}),e.jsx("div",{className:`text-xs mt-1 px-2 py-1 rounded-full inline-block ${m[s.rarity]||m.common}`,children:s.rarity}),t&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Lvl ",s.unlock_level]})]},s.id)}):e.jsx("div",{className:"col-span-2 text-center text-gray-500 py-8",children:"No themes available yet"})})]})]})]})}export{se as default};
