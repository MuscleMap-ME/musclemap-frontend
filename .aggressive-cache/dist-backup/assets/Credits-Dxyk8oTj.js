import{r as a,j as e,L as j}from"./react-vendor-D1NxaRNd.js";import{H as y}from"./index-DJ0LhdQR.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-BziRPEEi.js";function B(){const{token:o}=y(),[m,u]=a.useState([]),[b,p]=a.useState(0),[d,h]=a.useState(100),[r,c]=a.useState(null),[i,l]=a.useState(null);a.useEffect(()=>{const s=new URLSearchParams(window.location.search);s.get("success")&&l({t:"Payment successful! Credits added.",o:!0}),s.get("canceled")&&l({t:"Payment canceled.",o:!1}),f()},[o]);async function f(){const[s,n]=await Promise.all([fetch("/api/credits/pricing"),fetch("/api/credits/balance",{headers:{Authorization:"Bearer "+o}})]),t=await s.json(),g=await n.json();u(t.packs||[]),h(t.foundersRemaining||0),p(g.balance||0)}async function x(s){c(s);try{const t=await(await fetch("/api/credits/create-checkout",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+o},body:JSON.stringify({packId:s})})).json();t.url?window.location.href=t.url:l({t:t.error?.message||t.error||"Failed",o:!1})}catch{l({t:"Network error",o:!1})}c(null)}return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-purple-900/20 to-gray-900 text-white pb-12",children:[i&&e.jsx("div",{className:`fixed top-20 left-1/2 -translate-x-1/2 z-50 px-8 py-4 rounded-2xl shadow-2xl text-lg font-bold ${i.o?"bg-green-500":"bg-red-500"}`,children:i.t}),e.jsx("header",{className:"bg-gray-900/80 backdrop-blur-lg p-5 sticky top-0 z-10 border-b border-gray-700",children:e.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[e.jsx(j,{to:"/dashboard",className:"text-blue-400 text-lg",children:"â† Back"}),e.jsx("h1",{className:"text-2xl font-bold",children:"ðŸ’³ Credits"}),e.jsx("div",{className:"bg-purple-600 px-4 py-2 rounded-full font-bold",children:b.toLocaleString()})]})}),e.jsxs("div",{className:"max-w-5xl mx-auto p-6",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Power Your Journey"}),e.jsx("p",{className:"text-gray-400",children:"1 credit = 1% progress toward your goals. Every credit represents real work."})]}),d>0&&e.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 rounded-3xl p-8 mb-8 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-6xl",children:"ðŸ‘‘"}),e.jsx("h3",{className:"text-2xl font-bold",children:"Founding Member"}),e.jsx("p",{className:"opacity-90",children:"Lifetime access + unlimited credits"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-4xl font-bold",children:"$49.99"}),e.jsxs("div",{className:"text-sm opacity-80",children:[d,"/100 remaining"]})]})]}),e.jsx("button",{onClick:()=>x("founder"),disabled:r==="founder",className:"w-full bg-black/30 hover:bg-black/50 py-4 rounded-2xl font-bold text-lg transition-all",children:r==="founder"?"Processing...":"Become a Founder"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:m.filter(s=>s.id!=="founder").map(s=>e.jsxs("div",{className:`bg-gray-800 rounded-2xl p-6 shadow-xl ${s.popular?"ring-2 ring-purple-500":""}`,children:[s.popular&&e.jsx("div",{className:"bg-purple-500 text-xs px-3 py-1 rounded-full inline-block mb-3 font-bold",children:"MOST POPULAR"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:s.name}),e.jsxs("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:[s.credits.toLocaleString()," ",e.jsx("span",{className:"text-lg text-gray-400",children:"credits"})]}),e.jsxs("div",{className:"text-2xl font-bold mb-4",children:["$",(s.price/100).toFixed(2)]}),e.jsx("button",{onClick:()=>x(s.id),disabled:r===s.id,className:"w-full bg-purple-600 hover:bg-purple-700 py-3 rounded-xl font-bold transition-all",children:r===s.id?"Processing...":"Buy Now"})]},s.id))})]})]})}export{B as default};
