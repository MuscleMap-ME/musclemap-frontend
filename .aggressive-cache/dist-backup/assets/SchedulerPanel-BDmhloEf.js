import{r as i,j as e}from"./react-vendor-D1NxaRNd.js";import{G as $}from"./GlassSurface-BMiMerMg.js";import{L as E}from"./loader-circle-DwvpjhR_.js";import{H as P,P as B,X as z,E as q,Z as Q,a8 as U}from"./index-DMo71FHX.js";import{R as V}from"./refresh-cw-BWkjF4vB.js";import{T as Y}from"./triangle-alert-DXNthorc.js";import{P as M}from"./pause-CWE9ZmX2.js";import{C as D}from"./circle-x-B9zEt_jx.js";import{T as _}from"./timer-BduYOuo0.js";import{C as L}from"./chevron-down-Cui-E_Zg.js";import{C as I}from"./chevron-right-BC1VSzgZ.js";import{H as O}from"./history-D6LETEnA.js";import{P as ee}from"./pen-DhfJ4-9_.js";import{T as se}from"./trash-2-BbjoCw6c.js";import{C as R}from"./circle-check-big-Csod5jFR.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./recharts-vendor-BziRPEEi.js";import"./d3-vendor-mcDw60ct.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";const N="/api/admin/scheduler",te=[{label:"Every minute",value:"* * * * *"},{label:"Every 5 minutes",value:"*/5 * * * *"},{label:"Every 15 minutes",value:"*/15 * * * *"},{label:"Every 30 minutes",value:"*/30 * * * *"},{label:"Every hour",value:"0 * * * *"},{label:"Every 6 hours",value:"0 */6 * * *"},{label:"Every 12 hours",value:"0 */12 * * *"},{label:"Daily at midnight",value:"0 0 * * *"},{label:"Daily at 6 AM",value:"0 6 * * *"},{label:"Weekly on Sunday",value:"0 0 * * 0"},{label:"Monthly on 1st",value:"0 0 1 * *"}];function G(s){if(!s)return"Invalid cron expression";const h=s.split(" ");if(h.length!==5)return"Invalid cron expression";const[n,c,r,x,m]=h;if(s==="* * * * *")return"Every minute";if(s.startsWith("*/")&&h.slice(1).every(l=>l==="*")){const l=n.replace("*/","");return`Every ${l} minute${l!=="1"?"s":""}`}if(n==="0"&&c.startsWith("*/")&&r==="*"&&x==="*"&&m==="*"){const l=c.replace("*/","");return`Every ${l} hour${l!=="1"?"s":""}`}if(n==="0"&&c!=="*"&&r==="*"&&x==="*"&&m==="*")return`Daily at ${c.padStart(2,"0")}:00`;if(n==="0"&&c==="0"&&r==="*"&&x==="*"&&m!=="*")return`Weekly on ${["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][parseInt(m)]||m}`;if(n==="0"&&c==="0"&&r!=="*"&&x==="*"&&m==="*")return`Monthly on day ${r}`;let o="";return n!=="*"&&(o+=`At minute ${n}`),c!=="*"&&(o+=o?`, hour ${c}`:`At hour ${c}`),r!=="*"&&(o+=`, on day ${r}`),x!=="*"&&(o+=`, in month ${x}`),m!=="*"&&(o+=`, on weekday ${m}`),o||"Custom schedule"}function T(s){if(!s)return"N/A";const h=new Date(s);if(isNaN(h.getTime()))return"N/A";const c=h-new Date,r=Math.round(c/6e4);if(r>0&&r<60)return`in ${r} min${r!==1?"s":""}`;if(r>=60&&r<1440){const x=Math.round(r/60);return`in ${x} hour${x!==1?"s":""}`}return h.toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function F(s){return!s&&s!==0?"N/A":s<1e3?`${s}ms`:s<6e4?`${(s/1e3).toFixed(1)}s`:`${(s/6e4).toFixed(1)}m`}function ae({status:s}){const h={active:{color:"bg-green-500/20 text-green-400",icon:R,label:"Active"},paused:{color:"bg-yellow-500/20 text-yellow-400",icon:M,label:"Paused"},running:{color:"bg-blue-500/20 text-blue-400",icon:E,label:"Running",animate:!0},error:{color:"bg-red-500/20 text-red-400",icon:D,label:"Error"},disabled:{color:"bg-gray-500/20 text-gray-400",icon:M,label:"Disabled"}},n=h[s]||h.disabled,c=n.icon;return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${n.color}`,children:[e.jsx(c,{className:`w-3 h-3 ${n.animate?"animate-spin":""}`}),n.label]})}function re({job:s,onToggle:h,onRunNow:n,onEdit:c,onDelete:r,loading:x}){const[m,o]=i.useState(!1),l=s.status==="running";return e.jsxs("div",{className:"p-4 rounded-lg bg-white/5 border border-white/10 hover:border-white/20 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-medium text-white truncate",children:s.name}),e.jsx(ae,{status:s.status})]}),s.description&&e.jsx("p",{className:"text-xs text-gray-400 mt-1 truncate",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>n(s.id),disabled:x||l,className:"p-1.5 rounded bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 transition-colors disabled:opacity-50",title:"Run Now",children:l?e.jsx(E,{className:"w-4 h-4 animate-spin"}):e.jsx(Q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>h(s.id,s.status!=="active"),disabled:x||l,className:`p-1.5 rounded transition-colors disabled:opacity-50 ${s.status==="active"?"bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400":"bg-green-500/20 hover:bg-green-500/30 text-green-400"}`,title:s.status==="active"?"Pause":"Enable",children:s.status==="active"?e.jsx(M,{className:"w-4 h-4"}):e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c(s),disabled:x||l,className:"p-1.5 rounded bg-white/5 hover:bg-white/10 text-gray-400 transition-colors disabled:opacity-50",title:"Edit",children:e.jsx(ee,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>r(s.id),disabled:x||l,className:"p-1.5 rounded bg-red-500/20 hover:bg-red-500/30 text-red-400 transition-colors disabled:opacity-50",title:"Delete",children:e.jsx(se,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsxs("div",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),"Cron"]}),e.jsx("div",{className:"text-white font-mono mt-0.5",children:s.cron}),e.jsx("div",{className:"text-gray-500 mt-0.5",children:G(s.cron)})]}),e.jsxs("div",{className:"bg-white/5 rounded p-2",children:[e.jsxs("div",{className:"text-gray-400 flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),"Next Run"]}),e.jsx("div",{className:"text-white mt-0.5",children:T(s.nextRun)})]})]}),s.lastRun&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/5",children:[e.jsxs("button",{onClick:()=>o(!m),className:"w-full flex items-center justify-between text-xs text-gray-400 hover:text-gray-300",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(O,{className:"w-3 h-3"}),"Last run: ",T(s.lastRun),s.lastDuration&&e.jsxs("span",{className:"text-gray-500",children:["(",F(s.lastDuration),")"]})]}),m?e.jsx(L,{className:"w-3 h-3"}):e.jsx(I,{className:"w-3 h-3"})]}),m&&s.history?.length>0&&e.jsx("div",{className:"mt-2 space-y-1",children:s.history.slice(0,5).map((g,j)=>e.jsxs("div",{className:`flex items-center justify-between text-xs px-2 py-1 rounded ${g.success?"bg-green-500/10":"bg-red-500/10"}`,children:[e.jsxs("span",{className:g.success?"text-green-400":"text-red-400",children:[g.success?e.jsx(R,{className:"w-3 h-3 inline mr-1"}):e.jsx(D,{className:"w-3 h-3 inline mr-1"}),T(g.timestamp)]}),e.jsx("span",{className:"text-gray-400",children:F(g.duration)})]},j))})]})]})}function ne({job:s,onSave:h,onClose:n,loading:c}){const[r,x]=i.useState({name:s?.name||"",description:s?.description||"",cron:s?.cron||"0 * * * *",handler:s?.handler||"",enabled:s?.status==="active"||!s}),[m,o]=i.useState("preset"),[l,g]=i.useState({}),[j,v]=i.useState([]),[H,C]=i.useState(!0);i.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("musclemap-auth");let p={};if(d){const S=JSON.parse(d);S?.state?.token&&(p={Authorization:`Bearer ${S.state.token}`})}const A=await fetch(`${N}/commands`,{headers:p});if(A.ok){const S=await A.json();v(S.commands||[])}}catch{}finally{C(!1)}})()},[]);const w=(t,d)=>{x(p=>({...p,[t]:d})),g(p=>({...p,[t]:null}))},k=t=>{x(d=>({...d,cron:t.value}))},b=()=>{const t={};return r.name.trim()||(t.name="Name is required"),r.cron.trim()||(t.cron="Cron expression is required"),r.handler.trim()||(t.handler="Handler is required"),r.cron.split(" ").length!==5&&(t.cron="Invalid cron expression (must have 5 parts)"),g(t),Object.keys(t).length===0},J=t=>{t.preventDefault(),b()&&h({...r,id:s?.id})};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:e.jsxs("div",{className:"w-full max-w-lg bg-gray-900/95 border border-white/10 rounded-xl shadow-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/10",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-cyan-400"}),s?"Edit Job":"Add New Job"]}),e.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-white/10 transition-colors",children:e.jsx(z,{className:"w-5 h-5 text-gray-400"})})]}),e.jsxs("form",{onSubmit:J,className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Job Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>w("name",t.target.value),placeholder:"e.g., Daily Cleanup",className:`w-full px-3 py-2 bg-white/5 border rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50 ${l.name?"border-red-500":"border-white/10"}`}),l.name&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:l.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:r.description,onChange:t=>w("description",t.target.value),placeholder:"What does this job do?",className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-cyan-500/50"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Handler *"}),H?e.jsxs("div",{className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-gray-400 flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 animate-spin"}),"Loading available handlers..."]}):e.jsxs("select",{value:r.handler,onChange:t=>w("handler",t.target.value),className:`w-full px-3 py-2 bg-white/5 border rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-cyan-500/50 ${l.handler?"border-red-500":"border-white/10"}`,children:[e.jsx("option",{value:"",className:"bg-gray-900 text-gray-400",children:"Select a handler..."}),j.map(t=>e.jsx("option",{value:t.name,className:"bg-gray-900 text-white",children:t.name},t.name))]}),l.handler&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:l.handler}),r.handler&&j.find(t=>t.name===r.handler)&&e.jsx("p",{className:"text-xs text-cyan-400 mt-1",children:j.find(t=>t.name===r.handler)?.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Schedule *"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("button",{type:"button",onClick:()=>o("preset"),className:`px-3 py-1 text-xs rounded transition-colors ${m==="preset"?"bg-cyan-500/20 text-cyan-400":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:"Presets"}),e.jsx("button",{type:"button",onClick:()=>o("custom"),className:`px-3 py-1 text-xs rounded transition-colors ${m==="custom"?"bg-cyan-500/20 text-cyan-400":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:"Custom"})]}),m==="preset"?e.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto p-1",children:te.map(t=>e.jsxs("button",{type:"button",onClick:()=>k(t),className:`px-3 py-2 text-left rounded border transition-colors ${r.cron===t.value?"bg-cyan-500/20 border-cyan-500/50 text-cyan-400":"bg-white/5 border-white/10 text-gray-300 hover:bg-white/10"}`,children:[e.jsx("div",{className:"text-sm",children:t.label}),e.jsx("div",{className:"text-xs font-mono text-gray-500",children:t.value})]},t.value))}):e.jsxs("div",{children:[e.jsx("input",{type:"text",value:r.cron,onChange:t=>w("cron",t.target.value),placeholder:"* * * * *",className:`w-full px-3 py-2 bg-white/5 border rounded-lg text-white font-mono focus:outline-none focus:ring-2 focus:ring-cyan-500/50 ${l.cron?"border-red-500":"border-white/10"}`}),e.jsxs("div",{className:"mt-2 p-2 bg-white/5 rounded text-xs",children:[e.jsx("div",{className:"text-gray-400 mb-1",children:"Format: minute hour day-of-month month day-of-week"}),e.jsxs("div",{className:"flex gap-2 text-gray-500 font-mono",children:[e.jsx("span",{children:"0-59"}),e.jsx("span",{children:"0-23"}),e.jsx("span",{children:"1-31"}),e.jsx("span",{children:"1-12"}),e.jsx("span",{children:"0-6"})]})]})]}),l.cron&&e.jsx("p",{className:"text-xs text-red-400 mt-1",children:l.cron}),e.jsx("div",{className:"mt-2 p-2 bg-cyan-500/10 border border-cyan-500/20 rounded",children:e.jsxs("div",{className:"text-xs text-cyan-400 flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),G(r.cron)]})})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"Enable Job"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Job will run according to schedule"})]}),e.jsx("button",{type:"button",onClick:()=>w("enabled",!r.enabled),className:`relative w-11 h-6 rounded-full transition-colors ${r.enabled?"bg-cyan-500":"bg-gray-600"}`,children:e.jsx("div",{className:`absolute top-1 w-4 h-4 rounded-full bg-white transition-transform ${r.enabled?"left-6":"left-1"}`})})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-white/10",children:[e.jsx("button",{type:"button",onClick:n,className:"flex-1 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-2 bg-cyan-500 hover:bg-cyan-600 rounded-lg text-white font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4"}),s?"Update Job":"Create Job"]})})]})]})]})})}function le({history:s,loading:h}){return h?e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsx(E,{className:"w-6 h-6 animate-spin text-cyan-400"})}):!s||s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(O,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No execution history yet"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-400 border-b border-white/10",children:[e.jsx("th",{className:"pb-2 pr-4",children:"Job"}),e.jsx("th",{className:"pb-2 pr-4",children:"Status"}),e.jsx("th",{className:"pb-2 pr-4",children:"Started"}),e.jsx("th",{className:"pb-2 pr-4",children:"Duration"}),e.jsx("th",{className:"pb-2",children:"Result"})]})}),e.jsx("tbody",{className:"divide-y divide-white/5",children:s.map((n,c)=>e.jsxs("tr",{className:"hover:bg-white/5",children:[e.jsx("td",{className:"py-2 pr-4",children:e.jsx("span",{className:"font-medium text-white",children:n.jobName})}),e.jsx("td",{className:"py-2 pr-4",children:n.success?e.jsxs("span",{className:"inline-flex items-center gap-1 text-green-400",children:[e.jsx(R,{className:"w-3 h-3"}),"Success"]}):e.jsxs("span",{className:"inline-flex items-center gap-1 text-red-400",children:[e.jsx(D,{className:"w-3 h-3"}),"Failed"]})}),e.jsx("td",{className:"py-2 pr-4 text-gray-300",children:T(n.timestamp)}),e.jsx("td",{className:"py-2 pr-4 text-gray-300 font-mono",children:F(n.duration)}),e.jsx("td",{className:"py-2 text-gray-400 truncate max-w-xs",title:n.result||n.error,children:n.error?e.jsx("span",{className:"text-red-400",children:n.error}):n.result||"-"})]},c))})]})})}function $e(){const[s,h]=i.useState([]),[n,c]=i.useState([]),[r,x]=i.useState(!0),[m,o]=i.useState(!1),[l,g]=i.useState(!1),[j,v]=i.useState(null),[H,C]=i.useState(null),[w,k]=i.useState(!1),[b,J]=i.useState("jobs"),t=i.useCallback(()=>{try{const a=localStorage.getItem("musclemap-auth");if(a){const y=JSON.parse(a);if(y?.state?.token)return{Authorization:`Bearer ${y.state.token}`}}const u=localStorage.getItem("musclemap_token");return u?{Authorization:`Bearer ${u}`}:{}}catch{return{}}},[]),d=i.useCallback(async()=>{try{const a=await fetch(`${N}/jobs`,{headers:t()});if(a.ok){const y=((await a.json()).items||[]).map(f=>({...f,cron:f.cronExpression,handler:f.command,status:f.enabled?"active":"disabled"}));h(y),v(null)}else{const u=await a.json().catch(()=>({}));v(u.error||"Failed to fetch jobs")}}catch{v("Failed to connect to scheduler API")}finally{x(!1)}},[t]),p=i.useCallback(async()=>{g(!0);try{const a=await fetch(`${N}/history`,{headers:t()});if(a.ok){const y=((await a.json()).items||[]).map(f=>({...f,success:f.status==="success",timestamp:f.startedAt,duration:f.durationMs,result:f.output}));c(y)}}catch{}finally{g(!1)}},[t]),A=i.useCallback(async(a,u)=>{o(!0);try{(await fetch(`${N}/jobs/${a}/${u?"enable":"disable"}`,{method:"POST",headers:t()})).ok&&d()}catch{}finally{o(!1)}},[t,d]),S=i.useCallback(async a=>{o(!0);try{(await fetch(`${N}/jobs/${a}/run`,{method:"POST",headers:t()})).ok&&(d(),p())}catch{}finally{o(!1)}},[t,d,p]),X=i.useCallback(async a=>{if(window.confirm("Are you sure you want to delete this job?")){o(!0);try{(await fetch(`${N}/jobs/${a}`,{method:"DELETE",headers:t()})).ok&&d()}catch{}finally{o(!1)}}},[t,d]),Z=i.useCallback(async a=>{o(!0);try{const u=!!a.id;(await fetch(u?`${N}/jobs/${a.id}`:`${N}/jobs`,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json",...t()},body:JSON.stringify({name:a.name,description:a.description,cron:a.cron,handler:a.handler,enabled:a.enabled})})).ok&&(k(!1),C(null),d())}catch{}finally{o(!1)}},[t,d]),K=i.useCallback(a=>{C(a),k(!0)},[]),W=i.useCallback(()=>{C(null),k(!0)},[]);return i.useEffect(()=>{d(),p();const a=setInterval(()=>{d()},3e4);return()=>clearInterval(a)},[d,p]),r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(E,{className:"w-8 h-8 animate-spin text-cyan-400"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(P,{className:"w-6 h-6 text-cyan-400"}),"Scheduled Tasks"]}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Manage automated jobs and cron schedules"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-white/5 hover:bg-white/10 border border-white/10 transition-colors",children:[e.jsx(V,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Refresh"})]}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-cyan-500 hover:bg-cyan-600 transition-colors",children:[e.jsx(B,{className:"w-4 h-4 text-white"}),e.jsx("span",{className:"text-sm text-white font-medium",children:"Add Job"})]})]})]}),j&&e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[e.jsx(Y,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-red-400",children:j})}),e.jsx("button",{onClick:()=>v(null),className:"p-1 hover:bg-white/10 rounded transition-colors",children:e.jsx(z,{className:"w-4 h-4 text-red-400"})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs($,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(P,{className:"w-4 h-4 text-cyan-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Total Jobs"})]}),e.jsx("div",{className:"text-2xl font-bold text-white",children:s.length})]}),e.jsxs($,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(q,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Active"})]}),e.jsx("div",{className:"text-2xl font-bold text-green-400",children:s.filter(a=>a.status==="active").length})]}),e.jsxs($,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(M,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Paused"})]}),e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:s.filter(a=>a.status==="paused"||a.status==="disabled").length})]}),e.jsxs($,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(D,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Errors"})]}),e.jsx("div",{className:"text-2xl font-bold text-red-400",children:s.filter(a=>a.status==="error").length})]})]}),e.jsxs($,{className:"p-4",children:[e.jsxs("button",{onClick:()=>J(b==="jobs"?"":"jobs"),className:"w-full flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-cyan-400"}),"Scheduled Jobs (",s.length,")"]}),b==="jobs"?e.jsx(L,{className:"w-4 h-4 text-gray-400"}):e.jsx(I,{className:"w-4 h-4 text-gray-400"})]}),b==="jobs"&&(s.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(P,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No scheduled jobs yet"}),e.jsxs("button",{onClick:W,className:"mt-3 inline-flex items-center gap-2 px-4 py-2 bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-400 rounded-lg transition-colors",children:[e.jsx(B,{className:"w-4 h-4"}),"Create your first job"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.map(a=>e.jsx(re,{job:a,onToggle:A,onRunNow:S,onEdit:K,onDelete:X,loading:m},a.id))}))]}),e.jsxs($,{className:"p-4",children:[e.jsxs("button",{onClick:()=>{J(b==="history"?"":"history"),b!=="history"&&p()},className:"w-full flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[e.jsx(O,{className:"w-4 h-4 text-purple-400"}),"Execution History"]}),b==="history"?e.jsx(L,{className:"w-4 h-4 text-gray-400"}):e.jsx(I,{className:"w-4 h-4 text-gray-400"})]}),b==="history"&&e.jsx(le,{history:n,loading:l})]}),w&&e.jsx(ne,{job:H,onSave:Z,onClose:()=>{k(!1),C(null)},loading:m})]})}export{$e as default};
