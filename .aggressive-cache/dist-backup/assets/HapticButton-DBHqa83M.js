import{r as s,j as e}from"./react-vendor-D1NxaRNd.js";import{u as k,h as g,m as u,ar as Y}from"./index-Bd5HTF5q.js";import{R as A}from"./refresh-cw-Bwf2mURf.js";function V({children:m,onRefresh:i,isRefreshing:w,threshold:r=80,refreshText:y="Refreshing...",pullText:j="Pull to refresh",releaseText:n="Release to refresh",enabled:o=!0,className:v=""}){const{reducedMotion:h}=k(),[t,f]=s.useState(0),[b,x]=s.useState(!1),c=s.useRef(!1),p=s.useRef(0),d=s.useRef(null),a=w??b,l=t>=r&&!a,S=Math.min(t/r,1),M=s.useCallback(N=>{if(!o||a)return;const R=d.current;R&&R.scrollTop>0||(c.current=!0,p.current=N.touches[0].clientY)},[o,a]),$=s.useCallback(N=>{if(!c.current||!o||a)return;const C=N.touches[0].clientY-p.current;if(C<0){f(0);return}const T=C*.5;f(Math.min(T,r*2)),T>=r&&t<r&&g("selection")},[o,a,r,t]),P=s.useCallback(async()=>{if(c.current){if(c.current=!1,l){g("medium"),x(!0);try{await i()}finally{x(!1)}}f(0)}},[l,i]);return e.jsxs("div",{ref:d,className:`relative overflow-auto ${v}`,onTouchStart:M,onTouchMove:$,onTouchEnd:P,style:{touchAction:t>0?"none":"auto"},children:[e.jsx(u.div,{initial:!1,animate:{height:a?r:t,opacity:t>10||a?1:0},transition:{duration:h?0:.2},className:"flex items-center justify-center overflow-hidden bg-slate-900/50",children:e.jsx("div",{className:"flex flex-col items-center gap-2 py-3",children:a?e.jsxs(e.Fragment,{children:[e.jsx(u.div,{animate:{rotate:360},transition:{repeat:1/0,duration:1,ease:"linear"},children:e.jsx(A,{className:"w-6 h-6 text-blue-400"})}),e.jsx("span",{className:"text-sm text-gray-400",children:y})]}):e.jsxs(e.Fragment,{children:[e.jsx(u.div,{animate:{rotate:l?180:0,scale:l?1.1:1},transition:{duration:h?0:.2},children:e.jsx(Y,{className:`w-6 h-6 transition-colors ${l?"text-blue-400":"text-gray-500"}`})}),e.jsx("span",{className:"text-sm text-gray-400",children:l?n:j}),e.jsx("div",{className:"w-24 h-1 bg-white/10 rounded-full overflow-hidden",children:e.jsx(u.div,{className:"h-full bg-blue-500",initial:!1,animate:{width:`${S*100}%`}})})]})})}),m]})}const D={primary:"bg-blue-600 hover:bg-blue-700 text-white border-transparent",secondary:"bg-white/10 hover:bg-white/20 text-white border-white/20",ghost:"bg-transparent hover:bg-white/10 text-gray-300 border-transparent",danger:"bg-red-600/90 hover:bg-red-700 text-white border-transparent"},z={sm:"px-3 py-1.5 text-sm min-h-[36px]",md:"px-4 py-2.5 text-base min-h-[44px]",lg:"px-6 py-3 text-lg min-h-[52px]"},B=s.forwardRef(({hapticType:m="light",hapticEnabled:i=!0,pressScale:w=.97,children:r,variant:y="primary",size:j="md",loading:n=!1,fullWidth:o=!1,className:v="",onClick:h,disabled:t,...f},b)=>{const{shouldAnimate:x}=k(),c=s.useCallback(d=>{i&&!t&&!n&&g(m),h?.(d)},[i,m,t,n,h]),p=s.useCallback(()=>{i&&!t&&!n&&g("selection")},[i,t,n]);return e.jsx(u.button,{ref:b,onClick:c,onTouchStart:p,disabled:t||n,whileTap:x&&!t&&!n?{scale:w}:void 0,transition:{type:"spring",stiffness:400,damping:25},className:`
          relative inline-flex items-center justify-center
          font-medium rounded-xl border
          transition-colors duration-150
          touch-action-manipulation
          -webkit-tap-highlight-color-transparent
          disabled:opacity-50 disabled:cursor-not-allowed
          ${D[y]}
          ${z[j]}
          ${o?"w-full":""}
          ${v}
        `,...f,children:n?e.jsxs(e.Fragment,{children:[e.jsx(u.span,{className:"absolute inset-0 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},children:e.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),e.jsx("span",{className:"invisible",children:r})]}):r})});B.displayName="HapticButton";export{V as P};
