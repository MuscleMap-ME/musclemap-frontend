const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ActivityFeed-BICSB7JP.js","assets/react-vendor-D847gc3Q.js","assets/index-Bo12JAoa.js","assets/date-vendor-C_JWt2cu.js","assets/leaflet-vendor-CIGW-MKW.css","assets/reactflow-vendor-B5DZHykP.css","assets/index-DJrURAX_.css","assets/ServerControl-DUfAiQQq.js","assets/GlassSurface-DZwHl8aR.js","assets/loader-circle-CUvIRgPZ.js","assets/server-BEGuONU-.js","assets/refresh-cw-R817xn-g.js","assets/database-1RYojYfc.js","assets/memory-stick-V7Hx8ri7.js","assets/hard-drive-JCK2VVHY.js","assets/chevron-down-D7JWDras.js","assets/chevron-right-TG3j_AlK.js","assets/square-CT7og6IP.js","assets/rotate-ccw-PrUWZQV0.js","assets/upload-Dn9nX5hg.js","assets/circle-check-big-BEs15i4R.js","assets/file-text-C-Zk0nzG.js","assets/git-branch-B9mN-0rs.js","assets/git-commit-horizontal-CN-hIr2Q.js","assets/terminal-kSuhhAbL.js","assets/triangle-alert-BAlmh7nn.js","assets/circle-x-QIRPBtg_.js","assets/DatabasePanel-BzZNhVx-.js","assets/trash-2-CTV8Tra7.js","assets/layers-C5AIMHYK.js","assets/chevron-left-Cfxnr0Zs.js","assets/SchedulerPanel-CGs9TlBh.js","assets/pause-M03Mbrde.js","assets/timer-GqPsA98M.js","assets/history-CX6cEo02.js","assets/pen-xp3hYw5o.js","assets/EnvPanel-2woBR9Xs.js","assets/shield-check-CuHOKjku.js","assets/key-DulNDo29.js","assets/shield-alert-BldXZkDv.js","assets/eye-Z6SnEzfE.js","assets/check-Qt-QyZdN.js","assets/copy-ssem13ar.js","assets/pen-line-wy6VkCg6.js","assets/save-FN_r6iOL.js","assets/DeployPanel-62xUqdRi.js","assets/MetricsPanel-C-1VunQI.js","assets/trending-down-CmbqyLir.js","assets/gauge-okefstbw.js","assets/wifi-CPpzeTPE.js","assets/arrow-up-down-BPkAXoxJ.js","assets/AlertsPanel-rXDbkK4Y.js","assets/send-L_LGTyQq.js","assets/info-D5NcjLyU.js","assets/lock-CsWYtTx2.js","assets/circle-alert-ockWcnUQ.js","assets/external-link-C9SdGjJw.js","assets/SecurityPanel--KcKX6kE.js","assets/monitor-CZfTCNOL.js","assets/FeatureFlagsPanel-CeZ4liV4.js","assets/funnel-MHSSU-RU.js","assets/LogsPanel-DIhnK6QO.js","assets/download-Cl18C_6Y.js","assets/BackupPanel-hCAZg8R5.js","assets/MarkdownEditor-C1AVBddi.js","assets/file-h70Ivujm.js","assets/UserAnalyticsPanel-CzCiBREV.js","assets/BuildDaemonPanel-CGhOmVgR.js"])))=>i.map(i=>d[i]);
import{c as R,e as Vs,aG as K,H as qs,aH as zs,Z as N,aE as B,v as Js,M as Z,q as A,o as Te,aI as me,aJ as xs,U as ee,aK as ms,aL as hs,aM as Hs,x as Ws,B as is,N as Qs,aN as se,J as Ce,L as _e,p as Ae,aF as Ys,X as ns,aO as Xs,aP as Ks,aQ as Zs,aR as et,aS as st,_ as b}from"./index-Bo12JAoa.js";import{r as t,j as e,L as v,a as tt}from"./react-vendor-D847gc3Q.js";import{G as o}from"./GlassSurface-DZwHl8aR.js";import{S as ps}from"./server-BEGuONU-.js";import{D as at}from"./database-1RYojYfc.js";import{F as lt,L as rt,A as it}from"./lock-CsWYtTx2.js";import{R as nt,T as ct}from"./terminal-kSuhhAbL.js";import{T as ot}from"./triangle-alert-BAlmh7nn.js";import{C as X}from"./chevron-right-TG3j_AlK.js";import{R as m}from"./refresh-cw-R817xn-g.js";import{A as dt,S as cs}from"./send-L_LGTyQq.js";import{R as xt,A as mt,f as ht,X as pt,Y as ut,e as gt,h as bt}from"./recharts-vendor-d8oTApeF.js";import{C as V}from"./circle-alert-ockWcnUQ.js";import{C as L}from"./circle-check-big-BEs15i4R.js";import{E as jt}from"./eye-Z6SnEzfE.js";import{E as _}from"./external-link-C9SdGjJw.js";import{L as yt}from"./loader-circle-CUvIRgPZ.js";const ft=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],vt=R("ellipsis-vertical",ft);const Nt=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],wt=R("file-search",Nt);const kt=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],te=R("gift",kt);const St=[["path",{d:"M6 16c5 0 7-8 12-8a4 4 0 0 1 0 8c-5 0-7-8-12-8a4 4 0 1 0 0 8",key:"18ogeb"}]],Re=R("infinity",St);const Ct=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],us=R("mail",Ct);const _t=[["rect",{width:"3",height:"8",x:"13",y:"2",rx:"1.5",key:"diqz80"}],["path",{d:"M19 8.5V10h1.5A1.5 1.5 0 1 0 19 8.5",key:"183iwg"}],["rect",{width:"3",height:"8",x:"8",y:"14",rx:"1.5",key:"hqg7r1"}],["path",{d:"M5 15.5V14H3.5A1.5 1.5 0 1 0 5 15.5",key:"76g71w"}],["rect",{width:"8",height:"3",x:"14",y:"13",rx:"1.5",key:"1kmz0a"}],["path",{d:"M15.5 19H14v1.5a1.5 1.5 0 1 0 1.5-1.5",key:"jc4sz0"}],["rect",{width:"8",height:"3",x:"2",y:"8",rx:"1.5",key:"1omvl4"}],["path",{d:"M8.5 5H10V3.5A1.5 1.5 0 1 0 8.5 5",key:"16f3cl"}]],$e=R("slack",_t);const At=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Et=R("toggle-left",At);const Tt=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Rt=R("user-plus",Tt);t.lazy(()=>b(()=>import("./ActivityFeed-BICSB7JP.js"),__vite__mapDeps([0,1,2,3,4,5,6])));const $t=t.lazy(()=>b(()=>import("./ServerControl-DUfAiQQq.js"),__vite__mapDeps([7,1,8,9,2,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,4,5,6]))),Mt=t.lazy(()=>b(()=>import("./DatabasePanel-BzZNhVx-.js"),__vite__mapDeps([27,1,8,9,2,12,28,11,25,26,10,29,15,16,14,30,4,5,6]))),Dt=t.lazy(()=>b(()=>import("./SchedulerPanel-CGs9TlBh.js"),__vite__mapDeps([31,1,8,9,2,11,25,32,26,33,15,16,34,35,28,20,4,5,6]))),Ft=t.lazy(()=>b(()=>import("./EnvPanel-2woBR9Xs.js"),__vite__mapDeps([36,1,8,9,2,26,11,37,38,15,16,25,34,20,39,40,41,42,43,28,44,4,5,6]))),Pt=t.lazy(()=>b(()=>import("./DeployPanel-62xUqdRi.js"),__vite__mapDeps([45,1,8,9,2,24,11,40,34,22,23,15,18,26,20,25,4,5,6]))),Ot=t.lazy(()=>b(()=>import("./MetricsPanel-C-1VunQI.js"),__vite__mapDeps([46,1,8,2,11,25,47,9,48,49,50,4,5,6]))),Lt=t.lazy(()=>b(()=>import("./AlertsPanel-rXDbkK4Y.js"),__vite__mapDeps([51,1,8,9,2,11,15,16,52,20,25,53,35,28,26,10,12,54,24,55,40,56,4,5,6]))),Ut=t.lazy(()=>b(()=>import("./SecurityPanel--KcKX6kE.js"),__vite__mapDeps([57,1,8,9,2,11,25,58,37,39,15,16,54,20,40,26,28,4,5,6]))),Bt=t.lazy(()=>b(()=>import("./FeatureFlagsPanel-CeZ4liV4.js"),__vite__mapDeps([59,1,8,9,2,11,41,60,15,16,35,28,25,4,5,6]))),It=t.lazy(()=>b(()=>import("./LogsPanel-DIhnK6QO.js"),__vite__mapDeps([61,1,8,24,2,11,29,9,32,62,53,25,55,60,15,16,4,5,6]))),Gt=t.lazy(()=>b(()=>import("./BackupPanel-hCAZg8R5.js"),__vite__mapDeps([63,1,8,9,2,54,11,19,14,62,20,26,18,28,25,4,5,6]))),Vt=t.lazy(()=>b(()=>import("./MarkdownEditor-C1AVBddi.js"),__vite__mapDeps([64,1,8,21,2,11,9,43,42,40,44,62,28,15,16,65,25,4,5,6]))),qt=t.lazy(()=>b(()=>import("./UserAnalyticsPanel-CzCiBREV.js"),__vite__mapDeps([66,1,8,11,2,25,9,47,16,10,12,54,24,52,55,20,40,56,4,5,6]))),zt=t.lazy(()=>b(()=>import("./BuildDaemonPanel-CGhOmVgR.js"),__vite__mapDeps([67,1,8,49,2,9,11,55,24,28,15,16,20,4,5,6]))),os=[{id:"unlimited_credits",name:"Unlimited Credits",icon:Re,color:"#fbbf24"},{id:"gift_credits",name:"Gift Credits",icon:te,color:"#10b981"},{id:"ban_user",name:"Ban Users",icon:Qs,color:"#ef4444"},{id:"grant_achievements",name:"Grant Achievements",icon:dt,color:"#8b5cf6"},{id:"broadcast",name:"Broadcast Message",icon:se,color:"#06b6d4"},{id:"system_override",name:"System Override",icon:N,color:"#f59e0b"}],xe=[{id:"overview",label:"Overview",icon:qs},{id:"server",label:"Server Control",icon:ps},{id:"database",label:"Database",icon:at},{id:"scheduler",label:"Scheduler",icon:zs},{id:"env",label:"Environment",icon:lt},{id:"deploy",label:"Deployments",icon:nt,link:"/empire/deploy"},{id:"build-daemon",label:"Build Daemon",icon:N},{id:"commands",label:"Command Center",icon:ct,link:"/empire/commands"},{id:"realtime-metrics",label:"Real-time Metrics",icon:B},{id:"alerts",label:"Alerts",icon:ot},{id:"security",label:"Security",icon:rt},{id:"feature-flags",label:"Feature Flags",icon:Et},{id:"logs",label:"Log Analysis",icon:wt},{id:"backup",label:"Backup & Recovery",icon:it},{id:"docs",label:"Documentation",icon:Js},{id:"feedback",label:"Feedback Queue",icon:Z},{id:"bug-tracker",label:"Bug Tracker",icon:A},{id:"user-analytics",label:"User Analytics",icon:Rt},{id:"analytics",label:"GA Analytics",icon:Te},{id:"metrics",label:"System Metrics",icon:me},{id:"scorecard",label:"Test Scorecard",icon:xs,link:"/empire/scorecard"},{id:"users",label:"Users",icon:ee},{id:"community",label:"Community",icon:ms},{id:"messages",label:"Messages",icon:us},{id:"economy",label:"Economy",icon:hs},{id:"avatar",label:"My Avatar",icon:K},{id:"slack",label:"Slack",icon:$e},{id:"settings",label:"Settings",icon:Hs}],U="G-S4RPD5JD5L";function x({title:d,value:l,icon:w,trend:y,trendValue:$,color:j="#8b5cf6",onClick:M}){return e.jsx(o,{className:`p-4 ${M?"cursor-pointer hover:bg-white/5 transition-colors":""}`,onClick:M,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:d}),e.jsx("div",{className:"text-2xl font-bold",style:{color:j},children:typeof l=="number"?l.toLocaleString():l}),y&&e.jsxs("div",{className:`flex items-center gap-1 text-xs mt-1 ${y==="up"?"text-green-400":"text-red-400"}`,children:[y==="up"?"↑":"↓"," ",$]})]}),w&&e.jsx("div",{className:"p-2 rounded-lg bg-white/5",style:{color:j},children:e.jsx(w,{className:"w-5 h-5"})})]})})}function Jt({icon:d,label:l,onClick:w,color:y="#8b5cf6"}){return e.jsxs("button",{onClick:w,className:"flex flex-col items-center gap-2 p-3 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${y}20`},children:e.jsx(d,{className:"w-5 h-5",style:{color:y}})}),e.jsx("span",{className:"text-xs text-gray-400",children:l})]})}function Ee({status:d,label:l}){const w={healthy:"bg-green-500",degraded:"bg-yellow-500",unhealthy:"bg-red-500"};return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${w[d]||"bg-gray-500"}`}),e.jsx("span",{className:"text-sm",children:l})]})}function ds({user:d,onAction:l}){return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center text-white font-bold",children:d.username?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d.displayName||d.username}),e.jsx("div",{className:"text-xs text-gray-400",children:d.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l("gift",d),className:"p-2 rounded-lg hover:bg-white/10 text-green-400",title:"Gift Credits",children:e.jsx(te,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>l("message",d),className:"p-2 rounded-lg hover:bg-white/10 text-blue-400",title:"Message",children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>l("more",d),className:"p-2 rounded-lg hover:bg-white/10 text-gray-400",children:e.jsx(vt,{className:"w-4 h-4"})})]})]})}function Ht(){const{user:d}=Vs(),[l,w]=t.useState("overview"),[y,$]=t.useState(!0),[j,M]=t.useState(null),[he,ae]=t.useState([]),[E,pe]=t.useState([]),[Me,De]=t.useState([]),[Fe,gs]=t.useState([]),[Pe,bs]=t.useState(null),[Oe,le]=t.useState([]),[re,ie]=t.useState(!1),[T,ue]=t.useState(""),[Le,Ue]=t.useState(!1),[Be,q]=t.useState(null),[ne,js]=t.useState(""),[ys,ge]=t.useState(!1),[I,Ie]=t.useState(null),[z,be]=t.useState(100),[D,fs]=t.useState(null),[Ge,vs]=t.useState([]),[k,J]=t.useState({type:null,status:null}),[i,Ve]=t.useState(null),[Ns,qe]=t.useState(!1),[ce,ze]=t.useState(""),[Je,He]=t.useState(!1),[u,ws]=t.useState(null),[je,ks]=t.useState([]),[h,G]=t.useState({status:"all",source:"all",priority:"all"}),[r,We]=t.useState(null),[Ss,ye]=t.useState(!1),[Qe,Cs]=t.useState([]),[fe,Ye]=t.useState(!1),[ve,_s]=t.useState([]),[S,As]=t.useState(null),[p,H]=t.useState({status:"all",severity:"all",type:"all"}),[g,Es]=t.useState(null),[oe,Xe]=t.useState("errors"),[Ne,Ts]=t.useState(0),n=t.useCallback(()=>{try{const s=localStorage.getItem("musclemap-auth");if(s){const c=JSON.parse(s)?.state?.token;if(c)return{Authorization:`Bearer ${c}`}}}catch{}return{}},[]),W=t.useCallback(async()=>{try{const s=await fetch("/metrics");if(s.ok){const a=await s.text(),c=Wt(a);M(c),ae(f=>{const Gs={time:new Date().toLocaleTimeString(),requests:c.musclemap_http_requests_total?.[0]?.value||0,connections:c.musclemap_db_connections_total?.[0]?.value||0};return[...f,Gs].slice(-30)})}}catch{}},[]),Ke=t.useCallback(async()=>{try{const s=await fetch("/api/admin-control/users?limit=20",{headers:n()});if(s.ok){const a=await s.json();pe(a.data||a.users||[])}}catch{}},[n]),Ze=t.useCallback(async()=>{try{const s=await fetch("/api/admin-control/audit/credits",{headers:n()});if(s.ok){const a=await s.json();bs(a)}}catch{}},[n]),es=t.useCallback(async()=>{try{const s=await fetch("/api/messaging/conversations",{headers:n()});if(s.ok){const c=(await s.json()).data||[];gs(c.map(f=>({id:f.id,content:f.lastMessage?.content||"No messages yet",createdAt:f.lastMessage?.createdAt||f.createdAt,participant:f.participant,unreadCount:f.unreadCount})))}}catch{}},[n]),ss=t.useCallback(async()=>{try{const s=await fetch("/api/notifications/unread-count",{headers:n()});if(s.ok){const a=await s.json();Ts(a.data?.count||0)}}catch{}},[n]),Q=t.useCallback(async()=>{try{const s=await fetch("/api/admin/feedback/stats",{headers:n()});if(s.ok){const a=await s.json();fs(a)}}catch{}},[n]),F=t.useCallback(async()=>{try{let s="/api/admin/feedback?limit=50";k.type&&(s+=`&type=${k.type}`),k.status&&(s+=`&status=${k.status}`);const a=await fetch(s,{headers:n()});if(a.ok){const c=await a.json();vs(c.items||[])}}catch{}},[n,k]),we=t.useCallback(async s=>{try{const a=await fetch(`/api/admin/feedback/${s}`,{headers:n()});if(a.ok){const c=await a.json();Ve(c),qe(!0)}}catch{}},[n]),ts=async s=>{try{const a=await fetch(`/api/admin/feedback/${s}/confirm-bug`,{method:"POST",headers:n()});if(a.ok){const c=await a.json();alert(`Bug confirmed! Job ID: ${c.jobId}`),F(),Q()}}catch{}},Rs=async(s,a)=>{try{(await fetch(`/api/admin/feedback/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json",...n()},body:JSON.stringify({status:a})})).ok&&(F(),Q(),i?.id===s&&we(s))}catch{}},$s=async()=>{if(!(!i||!ce.trim()))try{(await fetch(`/api/admin/feedback/${i.id}/respond`,{method:"POST",headers:{"Content-Type":"application/json",...n()},body:JSON.stringify({message:ce,is_internal:Je})})).ok&&(ze(""),He(!1),we(i.id))}catch{}},P=t.useCallback(async()=>{try{const s=await fetch("/api/admin/bugs/stats",{headers:n()});if(s.ok){const a=await s.json();ws(a)}}catch{}},[n]),C=t.useCallback(async()=>{try{let s="/api/admin/bugs?limit=100";h.status!=="all"&&(s+=`&status=${h.status}`),h.source!=="all"&&(s+=`&source=${h.source}`),h.priority!=="all"&&(s+=`&priority=${h.priority}`);const a=await fetch(s,{headers:n()});if(a.ok){const c=await a.json();ks(c.items||[])}}catch{}},[n,h]),ke=t.useCallback(async s=>{try{const a=await fetch(`/api/admin/bugs/${s}`,{headers:n()});if(a.ok){const c=await a.json();We(c),ye(!0)}}catch{}},[n]),as=t.useCallback(async()=>{try{const s=await fetch("/api/admin/bugs/timeline?limit=50",{headers:n()});if(s.ok){const a=await s.json();Cs(a.items||[])}}catch{}},[n]),O=t.useCallback(async()=>{try{let s="/api/errors/list?limit=100";p.status!=="all"&&(s+=`&status=${p.status}`),p.severity!=="all"&&(s+=`&severity=${p.severity}`),p.type!=="all"&&(s+=`&type=${p.type}`);const a=await fetch(s,{headers:n()});if(a.ok){const c=await a.json();_s(c.items||[])}}catch{}},[n,p]),Y=t.useCallback(async()=>{try{const s=await fetch("/api/errors/admin-stats",{headers:n()});if(s.ok){const a=await s.json();As(a)}}catch{}},[n]),ls=async s=>{try{const a=await fetch(`/api/errors/${s}/convert-to-bug`,{method:"POST",headers:{"Content-Type":"application/json",...n()},body:JSON.stringify({})});if(a.ok){const c=await a.json();c.data?.converted?(alert(`Bug report created: ${c.data.id}`),O(),Y(),C(),P()):alert("Bug report already exists")}}catch{alert("Failed to convert error to bug")}},Ms=async()=>{Ye(!0);try{const s=await fetch("/api/errors/sync-to-bugs",{method:"POST",headers:{"Content-Type":"application/json",...n()},body:JSON.stringify({severity:"high",hours:168})});if(s.ok){const a=await s.json();alert(`Synced errors to bugs: ${a.data?.created||0} created, ${a.data?.skipped||0} skipped`),P(),C(),Y(),O()}else alert("Failed to sync - check server logs")}catch{alert("Failed to sync bug reports")}finally{Ye(!1)}},Ds=async(s,a)=>{try{(await fetch(`/api/admin/bugs/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json",...n()},body:JSON.stringify({status:a})})).ok&&(C(),P(),r?.id===s&&ke(s))}catch{}},Fs=async(s,a,c)=>{try{(await fetch(`/api/admin/bugs/${s}`,{method:"PATCH",headers:{"Content-Type":"application/json",...n()},body:JSON.stringify({status:"resolved",resolutionType:a,resolutionNotes:c})})).ok&&(C(),P(),ye(!1))}catch{}},Ps=async()=>{if(!(!I||z<=0))try{(await fetch("/api/admin-control/credits/adjust",{method:"POST",headers:{"Content-Type":"application/json",...n()},body:JSON.stringify({userId:I.id,amount:z,reason:"Gift from owner",type:"admin_grant"})})).ok&&(ge(!1),Ie(null),be(100),alert(`Gifted ${z} credits to ${I.username}!`))}catch{}},rs=(s,a)=>{switch(s){case"gift":Ie(a),ge(!0);break;case"message":window.location.href=`/messages?user=${a.id}`;break}},Os=async()=>{if(!T){q("Please enter a Slack webhook URL");return}if(!T.startsWith("https://hooks.slack.com/")){q("Invalid Slack webhook URL. It should start with https://hooks.slack.com/");return}Ue(!0),q(null);try{const s=await fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:`:muscle: *MuscleMap.ME Connected!*
Your Empire dashboard is now linked to this Slack channel.`,username:"MuscleMap Bot",icon_emoji:":muscle:"})});if(s.ok||s.status===200)localStorage.setItem("musclemap_slack_webhook",T),ie(!0),le([{text:"MuscleMap.ME Connected! Your Empire dashboard is now linked.",user:"MuscleMap Bot",time:"Just now"}]);else{const a=await s.text();q(`Failed to connect: ${a||"Unknown error"}`)}}catch{localStorage.setItem("musclemap_slack_webhook",T),ie(!0),le([{text:"MuscleMap.ME Connected! Check your Slack channel for confirmation.",user:"MuscleMap Bot",time:"Just now"}])}finally{Ue(!1)}};if(t.useEffect(()=>{const s=localStorage.getItem("musclemap_slack_webhook");s&&(ue(s),ie(!0))},[]),t.useEffect(()=>{(async()=>{$(!0),await Promise.all([W(),Ke(),Ze(),es(),Q(),F(),ss()]),$(!1)})()},[W,Ke,Ze,es,Q,F,ss]),t.useEffect(()=>{F()},[k,F]),t.useEffect(()=>{l==="bug-tracker"&&(P(),C(),as(),Y(),O())},[l,P,C,as,Y,O]),t.useEffect(()=>{l==="bug-tracker"&&C()},[h,l,C]),t.useEffect(()=>{l==="bug-tracker"&&O()},[p,l,O]),t.useEffect(()=>{const s=setInterval(W,1e4);return()=>clearInterval(s)},[W]),!d?.is_admin&&!d?.is_owner&&!d?.roles?.includes("admin")&&!d?.roles?.includes("owner"))return e.jsx("div",{className:"min-h-screen bg-[#0a0a0f] text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(K,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Empire Access Required"}),e.jsx("p",{className:"text-gray-400",children:"Only the empire owner can access this panel."}),e.jsx(v,{to:"/dashboard",className:"mt-4 inline-block text-violet-400 hover:underline",children:"Return to Dashboard"})]})});const Ls=j?.musclemap_http_requests_total?.[0]?.value||0,Us=j?.musclemap_db_connections_total?.[0]?.value||0,Se=j?.musclemap_db_healthy?.[0]?.value===1,de=j?.musclemap_redis_connected?.[0]?.value===1,Bs=j?.musclemap_uptime_seconds?.[0]?.value||0,Is=s=>{const a=Math.floor(s/86400),c=Math.floor(s%86400/3600),f=Math.floor(s%3600/60);return a>0?`${a}d ${c}h`:c>0?`${c}h ${f}m`:`${f}m`};return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white flex",children:[e.jsxs("aside",{className:"w-64 border-r border-white/10 bg-[#0a0a0f]/80 backdrop-blur-xl flex flex-col",children:[e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center",children:e.jsx(K,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-lg",children:"Empire Control"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Master Panel"})]})]})}),e.jsx("nav",{className:"flex-1 p-2 overflow-y-auto",children:xe.map(s=>s.link?e.jsxs(v,{to:s.link,className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors mb-1 text-gray-400 hover:text-white hover:bg-white/5",children:[e.jsx(s.icon,{className:"w-5 h-5"}),e.jsx("span",{children:s.label}),e.jsx(X,{className:"w-4 h-4 ml-auto opacity-50"})]},s.id):e.jsxs("button",{onClick:()=>w(s.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-colors mb-1 ${l===s.id?"bg-violet-500/20 text-violet-400":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[e.jsx(s.icon,{className:"w-5 h-5"}),e.jsx("span",{children:s.label})]},s.id))}),e.jsxs("div",{className:"p-4 border-t border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center",children:d?.username?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d?.displayName||d?.username}),e.jsxs("div",{className:"text-xs text-yellow-400 flex items-center gap-1",children:[e.jsx(K,{className:"w-3 h-3"})," Owner"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx(Re,{className:"w-4 h-4 text-yellow-400"}),e.jsx("span",{children:"Unlimited Powers"})]})]})]}),e.jsxs("main",{className:"flex-1 overflow-y-auto",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-[#0a0a0f]/90 backdrop-blur-xl border-b border-white/10 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[xe.find(s=>s.id===l)?.icon&&tt.createElement(xe.find(s=>s.id===l).icon,{className:"w-6 h-6 text-violet-400"}),xe.find(s=>s.id===l)?.label]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ws,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),e.jsx("input",{type:"text",placeholder:"Search...",value:ne,onChange:s=>js(s.target.value),className:"bg-white/5 border border-white/10 rounded-lg pl-10 pr-4 py-2 text-sm focus:outline-none focus:border-violet-500 w-64"})]}),e.jsxs("button",{className:"p-2 rounded-lg hover:bg-white/10 relative",children:[e.jsx(is,{className:"w-5 h-5"}),Ne>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full text-[10px] flex items-center justify-center",children:Ne>9?"9+":Ne})]}),e.jsx("button",{onClick:W,className:"p-2 rounded-lg hover:bg-white/10",children:e.jsx(m,{className:`w-5 h-5 ${y?"animate-spin":""}`})})]})]})}),e.jsx("div",{className:"p-6",children:y&&!j?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-violet-400"})}):e.jsxs(e.Fragment,{children:[l==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(x,{title:"System Status",value:Se&&de?"Healthy":"Degraded",icon:ps,color:Se&&de?"#10b981":"#f59e0b"}),e.jsx(x,{title:"Uptime",value:Is(Bs),icon:B,color:"#06b6d4"}),e.jsx(x,{title:"Total Users",value:E.length,icon:ee,color:"#8b5cf6"}),e.jsx(x,{title:"Requests",value:Ls,icon:me,color:"#f59e0b"})]}),e.jsxs(o,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-yellow-400"}),"Owner Powers"]}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-6 gap-3",children:os.map(s=>e.jsx(Jt,{icon:s.icon,label:s.name,color:s.color,onClick:()=>{}},s.id))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(o,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Request Traffic"}),e.jsx("div",{className:"h-48",children:e.jsx(xt,{width:"100%",height:"100%",children:e.jsxs(mt,{data:he,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRequests",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),e.jsx(ht,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),e.jsx(pt,{dataKey:"time",stroke:"#666",fontSize:10}),e.jsx(ut,{stroke:"#666",fontSize:10}),e.jsx(gt,{contentStyle:{backgroundColor:"rgba(10,10,15,0.9)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px"}}),e.jsx(bt,{type:"monotone",dataKey:"requests",stroke:"#8b5cf6",fill:"url(#colorRequests)",name:"Requests"})]})})})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"System Health"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx(Ee,{status:Se?"healthy":"unhealthy",label:"PostgreSQL"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[Us," connections"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx(Ee,{status:de?"healthy":"unhealthy",label:"Redis"}),e.jsx("span",{className:"text-sm text-gray-400",children:de?"Connected":"Disconnected"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx(Ee,{status:"healthy",label:"API Server"}),e.jsx("span",{className:"text-sm text-gray-400",children:"Running"})]})]})]})]}),e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(ee,{className:"w-5 h-5 text-violet-400"}),"Recent Users"]}),e.jsxs(v,{to:"/admin-control",className:"text-sm text-violet-400 hover:underline flex items-center gap-1",children:["View All ",e.jsx(X,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"space-y-2",children:E.slice(0,5).map(s=>e.jsx(ds,{user:s,onAction:rs},s.id))})]})]}),l==="server"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx($t,{})}),l==="database"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Mt,{})}),l==="scheduler"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Dt,{})}),l==="env"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Ft,{})}),l==="deploy"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Pt,{})}),l==="build-daemon"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(zt,{})}),l==="realtime-metrics"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Ot,{})}),l==="user-analytics"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(qt,{})}),l==="alerts"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Lt,{})}),l==="security"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Ut,{})}),l==="feature-flags"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Bt,{})}),l==="logs"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(It,{})}),l==="backup"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Gt,{})}),l==="docs"&&e.jsx(t.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(m,{className:"w-8 h-8 animate-spin text-cyan-400"})}),children:e.jsx(Vt,{})}),l==="feedback"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(x,{title:"Total Feedback",value:D?.total||0,icon:Z,color:"#8b5cf6"}),e.jsx(x,{title:"Open Bugs",value:D?.unresolved_bugs||0,icon:A,color:"#ef4444",onClick:()=>J({type:"bug_report",status:"open"})}),e.jsx(x,{title:"Auto-Fix Queue",value:(D?.auto_fix_pending||0)+(D?.auto_fix_in_progress||0),icon:N,color:"#f59e0b"}),e.jsx(x,{title:"Pending Review",value:D?.pending_review||0,icon:Ce,color:"#06b6d4",onClick:()=>J({type:null,status:"open"})})]}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:[{type:"bug_report",label:"Bugs",icon:A,color:"#ef4444"},{type:"feature_request",label:"Features",icon:_e,color:"#10b981"},{type:"question",label:"Questions",icon:Ae,color:"#3b82f6"},{type:"general",label:"General",icon:se,color:"#8b5cf6"}].map(s=>e.jsxs("button",{onClick:()=>J(a=>({...a,type:a.type===s.type?null:s.type})),className:`p-3 rounded-lg border transition-all ${k.type===s.type?"border-violet-500 bg-violet-500/20":"border-white/10 bg-white/5 hover:bg-white/10"}`,children:[e.jsx(s.icon,{className:"w-5 h-5 mx-auto mb-1",style:{color:s.color}}),e.jsx("div",{className:"text-xs text-gray-400",children:s.label}),e.jsx("div",{className:"text-lg font-bold",children:D?.by_type?.[s.type]||0})]},s.type))}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["open","in_progress","confirmed","resolved","closed","wont_fix"].map(s=>e.jsxs("button",{onClick:()=>J(a=>({...a,status:a.status===s?null:s})),className:`px-3 py-1 rounded-full text-xs transition-colors ${k.status===s?"bg-violet-500 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[s.replace("_"," ")," (",D?.by_status?.[s]||0,")"]},s)),(k.type||k.status)&&e.jsx("button",{onClick:()=>J({type:null,status:null}),className:"px-3 py-1 rounded-full text-xs bg-red-500/20 text-red-400 hover:bg-red-500/30",children:"Clear filters"})]}),e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-semibold",children:"Feedback Items"}),e.jsx("button",{onClick:()=>{F(),Q()},className:"p-2 rounded-lg hover:bg-white/10",children:e.jsx(m,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:Ge.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No feedback items found"})]}):Ge.map(s=>e.jsx("div",{className:"p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>we(s.id),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.type==="bug_report"&&e.jsx(A,{className:"w-4 h-4 text-red-400"}),s.type==="feature_request"&&e.jsx(_e,{className:"w-4 h-4 text-green-400"}),s.type==="question"&&e.jsx(Ae,{className:"w-4 h-4 text-blue-400"}),s.type==="general"&&e.jsx(se,{className:"w-4 h-4 text-violet-400"}),e.jsx("span",{className:"font-medium truncate",children:s.title})]}),e.jsx("div",{className:"text-sm text-gray-400 truncate",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["@",s.user?.username]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()}),s.autoFixStatus&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{className:`flex items-center gap-1 ${s.autoFixStatus==="completed"?"text-green-400":s.autoFixStatus==="failed"?"text-red-400":s.autoFixStatus==="in_progress"?"text-yellow-400":"text-gray-400"}`,children:[e.jsx(N,{className:"w-3 h-3"}),s.autoFixStatus]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${s.status==="open"?"bg-blue-500/20 text-blue-400":s.status==="in_progress"?"bg-yellow-500/20 text-yellow-400":s.status==="confirmed"?"bg-orange-500/20 text-orange-400":s.status==="resolved"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:s.status}),s.type==="bug_report"&&s.status==="open"&&e.jsxs("button",{onClick:a=>{a.stopPropagation(),ts(s.id)},className:"px-2 py-1 rounded bg-orange-500/20 text-orange-400 text-xs hover:bg-orange-500/30 flex items-center gap-1",title:"Confirm bug for auto-fix",children:[e.jsx(Ys,{className:"w-3 h-3"}),"Fix"]})]})]})},s.id))})]})]}),Ns&&i&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"bg-[#0f0f15] border border-white/10 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-[#0f0f15] border-b border-white/10 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[i.type==="bug_report"&&e.jsx(A,{className:"w-5 h-5 text-red-400"}),i.type==="feature_request"&&e.jsx(_e,{className:"w-5 h-5 text-green-400"}),i.type==="question"&&e.jsx(Ae,{className:"w-5 h-5 text-blue-400"}),i.type==="general"&&e.jsx(se,{className:"w-5 h-5 text-violet-400"}),e.jsx("h2",{className:"font-bold text-lg",children:i.title})]}),e.jsx("button",{onClick:()=>{qe(!1),Ve(null)},className:"p-2 rounded-lg hover:bg-white/10",children:e.jsx(ns,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{value:i.status,onChange:s=>Rs(i.id,s.target.value),className:"bg-white/10 border border-white/10 rounded-lg px-3 py-1 text-sm",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"wont_fix",children:"Won't Fix"})]}),i.type==="bug_report"&&i.status==="open"&&e.jsxs("button",{onClick:()=>ts(i.id),className:"px-3 py-1 rounded-lg bg-orange-500/20 text-orange-400 text-sm hover:bg-orange-500/30 flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),"Confirm & Auto-Fix"]}),i.autoFixStatus&&e.jsxs("span",{className:`px-2 py-1 rounded text-xs ${i.autoFixStatus==="completed"?"bg-green-500/20 text-green-400":i.autoFixStatus==="failed"?"bg-red-500/20 text-red-400":i.autoFixStatus==="in_progress"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:["Auto-fix: ",i.autoFixStatus]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-violet-500 to-fuchsia-500 flex items-center justify-center text-white font-bold",children:i.user?.username?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:["@",i.user?.username]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(i.createdAt).toLocaleString()})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:i.description})]}),i.type==="bug_report"&&e.jsxs(e.Fragment,{children:[i.stepsToReproduce&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-1",children:"Steps to Reproduce"}),e.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:i.stepsToReproduce})]}),i.expectedBehavior&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-1",children:"Expected Behavior"}),e.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:i.expectedBehavior})]}),i.actualBehavior&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-1",children:"Actual Behavior"}),e.jsx("p",{className:"text-gray-300 whitespace-pre-wrap",children:i.actualBehavior})]})]}),(i.platform||i.userAgent)&&e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.platform&&e.jsxs("div",{className:"p-2 bg-white/5 rounded",children:[e.jsx("span",{className:"text-gray-500",children:"Platform:"})," ",i.platform]}),i.appVersion&&e.jsxs("div",{className:"p-2 bg-white/5 rounded",children:[e.jsx("span",{className:"text-gray-500",children:"Version:"})," ",i.appVersion]})]}),i.adminNotes&&e.jsxs("div",{className:"p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-yellow-400 mb-1 flex items-center gap-1",children:[e.jsx(V,{className:"w-4 h-4"}),"Admin Notes (Internal)"]}),e.jsx("p",{className:"text-gray-300 text-sm",children:i.adminNotes})]}),i.responses?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Conversation"}),e.jsx("div",{className:"space-y-2",children:i.responses.map(s=>e.jsxs("div",{className:`p-3 rounded-lg ${s.isInternal?"bg-yellow-500/10 border border-yellow-500/20":s.responderType==="admin"?"bg-violet-500/10 border border-violet-500/20":s.responderType==="system"?"bg-gray-500/10 border border-gray-500/20":"bg-white/5"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1 text-xs text-gray-400",children:[e.jsx("span",{className:"font-medium",children:s.responderType==="system"?"System":s.responderType==="admin"?`Admin (${s.responderUsername||"Unknown"})`:`@${s.responderUsername||"User"}`}),s.isInternal&&e.jsx("span",{className:"text-yellow-400",children:"(Internal)"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleString()})]}),e.jsx("p",{className:"text-gray-300 text-sm",children:s.message})]},s.id))})]}),i.agentJobs?.length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-400 mb-2 flex items-center gap-1",children:[e.jsx(N,{className:"w-4 h-4"}),"Auto-Fix Jobs"]}),e.jsx("div",{className:"space-y-2",children:i.agentJobs.map(s=>e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${s.status==="completed"?"bg-green-500/20 text-green-400":s.status==="failed"?"bg-red-500/20 text-red-400":s.status==="running"?"bg-yellow-500/20 text-yellow-400":"bg-gray-500/20 text-gray-400"}`,children:s.status}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleString()})]}),s.filesModified?.length>0&&e.jsxs("div",{className:"text-xs text-gray-400 mb-1",children:["Files: ",s.filesModified.join(", ")]}),s.deployed&&s.deployCommit&&e.jsxs("div",{className:"text-xs text-green-400",children:["Deployed: ",s.deployCommit]}),s.errorMessage&&e.jsxs("div",{className:"text-xs text-red-400 mt-1",children:["Error: ",s.errorMessage]})]},s.id))})]}),e.jsxs("div",{className:"border-t border-white/10 pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Add Response"}),e.jsx("textarea",{value:ce,onChange:s=>ze(s.target.value),placeholder:"Type your response...",className:"w-full bg-white/5 border border-white/10 rounded-lg p-3 text-sm resize-none h-24 focus:outline-none focus:border-violet-500"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-400 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Je,onChange:s=>He(s.target.checked),className:"rounded bg-white/10 border-white/20"}),"Internal note (not visible to user)"]}),e.jsxs("button",{onClick:$s,disabled:!ce.trim(),className:"px-4 py-2 bg-violet-500 hover:bg-violet-600 disabled:opacity-50 disabled:cursor-not-allowed rounded-lg text-sm flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"}),"Send"]})]})]})]})]})}),l==="bug-tracker"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-white/10 pb-4",children:[e.jsxs("button",{onClick:()=>Xe("errors"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${oe==="errors"?"bg-violet-500 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[e.jsx(V,{className:"w-4 h-4"}),"Cockatrice Errors",S?.totals?.unresolved>0&&e.jsx("span",{className:"px-1.5 py-0.5 bg-red-500 text-white text-xs rounded-full",children:S.totals.unresolved})]}),e.jsxs("button",{onClick:()=>Xe("bugs"),className:`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${oe==="bugs"?"bg-violet-500 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[e.jsx(A,{className:"w-4 h-4"}),"Bug Reports",u?.totals?.open>0&&e.jsx("span",{className:"px-1.5 py-0.5 bg-orange-500 text-white text-xs rounded-full",children:u.totals.open})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:Ms,disabled:fe,className:"px-4 py-2 bg-orange-500/20 text-orange-400 hover:bg-orange-500/30 rounded-lg text-sm flex items-center gap-2 disabled:opacity-50",children:[e.jsx(m,{className:`w-4 h-4 ${fe?"animate-spin":""}`}),fe?"Syncing...":"Sync to Bug Reports"]})]}),oe==="errors"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(x,{title:"Total Errors",value:S?.totals?.total||0,icon:V,color:"#ef4444"}),e.jsx(x,{title:"Unresolved",value:S?.totals?.unresolved||0,icon:V,color:"#f59e0b",onClick:()=>H({...p,status:"new"})}),e.jsx(x,{title:"Resolved",value:S?.totals?.resolved||0,icon:L,color:"#10b981",onClick:()=>H({...p,status:"resolved"})}),e.jsx(x,{title:"Today",value:S?.totals?.today||0,icon:Ce,color:"#06b6d4"}),e.jsx(x,{title:"Affected Users",value:S?.totals?.uniqueUsersThisWeek||0,icon:ee,color:"#8b5cf6"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(S?.byType||{}).map(([s,a])=>e.jsxs("button",{onClick:()=>H({...p,type:p.type===s?"all":s}),className:`px-3 py-1 rounded-full text-xs transition-colors ${p.type===s?"bg-violet-500 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[s," (",a,")"]},s))}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["all","critical","high","medium","low"].map(s=>e.jsxs("button",{onClick:()=>H({...p,severity:s}),className:`px-3 py-1 rounded-lg text-xs transition-colors ${p.severity===s?s==="critical"?"bg-red-500 text-white":s==="high"?"bg-orange-500 text-white":s==="medium"?"bg-yellow-500 text-black":s==="low"?"bg-blue-500 text-white":"bg-violet-500 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[s.charAt(0).toUpperCase()+s.slice(1)," ",S?.bySeverity?.[s]?`(${S.bySeverity[s]})`:""]},s)),(p.status!=="all"||p.severity!=="all"||p.type!=="all")&&e.jsx("button",{onClick:()=>H({status:"all",severity:"all",type:"all"}),className:"px-3 py-1 rounded-full text-xs bg-red-500/20 text-red-400 hover:bg-red-500/30",children:"Clear filters"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold",children:["Frontend Errors (",ve.length,")"]}),e.jsx("button",{onClick:()=>{O(),Y()},className:"p-2 rounded-lg hover:bg-white/10",children:e.jsx(m,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:ve.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(V,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No frontend errors captured"}),e.jsx("p",{className:"text-sm mt-2",children:"When users encounter errors, they will appear here"})]}):ve.map(s=>e.jsx("div",{className:`p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer ${g?.id===s.id?"ring-2 ring-violet-500":""}`,onClick:()=>Es(s),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${s.severity==="critical"?"bg-red-500":s.severity==="high"?"bg-orange-500":s.severity==="medium"?"bg-yellow-500":"bg-blue-500"}`}),e.jsx("span",{className:"font-medium text-sm truncate",children:s.message})]}),e.jsx("div",{className:"text-xs text-gray-400 truncate",children:s.url}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500",children:[e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-red-500/20 text-red-400",children:s.type}),s.username&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(v,{to:`/profile/${s.username}`,onClick:a=>a.stopPropagation(),className:"text-violet-400 hover:text-violet-300 hover:underline",children:s.username})]}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.errorAt).toLocaleString()})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${s.status==="new"?"bg-blue-500/20 text-blue-400":s.status==="resolved"?"bg-green-500/20 text-green-400":s.status==="converted"?"bg-violet-500/20 text-violet-400":"bg-gray-500/20 text-gray-400"}`,children:s.status}),s.status!=="converted"&&s.status!=="resolved"&&e.jsx("button",{onClick:a=>{a.stopPropagation(),ls(s.id)},className:"px-2 py-0.5 rounded text-xs bg-orange-500/20 text-orange-400 hover:bg-orange-500/30",children:"→ Bug"})]})]})},s.id))})]})}),e.jsx("div",{children:e.jsxs(o,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(jt,{className:"w-4 h-4 text-violet-400"}),"Error Details"]}),g?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-gray-500 mb-1",children:"Message"}),e.jsx("p",{className:"text-sm text-gray-300",children:g.message})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-gray-500 mb-1",children:"Type"}),e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-red-500/20 text-red-400",children:g.type})]}),g.username&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-gray-500 mb-1",children:"User"}),e.jsxs(v,{to:`/profile/${g.username}`,className:"text-sm text-violet-400 hover:text-violet-300 hover:underline flex items-center gap-1",children:[g.username,e.jsx(_,{className:"w-3 h-3"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-gray-500 mb-1",children:"URL"}),e.jsx("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-violet-400 hover:underline break-all",children:g.url})]}),g.componentName&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-gray-500 mb-1",children:"Component"}),e.jsx("code",{className:"text-xs text-gray-300 bg-black/30 px-2 py-1 rounded",children:g.componentName})]}),g.stack&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-gray-500 mb-1",children:"Stack Trace"}),e.jsx("pre",{className:"text-xs text-gray-400 bg-black/30 p-2 rounded max-h-40 overflow-auto whitespace-pre-wrap",children:g.stack})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs text-gray-500 mb-1",children:"Occurred"}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(g.errorAt).toLocaleString()})]}),g.status!=="converted"&&g.status!=="resolved"&&e.jsx("button",{onClick:()=>ls(g.id),className:"w-full px-3 py-2 rounded-lg bg-orange-500/20 text-orange-400 hover:bg-orange-500/30 text-sm",children:"Convert to Bug Report"})]}):e.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"Select an error to view details"})]})})]})]}),oe==="bugs"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(x,{title:"Total Bugs",value:u?.totals?.total||0,icon:A,color:"#8b5cf6"}),e.jsx(x,{title:"Open",value:u?.totals?.open||0,icon:V,color:"#ef4444",onClick:()=>G({...h,status:"open"})}),e.jsx(x,{title:"Resolved",value:u?.totals?.resolved||0,icon:L,color:"#10b981",onClick:()=>G({...h,status:"resolved"})}),e.jsx(x,{title:"Auto-Fixed",value:u?.autoFix?.completed||0,icon:N,color:"#f59e0b"}),e.jsx(x,{title:"Today",value:u?.totals?.today||0,icon:Ce,color:"#06b6d4"})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Object.entries(u?.bySource||{}).map(([s,a])=>e.jsxs("button",{onClick:()=>G({...h,source:h.source===s?"all":s}),className:`px-3 py-1 rounded-full text-xs transition-colors ${h.source===s?"bg-violet-500 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[s," (",a,")"]},s))}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","critical","high","medium","low"].map(s=>e.jsxs("button",{onClick:()=>G({...h,priority:s}),className:`px-3 py-1 rounded-lg text-xs transition-colors ${h.priority===s?s==="critical"?"bg-red-500 text-white":s==="high"?"bg-orange-500 text-white":s==="medium"?"bg-yellow-500 text-black":s==="low"?"bg-blue-500 text-white":"bg-violet-500 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[s.charAt(0).toUpperCase()+s.slice(1)," ",u?.byPriority?.[s]?`(${u.byPriority[s]})`:""]},s))}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[["all","open","in_progress","confirmed","resolved","closed","wont_fix"].map(s=>e.jsxs("button",{onClick:()=>G({...h,status:s}),className:`px-3 py-1 rounded-full text-xs transition-colors ${h.status===s?"bg-violet-500 text-white":"bg-white/10 text-gray-400 hover:bg-white/20"}`,children:[s.replace("_"," ")," ",u?.byStatus?.[s]?`(${u.byStatus[s]})`:""]},s)),(h.status!=="all"||h.source!=="all"||h.priority!=="all")&&e.jsx("button",{onClick:()=>G({status:"all",source:"all",priority:"all"}),className:"px-3 py-1 rounded-full text-xs bg-red-500/20 text-red-400 hover:bg-red-500/30",children:"Clear filters"})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold",children:["Bug List (",je.length,")"]}),e.jsx("button",{onClick:()=>{C(),P()},className:"p-2 rounded-lg hover:bg-white/10",children:e.jsx(m,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:je.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No bugs found"}),e.jsx("p",{className:"text-sm mt-2",children:'Click "Sync Bug Hunter" to import discovered bugs'})]}):je.map(s=>e.jsx("div",{className:"p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors cursor-pointer",onClick:()=>ke(s.id),children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${s.priority==="critical"?"bg-red-500":s.priority==="high"?"bg-orange-500":s.priority==="medium"?"bg-yellow-500":"bg-blue-500"}`}),e.jsx("span",{className:"font-medium truncate",children:s.title})]}),e.jsx("div",{className:"text-sm text-gray-400 truncate",children:s.pageUrl||s.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-gray-500",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded ${s.source==="bug_hunter"?"bg-orange-500/20 text-orange-400":s.source==="user"?"bg-blue-500/20 text-blue-400":"bg-gray-500/20 text-gray-400"}`,children:s.source}),e.jsx("span",{children:"•"}),e.jsx("span",{children:new Date(s.createdAt).toLocaleDateString()}),s.resolution&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx(L,{className:"w-3 h-3 text-green-400"}),e.jsxs("span",{className:"text-green-400",children:["Fixed ",new Date(s.resolution.resolvedAt).toLocaleDateString()]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${s.status==="open"?"bg-blue-500/20 text-blue-400":s.status==="in_progress"?"bg-yellow-500/20 text-yellow-400":s.status==="confirmed"?"bg-orange-500/20 text-orange-400":s.status==="resolved"?"bg-green-500/20 text-green-400":s.status==="closed"?"bg-gray-500/20 text-gray-400":"bg-red-500/20 text-red-400"}`,children:s.status})})]})},s.id))})]})}),e.jsxs("div",{children:[e.jsxs(o,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4 text-violet-400"}),"Recent Activity"]}),e.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:Qe.length===0?e.jsx("div",{className:"text-center py-4 text-gray-400 text-sm",children:"No activity yet"}):Qe.map(s=>e.jsxs("div",{className:"flex gap-3 text-sm",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ${s.action==="created"?"bg-blue-500":s.action==="resolved"?"bg-green-500":s.action==="status_changed"?"bg-yellow-500":"bg-gray-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-gray-300 truncate",children:s.bugTitle}),e.jsxs("div",{className:"text-gray-500 text-xs",children:[s.action.replace("_"," ")," by ",s.actorUsername||s.actorType]}),e.jsx("div",{className:"text-gray-600 text-xs",children:new Date(s.createdAt).toLocaleString()})]})]},s.id))})]}),u?.avgResolutionTimeHours>0&&e.jsxs(o,{className:"p-4 mt-4",children:[e.jsx("h3",{className:"font-semibold mb-3 text-sm",children:"Resolution Metrics"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Avg. Time to Fix"}),e.jsxs("span",{className:"font-medium",children:[u.avgResolutionTimeHours.toFixed(1),"h"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Auto-Fix Success"}),e.jsxs("span",{className:"font-medium text-green-400",children:[u?.autoFix?.completed||0," / ",(u?.autoFix?.completed||0)+(u?.autoFix?.failed||0)]})]})]})]})]})]})]})]}),Ss&&r&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/70",children:e.jsxs("div",{className:"bg-[#0f0f15] border border-white/10 rounded-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-[#0f0f15] border-b border-white/10 p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:`w-5 h-5 ${r.priority==="critical"?"text-red-500":r.priority==="high"?"text-orange-500":r.priority==="medium"?"text-yellow-500":"text-blue-500"}`}),e.jsx("h2",{className:"font-bold text-lg truncate",children:r.title})]}),e.jsx("button",{onClick:()=>{ye(!1),We(null)},className:"p-2 rounded-lg hover:bg-white/10",children:e.jsx(ns,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("select",{value:r.status,onChange:s=>Ds(r.id,s.target.value),className:"bg-white/10 border border-white/10 rounded-lg px-3 py-1 text-sm",children:[e.jsx("option",{value:"open",children:"Open"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"}),e.jsx("option",{value:"wont_fix",children:"Won't Fix"})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.priority==="critical"?"bg-red-500/20 text-red-400":r.priority==="high"?"bg-orange-500/20 text-orange-400":r.priority==="medium"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:r.priority}),e.jsx("span",{className:"px-2 py-1 rounded text-xs bg-white/10 text-gray-400",children:r.source}),r.status!=="resolved"&&r.status!=="closed"&&e.jsx("button",{onClick:()=>Fs(r.id,"manual_fix","Resolved manually"),className:"px-3 py-1 rounded-lg bg-green-500/20 text-green-400 text-sm hover:bg-green-500/30",children:"Mark Resolved"})]}),r.pageUrl&&e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[e.jsx("h4",{className:"text-xs text-gray-500 mb-1",children:"URL"}),e.jsx("a",{href:r.pageUrl,target:"_blank",rel:"noopener noreferrer",className:"text-violet-400 hover:underline text-sm break-all",children:r.pageUrl})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-300 whitespace-pre-wrap text-sm",children:r.description})]}),r.rootCause&&e.jsxs("div",{className:"p-3 bg-orange-500/10 border border-orange-500/20 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-orange-400 mb-2",children:"Root Cause Analysis"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Type:"})," ",e.jsx("span",{className:"text-gray-300",children:r.rootCause.type})]}),r.rootCause.file&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"File:"})," ",e.jsx("code",{className:"text-gray-300 bg-black/30 px-1 rounded",children:r.rootCause.file})]}),r.rootCause.hypothesis&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Hypothesis:"})," ",e.jsx("span",{className:"text-gray-300",children:r.rootCause.hypothesis})]})]})]}),r.consoleErrors?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Console Errors"}),e.jsx("div",{className:"bg-black/30 rounded-lg p-3 max-h-40 overflow-y-auto",children:r.consoleErrors.map((s,a)=>e.jsx("div",{className:"text-xs text-red-400 font-mono mb-1",children:s},a))})]}),r.networkErrors?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Network Errors"}),e.jsx("div",{className:"bg-black/30 rounded-lg p-3 max-h-40 overflow-y-auto",children:r.networkErrors.map((s,a)=>e.jsx("div",{className:"text-xs text-yellow-400 font-mono mb-1",children:s},a))})]}),r.resolution&&e.jsxs("div",{className:"p-3 bg-green-500/10 border border-green-500/20 rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-medium text-green-400 mb-2 flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),"Resolution Details"]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Resolved:"})," ",e.jsx("span",{className:"text-gray-300",children:new Date(r.resolution.resolvedAt).toLocaleString()})]}),r.resolution.resolvedBy&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"By:"})," ",e.jsxs("span",{className:"text-gray-300",children:["@",r.resolution.resolvedBy]})]}),r.resolution.type&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Type:"})," ",e.jsx("span",{className:"text-gray-300",children:r.resolution.type.replace("_"," ")})]}),r.resolution.notes&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Notes:"})," ",e.jsx("span",{className:"text-gray-300",children:r.resolution.notes})]}),r.resolution.commit&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Commit:"})," ",e.jsx("code",{className:"text-gray-300 bg-black/30 px-1 rounded",children:r.resolution.commit})]}),r.resolution.prUrl&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"PR:"})," ",e.jsx("a",{href:r.resolution.prUrl,className:"text-violet-400 hover:underline",children:r.resolution.prUrl})]})]})]}),r.history?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"History"}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:r.history.map(s=>e.jsxs("div",{className:"flex gap-3 text-sm p-2 bg-white/5 rounded",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-1.5 flex-shrink-0 ${s.action==="created"?"bg-blue-500":s.action==="resolved"?"bg-green-500":s.action==="status_changed"?"bg-yellow-500":"bg-gray-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"text-gray-300",children:[e.jsx("span",{className:"font-medium",children:s.actorUsername||s.actorType})," ",s.action.replace("_"," "),s.previousValue&&s.newValue&&e.jsxs("span",{className:"text-gray-500",children:[" from ",s.previousValue," to ",s.newValue]})]}),e.jsx("div",{className:"text-gray-500 text-xs",children:new Date(s.createdAt).toLocaleString()})]})]},s.id))})]}),r.relatedBugs?.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Related Bugs"}),e.jsx("div",{className:"space-y-1",children:r.relatedBugs.map(s=>e.jsxs("div",{className:"text-sm p-2 bg-white/5 rounded hover:bg-white/10 cursor-pointer",onClick:()=>ke(s.id),children:[e.jsx("span",{className:`inline-block w-2 h-2 rounded-full mr-2 ${s.status==="resolved"?"bg-green-500":"bg-blue-500"}`}),s.title]},s.id))})]})]})]})}),l==="metrics"&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(me,{className:"w-16 h-16 text-violet-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"System Metrics"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"View detailed system performance metrics"}),e.jsxs(v,{to:"/admin/metrics",className:"inline-flex items-center gap-2 px-6 py-3 bg-violet-500 hover:bg-violet-600 rounded-lg transition-colors",children:["Open Metrics Dashboard ",e.jsx(X,{className:"w-4 h-4"})]})]})}),l==="users"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"User Management"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-sm text-gray-400",children:[E.length," users"]})})]}),e.jsx("div",{className:"grid gap-3",children:E.filter(s=>!ne||s.username?.toLowerCase().includes(ne.toLowerCase())||s.email?.toLowerCase().includes(ne.toLowerCase())).map(s=>e.jsx(ds,{user:s,onAction:rs},s.id))})]}),l==="community"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(o,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-green-400"}),"Live Activity"]}),e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(ms,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Activity feed loading..."})]})]}),e.jsxs(o,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5 text-blue-400"}),"Community Stats"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{children:"Total Workouts"}),e.jsx("span",{className:"font-bold",children:"12,847"})]}),e.jsxs("div",{className:"flex justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{children:"Active Today"}),e.jsx("span",{className:"font-bold",children:"234"})]}),e.jsxs("div",{className:"flex justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{children:"Achievements Earned"}),e.jsx("span",{className:"font-bold",children:"5,421"})]})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs(v,{to:"/community",className:"inline-flex items-center gap-2 px-6 py-3 bg-violet-500 hover:bg-violet-600 rounded-lg transition-colors",children:["Open Community Dashboard ",e.jsx(X,{className:"w-4 h-4"})]})})]}),l==="messages"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(us,{className:"w-5 h-5 text-blue-400"}),"Recent Conversations"]}),Fe.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400",children:[e.jsx(Z,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No conversations yet"})]}):e.jsx("div",{className:"space-y-2",children:Fe.slice(0,10).map(s=>e.jsxs(v,{to:`/messages?conversation=${s.id}`,className:"block p-3 bg-white/5 rounded-lg hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-sm",children:s.participant?.displayName||s.participant?.username||"Unknown"}),s.unreadCount>0&&e.jsx("span",{className:"bg-violet-500 text-white text-xs px-2 py-0.5 rounded-full",children:s.unreadCount})]}),e.jsx("div",{className:"text-sm text-gray-400 truncate",children:s.content}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s.createdAt?new Date(s.createdAt).toLocaleDateString():"Just now"})]},s.id))})]}),e.jsx("div",{className:"text-center",children:e.jsxs(v,{to:"/messages",className:"inline-flex items-center gap-2 px-6 py-3 bg-violet-500 hover:bg-violet-600 rounded-lg transition-colors",children:["Open Messages ",e.jsx(X,{className:"w-4 h-4"})]})})]}),l==="economy"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(x,{title:"Total Credits",value:"∞",icon:hs,color:"#fbbf24"}),e.jsx(x,{title:"Credits Gifted",value:Pe?.totalGifted||0,icon:te,color:"#10b981"}),e.jsx(x,{title:"Transactions",value:Pe?.totalTransactions||0,icon:B,color:"#06b6d4"}),e.jsx(x,{title:"Active Wallets",value:E.length,icon:Xs,color:"#8b5cf6"})]}),e.jsxs(o,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-green-400"}),"Quick Gift"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search user...",className:"flex-1 bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-sm focus:outline-none focus:border-violet-500"}),e.jsx("input",{type:"number",placeholder:"Amount",value:z,onChange:s=>be(parseInt(s.target.value)||0),className:"w-32 bg-white/5 border border-white/10 rounded-lg px-4 py-2 text-sm focus:outline-none focus:border-violet-500"}),e.jsxs("button",{className:"px-4 py-2 bg-green-500 hover:bg-green-600 rounded-lg transition-colors flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"})," Send"]})]})]})]}),l==="avatar"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-32 h-32 rounded-2xl bg-gradient-to-br from-yellow-500 via-orange-500 to-red-500 flex items-center justify-center text-white text-4xl font-bold shadow-2xl shadow-orange-500/30",children:d?.username?.charAt(0).toUpperCase()||"?"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h2",{className:"text-2xl font-bold",children:d?.displayName||d?.username}),e.jsx(K,{className:"w-6 h-6 text-yellow-400"})]}),e.jsx("div",{className:"text-gray-400 mb-3",children:d?.email}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-yellow-500/20 text-yellow-400 rounded-full text-sm",children:[e.jsx(Re,{className:"w-4 h-4"})," Unlimited Credits"]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-violet-500/20 text-violet-400 rounded-full text-sm",children:[e.jsx(N,{className:"w-4 h-4"})," All Powers"]})]})]})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs(o,{className:"p-4 text-center",children:[e.jsx(Ks,{className:"w-10 h-10 text-yellow-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"∞"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Achievements"})]}),e.jsxs(o,{className:"p-4 text-center",children:[e.jsx(Zs,{className:"w-10 h-10 text-orange-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"MAX"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Level"})]}),e.jsxs(o,{className:"p-4 text-center",children:[e.jsx(et,{className:"w-10 h-10 text-violet-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold",children:"Owner"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Rank"})]})]}),e.jsxs(o,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Owner Powers"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:os.map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg",children:[e.jsx(s.icon,{className:"w-5 h-5",style:{color:s.color}}),e.jsx("span",{className:"text-sm",children:s.name}),e.jsx(L,{className:"w-4 h-4 text-green-400 ml-auto"})]},s.id))})]})]}),l==="slack"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx($e,{className:"w-12 h-12 text-[#4A154B]"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold",children:"Slack Integration"}),e.jsx("p",{className:"text-gray-400",children:"Real-time notifications for your MuscleMap empire"})]}),re&&e.jsxs("div",{className:"ml-auto flex items-center gap-2 px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-sm",children:[e.jsx(L,{className:"w-4 h-4"})," Connected"]})]}),re?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Webhook URL"}),e.jsx("code",{className:"text-sm text-green-400",children:T.replace(/\/[^\/]+$/,"/****")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:async()=>{try{(await fetch("/api/admin/slack/send-digest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"daily"})})).ok&&le(a=>[...a,{text:"Daily digest sent!",user:"System",time:"Just now"}])}catch{}},className:"px-4 py-2 bg-blue-500/20 hover:bg-blue-500/30 text-blue-400 rounded-lg transition-colors text-sm",children:"Send Daily Digest"}),e.jsx("button",{onClick:async()=>{try{(await fetch("/api/admin/slack/send-digest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"weekly"})})).ok&&le(a=>[...a,{text:"Weekly digest sent!",user:"System",time:"Just now"}])}catch{}},className:"px-4 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-400 rounded-lg transition-colors text-sm",children:"Send Weekly Digest"}),e.jsx("button",{onClick:()=>{localStorage.removeItem("musclemap_slack_webhook"),ie(!1),ue("")},className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-lg transition-colors text-sm ml-auto",children:"Disconnect"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Connect your Slack workspace to receive real-time notifications about new users, bug reports, feedback, deployments, and more."}),e.jsxs("div",{className:"flex gap-2 max-w-lg",children:[e.jsx("input",{type:"text",placeholder:"https://hooks.slack.com/services/...",value:T,onChange:s=>{ue(s.target.value),q(null)},className:"flex-1 bg-white/5 border border-white/10 rounded-lg px-4 py-3 text-sm focus:outline-none focus:border-violet-500"}),e.jsxs("button",{onClick:Os,disabled:Le||!T,className:"px-6 py-3 bg-[#4A154B] hover:bg-[#611f69] disabled:bg-[#4A154B]/50 disabled:cursor-not-allowed rounded-lg transition-colors flex items-center gap-2",children:[Le?e.jsx(yt,{className:"w-5 h-5 animate-spin"}):e.jsx($e,{className:"w-5 h-5"}),"Connect"]})]}),Be&&e.jsx("p",{className:"text-sm text-red-400",children:Be}),e.jsx("p",{className:"text-xs text-gray-600",children:e.jsx("a",{href:"https://api.slack.com/messaging/webhooks",target:"_blank",rel:"noopener noreferrer",className:"text-violet-400 hover:underline",children:"Learn how to create a Slack webhook"})})]})]}),re&&e.jsxs(o,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(is,{className:"w-5 h-5 text-yellow-400"}),"Notification Types"]}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"These notifications are automatically sent to your Slack channel:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[{icon:"🚨",name:"System Alerts",desc:"CPU, memory, error thresholds",enabled:!0},{icon:"🚀",name:"Deployments",desc:"Deploy start, complete, fail",enabled:!0},{icon:"👋",name:"New Users",desc:"When someone signs up",enabled:!0},{icon:"🏆",name:"Achievements",desc:"Level ups, milestones",enabled:!0},{icon:"🐛",name:"Bug Reports",desc:"User-submitted bugs",enabled:!0},{icon:"💬",name:"Feedback",desc:"Feature requests, questions",enabled:!0},{icon:"❌",name:"Errors",desc:"Application exceptions",enabled:!0},{icon:"☀️",name:"Daily Digest",desc:"9 AM UTC summary",enabled:!0},{icon:"📅",name:"Weekly Digest",desc:"Monday summary",enabled:!0},{icon:"💰",name:"Economy Events",desc:"Large transactions",enabled:!0},{icon:"👥",name:"Community",desc:"Crews, competitions",enabled:!0},{icon:"🛡️",name:"Security",desc:"Failed logins, blocks",enabled:!0}].map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{className:"text-xl",children:s.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:s.desc})]}),e.jsx(L,{className:"w-4 h-4 text-green-400 flex-shrink-0"})]},s.name))})]}),re&&Oe.length>0&&e.jsxs(o,{className:"p-6",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Z,{className:"w-5 h-5 text-blue-400"}),"Recent Activity"]}),e.jsx("div",{className:"space-y-2",children:Oe.slice(-5).reverse().map((s,a)=>e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg",children:[e.jsx("div",{className:"text-sm",children:s.text}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.user," · ",s.time]})]},a))})]})]}),l==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5 text-blue-400"}),"Google Analytics 4"]}),e.jsx("span",{className:"text-xs text-gray-500 font-mono",children:U})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("a",{href:`https://analytics.google.com/analytics/web/#/p${U.replace("G-","")}/reports/reportinghub`,target:"_blank",rel:"noopener noreferrer",className:"p-4 bg-white/5 hover:bg-white/10 rounded-lg transition-colors flex items-center gap-3 group",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(me,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Reports Overview"}),e.jsx("div",{className:"text-xs text-gray-500",children:"View all reports"})]}),e.jsx(_,{className:"w-4 h-4 text-gray-500 group-hover:text-white transition-colors"})]}),e.jsxs("a",{href:`https://analytics.google.com/analytics/web/#/p${U.replace("G-","")}/reports/dashboard?params=_u..nav%3Dmaui`,target:"_blank",rel:"noopener noreferrer",className:"p-4 bg-white/5 hover:bg-white/10 rounded-lg transition-colors flex items-center gap-3 group",children:[e.jsx("div",{className:"p-2 bg-green-500/20 rounded-lg",children:e.jsx(B,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Real-Time"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Live visitors"})]}),e.jsx(_,{className:"w-4 h-4 text-gray-500 group-hover:text-white transition-colors"})]}),e.jsxs("a",{href:`https://analytics.google.com/analytics/web/#/p${U.replace("G-","")}/reports/acquisition-overview`,target:"_blank",rel:"noopener noreferrer",className:"p-4 bg-white/5 hover:bg-white/10 rounded-lg transition-colors flex items-center gap-3 group",children:[e.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"User Acquisition"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Traffic sources"})]}),e.jsx(_,{className:"w-4 h-4 text-gray-500 group-hover:text-white transition-colors"})]}),e.jsxs("a",{href:`https://analytics.google.com/analytics/web/#/p${U.replace("G-","")}/reports/engagement-overview`,target:"_blank",rel:"noopener noreferrer",className:"p-4 bg-white/5 hover:bg-white/10 rounded-lg transition-colors flex items-center gap-3 group",children:[e.jsx("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:e.jsx(st,{className:"w-5 h-5 text-yellow-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Engagement"}),e.jsx("div",{className:"text-xs text-gray-500",children:"User behavior"})]}),e.jsx(_,{className:"w-4 h-4 text-gray-500 group-hover:text-white transition-colors"})]}),e.jsxs("a",{href:`https://analytics.google.com/analytics/web/#/p${U.replace("G-","")}/reports/retention-overview`,target:"_blank",rel:"noopener noreferrer",className:"p-4 bg-white/5 hover:bg-white/10 rounded-lg transition-colors flex items-center gap-3 group",children:[e.jsx("div",{className:"p-2 bg-pink-500/20 rounded-lg",children:e.jsx(m,{className:"w-5 h-5 text-pink-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Retention"}),e.jsx("div",{className:"text-xs text-gray-500",children:"User return rate"})]}),e.jsx(_,{className:"w-4 h-4 text-gray-500 group-hover:text-white transition-colors"})]}),e.jsxs("a",{href:`https://analytics.google.com/analytics/web/#/p${U.replace("G-","")}/reports/explorer-events`,target:"_blank",rel:"noopener noreferrer",className:"p-4 bg-white/5 hover:bg-white/10 rounded-lg transition-colors flex items-center gap-3 group",children:[e.jsx("div",{className:"p-2 bg-cyan-500/20 rounded-lg",children:e.jsx(N,{className:"w-5 h-5 text-cyan-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:"Events"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Custom events"})]}),e.jsx(_,{className:"w-4 h-4 text-gray-500 group-hover:text-white transition-colors"})]})]})]}),e.jsxs(o,{className:"p-4",children:[e.jsxs("h3",{className:"font-semibold mb-4 flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-cyan-400"}),"Tracked Events"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[{name:"sign_up",description:"User registration",color:"green"},{name:"login",description:"User login",color:"blue"},{name:"page_view",description:"Page navigation",color:"purple"},{name:"workout_complete",description:"Workout finished",color:"yellow"},{name:"archetype_selected",description:"Archetype chosen",color:"pink"},{name:"community_join",description:"Joined community",color:"cyan"},{name:"achievement_unlocked",description:"Achievement earned",color:"orange"},{name:"level_up",description:"Level increased",color:"violet"},{name:"credits_purchased",description:"Credits bought",color:"emerald"}].map(s=>e.jsxs("div",{className:"p-3 bg-white/5 rounded-lg flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full bg-${s.color}-400`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-mono",children:s.name}),e.jsx("div",{className:"text-xs text-gray-500",children:s.description})]})]},s.name))})]}),e.jsx(o,{className:"p-4 border border-blue-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:e.jsx(Te,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"About Google Analytics Integration"}),e.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"MuscleMap tracks user behavior with GA4 to help understand how people use the app. Page views, signups, logins, and key actions are automatically tracked."}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("a",{href:"https://analytics.google.com/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-blue-400 hover:text-blue-300",children:["Open GA4 Dashboard ",e.jsx(_,{className:"w-3 h-3"})]}),e.jsx("span",{className:"text-gray-600",children:"|"}),e.jsxs("a",{href:"https://support.google.com/analytics/answer/9304153",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sm text-gray-400 hover:text-gray-300",children:["GA4 Documentation ",e.jsx(_,{className:"w-3 h-3"})]})]})]})]})})]}),l==="settings"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{className:"p-4",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Empire Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{children:"Maintenance Mode"}),e.jsx("button",{className:"px-3 py-1 bg-white/10 rounded text-sm",children:"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{children:"New User Registration"}),e.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded text-sm",children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsx("span",{children:"API Rate Limiting"}),e.jsx("button",{className:"px-3 py-1 bg-green-500/20 text-green-400 rounded text-sm",children:"Enabled"})]})]})]}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(v,{to:"/admin-control",className:"flex-1 min-w-[200px] text-center px-6 py-3 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:"Admin Control Panel"}),e.jsx(v,{to:"/admin/monitoring",className:"flex-1 min-w-[200px] text-center px-6 py-3 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:"System Monitoring"}),e.jsxs(v,{to:"/live",className:"flex-1 min-w-[200px] text-center px-6 py-3 bg-gradient-to-r from-blue-500/20 to-violet-500/20 hover:from-blue-500/30 hover:to-violet-500/30 border border-blue-500/30 rounded-lg transition-colors flex items-center justify-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Live Activity"]})]})]})]})})]}),ys&&I&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs(o,{className:"p-6 w-full max-w-md mx-4",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-green-400"}),"Gift Credits"]}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["Send credits to ",e.jsx("strong",{children:I.displayName||I.username})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-1",children:"Amount"}),e.jsx("input",{type:"number",value:z,onChange:s=>be(parseInt(s.target.value)||0),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-2 focus:outline-none focus:border-violet-500"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>ge(!1),className:"flex-1 px-4 py-2 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ps,className:"flex-1 px-4 py-2 bg-green-500 hover:bg-green-600 rounded-lg transition-colors",children:"Send Gift"})]})]})})]})}function Wt(d){const l={},w=d.split(`
`);for(const y of w){if(y.startsWith("#")||!y.trim())continue;const $=y.match(/^(\w+)(?:\{([^}]*)\})?\s+(.+)$/);if($){const[,j,M,he]=$,ae=parseFloat(he);if(l[j]||(l[j]=[]),M){const E={};M.split(",").forEach(pe=>{const[Me,De]=pe.split("=");E[Me]=De?.replace(/"/g,"")}),l[j].push({labels:E,value:ae})}else l[j].push({value:ae})}}return l}const ma=Object.freeze(Object.defineProperty({__proto__:null,default:Ht},Symbol.toStringTag,{value:"Module"}));export{ma as E,us as M,Rt as U};
