const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Cq0y1rKR.js","assets/react-vendor-D1NxaRNd.js","assets/illustrations-CFkZtwGd.js","assets/index-D_LgOQCi.js","assets/leaflet-vendor-CIGW-MKW.css","assets/reactflow-vendor-B5DZHykP.css","assets/index-D_B2na1a.css"])))=>i.map(i=>d[i]);
import{A as P,m as y,_ as X}from"./index-D_LgOQCi.js";import{r as l,j as e,a as Q,L as K}from"./react-vendor-D1NxaRNd.js";import{c as N}from"./recharts-vendor-BziRPEEi.js";import{h as V}from"./illustrations-CFkZtwGd.js";import{M as Y}from"./MuscleViewer-Dvj76euP.js";import{M as O}from"./MuscleActivationBadge-30IQIKdN.js";import{g as Z}from"./auth-qGQD2QqI.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./leaflet-vendor-DZbo3Ov0.js";const ee=15*1024*1024,G=["image/jpeg","image/png","image/webp","image/heic","image/heif"],se=({exerciseId:s,exerciseName:c,currentImageUrl:h,onUploadSuccess:p,onClose:r})=>{const[i,b]=l.useState(!1),[u,U]=l.useState(null),[L,E]=l.useState(null),[B,f]=l.useState(!1),[M,x]=l.useState(0),[w,d]=l.useState(null),[k,C]=l.useState(null),S=l.useRef(null),I=l.useCallback(m=>{m.preventDefault(),b(!0)},[]),z=l.useCallback(m=>{m.preventDefault(),b(!1)},[]),_=l.useCallback(m=>G.includes(m.type)?m.size>ee?"Image is too large. Maximum size is 15MB.":null:"Please upload a JPEG, PNG, or WebP image.",[]),F=l.useCallback(m=>{m.preventDefault(),b(!1),d(null);const t=m.dataTransfer.files[0];if(!t)return;const a=_(t);if(a){d(a);return}U(t),E(URL.createObjectURL(t))},[_]),j=l.useCallback(m=>{d(null);const t=m.target.files?.[0];if(!t)return;const a=_(t);if(a){d(a);return}U(t),E(URL.createObjectURL(t))},[_]),T=l.useCallback(async()=>{if(u){f(!0),d(null),x(0);try{const m=new FormData;m.append("exerciseId",s),m.append("image",u);const t=await new Promise((a,o)=>{const n=new XMLHttpRequest;n.open("POST","/api/exercise-images/upload");const R=Z();if(R)n.setRequestHeader("Authorization",`Bearer ${R}`);else{o(new Error("You must be logged in to upload images"));return}n.upload.addEventListener("progress",g=>{g.lengthComputable&&x(Math.round(g.loaded/g.total*100))}),n.addEventListener("load",()=>{if(n.status>=200&&n.status<300){const g=JSON.parse(n.responseText);a({id:g.submission.id,thumbnailUrl:g.submission.thumbnailUrl,status:g.submission.status,message:g.message})}else if(n.status===401)o(new Error("Session expired. Please refresh the page and try again."));else try{const g=JSON.parse(n.responseText);o(new Error(g.message||g.error||"Upload failed"))}catch{o(new Error("Upload failed"))}}),n.addEventListener("error",()=>o(new Error("Network error"))),n.send(m)});C(t),p?.(t)}catch(m){d(m instanceof Error?m.message:"Upload failed. Please try again.")}finally{f(!1)}}},[u,s,p]),q=l.useCallback(()=>{U(null),E(null),d(null),C(null),x(0),S.current&&(S.current.value="")},[]);return Q.useEffect(()=>()=>{L&&URL.revokeObjectURL(L)},[L]),e.jsxs("div",{className:"bg-gray-900 border border-white/10 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Contribute Image"}),r&&e.jsx("button",{onClick:r,className:"p-1 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(P,{mode:"wait",children:k?e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"text-center py-6",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-emerald-500/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-8 h-8 text-emerald-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h4",{className:"text-lg font-semibold text-white mb-2",children:"Thank You!"}),e.jsx("p",{className:"text-gray-400 text-sm mb-4",children:k.message}),k.status==="approved"&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-emerald-500/20 text-emerald-400 rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),e.jsx("span",{className:"font-medium",children:"+25 credits earned!"})]}),k.status==="pending"&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-500/20 text-amber-400 rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"font-medium",children:"Pending review - credits awarded upon approval"})]}),e.jsx("button",{onClick:q,className:"mt-4 text-sm text-violet-400 hover:text-violet-300",children:"Upload another"})]}):u?e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsxs("div",{className:"relative rounded-xl overflow-hidden bg-black/50 mb-4",children:[e.jsx("img",{src:L,alt:"Preview",className:"w-full h-48 object-contain"}),!B&&e.jsx("button",{onClick:q,className:"absolute top-2 right-2 p-2 bg-black/50 hover:bg-black/70 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"flex items-center gap-3 mb-4 p-3 bg-white/5 rounded-lg",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-white truncate",children:u.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(u.size/1024/1024).toFixed(2)," MB"]})]})}),B&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx(y.div,{initial:{width:0},animate:{width:`${M}%`},className:"h-full bg-gradient-to-r from-violet-500 to-violet-400"})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-center",children:M<100?`Uploading... ${M}%`:"Processing..."})]}),w&&e.jsx("div",{className:"mb-4 p-3 bg-rose-500/10 border border-rose-500/30 rounded-lg",children:e.jsx("p",{className:"text-sm text-rose-400",children:w})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:q,disabled:B,className:"flex-1 px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:T,disabled:B,className:"flex-1 px-4 py-2 bg-violet-600 hover:bg-violet-500 text-white rounded-lg font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:B?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Uploading..."]}):"Upload Image"})]})]}):e.jsxs(y.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[e.jsxs("div",{onDragOver:I,onDragLeave:z,onDrop:F,onClick:()=>S.current?.click(),className:N("border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-all",i?"border-violet-500 bg-violet-500/10":"border-white/20 hover:border-white/40 hover:bg-white/5"),children:[e.jsx("input",{ref:S,type:"file",accept:G.join(","),onChange:j,className:"hidden"}),e.jsx("div",{className:"w-12 h-12 mx-auto mb-4 bg-violet-500/20 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-violet-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),e.jsx("p",{className:"text-white font-medium mb-1",children:i?"Drop your image here":"Drag & drop or click to upload"}),e.jsx("p",{className:"text-gray-500 text-sm mb-3",children:"JPEG, PNG, WebP up to 15MB"}),e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-violet-500/20 text-violet-400 rounded-lg",children:[e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}),e.jsx("span",{className:"font-medium",children:"Earn 25 credits"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-white/5 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-400 mb-2",children:"Photo Guidelines"}),e.jsxs("ul",{className:"text-xs text-gray-500 space-y-1",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-emerald-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Show the exercise being performed clearly"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-emerald-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e.jsx("span",{children:"Good lighting and visibility"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-3 h-3 text-rose-400 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),e.jsx("span",{children:"No inappropriate content"})]})]})]}),w&&e.jsx("div",{className:"mt-4 p-3 bg-rose-500/10 border border-rose-500/30 rounded-lg",children:e.jsx("p",{className:"text-sm text-rose-400",children:w})})]})})]})},te=({exerciseId:s,exerciseName:c,hasImage:h,onUploadSuccess:p})=>{const[r,i]=l.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>i(!0),className:N("flex items-center gap-2 px-3 py-1.5 rounded-lg text-sm transition-colors",h?"bg-white/5 hover:bg-white/10 text-gray-400 hover:text-white":"bg-violet-500/20 hover:bg-violet-500/30 text-violet-400"),children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),h?"Suggest better image":"Add image (+25 credits)"]}),e.jsx(P,{children:r&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80",onClick:()=>i(!1),children:e.jsx(y.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:b=>b.stopPropagation(),className:"w-full max-w-md",children:e.jsx(se,{exerciseId:s,exerciseName:c,onUploadSuccess:b=>{p?.(b)},onClose:()=>i(!1)})})})})]})},$=l.lazy(()=>X(()=>import("./index-Cq0y1rKR.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(s=>({default:s.ExerciseIllustration}))),v={Back:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})}),Search:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Filter:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),Dumbbell:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 12h16m-7 6h7"})}),Clock:()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Target:()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),Body:()=>e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"5",r:"2.5",strokeWidth:1.5}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4m0 0l-3 8m3-8l3 8m-6-7l-3-1m9 1l3-1"})]}),Close:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})},A={1:{label:"Beginner",color:"text-emerald-400 bg-emerald-500/20"},2:{label:"Easy",color:"text-teal-400 bg-teal-500/20"},3:{label:"Moderate",color:"text-amber-400 bg-amber-500/20"},4:{label:"Hard",color:"text-orange-400 bg-orange-500/20"},5:{label:"Expert",color:"text-rose-400 bg-rose-500/20"}},le=[{id:"all",label:"All"},{id:"bodyweight",label:"Bodyweight"},{id:"kettlebell",label:"Kettlebell"},{id:"freeweight",label:"Free Weights"}],D={chest:{name:"Chest",icon:"ðŸ’ª",color:"from-red-500 to-rose-600",subcategories:{push:{name:"Push Exercises",icon:"ðŸ‹ï¸"},fly:{name:"Fly Movements",icon:"ðŸ¦…"},press:{name:"Press Variations",icon:"â¬†ï¸"}}},back:{name:"Back",icon:"ðŸ¦´",color:"from-blue-500 to-indigo-600",subcategories:{pull:{name:"Pull Exercises",icon:"ðŸ”™"},row:{name:"Row Variations",icon:"ðŸš£"},lat:{name:"Lat Focus",icon:"ðŸ“"}}},shoulders:{name:"Shoulders",icon:"ðŸŽ¯",color:"from-orange-500 to-amber-600",subcategories:{press:{name:"Overhead Press",icon:"â¬†ï¸"},lateral:{name:"Lateral Raises",icon:"â†”ï¸"},rear:{name:"Rear Delts",icon:"ðŸ”„"}}},arms:{name:"Arms",icon:"ðŸ’ª",color:"from-purple-500 to-violet-600",subcategories:{biceps:{name:"Biceps",icon:"ðŸ’ª"},triceps:{name:"Triceps",icon:"ðŸ”º"},forearms:{name:"Forearms",icon:"âœŠ"}}},legs:{name:"Legs",icon:"ðŸ¦µ",color:"from-green-500 to-emerald-600",subcategories:{quads:{name:"Quadriceps",icon:"ðŸ¦µ"},hamstrings:{name:"Hamstrings",icon:"ðŸƒ"},calves:{name:"Calves",icon:"ðŸ‘Ÿ"}}},glutes:{name:"Glutes",icon:"ðŸ‘",color:"from-pink-500 to-rose-600",subcategories:{hip_thrust:{name:"Hip Thrusts",icon:"â¬†ï¸"},squat:{name:"Squat Variations",icon:"ðŸ‹ï¸"},isolation:{name:"Isolation",icon:"ðŸŽ¯"}}},core:{name:"Core",icon:"ðŸ”¥",color:"from-yellow-500 to-orange-600",subcategories:{abs:{name:"Abs",icon:"ðŸŽ¯"},obliques:{name:"Obliques",icon:"â†—ï¸"},lower_back:{name:"Lower Back",icon:"ðŸ”™"}}},cardio:{name:"Cardio",icon:"â¤ï¸",color:"from-cyan-500 to-blue-600",subcategories:{hiit:{name:"HIIT",icon:"âš¡"},steady:{name:"Steady State",icon:"ðŸƒ"},plyo:{name:"Plyometrics",icon:"ðŸ¦˜"}}},full_body:{name:"Full Body",icon:"ðŸ†",color:"from-violet-500 to-purple-600",subcategories:{compound:{name:"Compound Lifts",icon:"ðŸ‹ï¸"},functional:{name:"Functional",icon:"âš¡"},olympic:{name:"Olympic",icon:"ðŸ¥‡"}}}},ae={"chest-upper":"chest","chest-mid":"chest","chest-lower":"chest","pec-minor":"chest",chest:"chest","pectoralis major":"chest","pectoralis minor":"chest","upper chest":"chest","lower chest":"chest",lats:"back",rhomboids:"back","traps-upper":"back","traps-mid":"back","traps-lower":"back","erector-spinae":"back","teres-major":"back","teres-minor":"back",infraspinatus:"back",back:"back","latissimus dorsi":"back",trapezius:"back",traps:"back","erector spinae":"back","delt-front":"shoulders","delt-side":"shoulders","delt-rear":"shoulders","rotator-cuff":"shoulders",shoulders:"shoulders",deltoids:"shoulders","anterior deltoid":"shoulders","lateral deltoid":"shoulders","posterior deltoid":"shoulders","front delts":"shoulders","side delts":"shoulders","rear delts":"shoulders","bicep-long":"arms","bicep-short":"arms","tricep-long":"arms","tricep-lateral":"arms","tricep-medial":"arms",brachialis:"arms",brachioradialis:"arms","forearm-flexors":"arms","forearm-extensors":"arms",biceps:"arms",triceps:"arms",forearms:"arms","quad-rectus":"legs","quad-vastus-lat":"legs","quad-vastus-med":"legs","quad-vastus-int":"legs","hamstring-bicep":"legs","hamstring-semi-t":"legs","hamstring-semi-m":"legs",gastrocnemius:"legs",soleus:"legs","tibialis-ant":"legs",adductors:"legs",abductors:"legs",quadriceps:"legs",quads:"legs",hamstrings:"legs",calves:"legs","glute-max":"glutes","glute-med":"glutes","glute-min":"glutes","hip-flexors":"glutes","tensor-fl":"glutes",glutes:"glutes","gluteus maximus":"glutes","gluteus medius":"glutes","hip flexors":"glutes","rectus-abdominis":"core","obliques-ext":"core","obliques-int":"core","transverse-abdominis":"core",serratus:"core","lower-back":"core",abs:"core",abdominals:"core","rectus abdominis":"core",obliques:"core","transverse abdominis":"core","lower back":"core",core:"core"},re=s=>{if(s.category)return s.category;const c=s.primaryMuscles?.[0]?.toLowerCase();return c&&ae[c]||"full_body"},J=()=>e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-violet-500/10 to-purple-500/10 animate-pulse rounded-lg"}),W=s=>{const c=[],h={"chest-upper":"chest","chest-mid":"chest","chest-lower":"chest","pec-minor":"chest",lats:"lats",rhomboids:"upper_back","traps-upper":"traps","traps-mid":"traps","traps-lower":"traps","erector-spinae":"lower_back","teres-major":"upper_back","teres-minor":"upper_back","delt-front":"front_delts","delt-side":"side_delts","delt-rear":"rear_delts","bicep-long":"biceps","bicep-short":"biceps",brachialis:"biceps","tricep-long":"triceps","tricep-lateral":"triceps","tricep-medial":"triceps",brachioradialis:"forearms","forearm-flexors":"forearms","forearm-extensors":"forearms","quad-rectus":"quads","quad-vastus-lat":"quads","quad-vastus-med":"quads","quad-vastus-int":"quads","hamstring-bicep":"hamstrings","hamstring-semi-t":"hamstrings","hamstring-semi-m":"hamstrings",gastrocnemius:"calves",soleus:"calves","glute-max":"glutes","glute-med":"glutes","glute-min":"glutes","hip-flexors":"hip_flexors",adductors:"adductors","rectus-abdominis":"abs","obliques-ext":"obliques","obliques-int":"obliques",chest:"chest",back:"upper_back",shoulders:"front_delts",biceps:"biceps",triceps:"triceps",forearms:"forearms",quadriceps:"quads",quads:"quads",hamstrings:"hamstrings",calves:"calves",glutes:"glutes",abs:"abs",core:"abs",obliques:"obliques"};return s.primaryMuscles?.forEach(p=>{const r=h[p.toLowerCase()]||p.toLowerCase();c.find(i=>i.id===r)||c.push({id:r,intensity:1,isPrimary:!0})}),s.secondaryMuscles?.forEach(p=>{const r=h[p.toLowerCase()]||p.toLowerCase();c.find(i=>i.id===r)||c.push({id:r,intensity:.5,isPrimary:!1})}),c},H=({exercise:s,onClick:c})=>{const h=A[s.difficulty]||A[2],p=s.illustration?.hasIllustration||V(s.id),r=!!s.imageUrl,i=l.useMemo(()=>W(s),[s]);return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(s),className:"bg-white/5 border border-white/10 rounded-xl overflow-hidden cursor-pointer hover:bg-white/10 transition-all",children:[r?e.jsxs("div",{className:"relative h-32 bg-[#0d0d12] border-b border-white/5 overflow-hidden",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-contain",loading:"lazy"}),e.jsx("div",{className:"absolute bottom-1 right-1 text-[8px] text-gray-500 bg-black/60 px-1 rounded",children:s.imageUrl?.includes("free-exercise-db")?"free-exercise-db":"wger.de"})]}):p?e.jsx("div",{className:"relative h-32 bg-[#0d0d12] border-b border-white/5",children:e.jsx(l.Suspense,{fallback:e.jsx(J,{}),children:e.jsx($,{exerciseId:s.id,exerciseName:s.name,primaryMuscles:s.primaryMuscles,size:"sm",showMuscleLabels:!1,interactive:!1,className:"w-full h-full"})})}):i.length>0?e.jsxs("div",{className:"relative h-32 bg-gradient-to-br from-[#0d0d12] via-[#12121a] to-[#0f0f18] border-b border-white/5 flex items-center justify-center",children:[e.jsx(O,{muscles:i,size:72,showGlow:!0}),e.jsxs("div",{className:"absolute bottom-1 left-1 right-1 flex items-center justify-between",children:[e.jsx("span",{className:"text-[8px] text-gray-400 bg-black/60 px-1.5 py-0.5 rounded capitalize truncate max-w-[60%]",children:s.primaryMuscles?.slice(0,2).join(", ")||s.type||"bodyweight"}),e.jsx("span",{className:"text-[8px] text-violet-400/70 bg-violet-500/10 px-1.5 py-0.5 rounded",children:"No image"})]})]}):null,e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-white",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[i.length>0&&e.jsx(O,{muscles:i,size:28,showGlow:!1}),e.jsx("span",{className:N("text-xs px-2 py-0.5 rounded-full",h.color),children:h.label})]})]}),e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2 mb-3",children:s.description||"No description available"}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v.Clock,{}),e.jsxs("span",{children:[s.estimatedSeconds||45,"s"]})]}),s.isCompound&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v.Target,{}),e.jsx("span",{children:"Compound"})]}),s.primaryMuscles?.length>0&&e.jsx("div",{className:"text-gray-400",children:s.primaryMuscles.slice(0,2).join(", ")})]})]})]})},ie=({exercise:s,onClose:c})=>{if(!s)return null;const h=A[s.difficulty]||A[2],p=s.illustration?.hasIllustration||V(s.id),r=!!s.imageUrl,i=W(s),b=r||p;return e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80",onClick:c,children:e.jsxs(y.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:u=>u.stopPropagation(),className:"bg-gray-900 border border-white/10 rounded-2xl max-w-lg w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"relative border-b border-white/10 rounded-t-2xl overflow-hidden",children:[e.jsxs("div",{className:"flex",children:[r?e.jsxs("div",{className:"flex-1 h-48 bg-[#0d0d12] relative",children:[e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-contain"}),e.jsxs("div",{className:"absolute bottom-2 left-2 text-[10px] text-gray-400 bg-black/70 px-2 py-0.5 rounded",children:["Image: ",s.imageUrl?.includes("free-exercise-db")?"free-exercise-db":"wger.de"," (",s.imageLicense||"CC-BY-SA",")"]})]}):p?e.jsx("div",{className:"flex-1 h-48 bg-[#0d0d12]",children:e.jsx(l.Suspense,{fallback:e.jsx(J,{}),children:e.jsx($,{exerciseId:s.id,exerciseName:s.name,primaryMuscles:s.primaryMuscles,size:"md",showMuscleLabels:!0,interactive:!0,className:"w-full h-full"})})}):null,i.length>0&&e.jsx("div",{className:N("h-48 bg-[#0d0d12]",b?"w-40 border-l border-white/5":"flex-1"),children:e.jsx(Y,{muscles:i,mode:"inline",interactive:!1,showLabels:!1,autoRotate:!0,className:"w-full h-full"})})]}),e.jsx("div",{className:"px-4 py-2 bg-black/30 border-t border-white/5",children:e.jsx(te,{exerciseId:s.id,exerciseName:s.name,hasImage:r,onUploadSuccess:()=>{}})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:N("text-xs px-2 py-0.5 rounded-full",h.color),children:h.label}),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:s.type})]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-white/10 rounded-lg transition-all",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"space-y-4",children:[s.description&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Description"}),e.jsx("p",{className:"text-white",children:s.description})]}),s.cues&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-1",children:"Cues"}),e.jsx("p",{className:"text-white",children:s.cues})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Duration"}),e.jsxs("div",{className:"text-white font-medium",children:[s.estimatedSeconds||45,"s"]})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Rest"}),e.jsxs("div",{className:"text-white font-medium",children:[s.restSeconds||60,"s"]})]})]}),s.primaryMuscles?.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Primary Muscles"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.primaryMuscles.map(u=>e.jsx("span",{className:"px-2 py-1 bg-violet-500/20 text-violet-400 rounded-lg text-xs",children:u},u))})]}),s.equipmentRequired?.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Equipment Required"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.equipmentRequired.map(u=>e.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 rounded-lg text-xs",children:u},u))})]}),s.locations?.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Available Locations"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.locations.map(u=>e.jsx("span",{className:"px-2 py-1 bg-emerald-500/20 text-emerald-400 rounded-lg text-xs capitalize",children:u},u))})]})]})]})]})})},oe=({category:s,exerciseCount:c,onClick:h})=>e.jsxs(y.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02},whileTap:{scale:.98},onClick:h,className:N("relative overflow-hidden rounded-2xl p-4 text-left transition-all","bg-gradient-to-br",s.color,"hover:shadow-lg hover:shadow-black/20"),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"text-4xl mb-3",children:s.icon}),e.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded-full",children:c})]}),e.jsx("h3",{className:"text-lg font-bold text-white",children:s.name}),e.jsxs("p",{className:"text-xs text-white/70 mt-1",children:[Object.keys(s.subcategories||{}).length," subcategories"]})]});function je(){const[s,c]=l.useState([]),[h,p]=l.useState(!0),[r,i]=l.useState(""),[b,u]=l.useState("all"),[U,L]=l.useState(null),[E,B]=l.useState(!1),[f,M]=l.useState(null),[x,w]=l.useState("categories"),[d,k]=l.useState([]),C=l.useRef(null),S=l.useRef(!1);l.useEffect(()=>{S.current&&C.current&&requestAnimationFrame(()=>{C.current?.focus();const t=C.current?.value.length||0;C.current?.setSelectionRange(t,t),S.current=!1})},[x]),l.useEffect(()=>{fetch("/api/exercises").then(t=>t.json()).then(t=>{if(t.data){const a=t.data.map(o=>{let n=[];if(Array.isArray(o.primaryMuscles))n=o.primaryMuscles;else if(typeof o.primaryMuscles=="string"){const R=o.primaryMuscles.match(/^\{(.+)\}$/);R?n=R[1].split(",").map(g=>g.replace(/^"|"$/g,"").trim()).filter(Boolean):n=o.primaryMuscles.split(",").map(g=>g.trim()).filter(Boolean)}return{...o,primaryMuscles:n,category:re({...o,primaryMuscles:n})}});c(a)}}).catch(console.error).finally(()=>p(!1))},[]);const I=s.reduce((t,a)=>{const o=a.category||"full_body";return t[o]=(t[o]||0)+1,t},{}),z=l.useCallback(t=>{k(a=>a.includes(t)?a.filter(o=>o!==t):[...a,t])},[]),_=l.useMemo(()=>d.map(t=>({id:t,intensity:1,isPrimary:!0})),[d]),F=l.useCallback(t=>{if(d.length===0)return!0;const a=W(t);return d.some(o=>a.some(n=>n.id===o))},[d]),j=s.filter(t=>{const a=!r||t.name.toLowerCase().includes(r.toLowerCase())||t.description?.toLowerCase().includes(r.toLowerCase())||t.primaryMuscles?.some(g=>g.toLowerCase().includes(r.toLowerCase())),o=b==="all"||t.type===b,n=!f||t.category===f,R=F(t);return a&&o&&n&&R}),T=t=>{M(t),w("list")},q=()=>{M(null),k([]),w("categories"),i("")},m=()=>{k([])};return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-40 bg-[#0a0a0f]/80 backdrop-blur-xl border-b border-white/5",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[x==="list"&&f?e.jsx("button",{onClick:q,className:"p-2 hover:bg-white/10 rounded-lg transition-all",children:e.jsx(v.Back,{})}):e.jsx(K,{to:"/dashboard",className:"p-2 hover:bg-white/10 rounded-lg transition-all",children:e.jsx(v.Back,{})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-lg",children:f?D[f]?.name:"Exercise Library"}),f&&e.jsxs("p",{className:"text-xs text-gray-400",children:[j.length," exercises"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{x==="muscle"?q():(w("muscle"),M(null))},className:N("p-2 rounded-lg transition-all",x==="muscle"?"bg-violet-500/20 text-violet-400":"hover:bg-white/10 text-gray-400"),title:"Find exercises by muscle",children:e.jsx(v.Body,{})}),e.jsx("button",{onClick:()=>{x==="categories"||x==="muscle"?(w("list"),M(null),k([])):q()},className:N("p-2 rounded-lg transition-all text-xs",x==="list"?"bg-violet-500/20 text-violet-400":"hover:bg-white/10 text-gray-400"),children:x==="categories"||x==="muscle"?"ðŸ“‹ List":"ðŸ“‚ Groups"}),e.jsx("button",{onClick:()=>B(!E),className:N("p-2 rounded-lg transition-all",E?"bg-violet-500/20 text-violet-400":"hover:bg-white/10"),children:e.jsx(v.Filter,{})})]})]})}),e.jsx("main",{className:"pt-20 pb-8 px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[x==="muscle"&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-300",children:"Find Exercises by Muscle"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Click on muscles to find exercises that target them"})]}),d.length>0&&e.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-3 py-1.5 text-sm bg-white/10 hover:bg-white/20 rounded-lg transition-all",children:[e.jsx(v.Close,{}),"Clear (",d.length,")"]})]}),e.jsx("div",{className:"bg-gradient-to-b from-[#0d0d15] to-[#0a0a10] rounded-2xl border border-white/10 p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:[e.jsx("div",{className:"w-full lg:w-1/2 flex justify-center",children:e.jsx(Y,{muscles:_,mode:"card",interactive:!0,showLabels:!0,autoRotate:d.length===0,onMuscleClick:z,className:"w-full max-w-[280px]",style:{height:360}})}),e.jsxs("div",{className:"w-full lg:w-1/2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:d.length>0?"Selected Muscles":"Click a muscle to start"}),d.length>0?e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:d.map(t=>e.jsxs("button",{onClick:()=>z(t),className:"flex items-center gap-1.5 px-3 py-1.5 bg-violet-500/20 text-violet-400 rounded-full text-sm hover:bg-violet-500/30 transition-all",children:[t.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()),e.jsx("span",{className:"text-violet-300",children:"Ã—"})]},t))}):e.jsx("div",{className:"text-gray-500 text-sm mb-4",children:"Select muscles from the model to find matching exercises"}),e.jsx("div",{className:"p-3 bg-white/5 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Matching exercises"}),e.jsx("span",{className:"text-2xl font-bold text-white",children:j.length})]})})]})]})}),j.length>0?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[j.slice(0,20).map(t=>e.jsx(H,{exercise:t,onClick:L},t.id)),j.length>20&&e.jsx("div",{className:"col-span-full text-center py-4",children:e.jsxs("p",{className:"text-gray-500 text-sm",children:["Showing 20 of ",j.length," exercises. Use search or select more muscles to narrow down."]})})]}):d.length>0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v.Dumbbell,{}),e.jsx("p",{className:"text-gray-400 mt-2",children:"No exercises found for selected muscles"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try selecting different muscles"})]}):null]}),x==="categories"&&!f&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-300",children:"Browse by Muscle Group"}),h?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[...Array(9)].map((t,a)=>e.jsx("div",{className:"h-32 rounded-2xl bg-white/5 animate-pulse"},a))}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4 mb-8",children:Object.entries(D).map(([t,a])=>e.jsx(oe,{category:a,exerciseCount:I[t]||0,onClick:()=>T(t)},t))}),e.jsxs("div",{className:"border-t border-white/10 pt-6 mt-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-300",children:"Quick Search"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400",children:e.jsx(v.Search,{})}),e.jsx("input",{ref:x==="categories"?C:void 0,type:"text",value:r,onChange:t=>{i(t.target.value),t.target.value&&(S.current=!0,w("list"))},placeholder:"Search all exercises...",className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-violet-500 transition-all"})]})]})]}),(x==="list"||f)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-gray-400",children:e.jsx(v.Search,{})}),e.jsx("input",{ref:x==="list"?C:void 0,type:"text",value:r,onChange:t=>i(t.target.value),placeholder:f?`Search ${D[f]?.name} exercises...`:"Search exercises, muscles...",className:"w-full pl-12 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-violet-500 transition-all"})]}),e.jsx(P,{children:E&&e.jsx(y.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"overflow-hidden mb-4",children:e.jsx("div",{className:"flex flex-wrap gap-2 pb-2",children:le.map(t=>e.jsx("button",{onClick:()=>u(t.id),className:N("px-4 py-2 rounded-lg text-sm font-medium transition-all",b===t.id?"bg-violet-500 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"),children:t.label},t.id))})})}),e.jsx("div",{className:"text-sm text-gray-500 mb-4",children:h?"Loading...":`${j.length} exercises`}),h?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"w-8 h-8 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"})}):j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v.Dumbbell,{}),e.jsx("p",{className:"text-gray-400 mt-2",children:"No exercises found"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Try adjusting your search or filters"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(t=>e.jsx(H,{exercise:t,onClick:L},t.id))})]})]})}),e.jsx(P,{children:U&&e.jsx(ie,{exercise:U,onClose:()=>L(null)})})]})}export{je as default};
