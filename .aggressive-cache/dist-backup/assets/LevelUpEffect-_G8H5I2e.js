import{r as m,j as t}from"./react-vendor-D1NxaRNd.js";import{c as v,P as e}from"./recharts-vendor-BziRPEEi.js";import{m as u,A as E,au as S,av as Z}from"./index-BV5ySY7X.js";const s={EASY:"easy",MEDIUM:"medium",HARD:"hard"},_={LOG_SETS:{id:"log_sets",title:"Rep Master",description:"Log {target} sets today",icon:"üí™",category:"workout",targets:{[s.EASY]:3,[s.MEDIUM]:5,[s.HARD]:10},rewards:{xp:{[s.EASY]:50,[s.MEDIUM]:100,[s.HARD]:200},credits:{[s.EASY]:5,[s.MEDIUM]:10,[s.HARD]:25}},trackingKey:"setsLogged"},WORKOUT_STREAK:{id:"workout_streak",title:"Streak Builder",description:"Complete {target} workout{plural} today",icon:"üî•",category:"consistency",targets:{[s.EASY]:1,[s.MEDIUM]:2,[s.HARD]:3},rewards:{xp:{[s.EASY]:75,[s.MEDIUM]:150,[s.HARD]:300},credits:{[s.EASY]:10,[s.MEDIUM]:20,[s.HARD]:50}},trackingKey:"workoutsCompleted"},HIT_MUSCLE_GROUPS:{id:"hit_muscle_groups",title:"Full Body Focus",description:"Train {target} different muscle group{plural}",icon:"üéØ",category:"variety",targets:{[s.EASY]:2,[s.MEDIUM]:3,[s.HARD]:5},rewards:{xp:{[s.EASY]:60,[s.MEDIUM]:120,[s.HARD]:250},credits:{[s.EASY]:8,[s.MEDIUM]:15,[s.HARD]:35}},trackingKey:"muscleGroupsHit"},HIGH_FIVE_FRIENDS:{id:"high_five_friends",title:"Social Butterfly",description:"Send {target} high five{plural} to friends",icon:"üñêÔ∏è",category:"social",targets:{[s.EASY]:1,[s.MEDIUM]:3,[s.HARD]:5},rewards:{xp:{[s.EASY]:30,[s.MEDIUM]:60,[s.HARD]:100},credits:{[s.EASY]:3,[s.MEDIUM]:8,[s.HARD]:15}},trackingKey:"highFivesSent"},BEAT_PR:{id:"beat_pr",title:"PR Crusher",description:"Set {target} new personal record{plural}",icon:"üèÜ",category:"achievement",targets:{[s.EASY]:1,[s.MEDIUM]:2,[s.HARD]:3},rewards:{xp:{[s.EASY]:100,[s.MEDIUM]:200,[s.HARD]:400},credits:{[s.EASY]:15,[s.MEDIUM]:30,[s.HARD]:75}},trackingKey:"prsSet"},COMPLETE_WORKOUT:{id:"complete_workout",title:"Session Complete",description:"Finish {target} complete workout session{plural}",icon:"‚úÖ",category:"workout",targets:{[s.EASY]:1,[s.MEDIUM]:2,[s.HARD]:3},rewards:{xp:{[s.EASY]:80,[s.MEDIUM]:160,[s.HARD]:320},credits:{[s.EASY]:12,[s.MEDIUM]:25,[s.HARD]:60}},trackingKey:"workoutsCompleted"},EXPLORE_EXERCISE:{id:"explore_exercise",title:"Exercise Explorer",description:"Try {target} new exercise{plural} you haven't done before",icon:"üí°",category:"variety",targets:{[s.EASY]:1,[s.MEDIUM]:2,[s.HARD]:4},rewards:{xp:{[s.EASY]:40,[s.MEDIUM]:80,[s.HARD]:180},credits:{[s.EASY]:5,[s.MEDIUM]:12,[s.HARD]:30}},trackingKey:"newExercisesTried"},EARN_XP:{id:"earn_xp",title:"XP Hunter",description:"Earn {target} XP today",icon:"‚≠ê",category:"achievement",targets:{[s.EASY]:100,[s.MEDIUM]:250,[s.HARD]:500},rewards:{xp:{[s.EASY]:25,[s.MEDIUM]:50,[s.HARD]:100},credits:{[s.EASY]:5,[s.MEDIUM]:10,[s.HARD]:20}},trackingKey:"xpEarned"},TOTAL_VOLUME:{id:"total_volume",title:"Volume King",description:"Lift {target} total lbs/kg today",icon:"üí™",category:"workout",targets:{[s.EASY]:1e3,[s.MEDIUM]:5e3,[s.HARD]:1e4},rewards:{xp:{[s.EASY]:60,[s.MEDIUM]:150,[s.HARD]:300},credits:{[s.EASY]:8,[s.MEDIUM]:20,[s.HARD]:45}},trackingKey:"totalVolume"}},ee=Object.keys(_);function te(r,a){const i=r.targets[a],n=i!==1?"s":"";return r.description.replace("{target}",i.toLocaleString()).replace("{plural}",n)}function se(r,a){return{xp:r.rewards.xp[a],credits:r.rewards.credits[a]}}function re(r,a){return r.targets[a]}function ae(r="anonymous",a=new Date){const n=`${a.toISOString().split("T")[0]}-${r}`;let o=0;for(let p=0;p<n.length;p++){const g=n.charCodeAt(p);o=(o<<5)-o+g,o=o&o}return Math.abs(o)}function ie(r){let a=r;return function(){return a=a*1103515245+12345&2147483647,a/2147483647}}function T(r="anonymous",a=new Date){const i=ae(r,a),n=ie(i),o=[...ee],p=[s.EASY,s.MEDIUM,s.HARD];for(let d=o.length-1;d>0;d--){const c=Math.floor(n()*(d+1));[o[d],o[c]]=[o[c],o[d]]}const g=p.map((d,c)=>{const y=o[c],x=_[y];return{id:`${x.id}-${d}-${a.toISOString().split("T")[0]}`,typeId:x.id,type:x,difficulty:d,target:re(x,d),rewards:se(x,d),description:te(x,d)}});for(let d=g.length-1;d>0;d--){const c=Math.floor(n()*(d+1));[g[d],g[c]]=[g[c],g[d]]}return g}const q={setsLogged:0,workoutsCompleted:0,muscleGroupsHit:0,highFivesSent:0,prsSet:0,newExercisesTried:0,xpEarned:0,totalVolume:0};function U(){const r=new Date,a=new Date(r);a.setHours(24,0,0,0);const i=a-r,n=Math.floor(i/(1e3*60*60)),o=Math.floor(i%(1e3*60*60)/(1e3*60)),p=Math.floor(i%(1e3*60)/1e3);return{hours:n,minutes:o,seconds:p,totalMs:i}}function ne(r){const a=new Date(r),i=new Date;return a.getDate()===i.getDate()&&a.getMonth()===i.getMonth()&&a.getFullYear()===i.getFullYear()}const P="musclemap_daily_challenges";function oe(r){if(!r||!r.typeId)return r;const a=Object.values(_).find(i=>i.id===r.typeId);return a?{...r,type:a}:r}function le(){try{const r=localStorage.getItem(P);if(!r)return null;const a=JSON.parse(r);return ne(a.date)?(a.challenges&&Array.isArray(a.challenges)&&(a.challenges=a.challenges.map(oe)),a):null}catch{return null}}function ce(r){try{localStorage.setItem(P,JSON.stringify(r))}catch{}}function de({userId:r="anonymous",onChallengeComplete:a,onRewardClaimed:i}={}){const[n,o]=m.useState(()=>{const l=le();if(l&&l.userId===r)return l;const b=new Date,w=T(r,b);return{date:b.toISOString(),userId:r,challenges:w,progress:{...q},claimed:{}}}),[p,g]=m.useState(U()),d=m.useRef(new Set);m.useEffect(()=>{const l=setInterval(()=>{const b=U();if(g(b),b.totalMs>828e5){const w=new Date,R=T(r,w);o({date:w.toISOString(),userId:r,challenges:R,progress:{...q},claimed:{}}),d.current=new Set}},1e3);return()=>clearInterval(l)},[r]),m.useEffect(()=>{ce(n)},[n]);const c=m.useMemo(()=>n.challenges.map(l=>{const b=l.type?.trackingKey,w=b&&n.progress[b]||0,R=l.target||1,C=w>=R,f=n.claimed[l.id]||!1;return{...l,currentProgress:w,isComplete:C,isClaimed:f,percentage:Math.min(100,w/R*100)}}),[n.challenges,n.progress,n.claimed]),y=m.useMemo(()=>c.every(l=>l.isComplete),[c]),x=m.useMemo(()=>c.every(l=>l.isClaimed),[c]),h=m.useMemo(()=>c.filter(l=>l.isComplete&&!l.isClaimed).length,[c]);m.useEffect(()=>{c.forEach(l=>{l.isComplete&&!d.current.has(l.id)&&(d.current.add(l.id),a?.(l))})},[c,a]);const M=m.useCallback((l,b,w=!1)=>{o(R=>{const C=R.progress[l]||0,f=w?b:C+b;return{...R,progress:{...R.progress,[l]:Math.max(0,f)}}})},[]),j=m.useCallback(l=>{const b=c.find(R=>R.id===l);if(!b||!b.isComplete||b.isClaimed)return null;o(R=>({...R,claimed:{...R.claimed,[l]:!0}}));const w=b.rewards;return i?.(b,w),w},[c,i]),N=m.useCallback(()=>{const l=c.filter(C=>C.isComplete&&!C.isClaimed);if(l.length===0)return{xp:0,credits:0};const b={};let w=0,R=0;return l.forEach(C=>{b[C.id]=!0,w+=C.rewards.xp,R+=C.rewards.credits,i?.(C,C.rewards)}),o(C=>({...C,claimed:{...C.claimed,...b}})),{xp:w,credits:R}},[c,i]),A=m.useCallback(()=>{o(l=>({...l,progress:{...q},claimed:{}})),d.current=new Set},[]),D=m.useCallback(()=>{const l=new Date,b=T(r,l);o({date:l.toISOString(),userId:r,challenges:b,progress:{...q},claimed:{}}),d.current=new Set},[r]);return{challenges:c,progress:n.progress,updateProgress:M,claimReward:j,claimAll:N,resetProgress:A,regenerateChallenges:D,timeUntilReset:p,allComplete:y,allClaimed:x,unclaimedComplete:h}}function ue(r){return r<=3?[]:r<=5?[50]:r<=10?[25,50,75]:[25,50,75]}function L({delay:r,color:a}){return t.jsx(u.div,{className:"absolute w-1.5 h-1.5 rounded-full",style:{backgroundColor:a,left:"50%",top:"50%"},initial:{x:0,y:0,opacity:1,scale:1},animate:{x:(Math.random()-.5)*80,y:(Math.random()-.5)*40-20,opacity:0,scale:0},transition:{duration:.8,delay:r,ease:"easeOut"}})}L.propTypes={delay:e.number.isRequired,color:e.string.isRequired};function z({current:r=0,target:a=100,isComplete:i=!1,variant:n="brand",size:o="md",showMilestones:p=!0,showLabel:g=!1,className:d}){const c=m.useMemo(()=>Math.min(100,Math.max(0,r/a*100)),[r,a]),y=m.useMemo(()=>p?ue(a):[],[a,p]),[x,h]=m.useState(!1),M=m.useRef(i);m.useEffect(()=>{if(i&&!M.current){h(!0);const l=setTimeout(()=>h(!1),1e3);return()=>clearTimeout(l)}M.current=i},[i]);const j=m.useMemo(()=>{const l={brand:["#0066ff","#00aaff","#1a80ff"],pulse:["#ff3366","#ff4d74","#ff1a4c"],success:["#22c55e","#10b981","#34d399"],gold:["#ffd700","#f59e0b","#fbbf24"]};return l[n]||l.brand},[n]),N={sm:"h-1.5",md:"h-2",lg:"h-3",xl:"h-4"},A={brand:"from-[var(--brand-blue-500)] to-[var(--brand-blue-400)]",pulse:"from-[var(--brand-pulse-500)] to-[var(--brand-pulse-400)]",success:"from-emerald-500 to-emerald-400",gold:"from-amber-500 to-yellow-400"},D={brand:"shadow-[0_0_12px_rgba(0,102,255,0.5)]",pulse:"shadow-[0_0_12px_rgba(255,51,102,0.5)]",success:"shadow-[0_0_12px_rgba(34,197,94,0.5)]",gold:"shadow-[0_0_12px_rgba(255,215,0,0.5)]"};return t.jsxs("div",{className:v("relative w-full",d),children:[g&&t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("span",{className:"text-xs text-[var(--text-tertiary)]",children:[r.toLocaleString()," / ",a.toLocaleString()]}),t.jsxs("span",{className:"text-xs text-[var(--text-secondary)] font-medium",children:[Math.round(c),"%"]})]}),t.jsxs("div",{className:v("relative w-full overflow-hidden rounded-full","bg-[var(--glass-white-5)] border border-[var(--border-subtle)]",N[o]),children:[y.map(l=>t.jsx("div",{className:v("absolute top-0 bottom-0 w-px",c>=l?"bg-white/30":"bg-[var(--glass-white-10)]"),style:{left:`${l}%`}},l)),t.jsxs(u.div,{className:v("absolute inset-y-0 left-0 rounded-full","bg-gradient-to-r",A[n],i&&D[n]),initial:{width:0},animate:{width:`${c}%`},transition:{type:"spring",stiffness:80,damping:15,mass:.5},children:[t.jsx(u.div,{className:"absolute inset-0 overflow-hidden rounded-full",initial:!1,children:t.jsx(u.div,{className:"absolute inset-0",style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%)"},animate:{x:["-100%","200%"]},transition:{repeat:1/0,duration:2,ease:"linear",repeatDelay:1}})}),t.jsx(E,{children:i&&t.jsx(u.div,{className:v("absolute inset-0 rounded-full",D[n]),initial:{opacity:0},animate:{opacity:[.5,1,.5]},exit:{opacity:0},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})})]}),t.jsx(E,{children:x&&t.jsx("div",{className:"absolute inset-0 overflow-visible pointer-events-none",children:Array.from({length:12}).map((l,b)=>t.jsx(L,{delay:b*.05,color:j[b%j.length]},b))})})]}),t.jsx("style",{children:`
        @media (prefers-reduced-motion: reduce) {
          .challenge-progress-shimmer {
            animation: none;
          }
        }
      `})]})}z.propTypes={current:e.number,target:e.number,isComplete:e.bool,variant:e.oneOf(["brand","pulse","success","gold"]),size:e.oneOf(["sm","md","lg","xl"]),showMilestones:e.bool,showLabel:e.bool,className:e.string};function F({index:r,total:a}){const i=r/a*Math.PI*2,n=40+Math.random()*30,o=["#ffd700","#ff3366","#0066ff","#22c55e","#8b5cf6"],p=o[r%o.length],g=4+Math.random()*4;return t.jsx(u.div,{className:"absolute rounded-full",style:{backgroundColor:p,width:g,height:g,left:"50%",top:"50%",marginLeft:-g/2,marginTop:-g/2},initial:{x:0,y:0,opacity:1,scale:1},animate:{x:Math.cos(i)*n,y:Math.sin(i)*n-10,opacity:0,scale:.5,rotate:Math.random()*360},transition:{duration:.8+Math.random()*.4,ease:[.25,.46,.45,.94]}})}F.propTypes={index:e.number.isRequired,total:e.number.isRequired};function H({value:r,prefix:a="",suffix:i="",delay:n=0,color:o}){const[p,g]=m.useState(0),d=m.useRef(null);return m.useEffect(()=>{const c=performance.now(),y=600,x=h=>{const M=h-c-n*1e3;if(M<0){d.current=requestAnimationFrame(x);return}const j=Math.min(M/y,1),N=j===1?1:Math.pow(2,-10*j)*Math.sin((j*10-.75)*(2*Math.PI/3))+1;g(Math.floor(r*N)),j<1&&(d.current=requestAnimationFrame(x))};return d.current=requestAnimationFrame(x),()=>{d.current&&cancelAnimationFrame(d.current)}},[r,n]),t.jsxs(u.span,{className:"font-bold tabular-nums",style:{color:o},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:400,damping:15,delay:n},children:[a,p.toLocaleString(),i]})}H.propTypes={value:e.number.isRequired,prefix:e.string,suffix:e.string,delay:e.number,color:e.string};function V({xp:r=0,credits:a=0,isRevealing:i=!1,onComplete:n,size:o="md",showLabels:p=!0,className:g}){const[d,c]=m.useState(!1),y=m.useRef(!1);m.useEffect(()=>{if(i&&!y.current){c(!0);const M=setTimeout(()=>c(!1),1e3),j=setTimeout(()=>{y.current=!0,n?.()},1200);return()=>{clearTimeout(M),clearTimeout(j)}}},[i,n]),m.useEffect(()=>{i||(y.current=!1)},[i]);const h={sm:{container:"gap-2",icon:"text-base",value:"text-sm",label:"text-[10px]"},md:{container:"gap-3",icon:"text-xl",value:"text-lg",label:"text-xs"},lg:{container:"gap-4",icon:"text-2xl",value:"text-xl",label:"text-sm"}}[o];return t.jsx("div",{className:v("relative",g),children:t.jsx(E,{children:i&&t.jsxs(u.div,{className:v("flex items-center justify-center",h.container),initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:300,damping:20},children:[r>0&&t.jsxs(u.div,{className:"relative flex flex-col items-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[t.jsxs("div",{className:v("flex items-center gap-1",h.icon),children:[t.jsx("span",{children:"‚≠ê"}),t.jsx(H,{value:r,suffix:"",delay:.2,color:"var(--brand-pulse-400)"})]}),p&&t.jsx(u.span,{className:v("text-[var(--text-tertiary)] uppercase tracking-wider",h.label),initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},children:"XP"})]}),r>0&&a>0&&t.jsx(u.div,{className:"h-8 w-px bg-[var(--border-default)]",initial:{scaleY:0,opacity:0},animate:{scaleY:1,opacity:1},transition:{delay:.3}}),a>0&&t.jsxs(u.div,{className:"relative flex flex-col items-center",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[t.jsxs("div",{className:v("flex items-center gap-1",h.icon),children:[t.jsx("span",{children:"üí∞"}),t.jsx(H,{value:a,suffix:"",delay:.3,color:"var(--brand-blue-400)"})]}),p&&t.jsx(u.span,{className:v("text-[var(--text-tertiary)] uppercase tracking-wider",h.label),initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:"Credits"})]}),d&&t.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-visible",children:Array.from({length:20}).map((M,j)=>t.jsx(F,{index:j,total:20},j))}),t.jsx(u.div,{className:"absolute inset-0 -z-10 rounded-lg",style:{background:"radial-gradient(circle, rgba(255,215,0,0.15) 0%, transparent 70%)"},initial:{opacity:0,scale:.5},animate:{opacity:[0,.8,.4],scale:[.5,1.2,1]},transition:{duration:.6,ease:"easeOut"}})]})})})}V.propTypes={xp:e.number,credits:e.number,isRevealing:e.bool,onComplete:e.func,size:e.oneOf(["sm","md","lg"]),showLabels:e.bool,className:e.string};function K({xp:r=0,credits:a=0,size:i="sm",className:n}){const o={sm:"text-xs gap-2",md:"text-sm gap-3",lg:"text-base gap-4"};return t.jsxs("div",{className:v("flex items-center",o[i],n),children:[r>0&&t.jsxs("span",{className:"flex items-center gap-0.5 text-[var(--brand-pulse-400)]",children:[t.jsx("span",{children:"‚≠ê"}),t.jsx("span",{className:"font-semibold",children:r})]}),a>0&&t.jsxs("span",{className:"flex items-center gap-0.5 text-[var(--brand-blue-400)]",children:[t.jsx("span",{children:"üí∞"}),t.jsx("span",{className:"font-semibold",children:a})]})]})}K.propTypes={xp:e.number,credits:e.number,size:e.oneOf(["sm","md","lg"]),className:e.string};const Y={[s.EASY]:{label:"Easy",color:"text-emerald-400",bgColor:"bg-emerald-500/10",borderColor:"border-emerald-500/30"},[s.MEDIUM]:{label:"Medium",color:"text-amber-400",bgColor:"bg-amber-500/10",borderColor:"border-amber-500/30"},[s.HARD]:{label:"Hard",color:"text-red-400",bgColor:"bg-red-500/10",borderColor:"border-red-500/30"}};function G({difficulty:r}){const a=Y[r]||Y[s.EASY];return t.jsx("span",{className:v("inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium border",a.color,a.bgColor,a.borderColor),children:a.label})}G.propTypes={difficulty:e.string.isRequired};function X({onClick:r,disabled:a,isLoading:i}){const n=S();return t.jsxs(u.button,{className:v("relative px-4 py-2 rounded-lg","font-semibold text-sm","bg-gradient-to-r from-[var(--brand-blue-500)] to-[var(--brand-blue-600)]","text-white","border border-white/10","shadow-md shadow-[var(--brand-blue-500)]/20","disabled:opacity-50 disabled:cursor-not-allowed","hover:shadow-lg hover:shadow-[var(--brand-blue-500)]/30","transition-all duration-200"),onClick:r,disabled:a||i,whileHover:!a&&!n?{scale:1.05}:void 0,whileTap:a?void 0:{scale:.95},children:[!n&&!a&&t.jsx(u.div,{className:"absolute inset-0 rounded-lg overflow-hidden",initial:!1,children:t.jsx(u.div,{className:"absolute inset-0",style:{background:"linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.2) 50%, transparent 100%)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:2}})}),t.jsx("span",{className:"relative z-10 flex items-center gap-1.5",children:i?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"animate-spin",children:"‚è≥"}),"Claiming..."]}):t.jsxs(t.Fragment,{children:[t.jsx("span",{children:"üéÅ"}),"Claim"]})})]})}X.propTypes={onClick:e.func.isRequired,disabled:e.bool,isLoading:e.bool};function B({isClaimed:r}){const a=S();return t.jsxs(u.div,{className:"flex items-center gap-2 text-emerald-400",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:300,damping:20},children:[t.jsx(u.span,{animate:!a&&!r?{scale:[1,1.2,1]}:void 0,transition:{duration:.8,repeat:r?0:1/0,repeatDelay:1},children:r?"&#x2705;":"&#x2728;"}),t.jsx("span",{className:"text-sm font-medium",children:r?"Claimed":"Complete!"})]})}B.propTypes={isClaimed:e.bool.isRequired};function $({challenge:r,onClaimReward:a,isClaimingReward:i=!1,className:n=""}){const o=S(),{type:p="",difficulty:g=s.EASY,description:d="",currentProgress:c=0,target:y=0,isComplete:x=!1,isClaimed:h=!1,percentage:M=0,rewards:j=null}=r||{},N=m.useMemo(()=>x?"success":g===s.HARD?"pulse":"brand",[x,g]),A=m.useCallback(()=>{x&&!h&&a?.()},[x,h,a]);return!r||!p?null:t.jsxs(u.div,{className:v("relative p-4 rounded-xl","bg-[var(--glass-white-5)]","border",x&&!h?"border-emerald-500/40 shadow-lg shadow-emerald-500/10":"border-[var(--border-subtle)]","transition-colors duration-300",n),layout:!0,children:[t.jsx(E,{children:x&&!h&&!o&&t.jsx(u.div,{className:"absolute inset-0 rounded-xl pointer-events-none",style:{background:"radial-gradient(ellipse at 50% 0%, rgba(34,197,94,0.1), transparent 70%)"},initial:{opacity:0},animate:{opacity:[.5,1,.5]},exit:{opacity:0},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(u.span,{className:"text-2xl",animate:x&&!h&&!o?{scale:[1,1.1,1],rotate:[0,5,-5,0]}:void 0,transition:{duration:.6,repeat:x&&!h?1/0:0,repeatDelay:2},children:p.icon}),t.jsxs("div",{children:[t.jsx("h3",{className:"font-semibold text-[var(--text-primary)]",children:p.title}),t.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:d})]})]}),t.jsx(G,{difficulty:g})]}),t.jsxs("div",{className:"mb-3",children:[t.jsxs("div",{className:"flex items-center justify-between text-sm mb-1.5",children:[t.jsxs("span",{className:"text-[var(--text-tertiary)]",children:[c.toLocaleString()," / ",y.toLocaleString()]}),t.jsxs("span",{className:"text-[var(--text-secondary)] font-medium",children:[Math.round(M),"%"]})]}),t.jsx(z,{current:c,target:y,isComplete:x,variant:N,size:"md"})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-xs text-[var(--text-quaternary)] uppercase tracking-wide",children:"Rewards:"}),t.jsx(K,{xp:j.xp,credits:j.credits,size:"sm"})]}),t.jsx("div",{children:x?h?t.jsx(B,{isClaimed:!0}):t.jsx(X,{onClick:A,disabled:i,isLoading:i}):t.jsx("span",{className:"text-sm text-[var(--text-quaternary)]",children:"In Progress"})})]})]})]})}$.propTypes={challenge:e.shape({id:e.string.isRequired,type:e.shape({id:e.string.isRequired,title:e.string.isRequired,icon:e.string.isRequired}).isRequired,difficulty:e.string.isRequired,description:e.string.isRequired,currentProgress:e.number.isRequired,target:e.number.isRequired,isComplete:e.bool.isRequired,isClaimed:e.bool.isRequired,percentage:e.number.isRequired,rewards:e.shape({xp:e.number.isRequired,credits:e.number.isRequired}).isRequired}).isRequired,onClaimReward:e.func,isClaimingReward:e.bool,className:e.string};function k({value:r,label:a}){const i=S(),n=String(r).padStart(2,"0");return t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("div",{className:v("relative px-2 py-1 rounded-lg","bg-[var(--glass-white-5)]","border border-[var(--border-subtle)]","min-w-[2.5rem] text-center"),children:t.jsx(E,{mode:"wait",children:t.jsx(u.span,{className:"block text-lg font-mono font-bold text-[var(--text-primary)]",initial:i?!1:{y:-10,opacity:0},animate:{y:0,opacity:1},exit:i?!1:{y:10,opacity:0},transition:{duration:.15},children:n},n)})}),t.jsx("span",{className:"text-[10px] text-[var(--text-quaternary)] uppercase tracking-wider mt-1",children:a})]})}k.propTypes={value:e.number.isRequired,label:e.string.isRequired};function O(){const r=S();return t.jsx(u.span,{className:"text-lg font-bold text-[var(--text-tertiary)] mx-0.5 self-start mt-1",animate:r?void 0:{opacity:[1,.3,1]},transition:{duration:1,repeat:1/0,ease:"easeInOut"},children:":"})}function J({hours:r=0,minutes:a=0,seconds:i=0,label:n="Resets in",showSeconds:o=!0,className:p=""}){const g=S(),d=r*60+a,c=d<60,y=d<15,x=m.useMemo(()=>y?"shadow-red-500/20":c?"shadow-amber-500/15":"",[y,c]);return t.jsxs("div",{className:v("relative flex flex-col items-center gap-1",p),children:[t.jsxs("span",{className:"text-xs text-[var(--text-tertiary)] flex items-center gap-1",children:[t.jsx("span",{children:"‚è∞"}),n]}),t.jsxs(u.div,{className:v("relative flex items-center gap-0.5 px-3 py-2 rounded-xl","bg-[var(--glass-white-5)]","border",y?"border-red-500/30":c?"border-amber-500/20":"border-[var(--border-subtle)]",x&&`shadow-lg ${x}`),animate:!g&&y?{scale:[1,1.02,1]}:void 0,transition:{duration:1,repeat:1/0},children:[t.jsx(E,{children:c&&!g&&t.jsx(u.div,{className:v("absolute inset-0 rounded-xl",y?"bg-gradient-to-r from-red-500/10 to-red-600/10":"bg-gradient-to-r from-amber-500/5 to-amber-600/5"),initial:{opacity:0},animate:{opacity:[.3,.6,.3]},exit:{opacity:0},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})}),t.jsxs("div",{className:"relative z-10 flex items-center",children:[t.jsx(k,{value:r,label:"hrs"}),t.jsx(O,{}),t.jsx(k,{value:a,label:"min"}),o&&t.jsxs(t.Fragment,{children:[t.jsx(O,{}),t.jsx(k,{value:i,label:"sec"})]})]})]})]})}J.propTypes={hours:e.number,minutes:e.number,seconds:e.number,label:e.string,showSeconds:e.bool,className:e.string};e.number,e.number,e.number,e.string;const me={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},pe={hidden:{opacity:0,y:-20},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:200,damping:20}}},xe={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{type:"spring",stiffness:200,damping:20}}};function W({count:r,totalXp:a,totalCredits:i,onClick:n,disabled:o}){const p=S();return t.jsxs(u.button,{className:v("relative flex items-center gap-3 px-6 py-3 rounded-xl","font-semibold text-white","bg-gradient-to-r from-[var(--brand-blue-600)] to-[var(--brand-pulse-600)]","border border-white/10","shadow-lg shadow-[var(--brand-blue-500)]/20","hover:shadow-xl hover:shadow-[var(--brand-blue-500)]/30","disabled:opacity-50 disabled:cursor-not-allowed","transition-all duration-200"),onClick:n,disabled:o,whileHover:!o&&!p?{scale:1.02}:void 0,whileTap:o?void 0:{scale:.98},children:[!p&&t.jsx(u.div,{className:"absolute inset-0 rounded-xl",style:{background:"linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent)"},animate:{x:["-100%","200%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}}),t.jsxs("span",{children:["Claim All (",r,")"]}),t.jsxs("span",{className:"flex items-center gap-2 text-sm opacity-80",children:[t.jsxs("span",{children:["+",a," XP"]}),t.jsx("span",{className:"text-[var(--text-quaternary)]",children:"|"}),t.jsxs("span",{children:["+",i," Credits"]})]})]})}W.propTypes={count:e.number.isRequired,totalXp:e.number.isRequired,totalCredits:e.number.isRequired,onClick:e.func.isRequired,disabled:e.bool};function Q({isVisible:r,onDismiss:a}){const i=S();return r?t.jsx(E,{children:t.jsx(u.div,{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:a,children:t.jsxs(u.div,{className:"relative p-8 rounded-2xl bg-[var(--surface-glass)] border border-[var(--border-glow)] text-center max-w-md mx-4",initial:{scale:.5,opacity:0,rotateX:-30},animate:{scale:1,opacity:1,rotateX:0},exit:{scale:.8,opacity:0},transition:{type:"spring",stiffness:200,damping:15},onClick:n=>n.stopPropagation(),children:[!i&&t.jsx(u.div,{className:"absolute inset-0 rounded-2xl",style:{background:"radial-gradient(circle at 50% 30%, rgba(255,215,0,0.2), transparent 70%)"},animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0}}),t.jsx(u.div,{className:"text-6xl mb-4",animate:i?void 0:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:.6,repeat:2},children:"üèÜ"}),t.jsx("h2",{className:"text-2xl font-bold text-[var(--text-primary)] mb-2",children:"All Challenges Complete!"}),t.jsx("p",{className:"text-[var(--text-secondary)] mb-6",children:"Amazing work! You have conquered all of today's challenges."}),t.jsx("button",{onClick:a,className:v("px-6 py-2 rounded-lg","bg-[var(--brand-blue-500)] hover:bg-[var(--brand-blue-600)]","text-white font-medium","transition-colors duration-200"),children:"Continue"})]})})}):null}Q.propTypes={isVisible:e.bool.isRequired,onDismiss:e.func.isRequired};function ge({userId:r="anonymous",onChallengeComplete:a,onRewardClaimed:i,className:n=""}){const o=S(),{fireConfetti:p}=Z(),[g,d]=m.useState(!1),[c,y]=m.useState(null),x=m.useCallback(f=>{o||p({preset:"subtle",origin:{x:.5,y:.5}}),a?.(f)},[p,a,o]),h=m.useCallback((f,I)=>{y(f.id),setTimeout(()=>y(null),1200),i?.(f,I)},[i]),{challenges:M,timeUntilReset:j,claimReward:N,claimAll:A,allComplete:D,allClaimed:l,unclaimedComplete:b}=de({userId:r,onChallengeComplete:x,onRewardClaimed:h}),w=m.useCallback(f=>{N(f)&&!o&&p({preset:"workout",origin:{x:.5,y:.5}})},[N,p,o]),R=m.useCallback(()=>{const f=A();(f.xp>0||f.credits>0)&&(o||p({preset:"achievement",origin:{x:.5,y:.4}}),D&&d(!0))},[A,D,p,o]),C=M.filter(f=>f.isComplete&&!f.isClaimed).reduce((f,I)=>({xp:f.xp+I.rewards.xp,credits:f.credits+I.rewards.credits}),{xp:0,credits:0});return t.jsxs(t.Fragment,{children:[t.jsxs(u.div,{className:v("relative p-6 rounded-2xl","bg-[var(--surface-glass)] backdrop-blur-lg","border border-[var(--border-default)]",n),variants:me,initial:"hidden",animate:"visible",children:[t.jsxs(u.div,{className:"flex items-center justify-between mb-6",variants:pe,children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-2xl",children:"üéØ"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-[var(--text-primary)]",children:"Daily Challenges"}),t.jsx("p",{className:"text-sm text-[var(--text-tertiary)]",children:"Complete all 3 for bonus rewards"})]})]}),t.jsx(J,{hours:j.hours,minutes:j.minutes,seconds:j.seconds})]}),t.jsx("div",{className:"space-y-4 mb-6",children:M.map(f=>t.jsx(u.div,{variants:xe,children:t.jsx($,{challenge:f,onClaimReward:()=>w(f.id),isClaimingReward:c===f.id})},f.id))}),t.jsx(E,{children:b>0&&t.jsx(u.div,{className:"flex justify-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:t.jsx(W,{count:b,totalXp:C.xp,totalCredits:C.credits,onClick:R,disabled:l})})}),l&&t.jsx(u.div,{className:"text-center py-4",initial:{opacity:0},animate:{opacity:1},children:t.jsxs("span",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-emerald-500/10 text-emerald-400 text-sm font-medium",children:[t.jsx("span",{children:"‚úÖ"}),"All challenges completed!"]})}),t.jsx(E,{children:c&&t.jsx(u.div,{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm rounded-2xl z-10",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t.jsx(V,{xp:M.find(f=>f.id===c)?.rewards.xp||0,credits:M.find(f=>f.id===c)?.rewards.credits||0,isRevealing:!0,size:"lg"})})})]}),t.jsx(Q,{isVisible:g,onDismiss:()=>d(!1)})]})}ge.propTypes={userId:e.string,onChallengeComplete:e.func,onRewardClaimed:e.func,className:e.string};e.string,e.func,e.func,e.bool,e.bool,e.bool,e.string;e.shape({id:e.string,name:e.string.isRequired,icon:e.string.isRequired,amount:e.number,quantity:e.number,description:e.string,rarity:e.oneOf(["common","rare","epic","legendary"])}).isRequired,e.number,e.oneOf(["common","rare","epic","legendary"]),e.string;e.number.isRequired,e.number.isRequired;e.number.isRequired,e.string.isRequired,e.number;e.number.isRequired;e.number,e.bool,e.func,e.number,e.string;e.bool.isRequired,e.object.isRequired,e.func;e.shape({name:e.string.isRequired,icon:e.string.isRequired,rarity:e.oneOf(["common","rare","epic","legendary"])}),e.bool,e.func,e.string;e.bool,e.number,e.number,e.arrayOf(e.string),e.shape({x:e.number,y:e.number}),e.number,e.number,e.string;e.number.isRequired,e.number.isRequired,e.object.isRequired;e.number,e.bool,e.oneOf(["low","medium","high"]),e.string;e.number.isRequired,e.number.isRequired,e.object.isRequired,e.object.isRequired;e.number,e.number,e.oneOf(["xs","sm","md","lg","xl"]),e.bool,e.bool,e.string;e.number.isRequired,e.number.isRequired;e.number.isRequired,e.string.isRequired,e.number;e.number.isRequired;e.number,e.bool,e.func,e.bool,e.string;export{$ as C,ge as D};
