import{r as v,j as e,L as x,u as P}from"./react-vendor-D847gc3Q.js";import{G as c}from"./GlassSurface-DZwHl8aR.js";import{G as d}from"./GlassButton-DjCB8_4V.js";import{G as E,a as I,d as O}from"./GlassNav-JV0Z4HsU.js";import{M as F}from"./MeshBackground-BqbFOsCF.js";import{D as Q,Q as U}from"./QuickLogModal-eVLIQv_q.js";import{u as B,a as R,b as $,h as H,i as _,j as q,c as A}from"./nutritionStore-DO5xbvSK.js";import{u as J,b as V}from"./useNutrition-Bx7Tq6qb.js";import{aM as W,P as N,o as Y,aQ as K,aJ as k,S as X,v as Z,aH as z,m as f}from"./index-Ii7_m7xX.js";import{C as ee}from"./clipboard-list-DgpbBlxc.js";import{U as y}from"./utensils-DyM1Rbyf.js";import{C as se}from"./chevron-left-BinftEj1.js";import{C as te}from"./chevron-right-PPhtnn3u.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./recharts-vendor-d8oTApeF.js";import"./d3-vendor-DkU_Wy0v.js";import"./loader-circle-CzVNrrx-.js";import"./circle-check-big-CDQOKD3g.js";import"./circle-alert-IdvBvyHK.js";import"./refresh-cw-Bz_Xj2cy.js";import"./minus-DwFahz13.js";import"./apollo-vendor-BNHFeEEc.js";import"./reactflow-vendor-5ig9bY2l.js";function ae({progress:s,size:t=120,strokeWidth:a=10,color:i,children:o}){const n=(t-a)/2,l=n*2*Math.PI,r=l-Math.min(100,s)/100*l;return e.jsxs("div",{className:"relative",style:{width:t,height:t},children:[e.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[e.jsx("circle",{cx:t/2,cy:t/2,r:n,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:a}),e.jsx(f.circle,{cx:t/2,cy:t/2,r:n,fill:"none",stroke:i,strokeWidth:a,strokeDasharray:l,strokeDashoffset:r,strokeLinecap:"round",initial:{strokeDashoffset:l},animate:{strokeDashoffset:r},transition:{duration:1,ease:"easeOut"}})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o})]})}function p({label:s,current:t,goal:a,unit:i,color:o,icon:n}){const l=a>0?t/a*100:0,r=Math.max(0,a-t);return e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:`${o}20`},children:e.jsx(n,{className:"w-4 h-4",style:{color:o}})}),e.jsx("span",{className:"text-sm text-gray-400",children:s})]}),e.jsxs("div",{className:"flex items-end justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:Math.round(t)}),e.jsxs("span",{className:"text-gray-400",children:["/",a,i]})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[r,i," left"]})]}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx(f.div,{className:"h-full rounded-full",style:{backgroundColor:o},initial:{width:0},animate:{width:`${Math.min(100,l)}%`},transition:{duration:.5}})})]})}function re({meal:s,onDelete:t}){const a=s.food?.name||s.customFood?.name||s.recipe?.name||s.quickEntryName||"Unknown";return e.jsxs(f.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"flex items-center gap-4 p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 flex items-center justify-center",children:e.jsx(y,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate",children:a}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.servings!==1&&`${s.servings} servings Â· `,s.mealType.replace("_"," ")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-semibold",children:s.totalCalories}),e.jsx("p",{className:"text-xs text-gray-400",children:"cal"})]})]})}function ie({date:s,onDateChange:t}){const a=new Date().toISOString().split("T")[0],i=s===a,o=()=>{const r=new Date(s);r.setDate(r.getDate()-1),t(r.toISOString().split("T")[0])},n=()=>{const r=new Date(s);r.setDate(r.getDate()+1),t(r.toISOString().split("T")[0])},l=r=>{if(r===a)return"Today";const u=new Date(r),m=new Date;return m.setDate(m.getDate()-1),r===m.toISOString().split("T")[0]?"Yesterday":u.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})};return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:o,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(se,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white font-semibold",children:l(s)}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(s).toLocaleDateString()})]}),e.jsx("button",{onClick:n,disabled:i,className:`p-2 rounded-full transition-colors ${i?"opacity-30 cursor-not-allowed":"hover:bg-white/10"}`,children:e.jsx(te,{className:"w-5 h-5 text-gray-400"})})]})}function ne(){const s=P();return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsxs(c,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 flex items-center justify-center",children:e.jsx(y,{className:"w-10 h-10 text-green-400"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"Nutrition Tracking"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Track your meals, macros, and nutrition goals to optimize your training results. Get personalized recommendations based on your archetype."}),e.jsxs(d,{variant:"primary",className:"w-full mb-3",onClick:()=>s("/settings/nutrition"),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Enable Nutrition Tracking"]}),e.jsx(d,{variant:"ghost",className:"w-full",onClick:()=>s("/dashboard"),children:"Maybe Later"})]})})}function Te(){const s=B(),t=R(),a=$(),i=H(),o=_(),n=q(),{load:l}=J(),{deleteMeal:r}=V(),[u,m]=v.useState(new Date().toISOString().split("T")[0]),b=A(h=>h.openQuickLog);if(v.useEffect(()=>{l()},[l]),!s)return e.jsx(ne,{});const g=a?.totalCalories||0,j=t?.calories||2e3,w=g/j*100,D=Math.max(0,j-g),S=a?.totalProteinG||0,C=a?.totalCarbsG||0,G=a?.totalFatG||0,M=t?.proteinG||150,T=t?.carbsG||200,L=t?.fatG||70;return e.jsxs("div",{className:"min-h-screen bg-gray-950",children:[e.jsx(F,{}),e.jsx(E,{}),e.jsx(I,{}),e.jsx("main",{className:"lg:pl-64 pt-16 pb-24 lg:pb-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Nutrition"}),e.jsx("p",{className:"text-gray-400",children:"Track your daily nutrition"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{to:"/nutrition/settings",children:e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx(W,{className:"w-4 h-4"})})}),e.jsxs(d,{variant:"primary",onClick:()=>b("lunch"),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Log Food"]})]})]}),e.jsx(c,{className:"p-4 mb-6",children:e.jsx(ie,{date:u,onDateChange:m})}),e.jsx(c,{className:"p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(ae,{progress:w,size:140,strokeWidth:12,color:w>100?"#ef4444":"#22c55e",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:g}),e.jsxs("p",{className:"text-xs text-gray-400",children:["of ",j]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Remaining"}),e.jsx("p",{className:"text-4xl font-bold text-white mb-1",children:D}),e.jsx("p",{className:"text-gray-400",children:"calories"}),a?.wasWorkoutDay&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-green-400 text-sm",children:[e.jsx(Y,{className:"w-4 h-4"}),"Workout day bonus applied"]}),o?.currentLoggingStreak>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-orange-400 text-sm",children:[e.jsx(K,{className:"w-4 h-4"}),o.currentLoggingStreak," day streak"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx(p,{label:"Protein",current:S,goal:M,unit:"g",color:"#22c55e",icon:k}),e.jsx(p,{label:"Carbs",current:C,goal:T,unit:"g",color:"#3b82f6",icon:X}),e.jsx(p,{label:"Fat",current:G,goal:L,unit:"g",color:"#f59e0b",icon:Q})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx(x,{to:"/nutrition/recipes",children:e.jsxs(c,{className:"p-4 text-center hover:bg-white/10 transition-colors",children:[e.jsx(Z,{className:"w-6 h-6 text-purple-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Recipes"})]})}),e.jsx(x,{to:"/nutrition/plans",children:e.jsxs(c,{className:"p-4 text-center hover:bg-white/10 transition-colors",children:[e.jsx(ee,{className:"w-6 h-6 text-blue-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Meal Plans"})]})}),e.jsx(x,{to:"/nutrition/history",children:e.jsxs(c,{className:"p-4 text-center hover:bg-white/10 transition-colors",children:[e.jsx(z,{className:"w-6 h-6 text-green-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-300",children:"History"})]})})]}),n&&e.jsx(c,{className:"p-4 mb-6 border border-green-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:n.name}),e.jsx("p",{className:"text-xs text-gray-400",children:n.description})]}),e.jsx(x,{to:"/nutrition/archetype",className:"text-green-400 text-sm hover:underline",children:"View tips"})]})}),e.jsxs(c,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Today's Meals"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[i.length," items"]})]}),i.length>0?e.jsx("div",{className:"space-y-3",children:i.map(h=>e.jsx(re,{meal:h,onDelete:r},h.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(y,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"No meals logged yet today"}),e.jsxs(d,{variant:"primary",onClick:()=>b("breakfast"),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Log your first meal"]})]})]})]})}),e.jsx(O,{}),e.jsx(U,{})]})}export{Te as default};
