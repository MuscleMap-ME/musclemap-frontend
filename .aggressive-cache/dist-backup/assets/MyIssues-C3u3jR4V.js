import{u as y,r as n,j as e,L as m}from"./react-vendor-D847gc3Q.js";import{G as S,e as L,m as I}from"./index-CNQdMB_L.js";import{f as M}from"./date-vendor-C_JWt2cu.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BNHFeEEc.js";import"./reactflow-vendor-CYb5nRwM.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-CxtoZpzE.js";const i={Back:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})}),Plus:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),Comment:()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),ChevronUp:()=>e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})},g={0:{label:"Bug",color:"bg-red-500/20 text-red-400",icon:"ðŸ›"},1:{label:"Feature",color:"bg-green-500/20 text-green-400",icon:"âœ¨"},2:{label:"Enhancement",color:"bg-blue-500/20 text-blue-400",icon:"ðŸ’¡"},3:{label:"Account",color:"bg-orange-500/20 text-orange-400",icon:"ðŸ‘¤"},4:{label:"Question",color:"bg-pink-500/20 text-pink-400",icon:"â“"},5:{label:"Other",color:"bg-gray-500/20 text-gray-400",icon:"ðŸ“"}},b={0:{label:"Open",color:"bg-green-500/20 text-green-400 border-green-500/30"},1:{label:"In Progress",color:"bg-blue-500/20 text-blue-400 border-blue-500/30"},2:{label:"Under Review",color:"bg-purple-500/20 text-purple-400 border-purple-500/30"},3:{label:"Resolved",color:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30"},4:{label:"Closed",color:"bg-gray-500/20 text-gray-400 border-gray-500/30"},5:{label:"Won't Fix",color:"bg-red-500/20 text-red-400 border-red-500/30"},6:{label:"Duplicate",color:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"}};function B({issue:s}){const p=y(),c=g[s.type]||g[5],r=b[s.status]||b[0];return e.jsxs(I.tr,{initial:{opacity:0},animate:{opacity:1},className:"hover:bg-gray-800/30 cursor-pointer transition-colors",onClick:()=>p(`/issues/${s.issueNumber}`),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"text-gray-500",children:["#",s.issueNumber]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${c.color}`,children:c.icon}),e.jsx("span",{className:"font-medium text-white truncate max-w-[300px]",children:s.title})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full border ${r.color}`,children:r.label})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:"flex items-center justify-center gap-1 text-gray-400",children:[e.jsx(i.ChevronUp,{}),s.voteCount]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("span",{className:"flex items-center justify-center gap-1 text-gray-400",children:[e.jsx(i.Comment,{}),s.commentCount]})}),e.jsx("td",{className:"px-4 py-3 text-right text-sm text-gray-500",children:M(new Date(s.createdAt),{addSuffix:!0})})]})}function D(){const{token:s}=S(),{user:p}=L(),c=y(),[r,j]=n.useState([]),[N,u]=n.useState(!0),[a,f]=n.useState("all"),[l,x]=n.useState(0),[d,v]=n.useState(0),o=20;n.useEffect(()=>{if(!s){c("/login");return}w()},[s,a,l]);const w=async()=>{u(!0);try{const t=new URLSearchParams;a==="open"?t.set("status","0"):a==="resolved"?t.set("status","3"):a==="closed"&&t.set("status","4"),t.set("limit",o.toString()),t.set("offset",(l*o).toString());const h=await(await fetch(`/api/me/issues?${t}`,{headers:{Authorization:`Bearer ${s}`}})).json();j(h.data||[]),v(h.pagination?.total||0)}catch{}finally{u(!1)}},k=r.filter(t=>t.status===0).length,C=r.filter(t=>t.status===3||t.status===4).length;return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white pb-24",children:[e.jsx("header",{className:"bg-gray-800 border-b border-gray-700 sticky top-0 z-20",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(m,{to:"/issues",className:"text-gray-400 hover:text-white flex items-center gap-2",children:[e.jsx(i.Back,{}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“‹"}),e.jsx("span",{children:"My Issues"})]}),e.jsxs(m,{to:"/issues/new",className:"bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors",children:[e.jsx(i.Plus,{}),e.jsx("span",{className:"hidden sm:inline",children:"New Issue"})]})]})})}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-xl p-4 border border-gray-700/50 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:d}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Submitted"})]}),e.jsxs("div",{className:"bg-green-500/10 rounded-xl p-4 border border-green-500/30 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:k}),e.jsx("div",{className:"text-sm text-gray-400",children:"Open"})]}),e.jsxs("div",{className:"bg-emerald-500/10 rounded-xl p-4 border border-emerald-500/30 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:C}),e.jsx("div",{className:"text-sm text-gray-400",children:"Resolved"})]})]}),e.jsx("div",{className:"flex gap-2 mb-6",children:["all","open","resolved","closed"].map(t=>e.jsx("button",{onClick:()=>{f(t),x(0)},className:`px-4 py-2 rounded-lg text-sm font-medium capitalize transition-colors ${a===t?"bg-purple-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:t},t))}),N?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading your issues..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-800/30 rounded-xl",children:[e.jsx("p",{className:"text-4xl mb-4",children:"ðŸ“­"}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No issues found"}),e.jsx("p",{className:"text-gray-400 mb-4",children:a==="all"?"You haven't submitted any issues yet.":`No ${a} issues found.`}),e.jsxs(m,{to:"/issues/new",className:"inline-flex items-center gap-2 bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(i.Plus,{}),"Create Issue"]})]}):e.jsx("div",{className:"bg-gray-800/30 rounded-xl border border-gray-700/50 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800/50 text-left",children:[e.jsx("th",{className:"px-4 py-3 text-xs text-gray-400 font-medium",children:"#"}),e.jsx("th",{className:"px-4 py-3 text-xs text-gray-400 font-medium",children:"Title"}),e.jsx("th",{className:"px-4 py-3 text-xs text-gray-400 font-medium",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-xs text-gray-400 font-medium text-center",children:"Votes"}),e.jsx("th",{className:"px-4 py-3 text-xs text-gray-400 font-medium text-center",children:"Comments"}),e.jsx("th",{className:"px-4 py-3 text-xs text-gray-400 font-medium text-right",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-700/50",children:r.map(t=>e.jsx(B,{issue:t},t.id))})]})})}),d>o&&e.jsxs("div",{className:"flex justify-center gap-2 mt-6",children:[e.jsx("button",{onClick:()=>x(Math.max(0,l-1)),disabled:l===0,className:"px-4 py-2 bg-gray-800 rounded-lg text-gray-300 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),e.jsxs("span",{className:"px-4 py-2 text-gray-400",children:["Page ",l+1," of ",Math.ceil(d/o)]}),e.jsx("button",{onClick:()=>x(l+1),disabled:(l+1)*o>=d,className:"px-4 py-2 bg-gray-800 rounded-lg text-gray-300 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}export{D as default};
