import{r as v,j as e,L as x,d as E}from"./react-vendor-D1NxaRNd.js";import{G as c}from"./GlassSurface-BMiMerMg.js";import{G as d}from"./GlassButton-ZwMLByeP.js";import{G as I,a as O,d as F}from"./GlassNav-HpY4LPZs.js";import{M as U}from"./MeshBackground-5ZvDS217.js";import{D as B,Q}from"./QuickLogModal-nEcyiSv7.js";import{u as R,a as $,b as A,h as q,i as _,j as H,c as J}from"./nutritionStore-DGHtIE_J.js";import{u as V,b as W}from"./useNutrition-DKz-mts1.js";import{ab as Y,P as N,q as K,a9 as X,a8 as k,S as Z,w as z,J as ee,m as f}from"./index-DJKXoZu6.js";import{C as se}from"./clipboard-list-Bodm2K7d.js";import{U as y}from"./utensils-DquKYaql.js";import{C as te}from"./chevron-left-DuswC20d.js";import{C as ae}from"./chevron-right-B8B-Nais.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./recharts-vendor-BziRPEEi.js";import"./d3-vendor-mcDw60ct.js";import"./loader-circle-CU0ewwIB.js";import"./circle-check-big-Dimeuew7.js";import"./circle-alert-SpUrJGtg.js";import"./refresh-cw-CWujyU-k.js";import"./minus-rCFfZUeH.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";function re({progress:s,size:t=120,strokeWidth:a=10,color:l,children:o}){const n=(t-a)/2,i=n*2*Math.PI,r=i-Math.min(100,s)/100*i;return e.jsxs("div",{className:"relative",style:{width:t,height:t},children:[e.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[e.jsx("circle",{cx:t/2,cy:t/2,r:n,fill:"none",stroke:"rgba(255,255,255,0.1)",strokeWidth:a}),e.jsx(f.circle,{cx:t/2,cy:t/2,r:n,fill:"none",stroke:l,strokeWidth:a,strokeDasharray:i,strokeDashoffset:r,strokeLinecap:"round",initial:{strokeDashoffset:i},animate:{strokeDashoffset:r},transition:{duration:1,ease:"easeOut"}})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o})]})}function p({label:s,current:t,goal:a,unit:l,color:o,icon:n}){const i=a>0?t/a*100:0,r=Math.max(0,a-t);return e.jsxs(c,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center",style:{backgroundColor:`${o}20`},children:e.jsx(n,{className:"w-4 h-4",style:{color:o}})}),e.jsx("span",{className:"text-sm text-gray-400",children:s})]}),e.jsxs("div",{className:"flex items-end justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-white",children:Math.round(t)}),e.jsxs("span",{className:"text-gray-400",children:["/",a,l]})]}),e.jsxs("span",{className:"text-sm text-gray-400",children:[r,l," left"]})]}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx(f.div,{className:"h-full rounded-full",style:{backgroundColor:o},initial:{width:0},animate:{width:`${Math.min(100,i)}%`},transition:{duration:.5}})})]})}function ie({meal:s,onDelete:t}){const a=s.food?.name||s.customFood?.name||s.recipe?.name||s.quickEntryName||"Unknown";return e.jsxs(f.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,x:-100},className:"flex items-center gap-4 p-4 rounded-xl bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 flex items-center justify-center",children:e.jsx(y,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate",children:a}),e.jsxs("p",{className:"text-sm text-gray-400",children:[s.servings!==1&&`${s.servings} servings Â· `,s.mealType.replace("_"," ")]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-semibold",children:s.totalCalories}),e.jsx("p",{className:"text-xs text-gray-400",children:"cal"})]})]})}function ne({date:s,onDateChange:t}){const a=new Date().toISOString().split("T")[0],l=s===a,o=()=>{const r=new Date(s);r.setDate(r.getDate()-1),t(r.toISOString().split("T")[0])},n=()=>{const r=new Date(s);r.setDate(r.getDate()+1),t(r.toISOString().split("T")[0])},i=r=>{if(r===a)return"Today";const u=new Date(r),m=new Date;return m.setDate(m.getDate()-1),r===m.toISOString().split("T")[0]?"Yesterday":u.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})};return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:o,className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:e.jsx(te,{className:"w-5 h-5 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white font-semibold",children:i(s)}),e.jsx("p",{className:"text-xs text-gray-400",children:new Date(s).toLocaleDateString()})]}),e.jsx("button",{onClick:n,disabled:l,className:`p-2 rounded-full transition-colors ${l?"opacity-30 cursor-not-allowed":"hover:bg-white/10"}`,children:e.jsx(ae,{className:"w-5 h-5 text-gray-400"})})]})}function le(){const s=E();return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-6",children:e.jsxs(c,{className:"max-w-md w-full p-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 flex items-center justify-center",children:e.jsx(y,{className:"w-10 h-10 text-green-400"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-3",children:"Nutrition Tracking"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Track your meals, macros, and nutrition goals to optimize your training results. Get personalized recommendations based on your archetype."}),e.jsxs(d,{variant:"primary",className:"w-full mb-3",onClick:()=>s("/settings/nutrition"),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Enable Nutrition Tracking"]}),e.jsx(d,{variant:"ghost",className:"w-full",onClick:()=>s("/dashboard"),children:"Maybe Later"})]})})}function Le(){const s=R(),t=$(),a=A(),l=q(),o=_(),n=H(),i=Array.isArray(l)?l:[],{load:r}=V(),{deleteMeal:u}=W(),[m,D]=v.useState(new Date().toISOString().split("T")[0]),b=J(h=>h.openQuickLog);if(v.useEffect(()=>{r()},[r]),!s)return e.jsx(le,{});const g=a?.totalCalories||0,j=t?.calories||2e3,w=g/j*100,S=Math.max(0,j-g),C=a?.totalProteinG||0,G=a?.totalCarbsG||0,M=a?.totalFatG||0,T=t?.proteinG||150,L=t?.carbsG||200,P=t?.fatG||70;return e.jsxs("div",{className:"min-h-screen bg-gray-950",children:[e.jsx(U,{}),e.jsx(I,{}),e.jsx(O,{}),e.jsx("main",{className:"lg:pl-64 pt-16 pb-24 lg:pb-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Nutrition"}),e.jsx("p",{className:"text-gray-400",children:"Track your daily nutrition"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{to:"/nutrition/settings",children:e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx(Y,{className:"w-4 h-4"})})}),e.jsxs(d,{variant:"primary",onClick:()=>b("lunch"),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Log Food"]})]})]}),e.jsx(c,{className:"p-4 mb-6",children:e.jsx(ne,{date:m,onDateChange:D})}),e.jsx(c,{className:"p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx(re,{progress:w,size:140,strokeWidth:12,color:w>100?"#ef4444":"#22c55e",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:g}),e.jsxs("p",{className:"text-xs text-gray-400",children:["of ",j]})]})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Remaining"}),e.jsx("p",{className:"text-4xl font-bold text-white mb-1",children:S}),e.jsx("p",{className:"text-gray-400",children:"calories"}),a?.wasWorkoutDay&&e.jsxs("div",{className:"flex items-center gap-2 mt-3 text-green-400 text-sm",children:[e.jsx(K,{className:"w-4 h-4"}),"Workout day bonus applied"]}),o?.currentLoggingStreak>0&&e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-orange-400 text-sm",children:[e.jsx(X,{className:"w-4 h-4"}),o.currentLoggingStreak," day streak"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx(p,{label:"Protein",current:C,goal:T,unit:"g",color:"#22c55e",icon:k}),e.jsx(p,{label:"Carbs",current:G,goal:L,unit:"g",color:"#3b82f6",icon:Z}),e.jsx(p,{label:"Fat",current:M,goal:P,unit:"g",color:"#f59e0b",icon:B})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx(x,{to:"/nutrition/recipes",children:e.jsxs(c,{className:"p-4 text-center hover:bg-white/10 transition-colors",children:[e.jsx(z,{className:"w-6 h-6 text-purple-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Recipes"})]})}),e.jsx(x,{to:"/nutrition/plans",children:e.jsxs(c,{className:"p-4 text-center hover:bg-white/10 transition-colors",children:[e.jsx(se,{className:"w-6 h-6 text-blue-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Meal Plans"})]})}),e.jsx(x,{to:"/nutrition/history",children:e.jsxs(c,{className:"p-4 text-center hover:bg-white/10 transition-colors",children:[e.jsx(ee,{className:"w-6 h-6 text-green-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-300",children:"History"})]})})]}),n&&e.jsx(c,{className:"p-4 mb-6 border border-green-500/20",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-green-500/20 to-emerald-500/20 flex items-center justify-center",children:e.jsx(k,{className:"w-5 h-5 text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:n.name}),e.jsx("p",{className:"text-xs text-gray-400",children:n.description})]}),e.jsx(x,{to:"/nutrition/archetype",className:"text-green-400 text-sm hover:underline",children:"View tips"})]})}),e.jsxs(c,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Today's Meals"}),e.jsxs("span",{className:"text-sm text-gray-400",children:[i.length," items"]})]}),i.length>0?e.jsx("div",{className:"space-y-3",children:i.map(h=>e.jsx(ie,{meal:h,onDelete:u},h.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(y,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"No meals logged yet today"}),e.jsxs(d,{variant:"primary",onClick:()=>b("breakfast"),children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),"Log your first meal"]})]})]})]})}),e.jsx(F,{}),e.jsx(Q,{})]})}export{Le as default};
