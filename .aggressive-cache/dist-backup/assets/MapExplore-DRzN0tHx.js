const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/World3DRenderer-BW1oFfnj.js","assets/index-VPOrxyVC.js","assets/react-vendor-D1NxaRNd.js","assets/building-2-B_NILbYH.js","assets/gauge-cmLEIveT.js","assets/arrow-left-BALoXPjp.js","assets/minimize-2-D0XHZf8r.js","assets/leaflet-vendor-CIGW-MKW.css","assets/reactflow-vendor-B5DZHykP.css","assets/index-CTxaAOZG.css","assets/ConstellationRenderer-C26dD-Ez.js","assets/IsometricRenderer--9QNIc3J.js"])))=>i.map(i=>d[i]);
var Z=Object.defineProperty;var ee=(s,e,i)=>e in s?Z(s,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[e]=i;var l=(s,e,i)=>ee(s,typeof e!="symbol"?e+"":e,i);import{j as o,r as c,d as te,k as ie,u as se,a as I,L as oe}from"./react-vendor-D1NxaRNd.js";import{c as ae,_ as k,m as b,a_ as ne,S as re,p as le,X as ce,Z as de,A as z}from"./index-VPOrxyVC.js";import{B as he}from"./building-2-B_NILbYH.js";import{G as ue}from"./gauge-cmLEIveT.js";import{A as me}from"./arrow-left-BALoXPjp.js";import{a as pe,M as ge}from"./minimize-2-D0XHZf8r.js";const fe=[["path",{d:"M10.513 4.856 13.12 2.17a.5.5 0 0 1 .86.46l-1.377 4.317",key:"193nxd"}],["path",{d:"M15.656 10H20a1 1 0 0 1 .78 1.63l-1.72 1.773",key:"27a7lr"}],["path",{d:"M16.273 16.273 10.88 21.83a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14H4a1 1 0 0 1-.78-1.63l4.507-4.643",key:"1e0qe9"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ye=ae("zap-off",fe);function be(){const s=navigator;return{memory:s.deviceMemory??null,cores:s.hardwareConcurrency??4,dpr:Math.min(window.devicePixelRatio||1,2),effectiveType:s.connection?.effectiveType??null,prefersReducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,prefersHighContrast:window.matchMedia("(prefers-contrast: high)").matches,supportsWebGL2:ve(),supportsOffscreenCanvas:typeof OffscreenCanvas<"u"}}function ve(){try{return!!document.createElement("canvas").getContext("webgl2")}catch{return!1}}function xe(s){return s.prefersReducedMotion||s.effectiveType==="2g"||s.effectiveType==="slow-2g"||s.memory!==null&&s.memory<4||!s.supportsWebGL2?"lite":s.memory!==null&&s.memory>=8&&s.cores>=4&&(s.effectiveType==="4g"||s.effectiveType===null)?"high":"medium"}function we(s=500){return new Promise(e=>{let i=0;const t=performance.now();function a(){if(i++,performance.now()-t<s)requestAnimationFrame(a);else{const n=performance.now()-t;e(Math.round(i/n*1e3))}}requestAnimationFrame(a)})}class Ce{constructor(e=!1){l(this,"metrics",new Map);l(this,"enabled");this.enabled=e}log(e,i){this.metrics.has(e)||this.metrics.set(e,[]),this.metrics.get(e).push(i),this.enabled}start(e){const i=performance.now();return()=>{this.log(e,performance.now()-i)}}report(){const e={};return this.metrics.forEach((i,t)=>{if(i.length===0)return;const a=i.reduce((n,r)=>n+r,0);e[t]={avg:a/i.length,min:Math.min(...i),max:Math.max(...i),samples:i.length}}),e}clear(){this.metrics.clear()}}const O=new Ce;function Ne(s,e){let i=!1;return function(...t){i||(s.apply(this,t),i=!0,setTimeout(()=>{i=!1},e))}}function A(s){const e=window.devicePixelRatio||1;switch(s){case"lite":return 1;case"medium":return Math.min(e,1.5);case"high":return Math.min(e,2);default:return 1}}class _{constructor(){l(this,"canvas",null);l(this,"ctx",null);l(this,"data",null);l(this,"renderNodes",[]);l(this,"width",0);l(this,"height",0);l(this,"dpr",1);l(this,"animationId",null);l(this,"lastFrameTime",0);l(this,"frameCount",0);l(this,"fps",60);l(this,"activeNodeId",null);l(this,"highlightedCategory",null);l(this,"searchQuery","");l(this,"hoveredNode",null);l(this,"onClickCallback",null);l(this,"onHoverCallback",null);l(this,"animationProgress",0);l(this,"isInitializing",!0);l(this,"startRenderLoop",()=>{const e=i=>{this.frameCount++,i-this.lastFrameTime>=1e3&&(this.fps=this.frameCount,this.frameCount=0,this.lastFrameTime=i),this.isInitializing&&this.animationProgress<1&&(this.animationProgress=Math.min(1,this.animationProgress+.05),this.renderNodes.forEach((t,a)=>{const n=a*.03,r=Math.max(0,(this.animationProgress-n)/(1-n));t.opacity=this.easeOutCubic(Math.min(1,r))}),this.animationProgress>=1&&(this.isInitializing=!1)),this.draw(),this.animationId=requestAnimationFrame(e)};this.animationId=requestAnimationFrame(e)});l(this,"handleMouseMove",Ne(e=>{if(!this.canvas)return;const i=this.canvas.getBoundingClientRect(),t=(e.clientX-i.left)*(this.canvas.width/i.width)/this.dpr,a=(e.clientY-i.top)*(this.canvas.height/i.height)/this.dpr;this.updateHover(t,a)},16));l(this,"handleClick",()=>{this.hoveredNode&&this.onClickCallback?.(this.hoveredNode.node)});l(this,"touchPosition",null);l(this,"handleTouch",e=>{if(!this.canvas||e.touches.length===0)return;const i=this.canvas.getBoundingClientRect(),t=(e.touches[0].clientX-i.left)*(this.canvas.width/i.width)/this.dpr,a=(e.touches[0].clientY-i.top)*(this.canvas.height/i.height)/this.dpr;this.touchPosition={x:t,y:a},this.updateHover(t,a)});l(this,"handleTouchEnd",()=>{this.touchPosition&&this.hoveredNode&&this.onClickCallback?.(this.hoveredNode.node),this.touchPosition=null,this.renderNodes.forEach(e=>{e.hovered=!1}),this.hoveredNode=null,this.onHoverCallback?.(null),this.canvas&&(this.canvas.style.cursor="default")})}async initialize(e,i){const t=O.start("liteRenderer.init");if(this.data=i,this.dpr=A("lite"),this.canvas=document.createElement("canvas"),this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.display="block",this.canvas.setAttribute("role","img"),this.canvas.setAttribute("aria-label","Interactive navigation map"),e.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d",{alpha:!1,desynchronized:!0}),!this.ctx)throw new Error("Failed to get 2D canvas context");this.canvas.addEventListener("mousemove",this.handleMouseMove),this.canvas.addEventListener("click",this.handleClick),this.canvas.addEventListener("touchstart",this.handleTouch,{passive:!0}),this.canvas.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),this.resize(e.clientWidth,e.clientHeight),this.buildRenderNodes(),this.isInitializing=!0,this.animationProgress=0,this.startRenderLoop(),t()}buildRenderNodes(){this.data&&(this.renderNodes=this.data.nodes.map((e,i)=>{const t=e.position;return{node:e,x:t.x*this.width,y:t.y*this.height,radius:this.calculateNodeRadius(e),hovered:!1,active:e.id===this.activeNodeId,filtered:!0,opacity:0}}),this.applyFilters())}calculateNodeRadius(e){return e.metadata?.nodeCount?30:18}easeOutCubic(e){return 1-Math.pow(1-e,3)}draw(){if(!this.ctx||!this.canvas)return;const e=this.ctx;e.fillStyle="#0a0a0f",e.fillRect(0,0,this.canvas.width,this.canvas.height),this.drawGrid(e),this.drawConnections(e),this.drawNodes(e)}drawGrid(e){const i=40*this.dpr;e.strokeStyle="rgba(255, 255, 255, 0.03)",e.lineWidth=1;for(let t=0;t<this.canvas.width;t+=i)e.beginPath(),e.moveTo(t,0),e.lineTo(t,this.canvas.height),e.stroke();for(let t=0;t<this.canvas.height;t+=i)e.beginPath(),e.moveTo(0,t),e.lineTo(this.canvas.width,t),e.stroke()}drawConnections(e){this.renderNodes.forEach(i=>{!i.filtered||!i.node.connections||i.node.connections.forEach(t=>{const a=this.renderNodes.find(y=>y.node.id===t);if(!a||!a.filtered)return;const n=this.renderNodes.indexOf(i),r=this.renderNodes.indexOf(a);if(n>r)return;const u=i.x*this.dpr,m=i.y*this.dpr,d=a.x*this.dpr,g=a.y*this.dpr,f=e.createLinearGradient(u,m,d,g),p=Math.min(i.opacity,a.opacity)*.3;f.addColorStop(0,`rgba(255, 255, 255, ${p})`),f.addColorStop(1,`rgba(255, 255, 255, ${p*.5})`),e.strokeStyle=f,e.lineWidth=1.5*this.dpr,e.setLineDash([5*this.dpr,5*this.dpr]),e.beginPath(),e.moveTo(u,m),e.lineTo(d,g),e.stroke(),e.setLineDash([])})})}drawNodes(e){[...this.renderNodes].sort((t,a)=>t.active?1:a.active?-1:t.hovered?1:a.hovered?-1:0).forEach(t=>{if(!t.filtered||t.opacity<=0)return;const a=t.x*this.dpr,n=t.y*this.dpr,r=t.radius*this.dpr*(t.hovered?1.15:1)*(t.active?1.2:1),u=t.node.metadata?.color||"#ffffff",[m,d,g]=this.hexToRgb(u);if(t.active||t.hovered){const p=r*(t.active?2:1.5),y=e.createRadialGradient(a,n,r,a,n,p);y.addColorStop(0,`rgba(${m}, ${d}, ${g}, ${t.opacity*.4})`),y.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=y,e.beginPath(),e.arc(a,n,p,0,Math.PI*2),e.fill()}e.beginPath(),e.arc(a,n,r,0,Math.PI*2);const f=e.createRadialGradient(a-r*.3,n-r*.3,0,a,n,r);if(f.addColorStop(0,`rgba(${m}, ${d}, ${g}, ${t.opacity})`),f.addColorStop(1,`rgba(${Math.floor(m*.7)}, ${Math.floor(d*.7)}, ${Math.floor(g*.7)}, ${t.opacity})`),e.fillStyle=f,e.fill(),e.strokeStyle=`rgba(255, 255, 255, ${t.opacity*(t.active?.8:t.hovered?.5:.2)})`,e.lineWidth=(t.active?2:1)*this.dpr,e.stroke(),t.node.metadata?.icon&&(e.font=`${r*.9}px system-ui, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle=`rgba(255, 255, 255, ${t.opacity})`,e.fillText(t.node.metadata.icon,a,n)),t.hovered||t.active){const p=t.node.shortLabel||t.node.label;e.font=`bold ${14*this.dpr}px system-ui, -apple-system, sans-serif`,e.textAlign="center",e.textBaseline="top";const y=e.measureText(p),C=8*this.dpr,w=a,L=n+r+12*this.dpr;e.fillStyle=`rgba(0, 0, 0, ${t.opacity*.8})`,e.beginPath(),e.roundRect(w-y.width/2-C,L-2*this.dpr,y.width+C*2,20*this.dpr,4*this.dpr),e.fill(),e.fillStyle=`rgba(255, 255, 255, ${t.opacity})`,e.fillText(p,w,L)}})}hexToRgb(e){const i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:[255,255,255]}updateHover(e,i){let t=null;for(const a of this.renderNodes){if(!a.filtered)continue;const n=e-a.x,r=i-a.y,u=a.radius*1.2;if(n*n+r*r<u*u){t=a;break}}this.renderNodes.forEach(a=>{a.hovered=a===t}),t!==this.hoveredNode&&(this.hoveredNode=t,this.canvas.style.cursor=t?"pointer":"default",this.onHoverCallback?.(t?.node||null))}setActiveNode(e){this.activeNodeId=e,this.renderNodes.forEach(i=>{i.active=i.node.id===e})}setHighlightedCategory(e){this.highlightedCategory=e,this.applyFilters()}setSearchFilter(e){this.searchQuery=e.toLowerCase(),this.applyFilters()}applyFilters(){this.renderNodes.forEach(e=>{let i=!0;this.highlightedCategory&&e.node.category!==this.highlightedCategory&&(i=!1),this.searchQuery&&(`${e.node.label} ${e.node.shortLabel||""} ${e.node.metadata?.description||""}`.toLowerCase().includes(this.searchQuery)||(i=!1)),e.filtered=i,i?e.opacity<1&&(e.opacity=Math.min(1,e.opacity+.1)):e.opacity=Math.max(0,e.opacity-.1)})}resize(e,i){this.width=e,this.height=i,this.canvas&&(this.canvas.width=e*this.dpr,this.canvas.height=i*this.dpr),this.buildRenderNodes(),this.isInitializing||this.renderNodes.forEach(t=>{t.opacity=t.filtered?1:0})}setQualityLevel(e){this.dpr=A(e),this.canvas&&(this.canvas.width=this.width*this.dpr,this.canvas.height=this.height*this.dpr)}dispose(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.canvas&&(this.canvas.removeEventListener("mousemove",this.handleMouseMove),this.canvas.removeEventListener("click",this.handleClick),this.canvas.removeEventListener("touchstart",this.handleTouch),this.canvas.removeEventListener("touchend",this.handleTouchEnd),this.canvas.parentElement?.removeChild(this.canvas)),this.canvas=null,this.ctx=null,this.renderNodes=[],this.onClickCallback=null,this.onHoverCallback=null}onNodeClick(e){this.onClickCallback=e}onNodeHover(e){this.onHoverCallback=e}getFPS(){return this.fps}}async function ke(s,e){if(e==="lite")return new _;switch(s){case"world":{const{World3DRenderer:i}=await k(async()=>{const{World3DRenderer:t}=await import("./World3DRenderer-BW1oFfnj.js");return{World3DRenderer:t}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));return new i}case"constellation":{const{ConstellationRenderer:i}=await k(async()=>{const{ConstellationRenderer:t}=await import("./ConstellationRenderer-C26dD-Ez.js");return{ConstellationRenderer:t}},__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]));return new i}case"isometric":{const{IsometricRenderer:i}=await k(async()=>{const{IsometricRenderer:t}=await import("./IsometricRenderer--9QNIc3J.js");return{IsometricRenderer:t}},__vite__mapDeps([11,1,2,3,4,5,6,7,8,9]));return new i}default:return new _}}function Le(s){switch(s){case"world":k(()=>import("./World3DRenderer-BW1oFfnj.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));break;case"constellation":k(()=>import("./ConstellationRenderer-C26dD-Ez.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]));break;case"isometric":k(()=>import("./IsometricRenderer--9QNIc3J.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9]));break}}const R=[{id:"training",label:"Training",color:"#FF6B6B",icon:"ðŸ’ª",nodeCount:8},{id:"progress",label:"Progress",color:"#4ECDC4",icon:"ðŸ“Š",nodeCount:6},{id:"community",label:"Community",color:"#9B59B6",icon:"ðŸ‘¥",nodeCount:7},{id:"economy",label:"Economy",color:"#F39C12",icon:"ðŸ’°",nodeCount:5},{id:"health",label:"Health",color:"#2ECC71",icon:"â¤ï¸",nodeCount:5},{id:"account",label:"Account",color:"#95A5A6",icon:"âš™ï¸",nodeCount:4}];function je(){return[{id:"training-workout",label:"Workout",shortLabel:"Workout",category:"training",route:"/workout",position:{x:.15,y:.35,z:.5},metadata:{color:"#FF6B6B",icon:"ðŸ‹ï¸",description:"Start your workout session"},connections:["training-exercises","training-journey"]},{id:"training-exercises",label:"Exercises",shortLabel:"Exercises",category:"training",route:"/exercises",position:{x:.25,y:.25,z:.45},metadata:{color:"#FF6B6B",icon:"ðŸ“",description:"Browse exercise library"},connections:["training-workout"]},{id:"training-journey",label:"Journey",shortLabel:"Journey",category:"training",route:"/journey",position:{x:.2,y:.45,z:.55},metadata:{color:"#FF6B6B",icon:"ðŸ—ºï¸",description:"Your fitness journey"},connections:["training-workout","training-skills"]},{id:"training-skills",label:"Skills",shortLabel:"Skills",category:"training",route:"/skills",position:{x:.1,y:.5,z:.6},metadata:{color:"#FF6B6B",icon:"âš”ï¸",description:"Skill tree progression"},connections:["training-journey","training-martial"]},{id:"training-martial",label:"Martial Arts",shortLabel:"Martial",category:"training",route:"/martial-arts",position:{x:.05,y:.4,z:.5},metadata:{color:"#FF6B6B",icon:"ðŸ¥‹",description:"Martial arts training"},connections:["training-skills"]},{id:"training-pt",label:"PT Tests",shortLabel:"PT Tests",category:"training",route:"/pt-tests",position:{x:.3,y:.35,z:.4},metadata:{color:"#FF6B6B",icon:"ðŸŽ–ï¸",description:"Physical fitness tests"},connections:["training-exercises","training-career"]},{id:"training-career",label:"Career Readiness",shortLabel:"Career",category:"training",route:"/career-readiness",position:{x:.35,y:.45,z:.45},metadata:{color:"#FF6B6B",icon:"ðŸŽ¯",description:"Career fitness goals"},connections:["training-pt"]},{id:"training-adventure",label:"Adventure Map",shortLabel:"Adventure",category:"training",route:"/adventure-map",position:{x:.15,y:.55,z:.5},metadata:{color:"#FF6B6B",icon:"ðŸ—ºï¸",description:"RPG-style navigation"},connections:["training-journey"]}]}function Ee(){return[{id:"progress-dashboard",label:"Dashboard",shortLabel:"Dashboard",category:"progress",route:"/dashboard",position:{x:.5,y:.3,z:.5},metadata:{color:"#4ECDC4",icon:"ðŸ“±",description:"Your fitness dashboard"},connections:["progress-stats","progress-records"]},{id:"progress-stats",label:"Statistics",shortLabel:"Stats",category:"progress",route:"/stats",position:{x:.55,y:.2,z:.45},metadata:{color:"#4ECDC4",icon:"ðŸ“ˆ",description:"Detailed statistics"},connections:["progress-dashboard"]},{id:"progress-records",label:"Personal Records",shortLabel:"Records",category:"progress",route:"/personal-records",position:{x:.6,y:.35,z:.5},metadata:{color:"#4ECDC4",icon:"ðŸ†",description:"Your personal bests"},connections:["progress-dashboard","progress-achievements"]},{id:"progress-achievements",label:"Achievements",shortLabel:"Achieve",category:"progress",route:"/achievements",position:{x:.65,y:.25,z:.45},metadata:{color:"#4ECDC4",icon:"ðŸŽ–ï¸",description:"Earned achievements"},connections:["progress-records","progress-progression"]},{id:"progress-progression",label:"Progression",shortLabel:"Progress",category:"progress",route:"/progression",position:{x:.5,y:.4,z:.55},metadata:{color:"#4ECDC4",icon:"ðŸ“Š",description:"Character progression"},connections:["progress-achievements"]},{id:"progress-photos",label:"Progress Photos",shortLabel:"Photos",category:"progress",route:"/progress-photos",position:{x:.45,y:.2,z:.4},metadata:{color:"#4ECDC4",icon:"ðŸ“·",description:"Visual progress tracking"},connections:["progress-stats"]}]}function Me(){return[{id:"community-hub",label:"Community Hub",shortLabel:"Community",category:"community",route:"/community",position:{x:.75,y:.5,z:.5},metadata:{color:"#9B59B6",icon:"ðŸ ",description:"Community dashboard"},connections:["community-crews","community-rivals","community-competitions"]},{id:"community-crews",label:"Crews",shortLabel:"Crews",category:"community",route:"/crews",position:{x:.8,y:.4,z:.45},metadata:{color:"#9B59B6",icon:"ðŸ‘¥",description:"Join or create crews"},connections:["community-hub"]},{id:"community-rivals",label:"Rivals",shortLabel:"Rivals",category:"community",route:"/rivals",position:{x:.85,y:.55,z:.55},metadata:{color:"#9B59B6",icon:"âš”ï¸",description:"Challenge your rivals"},connections:["community-hub"]},{id:"community-competitions",label:"Competitions",shortLabel:"Compete",category:"community",route:"/competitions",position:{x:.7,y:.6,z:.6},metadata:{color:"#9B59B6",icon:"ðŸ†",description:"Join competitions"},connections:["community-hub","community-highfives"]},{id:"community-highfives",label:"High Fives",shortLabel:"High 5s",category:"community",route:"/highfives",position:{x:.8,y:.65,z:.55},metadata:{color:"#9B59B6",icon:"ðŸ–ï¸",description:"Give and receive high fives"},connections:["community-competitions"]},{id:"community-messages",label:"Messages",shortLabel:"Messages",category:"community",route:"/messages",position:{x:.9,y:.5,z:.5},metadata:{color:"#9B59B6",icon:"ðŸ’¬",description:"Direct messages"},connections:["community-hub"]},{id:"community-live",label:"Live Activity",shortLabel:"Live",category:"community",route:"/live",position:{x:.75,y:.35,z:.4},metadata:{color:"#9B59B6",icon:"ðŸ“¡",description:"Live activity feed"},connections:["community-hub"]}]}function Se(){return[{id:"economy-credits",label:"Credits",shortLabel:"Credits",category:"economy",route:"/credits",position:{x:.4,y:.7,z:.5},metadata:{color:"#F39C12",icon:"ðŸ’Ž",description:"Your credit balance"},connections:["economy-wallet","economy-marketplace"]},{id:"economy-wallet",label:"Wallet",shortLabel:"Wallet",category:"economy",route:"/wallet",position:{x:.35,y:.8,z:.55},metadata:{color:"#F39C12",icon:"ðŸ‘›",description:"Manage your wallet"},connections:["economy-credits"]},{id:"economy-marketplace",label:"Marketplace",shortLabel:"Market",category:"economy",route:"/marketplace",position:{x:.5,y:.75,z:.55},metadata:{color:"#F39C12",icon:"ðŸª",description:"Buy and sell items"},connections:["economy-credits","economy-skins"]},{id:"economy-skins",label:"Skins Store",shortLabel:"Skins",category:"economy",route:"/skins",position:{x:.55,y:.85,z:.6},metadata:{color:"#F39C12",icon:"ðŸŽ¨",description:"Customize your look"},connections:["economy-marketplace"]},{id:"economy-collection",label:"Collection",shortLabel:"Collection",category:"economy",route:"/collection",position:{x:.45,y:.85,z:.5},metadata:{color:"#F39C12",icon:"ðŸ“¦",description:"Your item collection"},connections:["economy-marketplace"]}]}function ze(){return[{id:"health-overview",label:"Wellness",shortLabel:"Wellness",category:"health",route:"/wellness",position:{x:.2,y:.75,z:.5},metadata:{color:"#2ECC71",icon:"â¤ï¸",description:"Wellness overview"},connections:["health-recovery","health-nutrition","health-goals"]},{id:"health-recovery",label:"Recovery",shortLabel:"Recovery",category:"health",route:"/recovery",position:{x:.15,y:.85,z:.55},metadata:{color:"#2ECC71",icon:"ðŸ˜´",description:"Rest and recovery"},connections:["health-overview"]},{id:"health-nutrition",label:"Nutrition",shortLabel:"Nutrition",category:"health",route:"/nutrition",position:{x:.25,y:.85,z:.55},metadata:{color:"#2ECC71",icon:"ðŸ¥—",description:"Nutrition tracking"},connections:["health-overview"]},{id:"health-goals",label:"Goals",shortLabel:"Goals",category:"health",route:"/goals",position:{x:.3,y:.75,z:.45},metadata:{color:"#2ECC71",icon:"ðŸŽ¯",description:"Set your goals"},connections:["health-overview","health-limitations"]},{id:"health-limitations",label:"Limitations",shortLabel:"Limits",category:"health",route:"/limitations",position:{x:.35,y:.85,z:.5},metadata:{color:"#2ECC71",icon:"âš ï¸",description:"Track limitations"},connections:["health-goals"]}]}function Re(){return[{id:"account-profile",label:"Profile",shortLabel:"Profile",category:"account",route:"/profile",position:{x:.9,y:.2,z:.5},metadata:{color:"#95A5A6",icon:"ðŸ‘¤",description:"Your profile"},connections:["account-settings","account-trainers"]},{id:"account-settings",label:"Settings",shortLabel:"Settings",category:"account",route:"/settings",position:{x:.95,y:.3,z:.45},metadata:{color:"#95A5A6",icon:"âš™ï¸",description:"App settings"},connections:["account-profile"]},{id:"account-trainers",label:"Trainers",shortLabel:"Trainers",category:"account",route:"/trainers",position:{x:.85,y:.15,z:.55},metadata:{color:"#95A5A6",icon:"ðŸƒ",description:"Find trainers"},connections:["account-profile"]},{id:"account-plugins",label:"Plugins",shortLabel:"Plugins",category:"account",route:"/plugins",position:{x:.95,y:.15,z:.5},metadata:{color:"#95A5A6",icon:"ðŸ”Œ",description:"Manage plugins"},connections:["account-settings"]}]}function B(){return{nodes:[...je(),...Ee(),...Me(),...Se(),...ze(),...Re()],categories:R,edges:[],metadata:{version:"1.0.0",lastUpdated:new Date().toISOString()}}}function $(){const s={training:{x:.2,y:.3,z:.5},progress:{x:.5,y:.2,z:.5},community:{x:.8,y:.3,z:.5},economy:{x:.35,y:.7,z:.5},health:{x:.2,y:.7,z:.5},account:{x:.8,y:.7,z:.5}};return{nodes:R.map(e=>({id:e.id,label:e.label,category:e.id,route:Pe(e.id),position:s[e.id]||{x:.5,y:.5,z:.5},metadata:{color:e.color,icon:e.icon,description:`${e.nodeCount} features`,nodeCount:e.nodeCount}})),categories:R,metadata:{version:"1.0.0",lastUpdated:new Date().toISOString()}}}function Pe(s){return{training:"/workout",progress:"/dashboard",community:"/community",economy:"/credits",health:"/wellness",account:"/profile"}[s]||"/dashboard"}const Te=[{type:"world",label:"Globe",icon:o.jsx(ne,{className:"w-4 h-4"})},{type:"constellation",label:"Stars",icon:o.jsx(re,{className:"w-4 h-4"})},{type:"isometric",label:"Rooms",icon:o.jsx(he,{className:"w-4 h-4"})}];function Fe({currentView:s,onViewChange:e,onViewHover:i,disabled:t=!1}){return o.jsx("div",{className:`
        flex items-center gap-1 p-1
        bg-glass-dark-30 backdrop-blur-glass-md
        border border-glass-default rounded-glass-lg
      `,role:"tablist","aria-label":"Map visualization style",children:Te.map(a=>{const n=s===a.type;return o.jsxs("button",{onClick:()=>e(a.type),onMouseEnter:()=>i?.(a.type),onFocus:()=>i?.(a.type),disabled:t,role:"tab","aria-selected":n,"aria-controls":`map-view-${a.type}`,className:`
              relative flex items-center gap-2 px-3 py-1.5 rounded-glass-md
              text-sm font-medium transition-colors duration-fast
              ${t?"opacity-50 cursor-not-allowed":"cursor-pointer"}
              ${n?"text-white":"text-white/60 hover:text-white/80"}
            `,children:[n&&o.jsx(b.div,{layoutId:"viewSelector-active",className:"absolute inset-0 bg-glass-brand-medium rounded-glass-md",initial:!1,transition:{type:"spring",stiffness:500,damping:30}}),o.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[a.icon,o.jsx("span",{className:"hidden sm:inline",children:a.label})]})]},a.type)})})}function Ie({value:s,onChange:e,placeholder:i="Search..."}){const t=c.useRef(null);c.useEffect(()=>{const n=r=>{(r.metaKey||r.ctrlKey)&&r.key==="k"&&(r.preventDefault(),t.current?.focus())};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[]);const a=()=>{e(""),t.current?.focus()};return o.jsxs("div",{className:`
        relative flex items-center
        bg-glass-dark-30 backdrop-blur-glass-md
        border border-glass-default rounded-glass-lg
        focus-within:border-glass-brand-glow focus-within:shadow-glow-brand-sm
        transition-all duration-fast
      `,children:[o.jsx(le,{className:"absolute left-3 w-4 h-4 text-white/40 pointer-events-none"}),o.jsx("input",{ref:t,type:"text",value:s,onChange:n=>e(n.target.value),placeholder:i,className:`
          w-full min-w-[120px] sm:min-w-[200px] py-1.5 pl-9 pr-8
          bg-transparent text-white text-sm
          placeholder:text-white/30
          focus:outline-none
        `,"aria-label":"Search map features"}),s&&o.jsx("button",{onClick:a,className:`
            absolute right-2 p-1 rounded-full
            text-white/40 hover:text-white/80 hover:bg-glass-white-10
            transition-colors duration-fast
          `,"aria-label":"Clear search",children:o.jsx(ce,{className:"w-3 h-3"})}),!s&&o.jsx("span",{className:"absolute right-3 hidden sm:inline text-white/20 text-xs",children:"âŒ˜K"})]})}function Ae({categories:s,selectedCategory:e,onCategorySelect:i}){return o.jsxs("div",{className:`
        absolute bottom-4 left-1/2 -translate-x-1/2 z-10
        flex items-center gap-2 px-3 py-2
        bg-glass-dark-30 backdrop-blur-glass-md
        border border-glass-default rounded-glass-xl
      `,role:"group","aria-label":"Filter by category",children:[o.jsx("button",{onClick:()=>i(null),className:`
          px-3 py-1 rounded-glass-md text-xs font-medium
          transition-all duration-fast
          ${e===null?"bg-glass-white-15 text-white":"text-white/50 hover:text-white/80 hover:bg-glass-white-5"}
        `,"aria-pressed":e===null,children:"All"}),s.map(t=>{const a=e===t.id;return o.jsxs("button",{onClick:()=>i(a?null:t.id),className:`
              relative flex items-center gap-1.5 px-3 py-1 rounded-glass-md
              text-xs font-medium transition-all duration-fast
              ${a?"text-white":"text-white/50 hover:text-white/80"}
            `,"aria-pressed":a,style:{backgroundColor:a?`${t.color}33`:void 0},children:[o.jsx(b.span,{className:"w-2 h-2 rounded-full",style:{backgroundColor:t.color},animate:{scale:a?1.2:1,boxShadow:a?`0 0 8px ${t.color}`:"none"}}),o.jsx("span",{className:"hidden sm:inline",children:t.label}),o.jsx("span",{className:"sm:hidden",children:t.icon}),o.jsx("span",{className:"hidden md:inline text-white/30 ml-1",children:t.nodeCount})]},t.id)})]})}function _e({node:s}){return o.jsxs(b.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:10,scale:.95},transition:{duration:.15},className:`
        absolute top-20 left-1/2 -translate-x-1/2 z-20
        px-4 py-3 min-w-[200px] max-w-[300px]
        bg-glass-dark-40 backdrop-blur-glass-lg
        border border-glass-default rounded-glass-lg
        shadow-glass-lg
      `,role:"tooltip",children:[o.jsxs("div",{className:"flex items-start gap-3",children:[s.metadata?.icon&&o.jsx("span",{className:"text-2xl",children:s.metadata.icon}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"text-white font-semibold text-sm truncate",children:s.label}),s.metadata?.description&&o.jsx("p",{className:"text-white/60 text-xs mt-1",children:s.metadata.description}),o.jsx("p",{className:"text-white/30 text-xs mt-2 font-mono",children:s.route})]})]}),o.jsx("div",{className:`
          absolute -top-2 left-1/2 -translate-x-1/2
          w-4 h-4 rotate-45
          bg-glass-dark-40 border-l border-t border-glass-default
        `})]})}const D={lite:"Lite",medium:"Med",high:"High"},Be={lite:"text-yellow-400",medium:"text-blue-400",high:"text-green-400"};function $e({level:s,fps:e,onToggle:i}){const t=e>=50?"text-green-400":e>=30?"text-yellow-400":"text-red-400";return o.jsxs("button",{onClick:i,className:`
        flex items-center gap-2 px-2 py-1
        bg-glass-dark-30 backdrop-blur-glass-md
        border border-glass-default rounded-glass-md
        hover:bg-glass-white-5 transition-colors duration-fast
        text-xs
      `,title:`Quality: ${D[s]} | FPS: ${e}
Click to toggle`,children:[o.jsxs("span",{className:`flex items-center gap-1 ${Be[s]}`,children:[s==="lite"?o.jsx(ye,{className:"w-3 h-3"}):o.jsx(de,{className:"w-3 h-3"}),o.jsx("span",{className:"hidden sm:inline",children:D[s]})]}),o.jsx("span",{className:"w-px h-3 bg-white/20"}),o.jsxs("span",{className:`flex items-center gap-1 ${t}`,children:[o.jsx(ue,{className:"w-3 h-3"}),o.jsx("span",{children:e})]})]})}function De({mode:s}){const e=s==="compact"?6:12;return o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-void-base",children:o.jsxs("div",{className:"relative w-full h-full max-w-md max-h-80",children:[Array.from({length:e}).map((i,t)=>{const a=t/e*Math.PI*2,n=s==="compact"?30:40,r=50+Math.cos(a)*n,u=50+Math.sin(a)*n;return o.jsx(b.div,{className:"absolute w-4 h-4 rounded-full bg-glass-white-10",style:{left:`${r}%`,top:`${u}%`,transform:"translate(-50%, -50%)"},animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:1.5,delay:t*.1,repeat:1/0,ease:"easeInOut"}},t)}),o.jsx(b.div,{className:`
            absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2
            w-12 h-12 rounded-full border-2 border-brand-blue-500/30
            border-t-brand-blue-500
          `,animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),o.jsx(b.p,{className:`
            absolute bottom-8 left-1/2 -translate-x-1/2
            text-white/40 text-sm
          `,animate:{opacity:[.4,.8,.4]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:"Loading map..."}),s==="full"&&o.jsx("svg",{className:"absolute inset-0 w-full h-full opacity-10",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:Array.from({length:e}).map((i,t)=>{const a=t/e*Math.PI*2,n=(t+1)/e*Math.PI*2,r=50+Math.cos(a)*40,u=50+Math.sin(a)*40,m=50+Math.cos(n)*40,d=50+Math.sin(n)*40;return o.jsx(b.line,{x1:r,y1:u,x2:m,y2:d,stroke:"white",strokeWidth:"0.5",strokeDasharray:"2,2",animate:{strokeDashoffset:[0,4]},transition:{duration:1,repeat:1/0,ease:"linear"}},t)})})]})})}const Oe="constellation",He=24;function Ge({mode:s,initialView:e,currentRoute:i,onNavigate:t,className:a=""}){const n=te(),[r,u]=ie(),m=c.useRef(null),d=c.useRef(null),[g,f]=c.useState(!0),[p,y]=c.useState(r.get("view")||e||Oe),[C,w]=c.useState("medium"),[L,H]=c.useState(null),[M,G]=c.useState(""),[S,W]=c.useState(null),[Q,V]=c.useState(()=>typeof window<"u"?!localStorage.getItem("mapMenuOnboardingDismissed"):!0),[Y,P]=c.useState(60);c.useEffect(()=>{const h=be(),v=xe(h);w(v)},[]),c.useEffect(()=>{if(!m.current)return;let h=!0;const v=m.current;return(async()=>{for(f(!0),d.current&&(d.current.dispose(),d.current=null);v.firstChild;)v.removeChild(v.firstChild);const j=s==="compact"?$():B(),E=s==="compact"?"lite":C;try{const F=O.start("mapMenu.rendererInit"),N=await ke(p,E);if(!h){N.dispose();return}if(await N.initialize(v,j),N.onNodeClick(x=>{t?t(x.route):n(x.route)}),N.onNodeHover(H),i){const x=j.nodes.find(X=>X.route===i);x&&N.setActiveNode(x.id)}d.current=N,F(),E!=="lite"&&setTimeout(async()=>{const x=await we();P(x),x<He&&h&&w("lite")},1e3),f(!1)}catch{w("lite"),f(!1)}})(),()=>{h=!1,d.current?.dispose()}},[p,C,s,i,n,t]),c.useEffect(()=>{if(!m.current||!d.current)return;const h=new ResizeObserver(v=>{for(const T of v){const{width:j,height:E}=T.contentRect;d.current?.resize(j,E)}});return h.observe(m.current),()=>h.disconnect()},[]),c.useEffect(()=>{u(h=>(h.set("view",p),h),{replace:!0})},[p,u]),c.useEffect(()=>{d.current?.setSearchFilter(M)},[M]),c.useEffect(()=>{d.current?.setHighlightedCategory(S)},[S]),c.useEffect(()=>{const h=setInterval(()=>{d.current&&P(d.current.getFPS())},1e3);return()=>clearInterval(h)},[]);const q=c.useCallback(h=>{Le(h)},[]),U=c.useCallback(()=>{V(!1),localStorage.setItem("mapMenuOnboardingDismissed","true")},[]),J=c.useCallback(()=>{w(h=>h==="lite"?"high":"lite")},[]),K=s==="compact"?$():B();return o.jsxs("div",{className:`
        relative flex flex-col overflow-hidden rounded-glass-xl
        bg-void-base border border-glass-default
        ${s==="compact"?"w-full h-[200px] max-w-md":"w-full h-full min-h-[500px]"}
        ${a}
      `,role:"navigation","aria-label":"Interactive map navigation",children:[o.jsxs("div",{className:"absolute top-4 left-4 right-4 z-10 flex flex-wrap items-center gap-3",children:[o.jsx(Fe,{currentView:p,onViewChange:y,onViewHover:q,disabled:g}),s==="full"&&o.jsx(Ie,{value:M,onChange:G,placeholder:"Search features..."}),o.jsx("div",{className:"ml-auto",children:o.jsx($e,{level:C,fps:Y,onToggle:J})})]}),o.jsx("div",{ref:m,className:"flex-1 min-h-0","aria-busy":g,children:o.jsx(z,{children:g&&o.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 z-5",children:o.jsx(De,{mode:s})})})}),s==="full"&&o.jsx(Ae,{categories:K.categories,selectedCategory:S,onCategorySelect:W}),o.jsx(z,{children:L&&o.jsx(_e,{node:L})}),o.jsx(z,{children:Q&&s==="full"&&o.jsxs(b.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:`
              absolute bottom-20 left-1/2 -translate-x-1/2 z-20
              bg-glass-white-10 backdrop-blur-glass-md
              border border-glass-default rounded-glass-lg
              px-5 py-3 flex items-center gap-4
            `,role:"dialog","aria-label":"Navigation tips",children:[o.jsx("p",{className:"text-white/80 text-sm",children:"Navigate MuscleMap visually! Click on any node to explore."}),o.jsx("button",{onClick:U,className:`
                px-4 py-1.5 rounded-glass-md
                bg-brand-blue-500 hover:bg-brand-blue-600
                text-white text-sm font-semibold
                transition-colors duration-fast
              `,children:"Got it"})]})}),s==="full"&&!g&&o.jsx("div",{className:"absolute bottom-4 left-4 text-white/30 text-xs",children:"Scroll to zoom â€¢ Drag to rotate"})]})}function We(){const s=se(),[e,i]=I.useState(!1),t=async()=>{document.fullscreenElement?(await document.exitFullscreen(),i(!1)):(await document.documentElement.requestFullscreen(),i(!0))};return I.useEffect(()=>{const a=()=>{i(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",a),()=>document.removeEventListener("fullscreenchange",a)},[]),o.jsxs(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"min-h-screen bg-void-base",children:[o.jsx("header",{className:`
        fixed top-0 left-0 right-0 z-50
        bg-glass-dark-30 backdrop-blur-glass-lg
        border-b border-glass-default
      `,children:o.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[o.jsxs(oe,{to:"/dashboard",className:`
              flex items-center gap-2 px-3 py-1.5 rounded-glass-md
              text-white/70 hover:text-white hover:bg-glass-white-5
              transition-colors duration-fast
            `,children:[o.jsx(me,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm",children:"Back"})]}),o.jsx("h1",{className:"text-white font-semibold",children:"Explore MuscleMap"}),o.jsx("button",{onClick:t,className:`
              flex items-center gap-2 px-3 py-1.5 rounded-glass-md
              text-white/70 hover:text-white hover:bg-glass-white-5
              transition-colors duration-fast
            `,"aria-label":e?"Exit fullscreen":"Enter fullscreen",children:e?o.jsx(pe,{className:"w-4 h-4"}):o.jsx(ge,{className:"w-4 h-4"})})]})}),o.jsx("main",{className:"pt-14 h-screen",children:o.jsx(Ge,{mode:"full",currentRoute:s.pathname,className:"h-full rounded-none"})})]})}const Xe=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"}));export{Xe as M,A as g,O as p};
