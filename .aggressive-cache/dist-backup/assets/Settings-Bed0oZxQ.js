import{r as n,j as e,d as Z,L as $}from"./react-vendor-D1NxaRNd.js";import{c as ee,a5 as se,a6 as te,a8 as ae,a7 as M,a9 as le,a3 as J,m as f,A,B,P as re,y as ie,aa as I,ab as ne,f as w,a as R}from"./index-BRHeW3t7.js";import{G as oe}from"./GlassSurface-BMiMerMg.js";import"./GlassButton-BwbchEMZ.js";import{T as L}from"./timer-17pu0LZ8.js";import{C as V}from"./chevron-down-D58BaaEU.js";import{C as ce}from"./chevron-up-Dry3gpvb.js";import{C as P}from"./check-BQMwSjE3.js";import{V as de,a as me}from"./volume-x-CMxiA_lE.js";import{M as xe}from"./minus-C-u6yg-X.js";import{R as z}from"./rotate-ccw-C7K4LwxF.js";import{H as he}from"./history-DcLIYwM9.js";import{R as W}from"./refresh-cw-BHA2ONCt.js";import{T as ue}from"./trash-2-CDmMXK6x.js";import{T as H}from"./triangle-alert-DX2FQy9W.js";import{C as ge}from"./chevron-right-72Ho6bG7.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-D9c7jRvS.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-BziRPEEi.js";const be=[["path",{d:"m2 8 2 2-2 2 2 2-2 2",key:"sv1b1"}],["path",{d:"m22 8-2 2 2 2-2 2 2 2",key:"101i4y"}],["rect",{width:"8",height:"14",x:"8",y:"5",rx:"1",key:"1oyrl4"}]],pe=ee("vibrate",be),je=[{id:"beep",label:"Beep",icon:B},{id:"chime",label:"Chime",icon:B},{id:"bell",label:"Bell",icon:B}];function ye({className:r="",compact:i=!1,showExerciseDefaults:u=!1,exercises:g=[]}){const[m,y]=n.useState(!i),[d,j]=n.useState(!1),{defaultDuration:v,presets:c,setDefault:p,setExerciseDefault:s}=se(),{settings:l,update:b,playSound:N}=te(),S=ae(t=>t.exerciseRestDefaults),h=n.useCallback((t,o)=>{b({[t]:o}),M("light")},[b]),E=n.useCallback(()=>{b(le),p(90),M("medium")},[b,p]),_=n.useCallback(()=>{N("complete"),M("light")},[N]),D=t=>{if(t<60)return`${t}s`;const o=Math.floor(t/60),k=t%60;return k>0?`${o}m ${k}s`:`${o}m`};return i&&!m?e.jsxs("button",{onClick:()=>y(!0),className:`flex items-center gap-2 px-4 py-2 rounded-xl bg-gray-800/50 hover:bg-gray-800 text-gray-400 hover:text-gray-300 transition-colors ${r}`,children:[e.jsx(L,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:["Rest Timer: ",D(v)]}),e.jsx(V,{className:"w-4 h-4"})]}):e.jsxs(oe,{className:`overflow-hidden ${r}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:e.jsx(L,{className:"w-5 h-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:"Rest Timer Settings"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Configure your rest timer preferences"})]})]}),i&&e.jsx("button",{onClick:()=>y(!1),className:"p-2 rounded-lg hover:bg-gray-800 text-gray-400",children:e.jsx(ce,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Default Rest Duration"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:c.map(t=>e.jsx("button",{onClick:()=>p(t.seconds),className:`py-2.5 px-3 rounded-lg text-sm font-medium transition-all ${v===t.seconds?"bg-blue-500/30 text-blue-400 border border-blue-500/40 ring-1 ring-blue-500/20":"bg-gray-800/50 text-gray-400 hover:bg-gray-800 hover:text-gray-300"}`,children:t.label},t.seconds))}),e.jsx("p",{className:"text-xs text-gray-500",children:c.find(t=>t.seconds===v)?.description})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>h("autoStartAfterSet",!l.autoStartAfterSet),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${l.autoStartAfterSet?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Auto-start"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${l.autoStartAfterSet?"bg-blue-500":"bg-gray-600"}`,children:l.autoStartAfterSet&&e.jsx(P,{className:"w-3 h-3 text-white"})})]}),e.jsxs("button",{onClick:()=>h("soundEnabled",!l.soundEnabled),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${l.soundEnabled?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l.soundEnabled?e.jsx(de,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Sound"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${l.soundEnabled?"bg-blue-500":"bg-gray-600"}`,children:l.soundEnabled&&e.jsx(P,{className:"w-3 h-3 text-white"})})]}),e.jsxs("button",{onClick:()=>h("vibrationEnabled",!l.vibrationEnabled),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${l.vibrationEnabled?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Vibration"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${l.vibrationEnabled?"bg-blue-500":"bg-gray-600"}`,children:l.vibrationEnabled&&e.jsx(P,{className:"w-3 h-3 text-white"})})]}),e.jsxs("button",{onClick:()=>h("showFloatingTimer",!l.showFloatingTimer),className:`flex items-center justify-between p-3 rounded-xl border transition-all ${l.showFloatingTimer?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-gray-800/30 border-gray-700 text-gray-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Float"})]}),e.jsx("div",{className:`w-5 h-5 rounded-full flex items-center justify-center ${l.showFloatingTimer?"bg-blue-500":"bg-gray-600"}`,children:l.showFloatingTimer&&e.jsx(P,{className:"w-3 h-3 text-white"})})]})]}),e.jsxs("button",{onClick:()=>j(!d),className:"flex items-center justify-between w-full py-2 text-sm text-gray-400 hover:text-gray-300",children:[e.jsx("span",{children:"Advanced Settings"}),e.jsx(f.div,{animate:{rotate:d?180:0},transition:{duration:.2},children:e.jsx(V,{className:"w-4 h-4"})})]}),e.jsx(A,{children:d&&e.jsxs(f.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"space-y-4 overflow-hidden",children:[l.soundEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Sound Volume"}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:l.soundVolume,onChange:t=>h("soundVolume",parseFloat(t.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"Quiet"}),e.jsxs("span",{children:[Math.round(l.soundVolume*100),"%"]}),e.jsx("span",{children:"Loud"})]})]}),l.soundEnabled&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Alert Sound"}),e.jsx("button",{onClick:_,className:"text-xs text-blue-400 hover:text-blue-300 transition-colors",children:"Preview"})]}),e.jsx("div",{className:"flex gap-2",children:je.map(t=>e.jsx("button",{onClick:()=>h("soundType",t.id),className:`flex-1 py-2 px-3 rounded-lg text-sm transition-all ${l.soundType===t.id?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-800/50 text-gray-400 hover:bg-gray-800"}`,children:t.label},t.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Warning at (seconds remaining)"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>h("countdownWarningAt",Math.max(5,l.countdownWarningAt-5)),className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsxs("span",{className:"flex-1 text-center text-xl font-mono text-white",children:[l.countdownWarningAt,"s"]}),e.jsx("button",{onClick:()=>h("countdownWarningAt",Math.min(30,l.countdownWarningAt+5)),className:"p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400",children:e.jsx(re,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Quick adjust buttons (+/-)"}),e.jsx("div",{className:"flex gap-2",children:[15,30,60].map(t=>e.jsxs("button",{onClick:()=>h("quickAdjustAmount",t),className:`flex-1 py-2 px-3 rounded-lg text-sm transition-all ${l.quickAdjustAmount===t?"bg-blue-500/20 text-blue-400 border border-blue-500/30":"bg-gray-800/50 text-gray-400 hover:bg-gray-800"}`,children:[t,"s"]},t))})]})]})}),u&&g.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Per-Exercise Rest Times"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:g.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-800/30",children:[e.jsx("span",{className:"text-sm text-gray-300 truncate flex-1",children:t.name}),e.jsx("select",{value:S[t.id]||v,onChange:o=>s(t.id,parseInt(o.target.value)),className:"ml-3 bg-gray-700 border border-gray-600 rounded-lg px-2 py-1 text-sm text-white",children:c.map(o=>e.jsx("option",{value:o.seconds,children:o.label},o.seconds))})]},t.id))})]}),e.jsxs("button",{onClick:E,className:"flex items-center justify-center gap-2 w-full py-2 text-sm text-gray-400 hover:text-gray-300 border-t border-gray-800 pt-4",children:[e.jsx(z,{className:"w-4 h-4"}),"Reset to Defaults"]})]})]})}const fe=[{id:"barbell",name:"Barbell",icon:"üèãÔ∏è"},{id:"dumbbell",name:"Dumbbells",icon:"üí™"},{id:"kettlebell",name:"Kettlebell",icon:"üîî"},{id:"cable",name:"Cable Machine",icon:"üîó"},{id:"machine",name:"Machines",icon:"‚öôÔ∏è"},{id:"bodyweight",name:"Bodyweight",icon:"ü§∏"},{id:"bands",name:"Bands",icon:"„Ä∞Ô∏è"},{id:"pullupbar",name:"Pull-up Bar",icon:"üìè"}],Ne=({selected:r,onChange:i,options:u=fe,title:g,className:m=""})=>{const y=d=>{r.includes(d)?i(r.filter(j=>j!==d)):i([...r,d])};return e.jsxs("div",{className:m,children:[g&&e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-3",children:g}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:u.map(d=>{const j=r.includes(d.id);return e.jsxs("button",{onClick:()=>y(d.id),className:`p-4 rounded-xl border text-left transition-all ${j?"bg-teal-500/20 border-teal-500/50 text-teal-300":"bg-slate-800/50 border-slate-700/50 text-slate-400 hover:border-slate-600"}`,children:[e.jsx("span",{className:"text-2xl block mb-2",children:d.icon}),e.jsx("p",{className:"font-medium text-sm",children:d.name})]},d.id)})})]})},q=({unit:r,onChange:i,label:u,className:g=""})=>e.jsxs("div",{className:g,children:[u&&e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:u}),e.jsx("div",{className:"flex bg-slate-800 rounded-xl p-1 w-fit",children:["lbs","kg"].map(m=>e.jsx("button",{onClick:()=>i(m),className:`px-6 py-2.5 rounded-lg text-sm font-medium uppercase transition-all ${r===m?"bg-teal-500 text-white shadow-md":"text-slate-400 hover:text-white"}`,children:m},m))})]});function ve(){const r=Z(),{token:i}=ie(),[u,g]=n.useState([]),[m,y]=n.useState(null),[d,j]=n.useState(!0),[v,c]=n.useState(!1),[p,s]=n.useState(!1),[l,b]=n.useState(!1),[N,S]=n.useState(null),[h,E]=n.useState(""),[_,D]=n.useState(""),[t,o]=n.useState(!1),[k,F]=n.useState("");n.useEffect(()=>{async function a(){if(i)try{const[x,C]=await Promise.all([w("/api/journey/snapshots?limit=5",{headers:{Authorization:`Bearer ${i}`}}),w("/api/journey/settings",{headers:{Authorization:`Bearer ${i}`}})]);if(x.ok){const T=await x.json();g(T.data?.snapshots||[])}if(C.ok){const T=await C.json();y(T.data)}}catch{}finally{j(!1)}}a()},[i]);const Y=async()=>{if(!(!h.trim()||t)){o(!0);try{const a=await w("/api/journey/snapshots",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({name:h.trim(),description:_.trim()||void 0})});if(a.ok){const x=await a.json();g(C=>[x.data,...C]),c(!1),E(""),D("")}}catch{}finally{o(!1)}}},Q=async a=>{if(!t){o(!0);try{(await w(`/api/journey/snapshots/${a.id}/restore`,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({components:["archetype","profile","equipment"]})})).ok&&(S(null),window.location.reload())}catch{}finally{o(!1)}}},G=async a=>{if(!t){o(!0);try{(await w(`/api/journey/snapshots/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${i}`}})).ok&&g(C=>C.filter(T=>T.id!==a))}catch{}finally{o(!1)}}},O=async a=>{if(!t){o(!0);try{(await w("/api/journey/restart-onboarding",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({clearArchetype:a})})).ok&&(s(!1),r("/onboarding"))}catch{}finally{o(!1)}}},K=async()=>{if(!(k!=="FRESH START"||t)){o(!0);try{(await w("/api/journey/fresh-start",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({confirmPhrase:"FRESH START"})})).ok&&(b(!1),r("/onboarding"))}catch{}finally{o(!1)}}},X=async()=>{if(!m)return;const a=!m.autoSnapshotEnabled;try{await w("/api/journey/settings",{method:"PUT",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({autoSnapshotEnabled:a})}),y(x=>x?{...x,autoSnapshotEnabled:a}:null)}catch{}},U=a=>new Date(a).toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"});return d?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-6 bg-gray-700 rounded w-1/3"}),e.jsx("div",{className:"h-20 bg-gray-700 rounded"}),e.jsx("div",{className:"h-20 bg-gray-700 rounded"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-3 p-4 bg-blue-900/30 border border-blue-600/30 rounded-xl hover:bg-blue-900/40 transition-colors text-left",children:[e.jsx(I,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Create Snapshot"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Save current progress"})]})]}),e.jsxs("button",{onClick:()=>s(!0),className:"flex items-center gap-3 p-4 bg-purple-900/30 border border-purple-600/30 rounded-xl hover:bg-purple-900/40 transition-colors text-left",children:[e.jsx(z,{className:"w-5 h-5 text-purple-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Restart Setup"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Redo onboarding"})]})]})]}),m&&e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-700/50 rounded-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ne,{className:"w-5 h-5 text-green-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Auto-Snapshots"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Save before archetype changes"})]})]}),e.jsx("button",{onClick:X,className:`w-12 h-6 rounded-full transition-all duration-200 ${m.autoSnapshotEnabled?"bg-green-600":"bg-gray-600"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transition-transform duration-200 mx-0.5 ${m.autoSnapshotEnabled?"translate-x-6":""}`})})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h3",{className:"text-sm font-medium text-gray-400 flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Recent Snapshots (",m?.totalSnapshots||u.length,")"]})}),e.jsx("div",{className:"space-y-2",children:u.slice(0,3).map(a=>e.jsx("div",{className:"p-3 bg-gray-700/50 rounded-xl",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:a.name}),e.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-2 mt-1",children:[e.jsx(J,{className:"w-3 h-3"}),U(a.createdAt),a.archetypeId&&e.jsx("span",{className:"text-purple-400",children:a.archetypeId})]}),a.totalTu>0&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(a.totalTu).toLocaleString()," TU | ",a.totalWorkouts," workouts"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[a.isRestorable&&e.jsx("button",{onClick:()=>S(a),className:"p-2 text-blue-400 hover:bg-blue-900/30 rounded-lg transition-colors",title:"Restore",children:e.jsx(W,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>G(a.id),className:"p-2 text-red-400 hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(ue,{className:"w-4 h-4"})})]})]})},a.id))})]}),e.jsx("div",{className:"border-t border-gray-700 pt-4",children:e.jsxs("button",{onClick:()=>b(!0),className:"w-full flex items-center justify-between p-4 bg-red-900/20 border border-red-600/30 rounded-xl hover:bg-red-900/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"w-5 h-5 text-red-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-red-400",children:"Fresh Start"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Reset all progress (backup saved)"})]})]}),e.jsx(ge,{className:"w-5 h-5 text-gray-500"})]})}),e.jsx(A,{children:v&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>c(!1),children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full",onClick:a=>a.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-blue-400"}),"Create Snapshot"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Save your current progress so you can return to this point later."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:h,onChange:a=>E(a.target.value),placeholder:"e.g., Before trying powerlifting",className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500",maxLength:100})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Description (optional)"}),e.jsx("textarea",{value:_,onChange:a=>D(a.target.value),placeholder:"Notes about this snapshot...",className:"w-full p-3 bg-gray-700 border border-gray-600 rounded-lg text-white placeholder-gray-500 resize-none",rows:2,maxLength:500})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:!h.trim()||t,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 rounded-lg font-medium",children:t?"Saving...":"Create"})]})]})})}),e.jsx(A,{children:p&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>s(!1),children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full",onClick:a=>a.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"w-5 h-5 text-purple-400"}),"Restart Onboarding"]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Go through the setup process again. Your workout history will be preserved."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:()=>O(!1),disabled:t,className:"w-full p-4 bg-purple-900/30 border border-purple-600/30 rounded-xl hover:bg-purple-900/40 transition-colors text-left",children:[e.jsx("div",{className:"font-medium",children:"Keep Current Archetype"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Skip archetype selection, just update equipment"})]}),e.jsxs("button",{onClick:()=>O(!0),disabled:t,className:"w-full p-4 bg-blue-900/30 border border-blue-600/30 rounded-xl hover:bg-blue-900/40 transition-colors text-left",children:[e.jsx("div",{className:"font-medium",children:"Choose New Archetype"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Start fresh with archetype selection"})]})]}),e.jsx("button",{onClick:()=>s(!1),className:"w-full mt-4 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"})]})})}),e.jsx(A,{children:N&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>S(null),children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-gray-700 rounded-xl p-6 max-w-md w-full",onClick:a=>a.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-blue-400"}),"Restore Snapshot"]}),e.jsxs("div",{className:"p-4 bg-gray-700/50 rounded-xl mb-4",children:[e.jsx("div",{className:"font-medium",children:N.name}),e.jsx("div",{className:"text-sm text-gray-400 mt-1",children:U(N.createdAt)}),N.archetypeId&&e.jsxs("div",{className:"text-sm text-purple-400 mt-1",children:["Archetype: ",N.archetypeId]})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"This will restore your archetype, profile, and equipment settings to this snapshot. Your workout history will not be affected."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>S(null),className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"}),e.jsx("button",{onClick:()=>Q(N),disabled:t,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 rounded-lg font-medium",children:t?"Restoring...":"Restore"})]})]})})}),e.jsx(A,{children:l&&e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>b(!1),children:e.jsxs(f.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 border border-red-600/50 rounded-xl p-6 max-w-md w-full",onClick:a=>a.stopPropagation(),children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2 text-red-400",children:[e.jsx(H,{className:"w-5 h-5"}),"Fresh Start"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-300",children:"This will reset all your progress:"}),e.jsxs("ul",{className:"text-sm text-gray-400 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Your archetype will be cleared"}),e.jsx("li",{children:"Your equipment settings will be reset"}),e.jsx("li",{children:"Your goals will be cancelled"}),e.jsx("li",{children:"You'll need to redo onboarding"})]}),e.jsx("p",{className:"text-sm text-green-400",children:"Your workout history will be preserved, and a backup snapshot will be created automatically."}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Type ",e.jsx("span",{className:"text-red-400 font-mono",children:"FRESH START"})," to confirm:"]}),e.jsx("input",{type:"text",value:k,onChange:a=>F(a.target.value),placeholder:"FRESH START",className:"w-full p-3 bg-gray-700 border border-red-600/30 rounded-lg text-white font-mono"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{b(!1),F("")},className:"flex-1 px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium",children:"Cancel"}),e.jsx("button",{onClick:K,disabled:k!=="FRESH START"||t,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-500 disabled:opacity-50 rounded-lg font-medium",children:t?"Resetting...":"Reset Everything"})]})]})})})]})}const we=[{id:"dark",name:"Dark",bg:"#111827",icon:"üåô"},{id:"light",name:"Light",bg:"#f9fafb",icon:"‚òÄÔ∏è",textDark:!0},{id:"midnight",name:"Midnight",bg:"#0f172a",icon:"üåå"},{id:"ocean",name:"Ocean",bg:"#0c4a6e",icon:"üåä",level:5},{id:"forest",name:"Forest",bg:"#14532d",icon:"üå≤",level:10},{id:"sunset",name:"Sunset",bg:"#7c2d12",icon:"üåÖ",level:15},{id:"cosmic",name:"Cosmic",bg:"#1e1b4b",icon:"‚ú®",level:25}];function He(){const[r,i]=n.useState({theme:"dark",reduced_motion:0,high_contrast:0,text_size:"normal",is_public:0,show_location:0,show_progress:1}),[u,g]=n.useState(1),[m,y]=n.useState(!1),[d,j]=n.useState(!0);n.useEffect(()=>{Promise.all([R.settings.fetch(),R.profile.get()]).then(([s,l])=>{s.settings?i(b=>({...b,...s.settings})):i(b=>({...b,...s})),l.level&&g(l.level)}).catch(()=>{}),R.get("/messaging/privacy").then(s=>{s.data?.data?.messagingEnabled!==void 0&&j(s.data.data.messagingEnabled)}).catch(()=>{})},[]);const v=async()=>{const s=!d;j(s);try{await R.put("/messaging/privacy",{enabled:s})}catch{j(!s)}},c=async s=>{y(!0),i(l=>({...l,...s}));try{await R.settings.update(s),s.theme&&localStorage.setItem("musclemap_theme",s.theme)}catch{}y(!1)},p=({value:s,onChange:l})=>e.jsx("button",{onClick:l,className:"w-14 h-8 rounded-full transition-all duration-200 "+(s?"bg-purple-600":"bg-gray-600"),children:e.jsx("div",{className:"w-6 h-6 bg-white rounded-full transition-transform duration-200 mx-1 "+(s?"translate-x-6":"")})});return e.jsxs("div",{className:"min-h-screen bg-gray-900 text-white pb-24",children:[e.jsx("header",{className:"bg-gray-800/90 backdrop-blur-lg p-4 sticky top-0 z-10 border-b border-gray-700/50",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsxs($,{to:"/dashboard",className:"flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors",children:[e.jsx("span",{children:"‚Üê"}),e.jsx("img",{src:"/logo.png",alt:"MuscleMap",className:"w-6 h-6 rounded-md"})]}),e.jsx("h1",{className:"text-xl font-bold",children:"‚öôÔ∏è Settings"}),e.jsx("div",{className:"w-16",children:m&&e.jsx("span",{className:"text-xs text-gray-400",children:"Saving..."})})]})}),e.jsxs("main",{className:"max-w-4xl mx-auto p-4 space-y-6",children:[e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsxs("h2",{className:"font-bold mb-4 flex items-center gap-2",children:["üé® Theme ",e.jsxs("span",{className:"text-xs text-gray-400 font-normal",children:["Level ",u]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:we.map(s=>{const l=s.level&&u<s.level;return e.jsxs("button",{onClick:()=>!l&&c({theme:s.id}),disabled:l,className:"p-3 rounded-xl border-2 transition-all "+(r.theme===s.id?"border-purple-500 scale-105":"border-transparent")+(l?" opacity-40 cursor-not-allowed":" hover:scale-102"),style:{backgroundColor:s.bg,color:s.textDark?"#111":"#fff"},children:[e.jsx("div",{className:"text-xl",children:s.icon}),e.jsx("div",{className:"text-xs font-bold mt-1",children:s.name}),l&&e.jsxs("div",{className:"text-xs opacity-75",children:["üîí Lv",s.level]})]},s.id)})})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"‚ôø Accessibility"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Reduced Motion"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Minimize animations"})]}),e.jsx(p,{value:r.reduced_motion,onChange:()=>c({reduced_motion:r.reduced_motion?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"High Contrast"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Increase text visibility"})]}),e.jsx(p,{value:r.high_contrast,onChange:()=>c({high_contrast:r.high_contrast?0:1})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-2",children:"Text Size"}),e.jsx("div",{className:"flex gap-2",children:["small","normal","large","xlarge"].map(s=>e.jsx("button",{onClick:()=>c({text_size:s}),className:"flex-1 py-2 rounded-xl capitalize transition-all "+(r.text_size===s?"bg-purple-600":"bg-gray-700 hover:bg-gray-600"),children:s==="xlarge"?"XL":s},s))})]})]})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Rest Timer"}),e.jsx(ye,{compact:!0,className:"bg-transparent border-0 p-0"})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Units"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(q,{label:"Weight Units",value:r.weight_unit||"lbs",options:[{value:"lbs",label:"lbs"},{value:"kg",label:"kg"}],onChange:s=>c({weight_unit:s})}),e.jsx(q,{label:"Distance Units",value:r.distance_unit||"mi",options:[{value:"mi",label:"mi"},{value:"km",label:"km"}],onChange:s=>c({distance_unit:s})})]})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Available Equipment"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Select equipment you have access to for personalized workout recommendations"}),e.jsx(Ne,{selected:r.equipment||[],onChange:s=>c({equipment:s}),equipment:[{id:"barbell",name:"Barbell",icon:"üèãÔ∏è"},{id:"dumbbells",name:"Dumbbells",icon:"üí™"},{id:"cables",name:"Cables",icon:"üîó"},{id:"bench",name:"Bench",icon:"ü™ë"},{id:"kettlebell",name:"Kettlebell",icon:"‚ö°"},{id:"resistance",name:"Resistance Bands",icon:"üéØ"},{id:"pullup_bar",name:"Pull-up Bar",icon:"üìè"},{id:"machines",name:"Machines",icon:"üîß"}]})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Journey & Progress"}),e.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Manage your fitness journey, create snapshots, or start fresh"}),e.jsx(ve,{})]}),e.jsxs("section",{className:"bg-gray-800 rounded-2xl p-4",children:[e.jsx("h2",{className:"font-bold mb-4",children:"Privacy"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx($,{to:"/community",state:{tab:"privacy"},className:"block p-4 bg-green-900/30 border border-green-600/30 rounded-xl hover:bg-green-900/40 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üõ°Ô∏è"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Privacy Mode & Data Controls"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Opt out of community features, manage data collection"})]})]}),e.jsx("span",{className:"text-gray-400",children:"‚Üí"})]})}),e.jsx("div",{className:"pt-2 border-t border-gray-700",children:e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Quick settings (for full control, use Privacy Mode above)"})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Public Profile"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Appear in leaderboards & community"})]}),e.jsx(p,{value:r.is_public,onChange:()=>c({is_public:r.is_public?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Show Location"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Share your city with others"})]}),e.jsx(p,{value:r.show_location,onChange:()=>c({show_location:r.show_location?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Show Progress"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Let others see your TU"})]}),e.jsx(p,{value:r.show_progress,onChange:()=>c({show_progress:r.show_progress?0:1})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Allow Messages"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Let others send you direct messages"})]}),e.jsx(p,{value:d,onChange:v})]}),e.jsx($,{to:"/messages",className:"block p-3 bg-gray-700/50 rounded-xl hover:bg-gray-700 transition-colors mt-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‚úâÔ∏è"}),e.jsx("span",{className:"text-sm",children:"Manage Blocked Users"})]}),e.jsx("span",{className:"text-gray-400 text-sm",children:"‚Üí"})]})})]})]})]})]})}export{He as default};
