import{r as i,j as e,L as R}from"./react-vendor-D847gc3Q.js";import{c as d}from"./recharts-vendor-CxtoZpzE.js";import{G as A,m as u}from"./index-w5BwH5Oi.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./d3-vendor-mcDw60ct.js";import"./apollo-vendor-BNHFeEEc.js";import"./reactflow-vendor-CYb5nRwM.js";const j={Back:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})}),Trophy:()=>e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M5 3a1 1 0 011-1h12a1 1 0 011 1v2h2a1 1 0 011 1v3a4 4 0 01-4 4h-.535c-.578 1.74-2.032 3.034-3.798 3.465A3.99 3.99 0 0113 19.17V21h2a1 1 0 110 2H9a1 1 0 110-2h2v-1.83c-.796-.137-1.531-.471-2.167-.965C7.032 13.034 5.578 11.74 5 10H4.535A4 4 0 01.535 6V3a1 1 0 011-1h2V3zm14 3v3a2 2 0 002-2V6h-2zM4 6v3a2 2 0 002 2V6H4z"})}),Medal:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})},C={1:"ü•á",2:"ü•à",3:"ü•â"},M=[{key:"daily",label:"Today"},{key:"weekly",label:"This Week"},{key:"monthly",label:"This Month"},{key:"all_time",label:"All Time"}],v=[{key:"workouts",label:"Workouts",icon:"üí™",metric:"workout_count"},{key:"volume",label:"Volume",icon:"üèãÔ∏è",metric:"total_volume"},{key:"streak",label:"Streak",icon:"üî•",metric:"current_streak"},{key:"credits",label:"Credits",icon:"üí∞",metric:"credits_earned"},{key:"buddy",label:"Buddy Level",icon:"üê∫",metric:"buddy_level"}];function Y(){const{token:t,user:a}=A(),[x,n]=i.useState({}),[m,y]=i.useState({}),[g,N]=i.useState(!0),[l,k]=i.useState("workouts"),[r,w]=i.useState("weekly"),[L,B]=i.useState("global");i.useEffect(()=>{S()},[l,r,L]);const S=async()=>{N(!0);try{const s={Authorization:`Bearer ${t}`},o=v.find(p=>p.key===l),T=await(await fetch(`/api/leaderboards/simple?metric=${o?.metric||"workout_count"}&window=${r}&limit=50`,{headers:s})).json(),_=await(await fetch(`/api/leaderboards/user-rank?metric=${o?.metric||"workout_count"}&window=${r}`,{headers:s})).json();n(p=>({...p,[l]:T.data||[]})),y(p=>({...p,[l]:_.data}))}catch{}finally{N(!1)}},c=x[l]||[],h=m[l],b=v.find(s=>s.key===l);return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white pb-8",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-[#0a0a0f]/80 backdrop-blur-xl border-b border-white/5",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(R,{to:"/dashboard",className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(j.Back,{})}),e.jsx("h1",{className:"text-xl font-semibold",children:"Leaderboard"})]}),e.jsx(j.Trophy,{className:"text-amber-500"})]})}),e.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-6",children:[h&&e.jsx(u.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-violet-600 to-purple-700 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"w-14 h-14 rounded-full bg-white/20 flex items-center justify-center text-2xl font-bold",children:["#",h.rank||"‚Äî"]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-white/70",children:"Your Rank"}),e.jsx("div",{className:"text-2xl font-bold",children:h.value?.toLocaleString()||0}),e.jsx("div",{className:"text-sm text-white/70",children:b?.label})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-white/70",children:r==="daily"?"Today":r==="weekly"?"This Week":r==="monthly"?"This Month":"All Time"}),h.percentile&&e.jsxs("div",{className:"text-lg font-semibold",children:["Top ",h.percentile.toFixed(1),"%"]})]})]})}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 mb-4 scrollbar-hide",children:v.map(s=>e.jsxs("button",{onClick:()=>k(s.key),className:d("flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap transition-all",l===s.key?"bg-violet-600 text-white":"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10"),children:[e.jsx("span",{children:s.icon}),e.jsx("span",{className:"text-sm font-medium",children:s.label})]},s.key))}),e.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-xl mb-6",children:M.map(s=>e.jsx("button",{onClick:()=>w(s.key),className:d("flex-1 py-2 text-sm font-medium rounded-lg transition-all",r===s.key?"bg-white/10 text-white":"text-gray-400 hover:text-white"),children:s.label},s.key))}),g?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{className:"w-8 h-8 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"})}):c.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(j.Trophy,{className:"w-12 h-12 mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No rankings yet"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Complete workouts to appear on the leaderboard"})]}):e.jsxs("div",{className:"space-y-2",children:[c.length>=3&&e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"order-1",children:e.jsx(f,{entry:c[1],rank:2,typeConfig:b})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"order-0 sm:order-1",children:e.jsx(f,{entry:c[0],rank:1,typeConfig:b})}),e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"order-2",children:e.jsx(f,{entry:c[2],rank:3,typeConfig:b})})]}),c.slice(3).map((s,o)=>e.jsx(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:o*.05},children:e.jsx(W,{entry:s,rank:o+4,typeConfig:b,isCurrentUser:s.userId===a?.id||s.user_id===a?.id})},s.userId||s.user_id||o))]}),e.jsxs("div",{className:"mt-8 p-4 bg-white/5 rounded-xl",children:[e.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[e.jsx(j.Medal,{className:"text-amber-500"}),"Weekly Rewards"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ü•á"}),e.jsx("span",{children:"1st Place"})]}),e.jsx("span",{className:"font-semibold text-amber-400",children:"500 credits"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ü•à"}),e.jsx("span",{children:"2nd Place"})]}),e.jsx("span",{className:"font-semibold text-gray-400",children:"300 credits"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ü•â"}),e.jsx("span",{children:"3rd Place"})]}),e.jsx("span",{className:"font-semibold text-amber-700",children:"200 credits"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"üèÖ"}),e.jsx("span",{children:"Top 10"})]}),e.jsx("span",{className:"font-semibold text-violet-400",children:"100 credits"})]})]})]})]})]})}function f({entry:t,rank:a,typeConfig:x}){const n=t?.value||t?.score||0,m=t?.username||t?.display_name||"Anonymous";return e.jsxs("div",{className:d("rounded-xl p-4 text-center relative overflow-hidden",a===1?"bg-gradient-to-br from-amber-500/30 to-yellow-600/30 border-2 border-amber-500/50":a===2?"bg-gradient-to-br from-gray-400/30 to-gray-600/30 border border-gray-500/30":"bg-gradient-to-br from-amber-700/30 to-amber-900/30 border border-amber-700/30"),children:[e.jsx("div",{className:"text-4xl mb-2",children:C[a]}),e.jsx("div",{className:"font-semibold truncate",children:m}),e.jsx("div",{className:d("text-2xl font-bold mt-1",a===1?"text-amber-400":a===2?"text-gray-300":"text-amber-600"),children:n.toLocaleString()}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:x?.label})]})}function W({entry:t,rank:a,typeConfig:x,isCurrentUser:n}){const m=t?.value||t?.score||0,y=t?.username||t?.display_name||"Anonymous";return e.jsxs("div",{className:d("flex items-center gap-4 p-4 rounded-xl transition-all",n?"bg-violet-600/20 border border-violet-500/50":"bg-white/5 hover:bg-white/10"),children:[e.jsx("div",{className:d("w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg",a<=10?"bg-violet-600":"bg-white/10"),children:a}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold truncate",children:y}),n&&e.jsx("div",{className:"text-xs text-violet-400",children:"You"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-lg",children:m.toLocaleString()}),e.jsx("div",{className:"text-xs text-gray-400",children:x?.label})]})]})}export{Y as default};
