import{l as z,d as T,r as l,j as e,L as V}from"./react-vendor-D1NxaRNd.js";import{G as m}from"./GlassSurface-BMiMerMg.js";import{G as n}from"./GlassButton-g-1Onhf3.js";import{G as Y}from"./GlassNav-B5ymbHgT.js";import{G as q,a as H}from"./GlassMobileNav-CdTvxuCW.js";import{M as Q}from"./MeshBackground-5ZvDS217.js";import{e as K}from"./useNutrition-B0gY2Tyj.js";import{A as O}from"./arrow-left-o8fBcUGm.js";import{c as X,P,p as Z,A as u,m as j,n as J,b5 as M,b4 as W,a3 as ee,a5 as se,U as ae,X as te}from"./index-D_LgOQCi.js";import{F as le}from"./funnel-BNBh2Y2M.js";import{U as ie}from"./utensils-URYbtIa8.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./recharts-vendor-BziRPEEi.js";import"./d3-vendor-mcDw60ct.js";import"./nutritionStore-EcqayjhA.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";const re=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],L=X("chef-hat",re),ce=[{value:"all",label:"All"},{value:"breakfast",label:"Breakfast"},{value:"lunch",label:"Lunch"},{value:"dinner",label:"Dinner"},{value:"snack",label:"Snack"}],ne=[{value:"all",label:"All Diets"},{value:"vegetarian",label:"Vegetarian"},{value:"vegan",label:"Vegan"},{value:"keto",label:"Keto"},{value:"paleo",label:"Paleo"},{value:"gluten_free",label:"Gluten-Free"}];function F({recipe:a,onSave:o,onUnsave:t,isSaved:i}){const h=T();return e.jsx(j.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:"group cursor-pointer",onClick:()=>h(`/nutrition/recipes/${a.id}`),children:e.jsxs(m,{className:"overflow-hidden hover:bg-white/10 transition-colors",children:[e.jsxs("div",{className:"h-40 bg-gradient-to-br from-green-500/20 to-emerald-500/20 flex items-center justify-center relative",children:[e.jsx(L,{className:"w-12 h-12 text-green-400/50"}),e.jsx("button",{onClick:p=>{p.stopPropagation(),i?t(a.id):o(a.id)},className:"absolute top-3 right-3 w-8 h-8 rounded-full bg-black/40 backdrop-blur flex items-center justify-center hover:bg-black/60 transition-colors",children:e.jsx(M,{className:`w-4 h-4 ${i?"text-red-400 fill-red-400":"text-white"}`})}),a.rating>0&&e.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center gap-1 px-2 py-1 rounded-full bg-black/40 backdrop-blur text-xs text-white",children:[e.jsx(W,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),a.rating.toFixed(1)]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-white font-semibold mb-1 truncate group-hover:text-green-400 transition-colors",children:a.name}),e.jsx("p",{className:"text-sm text-gray-400 line-clamp-2 mb-3",children:a.description||"A delicious recipe"}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-3",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-3 h-3 text-orange-400"}),a.totalCalories," cal"]}),e.jsxs("span",{children:[a.totalProteinG,"g P"]}),e.jsxs("span",{children:[a.totalCarbsG,"g C"]}),e.jsxs("span",{children:[a.totalFatG,"g F"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-3 h-3"}),a.prepTimeMin+a.cookTimeMin," min"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-3 h-3"}),a.servings," serving",a.servings!==1?"s":""]})]})]})]})})}function oe({recipe:a,onClose:o}){return a?e.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm overflow-y-auto",children:e.jsx("div",{className:"min-h-screen p-4 sm:p-6 lg:p-8",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs(m,{className:"overflow-hidden",children:[e.jsxs("div",{className:"h-48 bg-gradient-to-br from-green-500/20 to-emerald-500/20 flex items-center justify-center relative",children:[e.jsx(L,{className:"w-20 h-20 text-green-400/50"}),e.jsx("button",{onClick:o,className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-black/40 backdrop-blur flex items-center justify-center hover:bg-black/60 transition-colors",children:e.jsx(te,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:a.name}),e.jsx("p",{className:"text-gray-400 mb-6",children:a.description}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:a.totalCalories}),e.jsx("p",{className:"text-xs text-gray-400",children:"Calories"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[a.totalProteinG,"g"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Protein"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:[a.totalCarbsG,"g"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),e.jsxs("div",{className:"text-center p-3 bg-white/5 rounded-xl",children:[e.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[a.totalFatG,"g"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Ingredients"}),e.jsx("div",{className:"space-y-2",children:a.ingredients?.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-white/10 flex items-center justify-center text-xs",children:i+1}),e.jsxs("span",{children:[t.quantity," ",t.unit," ",t.food?.name||t.customFood?.name,t.notes&&e.jsxs("span",{className:"text-gray-500 text-sm",children:[" (",t.notes,")"]})]})]},i))})]}),a.instructions&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-3",children:"Instructions"}),e.jsx("div",{className:"space-y-4",children:a.instructions.split(`
`).filter(Boolean).map((t,i)=>e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/20 flex-shrink-0 flex items-center justify-center text-green-400 font-semibold",children:i+1}),e.jsx("p",{className:"text-gray-300 pt-1",children:t})]},i))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(n,{variant:"primary",className:"flex-1",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Log This Meal"]}),e.jsx(n,{variant:"ghost",children:e.jsx(M,{className:"w-4 h-4"})})]})]})]})})})}):null}function Ce(){const{recipeId:a}=z(),o=T(),{searchRecipes:t,getPopularRecipes:i,getRecipe:h,saveRecipe:p,unsaveRecipe:A}=K(),[b,E]=l.useState([]),[f,D]=l.useState([]),[v,N]=l.useState(null),[y,w]=l.useState(new Set),[I,k]=l.useState(!0),[r,U]=l.useState(""),[x,B]=l.useState("all"),[d,_]=l.useState("all"),[g,$]=l.useState(!1),S=l.useCallback(async()=>{k(!0);try{const s={};x!=="all"&&(s.mealType=x),d!=="all"&&(s.dietType=d),r&&(s.search=r);const c=await t(s,{field:"rating",direction:"desc"});E(c.items||[])}catch{}finally{k(!1)}},[t,x,d,r]);l.useEffect(()=>{i(6).then(D).catch(console.error)},[i]),l.useEffect(()=>{S()},[S]),l.useEffect(()=>{a?h(a).then(N).catch(console.error):N(null)},[a,h]);const R=async s=>{try{await p(s),w(c=>new Set([...c,s]))}catch{}},C=async s=>{try{await A(s),w(c=>{const G=new Set(c);return G.delete(s),G})}catch{}};return e.jsxs("div",{className:"min-h-screen bg-gray-950",children:[e.jsx(Q,{}),e.jsx(Y,{}),e.jsx(q,{}),e.jsx("main",{className:"lg:pl-64 pt-16 pb-24 lg:pb-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(V,{to:"/nutrition",children:e.jsx(n,{variant:"ghost",size:"sm",children:e.jsx(O,{className:"w-4 h-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Recipes"}),e.jsx("p",{className:"text-gray-400",children:"Discover healthy recipes for your goals"})]})]}),e.jsxs(n,{variant:"primary",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"New Recipe"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search recipes...",value:r,onChange:s=>U(s.target.value),className:`w-full pl-12 pr-4 py-3 bg-white/5 rounded-xl border border-white/10 text-white
                           placeholder-gray-500 focus:outline-none focus:border-green-500/50`})]}),e.jsxs(n,{variant:g?"primary":"ghost",onClick:()=>$(!g),children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),e.jsx(u,{children:g&&e.jsx(j.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx(m,{className:"p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Meal Type"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ce.map(s=>e.jsx("button",{onClick:()=>B(s.value),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${x===s.value?"bg-green-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Diet Type"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ne.map(s=>e.jsx("button",{onClick:()=>_(s.value),className:`px-3 py-1.5 rounded-full text-sm transition-colors ${d===s.value?"bg-green-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:s.label},s.value))})]})]})})})}),!r&&x==="all"&&d==="all"&&f.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Popular Recipes"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:f.map(s=>e.jsx(F,{recipe:s,onSave:R,onUnsave:C,isSaved:y.has(s.id)},s.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:r?`Results for "${r}"`:"All Recipes"}),I?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(s=>e.jsx(m,{className:"h-64 animate-pulse"},s))}):b.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(u,{mode:"popLayout",children:b.map(s=>e.jsx(F,{recipe:s,onSave:R,onUnsave:C,isSaved:y.has(s.id)},s.id))})}):e.jsxs(m,{className:"p-12 text-center",children:[e.jsx(J,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"No recipes found"}),e.jsxs(n,{variant:"primary",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Create Your First Recipe"]})]})]})]})}),e.jsx(H,{}),e.jsx(u,{children:v&&e.jsx(oe,{recipe:v,onClose:()=>o("/nutrition/recipes")})})]})}export{Ce as default};
