import{r as l,j as e}from"./react-vendor-D1NxaRNd.js";import{a as H,b as g,m as M}from"./index-DMkbA-AJ.js";import{G as y,a as o}from"./GlassSurface-BMiMerMg.js";import{G as A}from"./GlassButton-y0jI1ux9.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-BziRPEEi.js";const i={Heart:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),Footprints:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 5.5C13 3.567 11.433 2 9.5 2S6 3.567 6 5.5 7.567 9 9.5 9 13 7.433 13 5.5zm-6 8c0-1.657-1.343-3-3-3s-3 1.343-3 3 1.343 3 3 3 3-1.343 3-3zm14 0c0-1.657-1.343-3-3-3s-3 1.343-3 3 1.343 3 3 3 3-1.343 3-3zm-6-8C15 3.567 13.433 2 11.5 2m7.5 16.5C19 16.567 17.433 15 15.5 15S12 16.567 12 18.5 13.567 22 15.5 22 19 20.433 19 18.5z"})}),Flame:({className:s="w-5 h-5"})=>e.jsxs("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"})]}),Moon:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),Watch:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Activity:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.5 12h4l1.5-6 3 12 1.5-6h4.5"})}),Refresh:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),Clock:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Smartphone:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"})})};function x({icon:s,iconColor:t,value:m,label:c,delay:p=0}){return e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p},children:e.jsxs(o,{className:"p-6 text-center",children:[e.jsx(s,{className:`w-8 h-8 ${t} mx-auto mb-3`}),e.jsx("div",{className:"text-3xl font-bold text-white mb-1",children:m}),e.jsx("div",{className:"text-white/50 text-sm",children:c})]})})}function P(){const{user:s}=H(),[t,m]=l.useState(null),[c,p]=l.useState([]),[k,S]=l.useState(!0),[w,f]=l.useState(!1),[b,j]=l.useState(null),u=l.useCallback(async()=>{try{j(null);const[a,h]=await Promise.all([g.get("/wearables").catch(()=>({data:null})),g.get("/wearables/status").catch(()=>({data:{syncStatus:[]}}))]);m(a.data);const v=(h.data?.syncStatus||[]).map(n=>({provider:n.provider,lastSyncAt:n.lastSyncAt,isConnected:n.isConnected??!0}));p(v)}catch(a){j(a.message||"Failed to load health data")}finally{S(!1)}},[]);l.useEffect(()=>{u()},[u]);const C=async()=>{f(!0);try{await g.post("/wearables/sync"),await u()}catch(a){j(a.message||"Failed to sync")}finally{f(!1)}},W=a=>{if(!a)return"Never";const h=new Date(a),v=new Date().getTime()-h.getTime(),n=Math.floor(v/6e4);if(n<1)return"Just now";if(n<60)return`${n}m ago`;const N=Math.floor(n/60);return N<24?`${N}h ago`:h.toLocaleDateString()},d=c.length>0&&c.some(a=>a.isConnected),r=c.find(a=>a.isConnected);return k?e.jsx(y,{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-2 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Loading health data..."})]})}):e.jsx(y,{className:"min-h-screen p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Health"}),e.jsx("p",{className:"text-white/60",children:"Wearables integration and health metrics"})]}),b&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-4 text-red-400",children:b}),e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${d?"bg-green-500/20":"bg-white/10"}`,children:e.jsx(i.Watch,{className:`w-6 h-6 ${d?"text-green-400":"text-white/50"}`})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:r?.provider==="apple_health"?"Apple Health":r?.provider==="google_fit"?"Google Fit":r?.provider==="garmin"?"Garmin":r?.provider==="fitbit"?"Fitbit":r?.provider==="whoop"?"WHOOP":"Wearable Device"}),e.jsx("div",{className:"text-white/50 text-sm",children:d?"Connected":"Not connected"})]})]}),d&&e.jsxs("div",{className:"flex items-center gap-3",children:[r?.lastSyncAt&&e.jsxs("div",{className:"flex items-center gap-2 text-white/50 text-sm",children:[e.jsx(i.Clock,{className:"w-4 h-4"}),e.jsxs("span",{children:["Synced ",W(r.lastSyncAt)]})]}),e.jsxs(A,{onClick:C,disabled:w,className:"flex items-center gap-2",children:[e.jsx(i.Refresh,{className:`w-4 h-4 ${w?"animate-spin":""}`}),"Sync"]})]})]})}),t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Today"}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(x,{icon:i.Footprints,iconColor:"text-blue-400",value:(t.today?.steps||0).toLocaleString(),label:"Steps",delay:0}),e.jsx(x,{icon:i.Flame,iconColor:"text-orange-400",value:t.today?.activeCalories||0,label:"Active Calories",delay:.1}),e.jsx(x,{icon:i.Heart,iconColor:"text-red-400",value:t.today?.avgHeartRate||"--",label:"Avg Heart Rate",delay:.2}),e.jsx(x,{icon:i.Activity,iconColor:"text-green-400",value:t.today?.workoutMinutes||0,label:"Workout Min",delay:.3})]})]}),t.today?.sleepHours!==null&&t.today?.sleepHours!==void 0&&e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(i.Moon,{className:"w-8 h-8 text-purple-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold",children:"Sleep"}),e.jsx("div",{className:"text-white/50 text-sm",children:"Last night"})]})]}),e.jsxs("div",{className:"text-3xl font-bold text-white",children:[t.today.sleepHours," hrs"]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"This Week"}),e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i.Footprints,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-white",children:"Total Steps"})]}),e.jsx("span",{className:"text-white font-bold",children:(t.thisWeek?.totalSteps||0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i.Footprints,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-white",children:"Daily Average"})]}),e.jsx("span",{className:"text-white font-bold",children:(t.thisWeek?.avgDailySteps||0).toLocaleString()})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i.Activity,{className:"w-5 h-5 text-green-400"}),e.jsx("span",{className:"text-white",children:"Workout Minutes"})]}),e.jsx("span",{className:"text-white font-bold",children:t.thisWeek?.totalWorkoutMinutes||0})]}),t.thisWeek?.avgSleepHours!==null&&t.thisWeek?.avgSleepHours!==void 0&&e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i.Moon,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{className:"text-white",children:"Avg Sleep"})]}),e.jsxs("span",{className:"text-white font-bold",children:[t.thisWeek.avgSleepHours," hrs"]})]}),t.thisWeek?.avgRestingHeartRate!==null&&t.thisWeek?.avgRestingHeartRate!==void 0&&e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i.Heart,{className:"w-5 h-5 text-red-400"}),e.jsx("span",{className:"text-white",children:"Resting Heart Rate"})]}),e.jsxs("span",{className:"text-white font-bold",children:[t.thisWeek.avgRestingHeartRate," bpm"]})]})]})})]})]}):e.jsxs(o,{className:"p-8 text-center",children:[e.jsx(i.Watch,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Connect Your Wearable"}),e.jsx("p",{className:"text-white/60 mb-6 max-w-md mx-auto",children:"Sync your health data from Apple Health, Google Fit, Garmin, Fitbit, or WHOOP via the MuscleMap mobile app."}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs(o,{className:"p-4 bg-white/5 inline-flex items-center gap-3",children:[e.jsx(i.Smartphone,{className:"w-6 h-6 text-violet-400"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-white font-medium",children:"Use the Mobile App"}),e.jsx("div",{className:"text-white/50 text-sm",children:"Connect wearables from iOS or Android"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("a",{href:"https://apps.apple.com/app/musclemap",target:"_blank",rel:"noopener noreferrer",className:"inline-block",children:e.jsx("img",{src:"https://tools.applemediaservices.com/api/badges/download-on-the-app-store/black/en-us?size=250x83",alt:"Download on the App Store",className:"h-10"})}),e.jsx("a",{href:"https://play.google.com/store/apps/details?id=me.musclemap",target:"_blank",rel:"noopener noreferrer",className:"inline-block",children:e.jsx("img",{src:"https://play.google.com/intl/en_us/badges/static/images/badges/en_badge_web_generic.png",alt:"Get it on Google Play",className:"h-10"})})]})]})]}),e.jsxs(o,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Supported Devices"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[{name:"Apple Watch",icon:"âŒš"},{name:"Garmin",icon:"ðŸƒ"},{name:"Fitbit",icon:"ðŸ’ª"},{name:"WHOOP",icon:"ðŸ”´"},{name:"Google Fit",icon:"ðŸ“±"}].map(a=>e.jsxs("div",{className:"text-center p-4 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-2",children:a.icon}),e.jsx("div",{className:"text-white/70 text-sm",children:a.name})]},a.name))})]})]})})}export{P as default};
