const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-tH059-Xh.js","assets/react-vendor-D1NxaRNd.js","assets/index-HEJJGvd8.js","assets/leaflet-vendor-CIGW-MKW.css","assets/reactflow-vendor-B5DZHykP.css","assets/index-CTxaAOZG.css","assets/index-DgT3gr36.js","assets/info-BtjbQLD6.js","assets/external-link-CvWoPFu6.js","assets/history-UwZT5vFa.js","assets/chevron-right-dCEvVQj7.js","assets/refresh-cw-WYNHO2PH.js","assets/zoom-out-BMdMtqC-.js","assets/rotate-ccw-B4o0qbmF.js","assets/pause-DEL3bJq-.js","assets/minus-C_qXJETo.js","assets/trending-down-BjDGmGGm.js"])))=>i.map(i=>d[i]);
import{u as U,a as g,_ as V,m as $}from"./index-HEJJGvd8.js";import{j as e,d as I,k as O,r}from"./react-vendor-D1NxaRNd.js";import{G as P,a as x}from"./GlassSurface-BMiMerMg.js";import{G as A}from"./GlassButton-CZDMKm29.js";import{I as q}from"./InsightCard-DwtDgQpr.js";import{W as Y}from"./WeeklyHeatmap-Ch1W1QZZ.js";import{M as K}from"./MuscleViewer-BPKVzzo6.js";import{M as X}from"./MuscleHeatmap-Bb6iNTCx.js";import{R as J}from"./RPGStatBar-Cw-Wf6r7.js";import"./apollo-vendor-D9c7jRvS.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-BziRPEEi.js";import"./leaflet-vendor-DZbo3Ov0.js";const Q={teal:"from-teal-600 to-teal-400",purple:"from-purple-600 to-purple-400",blue:"from-blue-600 to-blue-400",orange:"from-orange-600 to-orange-400"},Z=({data:s,colorScheme:i="teal",height:d=80,showTooltip:n=!0,className:u=""})=>{const o=Math.max(...s.map(a=>a.value),1),b=Q[i];return e.jsx("div",{className:`flex items-end gap-1 ${u}`,style:{height:d},children:s.map((a,v)=>{const p=a.value/o*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[e.jsx("div",{className:`w-full rounded-t bg-gradient-to-t ${b} transition-all hover:opacity-80`,style:{height:`${p}%`,minHeight:a.value>0?"4px":"0"}}),e.jsx("span",{className:"text-xs text-slate-500",children:a.label}),n&&e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:a.value})]},`${a.label}-${v}`)})})},ee=r.lazy(()=>V(()=>import("./index-tH059-Xh.js"),__vite__mapDeps([0,1,2,3,4,5])).then(s=>({default:s.RadarChartD3}))),te=r.lazy(()=>V(()=>import("./index-DgT3gr36.js"),__vite__mapDeps([6,1,2,7,8,9,10,11,12,13,14,15,16,3,4,5])).then(s=>({default:s.default||s.MuscleExplorer}))),h={Refresh:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),Globe:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),MapPin:({className:s="w-5 h-5"})=>e.jsxs("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),TrendingUp:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Trophy:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),User:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},m={strength:{name:"Strength",abbr:"STR",color:"#FF3366",description:"Raw lifting power"},constitution:{name:"Constitution",abbr:"CON",color:"#00CC66",description:"Recovery & resilience"},dexterity:{name:"Dexterity",abbr:"DEX",color:"#FFB800",description:"Movement skill"},power:{name:"Power",abbr:"PWR",color:"#FF6B00",description:"Explosive force"},endurance:{name:"Endurance",abbr:"END",color:"#0066FF",description:"Stamina"},vitality:{name:"Vitality",abbr:"VIT",color:"#9333EA",description:"Overall health"}},f=["strength","constitution","dexterity","power","endurance","vitality"];function F({statKey:s,rankings:i}){const d=m[s];return e.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"font-bold",style:{color:d.color},children:d.abbr}),e.jsx("span",{className:"text-white/50 text-sm",children:"Rankings"})]}),e.jsxs("div",{className:"flex justify-around",children:[i.global&&e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-white/50 text-xs mb-1",children:[e.jsx(h.Globe,{className:"w-3 h-3"}),e.jsx("span",{children:"Global"})]}),e.jsxs("div",{className:"font-bold text-lg text-white",children:["#",i.global.rank]}),e.jsxs("div",{className:"text-white/40 text-xs",children:["Top ",i.global.percentile.toFixed(0),"%"]})]}),i.country&&e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-white/50 text-xs mb-1",children:[e.jsx(h.MapPin,{className:"w-3 h-3"}),e.jsx("span",{children:"Country"})]}),e.jsxs("div",{className:"font-bold text-lg text-white",children:["#",i.country.rank]}),e.jsxs("div",{className:"text-white/40 text-xs",children:["Top ",i.country.percentile.toFixed(0),"%"]})]}),i.state&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-white/50 text-xs mb-1",children:"State"}),e.jsxs("div",{className:"font-bold text-lg text-white",children:["#",i.state.rank]}),e.jsxs("div",{className:"text-white/40 text-xs",children:["Top ",i.state.percentile.toFixed(0),"%"]})]})]})]})}function se({userLocation:s}){const[i,d]=r.useState([]),[n,u]=r.useState(!0),[o,b]=r.useState("global"),[a,v]=r.useState("vitality"),p=r.useCallback(async()=>{u(!0);try{const l={stat:a,scope:o,limit:20};o==="country"&&s?.country?l.scopeValue=s.country:o==="state"&&s?.state&&(l.scopeValue=s.state);const j=await g.characterStats.leaderboard(l);d(j.data||[])}catch{}finally{u(!1)}},[o,a,s]);return r.useEffect(()=>{p()},[p]),e.jsxs(x,{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(h.Trophy,{className:"w-5 h-5 text-yellow-400"}),"Leaderboard"]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("select",{value:a,onChange:l=>v(l.target.value),className:"bg-white/10 text-white rounded-lg px-3 py-1.5 text-sm border border-white/10 focus:border-violet-500 outline-none",children:f.map(l=>e.jsx("option",{value:l,className:"bg-gray-900",children:m[l].name},l))}),e.jsxs("select",{value:o,onChange:l=>b(l.target.value),className:"bg-white/10 text-white rounded-lg px-3 py-1.5 text-sm border border-white/10 focus:border-violet-500 outline-none",children:[e.jsx("option",{value:"global",className:"bg-gray-900",children:"Global"}),s?.country&&e.jsx("option",{value:"country",className:"bg-gray-900",children:"Country"}),s?.state&&e.jsx("option",{value:"state",className:"bg-gray-900",children:"State"})]})]}),n?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-2",children:[i.map((l,j)=>e.jsxs($.div,{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:j*.05},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`w-6 text-center font-bold ${l.rank<=3?"text-yellow-400":"text-white/50"}`,children:["#",l.rank]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:l.username?.charAt(0).toUpperCase()||"?"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:l.username}),l.country&&e.jsx("div",{className:"text-white/40 text-xs",children:l.country})]})]}),e.jsx("span",{className:"font-bold",style:{color:m[a].color},children:l.statValue.toFixed(0)})]},l.userId)),i.length===0&&e.jsx("div",{className:"text-center text-white/50 py-8",children:"No entries yet. Start working out to join the leaderboard!"})]})]})}function ve(){const{user:s}=U(),i=I(),[d]=O(),[n,u]=r.useState(null),[o,b]=r.useState(null),[a,v]=r.useState(null),[p,l]=r.useState(!0),[j,M]=r.useState(!1),[C,w]=r.useState(null),[N,L]=r.useState({}),[R,D]=r.useState(d.get("muscle")||null),[z,ae]=r.useState({}),W={"pectoralis-major":"chest","deltoid-anterior":"front_delts","deltoid-lateral":"side_delts","deltoid-posterior":"rear_delts","biceps-brachii":"biceps","triceps-brachii":"triceps","rectus-abdominis":"abs",obliques:"obliques",quadriceps:"quads",hamstrings:"hamstrings","gluteus-maximus":"glutes","latissimus-dorsi":"lats",trapezius:"traps",rhomboids:"upper_back","erector-spinae":"lower_back",gastrocnemius:"calves","forearm-flexors":"forearms"},_=r.useMemo(()=>Object.entries(N).map(([t,c])=>({id:W[t]||t.replace(/-/g,"_"),intensity:c/100,isPrimary:c>50})),[N]),y=r.useCallback(async()=>{try{w(null);const[t,c]=await Promise.all([g.characterStats.me(),g.characterStats.extendedProfile()]);u(t.data.stats),b(t.data.rankings),v(c.data)}catch(t){w(t.message||"Failed to load stats")}finally{l(!1)}},[]),T=r.useCallback(async()=>{try{const c=await(await fetch("/api/muscles/activations")).json();if(c.data&&Array.isArray(c.data)){const k={};c.data.forEach(E=>{k[E.muscleId]=E.activation}),L(k)}}catch{L({"pectoralis-major":65,"deltoid-anterior":45,"biceps-brachii":30,"rectus-abdominis":20,quadriceps:50,"latissimus-dorsi":35,trapezius:40,"gluteus-maximus":55})}},[]),B=r.useCallback(t=>{i(`/exercises?muscle=${t}`)},[i]),S=r.useCallback(t=>{D(t);const c=new URLSearchParams(d);t?c.set("muscle",t):c.delete("muscle"),i({search:c.toString()},{replace:!0})},[i,d]);r.useEffect(()=>{y(),T()},[y,T]);const G=async()=>{M(!0);try{const t=await g.characterStats.recalculate();u(t.data.stats),await y()}catch(t){w(t.message||"Failed to recalculate stats")}finally{M(!1)}},H=r.useMemo(()=>n?Math.max(...f.map(t=>n[t]||0),100):100,[n]);return p?e.jsx(P,{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-2 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Loading stats..."})]})}):e.jsx(P,{className:"min-h-screen p-4 md:p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Your Stats"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Track your fitness progress"})]}),e.jsxs(A,{onClick:G,disabled:j,className:"flex items-center gap-2",children:[e.jsx(h.Refresh,{className:`w-4 h-4 ${j?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Recalculate"})]})]}),C&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-4 text-red-400",children:C}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(x,{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white/60 uppercase tracking-wider mb-3",children:"This Week"}),e.jsx(Y,{data:a?.weeklyActivity||[2,1,3,0,2,1,0],colorScheme:"teal"})]}),e.jsxs(x,{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white/60 uppercase tracking-wider mb-3",children:"Volume Trend"}),e.jsx(Z,{data:a?.volumeTrend||[{label:"M",value:4500},{label:"T",value:0},{label:"W",value:6200},{label:"T",value:5800},{label:"F",value:7100},{label:"S",value:8500},{label:"S",value:0}],colorScheme:"purple",height:60})]}),e.jsx(q,{type:n?.strength>(a?.previousStrength||0)?"positive":"info",title:n?.strength>(a?.previousStrength||0)?"Getting Stronger!":"Keep Pushing",message:n?.strength>(a?.previousStrength||0)?`Your strength increased ${Math.round(((n?.strength||0)/(a?.previousStrength||1)-1)*100)}% this week`:"Consistency is key - keep showing up!",icon:n?.strength>(a?.previousStrength||0)?"ðŸ“ˆ":"ðŸ’ª"})]}),e.jsxs(x,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(h.User,{className:"w-5 h-5 text-violet-400"}),"Muscle Development"]}),e.jsx("p",{className:"text-white/60 text-sm mt-1",children:"3D visualization of your training distribution"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(K,{muscles:_,mode:"card",interactive:!0,showLabels:!0,autoRotate:!0,initialView:"front",onMuscleClick:t=>S(t),className:"w-full",style:{height:360}}),e.jsx("p",{className:"text-white/40 text-xs mt-2 text-center",children:"Click muscles to see related exercises"})]}),e.jsx("div",{children:e.jsx(X,{muscles:_,timeRange:"All Time",showComparison:!1,view:"both",className:"w-full"})})]})]}),e.jsxs(x,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(h.User,{className:"w-5 h-5 text-violet-400"}),"Muscle Activation Explorer"]}),e.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Click on muscles to see activation history and find exercises"})]}),R&&e.jsx(A,{onClick:()=>S(null),className:"text-sm",children:"Clear Selection"})]}),e.jsx(r.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 border-2 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Loading muscle explorer..."})]})}),children:e.jsx("div",{className:"flex flex-col lg:flex-row gap-6",children:e.jsx(te,{view:"both",activations:N,selectedMuscle:R,onMuscleSelect:S,interactive:!0,showLabels:!0,size:"md",colorScheme:"heat",showControls:!0,showLegend:!0,activationHistory:z,onFindExercises:B,onViewHistory:()=>{},onExerciseClick:t=>{i(`/exercises?search=${encodeURIComponent(t)}`)},className:"flex-1"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(x,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:"Stat Overview"}),n&&e.jsx(ee,{axes:f.map(t=>({key:t,label:m[t].abbr,color:m[t].color})),series:[{name:"Your Stats",data:n,color:"#8b5cf6",fillOpacity:.4}],height:320,showValues:!0,animated:!0,pulsing:!0,interactive:!0})]}),e.jsxs(x,{className:"p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"âš”ï¸"}),"Character Stats"]}),e.jsx("div",{className:"space-y-4",children:n&&f.map((t,c)=>e.jsx(J,{statKey:t,label:m[t].name,abbreviation:m[t].abbr,value:n[t]||0,maxValue:H*1.2,color:m[t].color,description:m[t].description,delay:c*.08,showSegments:!0,segmentCount:12,size:"md",variant:"default"},t))})]})]}),o&&e.jsxs(x,{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(h.TrendingUp,{className:"w-5 h-5 text-blue-400"}),"Your Rankings"]})}),o.vitality&&e.jsx("div",{className:"mb-4",children:e.jsx(F,{statKey:"vitality",rankings:o.vitality})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:["strength","constitution","dexterity","power","endurance"].map(t=>o[t]&&e.jsx(F,{statKey:t,rankings:o[t]},t))})]}),e.jsx(se,{userLocation:a}),a&&(a.city||a.country)&&e.jsxs(x,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Your Location"}),e.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[e.jsx(h.MapPin,{className:"w-4 h-4"}),e.jsx("span",{children:[a.city,a.state,a.country].filter(Boolean).join(", ")})]}),e.jsx("p",{className:"text-white/40 text-sm mt-2",children:"Update your location in settings for local rankings"})]})]})})}export{ve as default};
