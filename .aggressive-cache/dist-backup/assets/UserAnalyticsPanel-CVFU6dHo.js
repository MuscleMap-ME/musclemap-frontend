import{r,j as e}from"./react-vendor-D847gc3Q.js";import{G as d}from"./GlassSurface-CuHevRGA.js";import{R as Z}from"./refresh-cw-CJ2h9qCb.js";import{aI as q,Z as M,U as A,aH as Q,aE as ee,o as se,X as te}from"./index-CF1yimBQ.js";import{U as I}from"./EmpireControl-8PPndZuS.js";import{T as G}from"./triangle-alert-C3dqg7SR.js";import{L as P}from"./loader-circle-Cl_7-Fdo.js";import{R as ae,A as re,f as le,X as ie,Y as ne,e as ce,h as de}from"./recharts-vendor-CxtoZpzE.js";import{T as oe}from"./trending-down-GT45aGLC.js";import{C as xe}from"./chevron-right-BT5_SqyT.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BNHFeEEc.js";import"./reactflow-vendor-CYb5nRwM.js";import"./d3-vendor-mcDw60ct.js";import"./server-DIMf9m8y.js";import"./database-gKyw1Fcg.js";import"./lock-B_ZHHhSt.js";import"./terminal-DIOt0BR7.js";import"./mail-ChPGk_D3.js";import"./award-88BJ_FSD.js";import"./circle-alert-Do71_KJn.js";import"./send-DbAF2UHP.js";import"./circle-check-big-C1cis7IV.js";import"./eye-C6L_ckWm.js";import"./external-link-DHvDFtwr.js";const p="/api",E=[{id:"24h",label:"Today",days:1},{id:"7d",label:"7 Days",days:7},{id:"30d",label:"30 Days",days:30},{id:"90d",label:"90 Days",days:90}],me=[{id:"dashboard",label:"Dashboard",icon:q},{id:"users",label:"New Users",icon:I},{id:"features",label:"Features",icon:M},{id:"segments",label:"Segments",icon:A},{id:"cohorts",label:"Cohorts",icon:Q}],L={fitness:"#10b981",social:"#3b82f6",economy:"#f59e0b",competition:"#ef4444",progression:"#8b5cf6",profile:"#ec4899",messaging:"#06b6d4",notifications:"#f97316",onboarding:"#84cc16",analytics:"#6366f1",other:"#6b7280"};function u(s,l=0){return s==null?"0":s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toFixed(l)}function S(s){return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function he(s){return new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})}function O(s){const l=new Date(s),x=new Date().getTime()-l.getTime(),c=Math.floor(x/6e4),i=Math.floor(c/60),m=Math.floor(i/24);return c<1?"just now":c<60?`${c}m ago`:i<24?`${i}h ago`:m<7?`${m}d ago`:S(s)}function ue(s){return s>=70?"text-green-400":s>=40?"text-yellow-400":s>=20?"text-orange-400":"text-red-400"}function C({title:s,value:l,icon:t,trend:x,trendValue:c,color:i="#8b5cf6",subtitle:m}){return e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-400",children:s}),e.jsx("p",{className:"text-2xl font-bold text-white mt-1",children:l}),m&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m})]}),e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${i}20`},children:e.jsx(t,{size:20,style:{color:i}})})]}),x&&c&&e.jsxs("div",{className:"flex items-center mt-2 text-sm",children:[x==="up"?e.jsx(se,{size:14,className:"text-green-400 mr-1"}):x==="down"?e.jsx(oe,{size:14,className:"text-red-400 mr-1"}):null,e.jsx("span",{className:x==="up"?"text-green-400":x==="down"?"text-red-400":"text-gray-400",children:c})]})]})}function pe({user:s,onClick:l}){return e.jsx(d,{className:"p-4 cursor-pointer hover:bg-white/5 transition-colors",onClick:l,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white font-bold",children:s.avatarUrl?e.jsx("img",{src:s.avatarUrl,alt:"",className:"w-full h-full rounded-full object-cover"}):s.username.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-white font-medium truncate",children:s.displayName||s.username}),e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-500/20 text-purple-300",children:s.rank})]}),e.jsxs("p",{className:"text-sm text-gray-400 truncate",children:["@",s.username]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-medium ${ue(s.engagementScore)}`,children:s.engagementScore}),e.jsx("p",{className:"text-xs text-gray-500",children:O(s.createdAt)})]}),e.jsx(xe,{size:16,className:"text-gray-500"})]})})}function fe({feature:s}){const l=L[s.category]||L.other;return e.jsxs("div",{className:"flex items-center gap-4 py-3 px-4 hover:bg-white/5 transition-colors border-b border-white/5 last:border-0",children:[e.jsx("div",{className:"w-2 h-2 rounded-full flex-shrink-0",style:{backgroundColor:l}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium truncate",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:s.category})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-medium",children:u(s.uses30d)}),e.jsx("p",{className:"text-xs text-gray-500",children:"uses/30d"})]}),e.jsxs("div",{className:"text-right w-16",children:[e.jsx("p",{className:"text-gray-400",children:u(s.users30d)}),e.jsx("p",{className:"text-xs text-gray-500",children:"users"})]})]})}function je({segment:s,onClick:l}){return e.jsx(d,{className:"p-4 cursor-pointer hover:bg-white/5 transition-colors",onClick:l,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{backgroundColor:`${s.color||"#6b7280"}20`},children:e.jsx(A,{size:20,style:{color:s.color||"#6b7280"}})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-medium",children:s.name}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:s.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-white font-bold",children:u(s.memberCount)}),e.jsx("p",{className:"text-xs text-gray-500",children:"members"})]})]})})}function ge({cohorts:s}){if(s.length===0)return e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No cohort data available yet"});const l=t=>t>=50?"bg-green-500":t>=30?"bg-green-600":t>=20?"bg-yellow-600":t>=10?"bg-orange-600":"bg-red-600";return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-gray-400 text-left",children:[e.jsx("th",{className:"py-2 px-2",children:"Cohort"}),e.jsx("th",{className:"py-2 px-2 text-center",children:"Size"}),e.jsx("th",{className:"py-2 px-2 text-center",children:"D1"}),e.jsx("th",{className:"py-2 px-2 text-center",children:"D7"}),e.jsx("th",{className:"py-2 px-2 text-center",children:"D14"}),e.jsx("th",{className:"py-2 px-2 text-center",children:"D30"})]})}),e.jsx("tbody",{children:s.slice(0,14).map(t=>e.jsxs("tr",{className:"border-t border-white/5",children:[e.jsx("td",{className:"py-2 px-2 text-white",children:S(t.date)}),e.jsx("td",{className:"py-2 px-2 text-center text-gray-400",children:t.size}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("div",{className:`mx-auto w-12 h-6 rounded flex items-center justify-center text-xs text-white ${l(t.retention.d1)}`,children:[t.retention.d1,"%"]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("div",{className:`mx-auto w-12 h-6 rounded flex items-center justify-center text-xs text-white ${l(t.retention.d7)}`,children:[t.retention.d7,"%"]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("div",{className:`mx-auto w-12 h-6 rounded flex items-center justify-center text-xs text-white ${l(t.retention.d14)}`,children:[t.retention.d14,"%"]})}),e.jsx("td",{className:"py-2 px-2",children:e.jsxs("div",{className:`mx-auto w-12 h-6 rounded flex items-center justify-center text-xs text-white ${l(t.retention.d30)}`,children:[t.retention.d30,"%"]})})]},t.date))})]})})}function ye({userId:s,onClose:l}){const[t,x]=r.useState(null),[c,i]=r.useState(!0),[m,h]=r.useState(null);return r.useEffect(()=>{async function n(){try{i(!0);const f=await(await fetch(`${p}/admin/analytics/users/${s}`,{credentials:"include"})).json();f.success?x(f.data):h(f.error||"Failed to load user")}catch{h("Failed to load user details")}finally{i(!1)}}n()},[s]),e.jsxs("div",{className:"fixed inset-0 z-50 flex",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60",onClick:l}),e.jsxs("div",{className:"absolute right-0 top-0 bottom-0 w-full max-w-2xl bg-gray-900 border-l border-white/10 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-gray-900/95 backdrop-blur-sm border-b border-white/10 p-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:"User Details"}),e.jsx("button",{onClick:l,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(te,{size:20,className:"text-gray-400"})})]}),e.jsx("div",{className:"p-4 space-y-6",children:c?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(P,{size:32,className:"text-purple-400 animate-spin"})}):m?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(G,{size:32,className:"text-red-400 mx-auto mb-2"}),e.jsx("p",{className:"text-red-400",children:m})]}):t?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center text-white text-2xl font-bold",children:t.user.avatarUrl?e.jsx("img",{src:t.user.avatarUrl,alt:"",className:"w-full h-full rounded-full object-cover"}):t.user.username.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:t.user.displayName||t.user.username}),e.jsxs("p",{className:"text-gray-400",children:["@",t.user.username]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-500/20 text-purple-300",children:t.user.rank}),e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded bg-yellow-500/20 text-yellow-300",children:["Tier ",t.user.wealthTier]}),t.user.roles.includes("admin")&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-red-500/20 text-red-300",children:"Admin"})]})]})]}),t.activity&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[e.jsxs(d,{className:"p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t.activity.engagementScore}),e.jsx("p",{className:"text-xs text-gray-400",children:"Engagement"})]}),e.jsxs(d,{className:"p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t.activity.workouts30d}),e.jsx("p",{className:"text-xs text-gray-400",children:"Workouts/30d"})]}),e.jsxs(d,{className:"p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t.activity.daysActive30d}),e.jsx("p",{className:"text-xs text-gray-400",children:"Days Active"})]}),e.jsxs(d,{className:"p-3 text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:t.activity.uniqueFeaturesUsed}),e.jsx("p",{className:"text-xs text-gray-400",children:"Features Used"})]})]}),t.segments.length>0&&e.jsxs(d,{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Segments"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.segments.map(n=>e.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-white/10 text-white",children:n.name},n.id))})]}),e.jsxs(d,{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Economy"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-white",children:u(t.credits.balance)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Balance"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-green-400",children:u(t.credits.lifetimeEarned)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Earned"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-red-400",children:u(t.credits.lifetimeSpent)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Spent"})]})]})]}),t.featureUsage.length>0&&e.jsxs(d,{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Top Features Used"}),e.jsx("div",{className:"space-y-2",children:t.featureUsage.slice(0,5).map(n=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white",children:n.featureName}),e.jsxs("span",{className:"text-gray-400",children:[n.useCount," uses"]})]},n.featureId))})]}),e.jsxs(d,{className:"p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Account Info"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"User ID"}),e.jsx("span",{className:"text-white font-mono text-xs",children:t.user.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Email"}),e.jsx("span",{className:"text-white",children:t.user.email})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Joined"}),e.jsx("span",{className:"text-white",children:he(t.user.createdAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Total XP"}),e.jsx("span",{className:"text-white",children:u(t.user.totalXp)})]}),t.activity?.lastActivityAt&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Last Active"}),e.jsx("span",{className:"text-white",children:O(t.activity.lastActivityAt)})]})]})]})]}):null})]})]})}function Ve(){const[s,l]=r.useState("dashboard"),[t,x]=r.useState("30d"),[c,i]=r.useState(!0),[m,h]=r.useState(null),[n,D]=r.useState(null),[f,T]=r.useState([]),[k,H]=r.useState(null),[X,_]=r.useState(!1),[$,F]=r.useState(null),[R,K]=r.useState([]),[y,Ne]=r.useState(null),[z,V]=r.useState([]),[W,Y]=r.useState([]),N=r.useCallback(async()=>{try{i(!0);const o=await(await fetch(`${p}/admin/analytics/dashboard`,{credentials:"include"})).json();o.success?D(o.data):h(o.error||"Failed to load dashboard")}catch{h("Failed to load dashboard")}finally{i(!1)}},[]),j=r.useCallback(async(a=!0)=>{try{a&&i(!0);const o=new URLSearchParams({timeRange:t,limit:"20"});!a&&k&&o.set("cursor",k);const g=await(await fetch(`${p}/admin/analytics/users/new?${o}`,{credentials:"include"})).json();g.success&&(T(a?g.data.users:J=>[...J,...g.data.users]),H(g.data.pagination.nextCursor),_(g.data.pagination.hasNextPage))}catch{h("Failed to load users")}finally{i(!1)}},[t,k]),b=r.useCallback(async()=>{try{i(!0);const a=new URLSearchParams({timeRange:t});y&&a.set("category",y);const U=await(await fetch(`${p}/admin/analytics/features?${a}`,{credentials:"include"})).json();U.success&&K(U.data.features)}catch{h("Failed to load features")}finally{i(!1)}},[t,y]),w=r.useCallback(async()=>{try{i(!0);const o=await(await fetch(`${p}/admin/analytics/segments`,{credentials:"include"})).json();o.success&&V(o.data.segments)}catch{h("Failed to load segments")}finally{i(!1)}},[]),v=r.useCallback(async()=>{try{i(!0);const o=await(await fetch(`${p}/admin/analytics/cohorts`,{credentials:"include"})).json();o.success&&Y(o.data.cohorts)}catch{h("Failed to load cohorts")}finally{i(!1)}},[]);r.useEffect(()=>{switch(h(null),s){case"dashboard":N();break;case"users":j(!0);break;case"features":b();break;case"segments":w();break;case"cohorts":v();break}},[s,t,y,N,j,b,w,v]);const B=r.useCallback(async()=>{try{switch(await fetch(`${p}/admin/analytics/recalculate`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"mvs"})}),s){case"dashboard":N();break;case"users":j(!0);break;case"features":b();break;case"segments":w();break;case"cohorts":v();break}}catch{h("Failed to refresh")}},[s,N,j,b,w,v]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"User Analytics"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Track users, features, and behavior patterns"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:B,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Refresh data",children:e.jsx(Z,{size:18,className:"text-gray-400"})})})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:me.map(a=>e.jsxs("button",{onClick:()=>l(a.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${s===a.id?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:[e.jsx(a.icon,{size:16}),a.label]},a.id))}),["users","features"].includes(s)&&e.jsx("div",{className:"flex gap-2",children:E.map(a=>e.jsx("button",{onClick:()=>x(a.id),className:`px-3 py-1.5 rounded text-sm transition-colors ${t===a.id?"bg-white/20 text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:a.label},a.id))}),m&&e.jsx(d,{className:"p-4 border-red-500/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{size:20,className:"text-red-400"}),e.jsx("span",{className:"text-red-400",children:m})]})}),c&&e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(P,{size:32,className:"text-purple-400 animate-spin"})}),!c&&s==="dashboard"&&n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(C,{title:"Total Users",value:u(n.summary.totalUsers),icon:A,color:"#8b5cf6"}),e.jsx(C,{title:"New Today",value:u(n.summary.newUsers24h),icon:I,color:"#10b981",trend:"up",trendValue:`${n.summary.newUsers7d} this week`}),e.jsx(C,{title:"Active (30d)",value:u(n.summary.activeUsers30d),icon:ee,color:"#3b82f6"}),e.jsx(C,{title:"Features",value:n.summary.featureCount,icon:M,color:"#f59e0b"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-4",children:"Signup Trend (7 days)"}),e.jsx("div",{className:"h-48",children:e.jsx(ae,{width:"100%",height:"100%",children:e.jsxs(re,{data:[...n.signupTrend].reverse(),children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"signupGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]})}),e.jsx(le,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(ie,{dataKey:"date",tickFormatter:S,stroke:"#6b7280",fontSize:12}),e.jsx(ne,{stroke:"#6b7280",fontSize:12}),e.jsx(ce,{contentStyle:{backgroundColor:"#1f2937",border:"1px solid #374151",borderRadius:"8px"},labelFormatter:S}),e.jsx(de,{type:"monotone",dataKey:"count",stroke:"#8b5cf6",fill:"url(#signupGradient)",strokeWidth:2})]})})})]}),e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-4",children:"Top Segments"}),e.jsx("div",{className:"space-y-3",children:n.topSegments.map((a,o)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 text-center text-gray-500 text-sm",children:o+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white",children:a.name}),e.jsx("span",{className:"text-gray-400",children:u(a.memberCount)})]}),e.jsx("div",{className:"h-1.5 bg-white/10 rounded-full mt-1",children:e.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${Math.min(100,a.memberCount/n.summary.totalUsers*100)}%`}})})]})]},a.name))})]})]})]}),!c&&s==="users"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-gray-400",children:["Showing new signups from the last ",E.find(a=>a.id===t)?.label.toLowerCase()]}),e.jsx("div",{className:"space-y-2",children:f.map(a=>e.jsx(pe,{user:a,onClick:()=>F(a.id)},a.id))}),X&&e.jsx("button",{onClick:()=>j(!1),className:"w-full py-3 text-center text-purple-400 hover:text-purple-300 transition-colors",children:"Load More"}),f.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No users found in this time range"})]}),!c&&s==="features"&&e.jsx("div",{className:"space-y-4",children:e.jsxs(d,{className:"divide-y divide-white/5",children:[R.map(a=>e.jsx(fe,{feature:a},a.id)),R.length===0&&e.jsx("div",{className:"text-center text-gray-400 py-8",children:"No feature data available"})]})}),!c&&s==="segments"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[z.map(a=>e.jsx(je,{segment:a,onClick:()=>{}},a.id)),z.length===0&&e.jsx("div",{className:"col-span-full text-center text-gray-400 py-8",children:"No segments configured yet"})]}),!c&&s==="cohorts"&&e.jsxs(d,{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-4",children:"Cohort Retention Matrix"}),e.jsx(ge,{cohorts:W})]}),$&&e.jsx(ye,{userId:$,onClose:()=>F(null)})]})}export{Ve as default};
