import{r as a,j as e,L as _}from"./react-vendor-D1NxaRNd.js";import{c as X,y as Y,o as J,a as o,a9 as K,a2 as Q,ap as r,P as Z,m as x,aa as ee,A as M,X as se,j as te}from"./index-BV5ySY7X.js";import{A as ae}from"./arrow-left-BXrRTIJw.js";import{C as re}from"./chevron-down-NwClgobu.js";import{S as le}from"./square-pen-Dga-nkph.js";import{T as ne}from"./trash-2-CRedYZa2.js";import{M as ie}from"./minus-C9W_77w3.js";import{T as ce}from"./trending-down-VPhYg1zg.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";import"./d3-vendor-mcDw60ct.js";import"./recharts-vendor-BziRPEEi.js";const oe=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],C=X("scale",oe),b=[{key:"weight_kg",label:"Weight",unit:"kg",category:"weight",icon:C},{key:"body_fat_percentage",label:"Body Fat",unit:"%",category:"composition",icon:K},{key:"lean_mass_kg",label:"Lean Mass",unit:"kg",category:"composition",icon:Q},{key:"neck_cm",label:"Neck",unit:"cm",category:"upper",icon:r},{key:"shoulders_cm",label:"Shoulders",unit:"cm",category:"upper",icon:r},{key:"chest_cm",label:"Chest",unit:"cm",category:"upper",icon:r},{key:"left_bicep_cm",label:"Left Bicep",unit:"cm",category:"upper",icon:r},{key:"right_bicep_cm",label:"Right Bicep",unit:"cm",category:"upper",icon:r},{key:"left_forearm_cm",label:"Left Forearm",unit:"cm",category:"upper",icon:r},{key:"right_forearm_cm",label:"Right Forearm",unit:"cm",category:"upper",icon:r},{key:"waist_cm",label:"Waist",unit:"cm",category:"lower",icon:r},{key:"hips_cm",label:"Hips",unit:"cm",category:"lower",icon:r},{key:"left_thigh_cm",label:"Left Thigh",unit:"cm",category:"lower",icon:r},{key:"right_thigh_cm",label:"Right Thigh",unit:"cm",category:"lower",icon:r},{key:"left_calf_cm",label:"Left Calf",unit:"cm",category:"lower",icon:r},{key:"right_calf_cm",label:"Right Calf",unit:"cm",category:"lower",icon:r}],S=[{id:"all",label:"All"},{id:"weight",label:"Weight"},{id:"composition",label:"Body Comp"},{id:"upper",label:"Upper Body"},{id:"lower",label:"Lower Body"}];function we(){const{isAuthenticated:j}=Y(),{toast:f,error:g}=J(),[v,T]=a.useState([]),[k,A]=a.useState(null),[D,F]=a.useState(null),[N,L]=a.useState(30),[E,P]=a.useState(!0),[u,R]=a.useState("all"),[B,i]=a.useState(!1),[h,d]=a.useState(null),[w,I]=a.useState(!1),[l,c]=a.useState({measurement_date:new Date().toISOString().split("T")[0]}),y=a.useCallback(async()=>{try{const[s,t,n]=await Promise.all([o.get("/body-measurements?limit=100"),o.get("/body-measurements/latest"),o.get(`/body-measurements/comparison?days=${N}`)]);T(s.data?.measurements||[]),A(t.data?.measurement||null),F(n.data?.comparison||null)}catch{}finally{P(!1)}},[N]);a.useEffect(()=>{j&&y()},[j,y]);const $=async()=>{if(!b.some(t=>l[t.key]!==void 0&&l[t.key]!==null&&l[t.key]!=="")){g("Please enter at least one measurement");return}if(!l.measurement_date){g("Please select a date");return}try{h?(await o.put(`/body-measurements/${h.id}`,l),f("Measurement updated!")):(await o.post("/body-measurements",l),f("Measurement added!")),i(!1),d(null),c({measurement_date:new Date().toISOString().split("T")[0]}),y()}catch{g("Failed to save measurement")}},W=async s=>{if(confirm("Delete this measurement?"))try{await o.delete(`/body-measurements/${s}`),f("Measurement deleted"),y()}catch{g("Failed to delete measurement")}},z=s=>{d(s),c({...s,measurement_date:s.measurement_date.split("T")[0]}),i(!0)},O=a.useMemo(()=>u==="all"?b:b.filter(s=>s.category===u),[u]),H=(s,t=!1)=>s==null||s===0?{icon:ie,color:"text-gray-400",bg:"bg-gray-500/20"}:(t?s<0:s>0)?{icon:te,color:"text-green-400",bg:"bg-green-500/20"}:{icon:ce,color:"text-red-400",bg:"bg-red-500/20"};return j?e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white pb-24",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-gray-950/95 backdrop-blur-lg border-b border-gray-800",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{to:"/stats",className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400 hover:text-white",children:e.jsx(ae,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Body Measurements"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Track your progress over time"})]})]}),e.jsxs("button",{onClick:()=>{d(null),c({measurement_date:new Date().toISOString().split("T")[0]}),i(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium",children:[e.jsx(Z,{className:"w-4 h-4"}),"Add"]})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-1 -mx-4 px-4",children:S.map(s=>e.jsx("button",{onClick:()=>R(s.id),className:`px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap transition-all ${u===s.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-400 hover:text-white"}`,children:s.label},s.id))})]})}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6 space-y-6",children:[v.length===0&&e.jsx(x.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-green-500/20 to-teal-500/20 border border-green-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ“"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-white mb-1",children:"Track Your Body Transformation"}),e.jsx("p",{className:"text-sm text-gray-300",children:"Measure consistently (weekly or bi-weekly) at the same time of day for accurate progress tracking. Track more than just weight - circumferences show muscle growth!"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3 text-xs",children:[e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded-lg",children:"â° Measure in the morning"}),e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded-lg",children:"ðŸ“Š Compare over 30+ days"}),e.jsx("span",{className:"px-2 py-1 bg-white/10 rounded-lg",children:"ðŸ’ª Track arm & leg gains"})]})]})]})}),E?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"h-24 bg-gray-900 rounded-2xl animate-pulse"},s))}):k===null?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-900 flex items-center justify-center",children:e.jsx(C,{className:"w-8 h-8 text-gray-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"No measurements yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Start tracking your body measurements"}),e.jsx("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg",children:"Add First Measurement"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Progress"}),e.jsxs("select",{value:N,onChange:s=>L(parseInt(s.target.value)),className:"px-3 py-2 bg-gray-900 border border-gray-800 rounded-lg text-sm",children:[e.jsx("option",{value:7,children:"vs 7 days ago"}),e.jsx("option",{value:30,children:"vs 30 days ago"}),e.jsx("option",{value:90,children:"vs 90 days ago"}),e.jsx("option",{value:180,children:"vs 6 months ago"}),e.jsx("option",{value:365,children:"vs 1 year ago"})]})]}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2",children:O.map(s=>{const t=k[s.key],n=D?.[s.key],m=n?.change,U=n?.changePercent,V=s.key==="weight_kg"||s.key==="waist_cm",p=H(m,V),q=p.icon,G=s.icon;return t==null?null:e.jsxs(x.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-gray-900 rounded-xl p-4 border border-gray-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 bg-gray-800 rounded-lg",children:e.jsx(G,{className:"w-4 h-4 text-blue-400"})}),e.jsx("span",{className:"text-sm text-gray-400",children:s.label})]}),m!=null&&e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-lg ${p.bg}`,children:[e.jsx(q,{className:`w-3.5 h-3.5 ${p.color}`}),e.jsxs("span",{className:`text-xs font-medium ${p.color}`,children:[m>0?"+":"",m.toFixed(1)," (",U,"%)"]})]})]}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-2xl font-bold",children:t.toFixed(1)}),e.jsx("span",{className:"text-gray-500",children:s.unit})]})]},s.key)})}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("button",{onClick:()=>I(!w),className:"flex items-center justify-between w-full p-4 bg-gray-900 rounded-xl border border-gray-800 hover:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ee,{className:"w-5 h-5 text-gray-400"}),e.jsx("span",{className:"font-medium",children:"Measurement History"}),e.jsxs("span",{className:"text-sm text-gray-500",children:["(",v.length," entries)"]})]}),e.jsx(re,{className:`w-5 h-5 text-gray-400 transition-transform ${w?"rotate-180":""}`})]}),e.jsx(M,{children:w&&e.jsx(x.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsx("div",{className:"mt-3 space-y-2",children:v.slice(0,20).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-900/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:new Date(s.measurement_date).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-1 text-xs text-gray-500",children:[s.weight_kg&&e.jsxs("span",{children:["Weight: ",s.weight_kg,"kg"]}),s.body_fat_percentage&&e.jsxs("span",{children:["BF: ",s.body_fat_percentage,"%"]}),s.chest_cm&&e.jsxs("span",{children:["Chest: ",s.chest_cm,"cm"]}),s.waist_cm&&e.jsxs("span",{children:["Waist: ",s.waist_cm,"cm"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>z(s),className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>W(s.id),className:"p-2 hover:bg-gray-800 rounded-lg text-red-400",children:e.jsx(ne,{className:"w-4 h-4"})})]})]},s.id))})})})]})]})]}),e.jsx(M,{children:B&&e.jsx(x.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/80 backdrop-blur-sm overflow-y-auto",children:e.jsx("div",{className:"min-h-screen flex items-start justify-center p-4 pt-20",children:e.jsxs(x.div,{initial:{scale:.95,y:20},animate:{scale:1,y:0},exit:{scale:.95,y:20},className:"w-full max-w-lg bg-gray-900 rounded-2xl border border-gray-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[e.jsx("h2",{className:"text-lg font-bold",children:h?"Edit Measurement":"Add Measurement"}),e.jsx("button",{onClick:()=>{i(!1),d(null)},className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400",children:e.jsx(se,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:l.measurement_date||"",onChange:s=>c({...l,measurement_date:s.target.value}),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg"})]}),S.slice(1).map(s=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:s.label}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.filter(t=>t.category===s.id).map(t=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-500 mb-1",children:[t.label," (",t.unit,")"]}),e.jsx("input",{type:"number",step:"0.1",value:l[t.key]??"",onChange:n=>c({...l,[t.key]:n.target.value?parseFloat(n.target.value):void 0}),placeholder:"â€”",className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-sm"})]},t.key))})]},s.id)),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes"}),e.jsx("textarea",{value:l.notes||"",onChange:s=>c({...l,notes:s.target.value}),placeholder:"Optional notes...",rows:2,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg resize-none"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-4 border-t border-gray-800",children:[e.jsx("button",{onClick:()=>{i(!1),d(null)},className:"px-4 py-2 text-gray-400 hover:text-white",children:"Cancel"}),e.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg font-medium",children:h?"Update":"Save"})]})]})})})})]}):e.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Sign in Required"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Please sign in to track body measurements"}),e.jsx(_,{to:"/login",className:"px-4 py-2 bg-blue-600 text-white rounded-lg",children:"Sign In"})]})})}export{we as default};
