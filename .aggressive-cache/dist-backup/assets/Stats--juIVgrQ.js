const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-_lCD8sLC.js","assets/react-vendor-D847gc3Q.js","assets/index-CW1Bthq4.js","assets/leaflet-vendor-CIGW-MKW.css","assets/reactflow-vendor-B5DZHykP.css","assets/index-DJrURAX_.css","assets/index--JFGRBr0.js","assets/info-B6EFyRKj.js","assets/external-link-CdNOGSz1.js","assets/history-CXPFnmwn.js","assets/chevron-right-CT2eBOy4.js","assets/refresh-cw-C2aLejev.js","assets/zoom-out-CgH9b9MF.js","assets/rotate-ccw-DVPUmx1U.js","assets/pause-u3FITveM.js","assets/minus-C4mr8_L2.js","assets/trending-down-B2GtJjxI.js"])))=>i.map(i=>d[i]);
import{e as G,i as g,_ as D,m as M}from"./index-CW1Bthq4.js";import{j as e,u as I,k as O,r as l}from"./react-vendor-D847gc3Q.js";import{G as A,a as m}from"./GlassSurface-DZwHl8aR.js";import{G as P}from"./GlassButton-ChJV6FIL.js";import{I as q}from"./InsightCard-Dd61MEP7.js";import{W as Y}from"./WeeklyHeatmap-BGHzi2nT.js";import{M as K}from"./MuscleViewer-CV4KzcDl.js";import{M as X}from"./MuscleHeatmap-C_w3DPTy.js";import"./apollo-vendor-BNHFeEEc.js";import"./reactflow-vendor-5ig9bY2l.js";import"./d3-vendor-DkU_Wy0v.js";import"./recharts-vendor-d8oTApeF.js";import"./leaflet-vendor-DZbo3Ov0.js";const J={teal:"from-teal-600 to-teal-400",purple:"from-purple-600 to-purple-400",blue:"from-blue-600 to-blue-400",orange:"from-orange-600 to-orange-400"},Q=({data:s,colorScheme:r="teal",height:o=80,showTooltip:i=!0,className:x=""})=>{const c=Math.max(...s.map(a=>a.value),1),f=J[r];return e.jsx("div",{className:`flex items-end gap-1 ${x}`,style:{height:o},children:s.map((a,v)=>{const u=a.value/c*100;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group relative",children:[e.jsx("div",{className:`w-full rounded-t bg-gradient-to-t ${f} transition-all hover:opacity-80`,style:{height:`${u}%`,minHeight:a.value>0?"4px":"0"}}),e.jsx("span",{className:"text-xs text-slate-500",children:a.label}),i&&e.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-1 px-2 py-1 bg-slate-900 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-10",children:a.value})]},`${a.label}-${v}`)})})},Z=l.lazy(()=>D(()=>import("./index-_lCD8sLC.js"),__vite__mapDeps([0,1,2,3,4,5])).then(s=>({default:s.RadarChartD3}))),ee=l.lazy(()=>D(()=>import("./index--JFGRBr0.js"),__vite__mapDeps([6,1,2,7,8,9,10,11,12,13,14,15,16,3,4,5])).then(s=>({default:s.default||s.MuscleExplorer}))),h={Refresh:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),Globe:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),MapPin:({className:s="w-5 h-5"})=>e.jsxs("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),TrendingUp:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),Trophy:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),User:({className:s="w-5 h-5"})=>e.jsx("svg",{className:s,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},b={strength:{name:"Strength",abbr:"STR",color:"#FF3366",description:"Raw lifting power"},constitution:{name:"Constitution",abbr:"CON",color:"#00CC66",description:"Recovery & resilience"},dexterity:{name:"Dexterity",abbr:"DEX",color:"#FFB800",description:"Movement skill"},power:{name:"Power",abbr:"PWR",color:"#FF6B00",description:"Explosive force"},endurance:{name:"Endurance",abbr:"END",color:"#0066FF",description:"Stamina"},vitality:{name:"Vitality",abbr:"VIT",color:"#9333EA",description:"Overall health"}},j=["strength","constitution","dexterity","power","endurance","vitality"];function te({statKey:s,value:r,maxValue:o}){const i=b[s],x=Math.min(r/o*100,100);return e.jsxs(M.div,{className:"space-y-1",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:j.indexOf(s)*.1},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:i.color}}),e.jsx("span",{className:"font-semibold text-white/90",children:i.abbr}),e.jsx("span",{className:"text-white/50 text-sm",children:i.name})]}),e.jsx("span",{className:"font-bold",style:{color:i.color},children:r.toFixed(0)})]}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx(M.div,{className:"h-full rounded-full",style:{backgroundColor:i.color},initial:{width:0},animate:{width:`${x}%`},transition:{duration:.8,delay:j.indexOf(s)*.1}})})]})}function V({statKey:s,rankings:r}){const o=b[s];return e.jsxs("div",{className:"bg-white/5 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"font-bold",style:{color:o.color},children:o.abbr}),e.jsx("span",{className:"text-white/50 text-sm",children:"Rankings"})]}),e.jsxs("div",{className:"flex justify-around",children:[r.global&&e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-white/50 text-xs mb-1",children:[e.jsx(h.Globe,{className:"w-3 h-3"}),e.jsx("span",{children:"Global"})]}),e.jsxs("div",{className:"font-bold text-lg text-white",children:["#",r.global.rank]}),e.jsxs("div",{className:"text-white/40 text-xs",children:["Top ",r.global.percentile.toFixed(0),"%"]})]}),r.country&&e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-white/50 text-xs mb-1",children:[e.jsx(h.MapPin,{className:"w-3 h-3"}),e.jsx("span",{children:"Country"})]}),e.jsxs("div",{className:"font-bold text-lg text-white",children:["#",r.country.rank]}),e.jsxs("div",{className:"text-white/40 text-xs",children:["Top ",r.country.percentile.toFixed(0),"%"]})]}),r.state&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-white/50 text-xs mb-1",children:"State"}),e.jsxs("div",{className:"font-bold text-lg text-white",children:["#",r.state.rank]}),e.jsxs("div",{className:"text-white/40 text-xs",children:["Top ",r.state.percentile.toFixed(0),"%"]})]})]})]})}function se({userLocation:s}){const[r,o]=l.useState([]),[i,x]=l.useState(!0),[c,f]=l.useState("global"),[a,v]=l.useState("vitality"),u=l.useCallback(async()=>{x(!0);try{const n={stat:a,scope:c,limit:20};c==="country"&&s?.country?n.scopeValue=s.country:c==="state"&&s?.state&&(n.scopeValue=s.state);const p=await g.characterStats.leaderboard(n);o(p.data||[])}catch{}finally{x(!1)}},[c,a,s]);return l.useEffect(()=>{u()},[u]),e.jsxs(m,{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h3",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(h.Trophy,{className:"w-5 h-5 text-yellow-400"}),"Leaderboard"]})}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("select",{value:a,onChange:n=>v(n.target.value),className:"bg-white/10 text-white rounded-lg px-3 py-1.5 text-sm border border-white/10 focus:border-violet-500 outline-none",children:j.map(n=>e.jsx("option",{value:n,className:"bg-gray-900",children:b[n].name},n))}),e.jsxs("select",{value:c,onChange:n=>f(n.target.value),className:"bg-white/10 text-white rounded-lg px-3 py-1.5 text-sm border border-white/10 focus:border-violet-500 outline-none",children:[e.jsx("option",{value:"global",className:"bg-gray-900",children:"Global"}),s?.country&&e.jsx("option",{value:"country",className:"bg-gray-900",children:"Country"}),s?.state&&e.jsx("option",{value:"state",className:"bg-gray-900",children:"State"})]})]}),i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"space-y-2",children:[r.map((n,p)=>e.jsxs(M.div,{className:"flex items-center justify-between p-3 rounded-lg bg-white/5 hover:bg-white/10 transition-colors",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:p*.05},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:`w-6 text-center font-bold ${n.rank<=3?"text-yellow-400":"text-white/50"}`,children:["#",n.rank]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-violet-500 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:n.username?.charAt(0).toUpperCase()||"?"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-medium",children:n.username}),n.country&&e.jsx("div",{className:"text-white/40 text-xs",children:n.country})]})]}),e.jsx("span",{className:"font-bold",style:{color:b[a].color},children:n.statValue.toFixed(0)})]},n.userId)),r.length===0&&e.jsx("div",{className:"text-center text-white/50 py-8",children:"No entries yet. Start working out to join the leaderboard!"})]})]})}function be(){const{user:s}=G(),r=I(),[o]=O(),[i,x]=l.useState(null),[c,f]=l.useState(null),[a,v]=l.useState(null),[u,n]=l.useState(!0),[p,C]=l.useState(!1),[L,w]=l.useState(null),[N,R]=l.useState({}),[_,z]=l.useState(o.get("muscle")||null),[W,ae]=l.useState({}),B={"pectoralis-major":"chest","deltoid-anterior":"front_delts","deltoid-lateral":"side_delts","deltoid-posterior":"rear_delts","biceps-brachii":"biceps","triceps-brachii":"triceps","rectus-abdominis":"abs",obliques:"obliques",quadriceps:"quads",hamstrings:"hamstrings","gluteus-maximus":"glutes","latissimus-dorsi":"lats",trapezius:"traps",rhomboids:"upper_back","erector-spinae":"lower_back",gastrocnemius:"calves","forearm-flexors":"forearms"},T=l.useMemo(()=>Object.entries(N).map(([t,d])=>({id:B[t]||t.replace(/-/g,"_"),intensity:d/100,isPrimary:d>50})),[N]),y=l.useCallback(async()=>{try{w(null);const[t,d]=await Promise.all([g.characterStats.me(),g.characterStats.extendedProfile()]);x(t.data.stats),f(t.data.rankings),v(d.data)}catch(t){w(t.message||"Failed to load stats")}finally{n(!1)}},[]),E=l.useCallback(async()=>{try{const d=await(await fetch("/api/muscles/activations")).json();if(d.data&&Array.isArray(d.data)){const k={};d.data.forEach(F=>{k[F.muscleId]=F.activation}),R(k)}}catch{R({"pectoralis-major":65,"deltoid-anterior":45,"biceps-brachii":30,"rectus-abdominis":20,quadriceps:50,"latissimus-dorsi":35,trapezius:40,"gluteus-maximus":55})}},[]),H=l.useCallback(t=>{r(`/exercises?muscle=${t}`)},[r]),S=l.useCallback(t=>{z(t);const d=new URLSearchParams(o);t?d.set("muscle",t):d.delete("muscle"),r({search:d.toString()},{replace:!0})},[r,o]);l.useEffect(()=>{y(),E()},[y,E]);const U=async()=>{C(!0);try{const t=await g.characterStats.recalculate();x(t.data.stats),await y()}catch(t){w(t.message||"Failed to recalculate stats")}finally{C(!1)}},$=l.useMemo(()=>i?Math.max(...j.map(t=>i[t]||0),100):100,[i]);return u?e.jsx(A,{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 border-2 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white/60",children:"Loading stats..."})]})}):e.jsx(A,{className:"min-h-screen p-4 md:p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Your Stats"}),e.jsx("p",{className:"text-white/60 text-sm",children:"Track your fitness progress"})]}),e.jsxs(P,{onClick:U,disabled:p,className:"flex items-center gap-2",children:[e.jsx(h.Refresh,{className:`w-4 h-4 ${p?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:"Recalculate"})]})]}),L&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/50 rounded-xl p-4 text-red-400",children:L}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs(m,{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white/60 uppercase tracking-wider mb-3",children:"This Week"}),e.jsx(Y,{data:a?.weeklyActivity||[2,1,3,0,2,1,0],colorScheme:"teal"})]}),e.jsxs(m,{className:"p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white/60 uppercase tracking-wider mb-3",children:"Volume Trend"}),e.jsx(Q,{data:a?.volumeTrend||[{label:"M",value:4500},{label:"T",value:0},{label:"W",value:6200},{label:"T",value:5800},{label:"F",value:7100},{label:"S",value:8500},{label:"S",value:0}],colorScheme:"purple",height:60})]}),e.jsx(q,{type:i?.strength>(a?.previousStrength||0)?"positive":"info",title:i?.strength>(a?.previousStrength||0)?"Getting Stronger!":"Keep Pushing",message:i?.strength>(a?.previousStrength||0)?`Your strength increased ${Math.round(((i?.strength||0)/(a?.previousStrength||1)-1)*100)}% this week`:"Consistency is key - keep showing up!",icon:i?.strength>(a?.previousStrength||0)?"ðŸ“ˆ":"ðŸ’ª"})]}),e.jsxs(m,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(h.User,{className:"w-5 h-5 text-violet-400"}),"Muscle Development"]}),e.jsx("p",{className:"text-white/60 text-sm mt-1",children:"3D visualization of your training distribution"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(K,{muscles:T,mode:"card",interactive:!0,showLabels:!0,autoRotate:!0,initialView:"front",onMuscleClick:t=>S(t),className:"w-full",style:{height:360}}),e.jsx("p",{className:"text-white/40 text-xs mt-2 text-center",children:"Click muscles to see related exercises"})]}),e.jsx("div",{children:e.jsx(X,{muscles:T,timeRange:"All Time",showComparison:!1,view:"both",className:"w-full"})})]})]}),e.jsxs(m,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(h.User,{className:"w-5 h-5 text-violet-400"}),"Muscle Activation Explorer"]}),e.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Click on muscles to see activation history and find exercises"})]}),_&&e.jsx(P,{onClick:()=>S(null),className:"text-sm",children:"Clear Selection"})]}),e.jsx(l.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 border-2 border-violet-500 border-t-transparent rounded-full animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-white/50 text-sm",children:"Loading muscle explorer..."})]})}),children:e.jsx("div",{className:"flex flex-col lg:flex-row gap-6",children:e.jsx(ee,{view:"both",activations:N,selectedMuscle:_,onMuscleSelect:S,interactive:!0,showLabels:!0,size:"md",colorScheme:"heat",showControls:!0,showLegend:!0,activationHistory:W,onFindExercises:H,onViewHistory:()=>{},onExerciseClick:t=>{r(`/exercises?search=${encodeURIComponent(t)}`)},className:"flex-1"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(m,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4 text-center",children:"Stat Overview"}),i&&e.jsx(Z,{axes:j.map(t=>({key:t,label:b[t].abbr,color:b[t].color})),series:[{name:"Your Stats",data:i,color:"#8b5cf6",fillOpacity:.4}],height:320,showValues:!0,animated:!0,pulsing:!0,interactive:!0})]}),e.jsxs(m,{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Individual Stats"}),e.jsx("div",{className:"space-y-4",children:i&&j.map(t=>e.jsx(te,{statKey:t,value:i[t]||0,maxValue:$*1.2},t))})]})]}),c&&e.jsxs(m,{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(h.TrendingUp,{className:"w-5 h-5 text-blue-400"}),"Your Rankings"]})}),c.vitality&&e.jsx("div",{className:"mb-4",children:e.jsx(V,{statKey:"vitality",rankings:c.vitality})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:["strength","constitution","dexterity","power","endurance"].map(t=>c[t]&&e.jsx(V,{statKey:t,rankings:c[t]},t))})]}),e.jsx(se,{userLocation:a}),a&&(a.city||a.country)&&e.jsxs(m,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Your Location"}),e.jsxs("div",{className:"flex items-center gap-2 text-white/60",children:[e.jsx(h.MapPin,{className:"w-4 h-4"}),e.jsx("span",{children:[a.city,a.state,a.country].filter(Boolean).join(", ")})]}),e.jsx("p",{className:"text-white/40 text-sm mt-2",children:"Update your location in settings for local rankings"})]})]})})}export{be as default};
