import{r as x,j as e,L as N}from"./react-vendor-D1NxaRNd.js";import{c as n}from"./recharts-vendor-BziRPEEi.js";import{H as re,A as R,m as g}from"./index-Bd5HTF5q.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./d3-vendor-mcDw60ct.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";const r={Back:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})}),Grid:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),List:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),Star:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),StarFilled:()=>e.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),Sparkle:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),Close:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6 18L18 6M6 6l12 12"})}),Gift:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"})}),Puzzle:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z"})}),Trophy:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),Tag:()=>e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),Eye:()=>e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),New:()=>e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})},p={common:{label:"Common",color:"from-gray-500 to-gray-600",border:"border-gray-500/30",bg:"bg-gray-500/10",textColor:"text-gray-400"},uncommon:{label:"Uncommon",color:"from-green-500 to-emerald-600",border:"border-green-500/30",bg:"bg-green-500/10",textColor:"text-green-400"},rare:{label:"Rare",color:"from-blue-500 to-cyan-600",border:"border-blue-500/30",bg:"bg-blue-500/10",textColor:"text-blue-400"},epic:{label:"Epic",color:"from-purple-500 to-violet-600",border:"border-purple-500/30",bg:"bg-purple-500/10",textColor:"text-purple-400"},legendary:{label:"Legendary",color:"from-amber-400 to-orange-500",border:"border-amber-500/30",bg:"bg-amber-500/10",textColor:"text-amber-400"},mythic:{label:"Mythic",color:"from-pink-500 to-rose-600",border:"border-pink-500/30",bg:"bg-pink-500/10",textColor:"text-pink-400"},divine:{label:"Divine",color:"from-cyan-400 to-sky-500",border:"border-cyan-400/30",bg:"bg-cyan-400/10",textColor:"text-cyan-400"}},oe=[{key:"all",label:"All Items",icon:e.jsx(r.Grid,{})},{key:"favorites",label:"Favorites",icon:e.jsx(r.StarFilled,{})},{key:"sets",label:"Sets",icon:e.jsx(r.Puzzle,{})},{key:"showcase",label:"Showcase",icon:e.jsx(r.Eye,{})}],ie=[{key:"all",label:"All"},{key:"skin",label:"Skins"},{key:"frame",label:"Frames"},{key:"badge",label:"Badges"},{key:"effect",label:"Effects"},{key:"theme",label:"Themes"},{key:"emote",label:"Emotes"},{key:"title",label:"Titles"}];function ye(){const{token:t}=re(),[c,i]=x.useState("all"),[l,a]=x.useState(null),[o,v]=x.useState([]),[u,j]=x.useState([]),[O,V]=x.useState([]),[G,H]=x.useState([]),[L,M]=x.useState(0),[q,P]=x.useState(!0),[w,k]=x.useState(null),[D,C]=x.useState(null),[z,$]=x.useState("grid"),[S,Y]=x.useState("all"),[f,J]=x.useState("all"),[W,he]=x.useState("acquired"),[B,E]=x.useState({show:!1,message:"",type:"success"}),F=x.useCallback(async()=>{P(!0);try{const s={Authorization:`Bearer ${t}`},[d,m,h,y,Q,X]=await Promise.all([fetch("/api/collection/stats",{headers:s}),fetch(`/api/collection?category=${S!=="all"?S:""}&rarity=${f!=="all"?f:""}&sortBy=${W}`,{headers:s}),fetch("/api/collection/favorites",{headers:s}),fetch("/api/collection/sets",{headers:s}),fetch("/api/collection/showcase/me",{headers:s}).catch(()=>({json:()=>({data:[]})})),fetch("/api/collection/new-count",{headers:s})]),[Z,ee,se,te,ae,le]=await Promise.all([d.json(),m.json(),h.json(),y.json(),Q.json(),X.json()]);a(Z.data),v(ee.data?.items||[]),j(se.data||[]),V(te.data||[]),H(ae.data||[]),M(le.data?.count||0)}catch{}finally{P(!1)}},[t,S,f,W]);x.useEffect(()=>{F()},[F]);const b=(s,d="success")=>{E({show:!0,message:s,type:d}),setTimeout(()=>E({show:!1,message:"",type:"success"}),3e3)},A=async s=>{try{const m=await(await fetch(`/api/collection/items/${s}/favorite`,{method:"POST",headers:{Authorization:`Bearer ${t}`}})).json();m.data&&(m.data.isFavorite?j(h=>[...h,o.find(y=>y.id===s)]):j(h=>h.filter(y=>y.id!==s)),b(m.data.isFavorite?"Added to favorites":"Removed from favorites"))}catch{b("Failed to update favorite","error")}},I=async s=>{try{await fetch(`/api/collection/items/${s}/seen`,{method:"POST",headers:{Authorization:`Bearer ${t}`}}),M(d=>Math.max(0,d-1))}catch{}},U=async()=>{try{await fetch("/api/collection/seen-all",{method:"POST",headers:{Authorization:`Bearer ${t}`}}),M(0),b("All items marked as seen")}catch{b("Failed to mark all as seen","error")}},K=async(s,d)=>{try{const h=await(await fetch(`/api/collection/sets/${s}/claim`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({threshold:d})})).json();h.data?(b(`Reward claimed: ${h.data.reward?.description||"Success!"}`,"success"),F(),C(null)):b(h.error?.message||"Failed to claim reward","error")}catch{b("Failed to claim reward","error")}},_=s=>u.some(d=>d.id===s),T=()=>{switch(c){case"favorites":return u;case"showcase":return G;default:return o}};return q&&!l?e.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-2 border-violet-500 border-t-transparent rounded-full animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] text-white pb-8",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-[#0a0a0f]/80 backdrop-blur-xl border-b border-white/5",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{to:"/marketplace",className:"p-2 -ml-2 rounded-xl hover:bg-white/5",children:e.jsx(r.Back,{})}),e.jsx("h1",{className:"text-xl font-semibold",children:"My Collection"}),L>0&&e.jsxs("span",{className:"px-2 py-0.5 text-xs bg-violet-600 rounded-full",children:[L," new"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[L>0&&e.jsx("button",{onClick:U,className:"px-3 py-2 text-sm bg-white/5 hover:bg-white/10 rounded-xl transition-colors",children:"Mark all seen"}),e.jsxs(N,{to:"/marketplace",className:"flex items-center gap-2 px-4 py-2 bg-violet-600 hover:bg-violet-700 rounded-xl transition-colors",children:[e.jsx(r.Tag,{}),e.jsx("span",{className:"hidden sm:inline",children:"Browse"})]})]})]})}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-6",children:[l&&e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-violet-600/20 to-purple-600/20 border border-violet-500/30 rounded-xl",children:[e.jsx("p",{className:"text-3xl font-bold",children:l.totalOwned||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"Total Items"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl",children:[e.jsx("p",{className:"text-3xl font-bold text-green-400",children:(l.totalValue||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-400",children:"Est. Value"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl",children:[e.jsx("p",{className:"text-3xl font-bold text-amber-400",children:l.rarityBreakdown?.legendary||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"Legendaries"})]}),e.jsxs("div",{className:"p-4 bg-white/5 rounded-xl",children:[e.jsx("p",{className:"text-3xl font-bold text-pink-400",children:l.completedSets||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"Sets Complete"})]})]}),l?.rarityBreakdown&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:Object.entries(p).map(([s,d])=>{const m=l.rarityBreakdown[s]||0;return e.jsxs("button",{onClick:()=>J(f===s?"all":s),className:n("flex items-center gap-2 px-3 py-2 rounded-xl whitespace-nowrap transition-all",f===s?d.bg+" "+d.border+" border":"bg-white/5"),children:[e.jsx("span",{className:n("w-3 h-3 rounded-full bg-gradient-to-r",d.color)}),e.jsx("span",{className:"text-sm",children:d.label}),e.jsx("span",{className:n("text-sm font-bold",d.textColor),children:m})]},s)})})}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"flex gap-2",children:oe.map(s=>e.jsxs("button",{onClick:()=>i(s.key),className:n("flex items-center gap-2 px-4 py-2 rounded-xl transition-all",c===s.key?"bg-violet-600 text-white":"bg-white/5 text-gray-400 hover:text-white hover:bg-white/10"),children:[s.icon,e.jsx("span",{className:"text-sm font-medium hidden sm:inline",children:s.label})]},s.key))}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("select",{value:S,onChange:s=>Y(s.target.value),className:"px-3 py-2 bg-white/5 border border-white/10 rounded-xl text-sm focus:outline-none focus:border-violet-500",children:ie.map(s=>e.jsx("option",{value:s.key,children:s.label},s.key))}),e.jsxs("div",{className:"flex bg-white/5 rounded-xl p-1",children:[e.jsx("button",{onClick:()=>$("grid"),className:n("p-2 rounded-lg",z==="grid"&&"bg-white/10"),children:e.jsx(r.Grid,{})}),e.jsx("button",{onClick:()=>$("list"),className:n("p-2 rounded-lg",z==="list"&&"bg-white/10"),children:e.jsx(r.List,{})})]})]})]}),c==="sets"?e.jsx(de,{sets:O,onSelectSet:C}):e.jsx(e.Fragment,{children:T().length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(r.Gift,{className:"w-12 h-12 mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:c==="favorites"?"No favorites yet":"No items in collection"}),e.jsx(N,{to:c==="favorites"?"#":"/mystery-boxes",className:"inline-block mt-4 px-4 py-2 bg-violet-600 hover:bg-violet-700 rounded-xl transition-colors",children:c==="favorites"?"Mark some favorites":"Open Mystery Boxes"})]}):z==="grid"?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:T().map(s=>e.jsx(ne,{item:s,isFavorite:_(s.id),onFavoriteToggle:()=>A(s.id),onClick:()=>{k(s),s.is_new&&I(s.id)}},s.id))}):e.jsx("div",{className:"space-y-2",children:T().map(s=>e.jsx(ce,{item:s,isFavorite:_(s.id),onFavoriteToggle:()=>A(s.id),onClick:()=>{k(s),s.is_new&&I(s.id)}},s.id))})})]}),e.jsx(R,{children:w&&e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>k(null),children:e.jsx(g.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:s=>s.stopPropagation(),className:"bg-[#12121a] border border-white/10 rounded-2xl w-full max-w-md overflow-hidden",children:e.jsx(xe,{item:w,isFavorite:_(w.id),onFavoriteToggle:()=>A(w.id),onClose:()=>k(null)})})})}),e.jsx(R,{children:D&&e.jsx(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>C(null),children:e.jsx(g.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:s=>s.stopPropagation(),className:"bg-[#12121a] border border-white/10 rounded-2xl w-full max-w-lg overflow-hidden max-h-[90vh] overflow-y-auto",children:e.jsx(me,{set:D,onClaimReward:K,onClose:()=>C(null)})})})}),e.jsx(R,{children:B.show&&e.jsx(g.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:n("fixed bottom-4 left-4 right-4 mx-auto max-w-md px-4 py-3 rounded-xl text-center font-medium z-50",B.type==="success"?"bg-green-600":"bg-red-600"),children:B.message})})]})}function ne({item:t,isFavorite:c,onFavoriteToggle:i,onClick:l}){const a=p[t.rarity]||p.common;return e.jsxs(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{scale:1.02},onClick:l,className:n("relative overflow-hidden rounded-2xl border cursor-pointer transition-all",a.border,a.bg),children:[t.is_new&&e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx("span",{className:"px-2 py-0.5 text-xs font-medium rounded-full bg-violet-600 text-white",children:"NEW"})}),e.jsx("button",{onClick:o=>{o.stopPropagation(),i()},className:"absolute top-2 right-2 z-10 p-1.5 rounded-full bg-black/20 hover:bg-black/40 transition-colors",children:c?e.jsx(r.StarFilled,{className:"text-amber-400 w-4 h-4"}):e.jsx(r.Star,{className:"w-4 h-4"})}),e.jsx("div",{className:n("h-20 bg-gradient-to-br flex items-center justify-center",a.color,"opacity-30"),children:e.jsx("span",{className:"text-4xl",children:t.icon||"ðŸŽ¨"})}),e.jsxs("div",{className:"p-3",children:[e.jsx("span",{className:n("inline-block px-2 py-0.5 text-xs font-medium rounded-full bg-gradient-to-r text-white mb-1",a.color),children:a.label}),e.jsx("h3",{className:"font-medium text-sm truncate",children:t.name}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Acquired ",new Date(t.acquired_at).toLocaleDateString()]})]})]})}function ce({item:t,isFavorite:c,onFavoriteToggle:i,onClick:l}){const a=p[t.rarity]||p.common;return e.jsxs("div",{onClick:l,className:n("flex items-center gap-4 p-3 rounded-xl border cursor-pointer transition-all hover:bg-white/5",a.border,a.bg),children:[e.jsx("div",{className:n("w-12 h-12 rounded-xl bg-gradient-to-br flex items-center justify-center",a.color,"opacity-50"),children:e.jsx("span",{className:"text-2xl",children:t.icon||"ðŸŽ¨"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-medium truncate",children:t.name}),t.is_new&&e.jsx("span",{className:"px-2 py-0.5 text-xs bg-violet-600 rounded-full",children:"NEW"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx("span",{className:a.textColor,children:a.label}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:new Date(t.acquired_at).toLocaleDateString()})]})]}),e.jsx("button",{onClick:o=>{o.stopPropagation(),i()},className:"p-2 rounded-xl hover:bg-white/10 transition-colors",children:c?e.jsx(r.StarFilled,{className:"text-amber-400"}):e.jsx(r.Star,{})})]})}function de({sets:t,onSelectSet:c}){return t.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(r.Puzzle,{className:"w-12 h-12 mx-auto text-gray-600 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No sets available"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map(i=>{const l=i.owned_count/i.total_count,a=l>=1;return e.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},onClick:()=>c(i),className:n("p-4 rounded-xl border cursor-pointer transition-all",a?"bg-gradient-to-br from-amber-500/10 to-orange-500/10 border-amber-500/30":"bg-white/5 border-white/10 hover:bg-white/10"),children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-3xl",children:i.icon||"ðŸ“¦"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:i.name}),e.jsx("p",{className:"text-sm text-gray-400",children:i.description})]}),a&&e.jsx(r.Trophy,{className:"text-amber-400 ml-auto"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Progress"}),e.jsxs("span",{className:a?"text-amber-400":"text-gray-400",children:[i.owned_count,"/",i.total_count]})]}),e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:n("h-full rounded-full transition-all",a?"bg-gradient-to-r from-amber-500 to-orange-500":"bg-violet-600"),style:{width:`${Math.min(100,l*100)}%`}})})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(r.Gift,{className:"w-4 h-4"}),e.jsxs("span",{children:[i.rewards?.length||0," rewards available"]})]})]},i.id)})})}function xe({item:t,isFavorite:c,onFavoriteToggle:i,onClose:l}){const a=p[t.rarity]||p.common;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n("h-40 bg-gradient-to-br relative",a.color),children:[e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-8xl opacity-50",children:t.icon||"ðŸŽ¨"})}),e.jsx("button",{onClick:l,className:"absolute top-4 right-4 p-2 rounded-xl bg-black/20 hover:bg-black/40 transition-all",children:e.jsx(r.Close,{})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:n("px-2 py-0.5 text-xs font-medium rounded-full bg-gradient-to-r text-white",a.color),children:a.label}),e.jsxs("button",{onClick:i,className:n("px-2 py-0.5 text-xs font-medium rounded-full flex items-center gap-1",c?"bg-amber-500/20 text-amber-400":"bg-white/10 text-gray-400"),children:[c?e.jsx(r.StarFilled,{className:"w-3 h-3"}):e.jsx(r.Star,{className:"w-3 h-3"}),c?"Favorite":"Add to Favorites"]})]}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:t.name}),e.jsx("p",{className:"text-gray-400 mb-4",children:t.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Category"}),e.jsx("span",{className:"capitalize",children:t.category})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Acquired"}),e.jsx("span",{children:new Date(t.acquired_at).toLocaleDateString()})]}),t.estimated_value&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[e.jsx("span",{className:"text-gray-400",children:"Est. Value"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(r.Sparkle,{className:"text-violet-400 w-4 h-4"}),e.jsx("span",{children:t.estimated_value.toLocaleString()})]})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-3",children:[e.jsx(N,{to:`/marketplace/create?item=${t.id}`,className:"py-3 bg-violet-600 hover:bg-violet-700 rounded-xl font-semibold text-center transition-all",children:"Sell on Market"}),e.jsx(N,{to:`/trades/new?item=${t.id}`,className:"py-3 bg-white/5 hover:bg-white/10 rounded-xl font-semibold text-center transition-all",children:"Trade"})]})]})]})}function me({set:t,onClaimReward:c,onClose:i}){const l=t.owned_count/t.total_count,a=l>=1;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-4xl",children:t.icon||"ðŸ“¦"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-gray-400",children:t.description})]})]}),e.jsx("button",{onClick:i,className:"p-2 rounded-xl hover:bg-white/10",children:e.jsx(r.Close,{})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-400",children:"Collection Progress"}),e.jsxs("span",{className:a?"text-amber-400 font-bold":"text-gray-400",children:[t.owned_count,"/",t.total_count," (",Math.round(l*100),"%)"]})]}),e.jsx("div",{className:"h-3 bg-white/10 rounded-full overflow-hidden",children:e.jsx("div",{className:n("h-full rounded-full transition-all",a?"bg-gradient-to-r from-amber-500 to-orange-500":"bg-violet-600"),style:{width:`${Math.min(100,l*100)}%`}})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-sm text-gray-400 mb-3",children:"Items in Set"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:(t.items||[]).map((o,v)=>{const u=p[o.rarity]||p.common;return e.jsxs("div",{className:n("aspect-square rounded-lg flex items-center justify-center relative",o.owned?u.bg+" "+u.border+" border":"bg-white/5 opacity-50"),children:[e.jsx("span",{className:"text-2xl",children:o.icon||"?"}),o.owned&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(r.New,{})})]},v)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm text-gray-400 mb-3",children:"Rewards"}),e.jsx("div",{className:"space-y-2",children:(t.rewards||[]).map((o,v)=>{const u=o.threshold*100,j=l>=o.threshold&&!o.claimed;return e.jsxs("div",{className:n("flex items-center justify-between p-3 rounded-xl",o.claimed?"bg-green-500/10 border border-green-500/30":j?"bg-amber-500/10 border border-amber-500/30":"bg-white/5"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:o.icon||"ðŸŽ"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.description}),e.jsxs("p",{className:"text-sm text-gray-400",children:["At ",u,"% completion"]})]})]}),o.claimed?e.jsx("span",{className:"px-3 py-1 text-sm bg-green-500/20 text-green-400 rounded-full",children:"Claimed"}):j?e.jsx("button",{onClick:()=>c(t.id,o.threshold),className:"px-3 py-1 text-sm bg-amber-500 text-black font-semibold rounded-full hover:bg-amber-400 transition-colors",children:"Claim"}):e.jsxs("span",{className:"px-3 py-1 text-sm bg-white/10 text-gray-400 rounded-full",children:[Math.round((o.threshold-l)*t.total_count)," more"]})]},v)})})]})]})]})}export{ye as default};
