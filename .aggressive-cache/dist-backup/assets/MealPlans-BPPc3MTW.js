import{d as k,r as o,j as e,L as C}from"./react-vendor-D1NxaRNd.js";import{G as m}from"./GlassSurface-BMiMerMg.js";import{G as d}from"./GlassButton-CnRYgllD.js";import{G as L}from"./GlassNav-sRpHuVBG.js";import{G as I,a as $}from"./GlassMobileNav-B4Ctp1W8.js";import{M as E}from"./MeshBackground-5ZvDS217.js";import{f as _}from"./useNutrition-BLh5QqNK.js";import{a as z}from"./nutritionStore-B58iQVb7.js";import{A as B}from"./arrow-left-mgb0Ogs1.js";import{c as F,A as P,m as f,S as R,a4 as y}from"./index-ChmNk_hk.js";import{C as H}from"./clipboard-list-O4eDxxZp.js";import{C as T}from"./chevron-right-Dx87uuEk.js";import{C as D}from"./check-CfauKDtF.js";import{S as V}from"./shopping-cart-rsuSTuY1.js";import"./leaflet-vendor-DZbo3Ov0.js";import"./recharts-vendor-BziRPEEi.js";import"./d3-vendor-mcDw60ct.js";import"./apollo-vendor-BMQ75Ycx.js";import"./reactflow-vendor-Dz2P_-Qa.js";const Y=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],v=F("wand-sparkles",Y),q={draft:"bg-gray-500/20 text-gray-400",active:"bg-green-500/20 text-green-400",completed:"bg-blue-500/20 text-blue-400",archived:"bg-white/10 text-gray-500"};function O({plan:s,onActivate:n,isActive:r}){const a=k();return e.jsx(f.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.9},className:"group cursor-pointer",onClick:()=>a(`/nutrition/plans/${s.id}`),children:e.jsxs(m,{className:`p-6 hover:bg-white/10 transition-colors ${r?"border border-green-500/30":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold mb-1 group-hover:text-green-400 transition-colors",children:s.name}),e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs ${q[s.status]}`,children:[s.status==="active"&&e.jsx(y,{className:"w-3 h-3 mr-1"}),s.status.charAt(0).toUpperCase()+s.status.slice(1)]})]}),r&&e.jsxs("div",{className:"flex items-center gap-1 text-green-400 text-xs",children:[e.jsx(D,{className:"w-4 h-4"}),"Active"]})]}),e.jsx("p",{className:"text-sm text-gray-400 mb-4 line-clamp-2",children:s.description||`${s.durationDays} day meal plan`}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-white",children:s.avgCalories||"-"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Avg Cal/Day"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-white",children:s.durationDays||7}),e.jsx("p",{className:"text-xs text-gray-500",children:"Days"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold text-white",children:s.mealsPerDay||4}),e.jsx("p",{className:"text-xs text-gray-500",children:"Meals/Day"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status!=="active"&&e.jsxs(d,{variant:"primary",size:"sm",className:"flex-1",onClick:i=>{i.stopPropagation(),n(s.id)},children:[e.jsx(y,{className:"w-3 h-3 mr-1"}),"Activate"]}),e.jsxs(d,{variant:"ghost",size:"sm",className:"flex-1",onClick:i=>{i.stopPropagation(),a(`/nutrition/plans/${s.id}/shopping-list`)},children:[e.jsx(V,{className:"w-3 h-3 mr-1"}),"Shopping List"]})]})]})})}function U({onGenerate:s,isGenerating:n,goals:r}){const[a,i]=o.useState({durationDays:7,mealsPerDay:4,preferences:[],excludeIngredients:"",targetCalories:r?.calories||2e3}),p=[{value:"high_protein",label:"High Protein"},{value:"low_carb",label:"Low Carb"},{value:"vegetarian",label:"Vegetarian"},{value:"vegan",label:"Vegan"},{value:"quick_meals",label:"Quick Meals (<30 min)"},{value:"meal_prep",label:"Meal Prep Friendly"},{value:"budget",label:"Budget Friendly"}],h=t=>{i(c=>({...c,preferences:c.preferences.includes(t)?c.preferences.filter(b=>b!==t):[...c.preferences,t]}))},j=t=>{t.preventDefault(),s({...a,excludeIngredients:a.excludeIngredients.split(",").map(c=>c.trim()).filter(Boolean)})};return e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Duration (days)"}),e.jsxs("select",{value:a.durationDays,onChange:t=>i({...a,durationDays:parseInt(t.target.value,10)}),className:`w-full px-4 py-3 bg-white/5 rounded-xl border border-white/10 text-white
                       focus:outline-none focus:border-green-500/50`,children:[e.jsx("option",{value:3,children:"3 days"}),e.jsx("option",{value:5,children:"5 days"}),e.jsx("option",{value:7,children:"7 days (week)"}),e.jsx("option",{value:14,children:"14 days (2 weeks)"}),e.jsx("option",{value:28,children:"28 days (month)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Meals per day"}),e.jsxs("select",{value:a.mealsPerDay,onChange:t=>i({...a,mealsPerDay:parseInt(t.target.value,10)}),className:`w-full px-4 py-3 bg-white/5 rounded-xl border border-white/10 text-white
                       focus:outline-none focus:border-green-500/50`,children:[e.jsx("option",{value:3,children:"3 meals"}),e.jsx("option",{value:4,children:"4 meals"}),e.jsx("option",{value:5,children:"5 meals"}),e.jsx("option",{value:6,children:"6 meals"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Target Calories/Day"}),e.jsx("input",{type:"number",value:a.targetCalories,onChange:t=>i({...a,targetCalories:parseInt(t.target.value,10)}),className:`w-full px-4 py-3 bg-white/5 rounded-xl border border-white/10 text-white
                     focus:outline-none focus:border-green-500/50`}),r&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Your daily goal is ",r.calories," calories"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-3",children:"Preferences"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:p.map(t=>e.jsxs("button",{type:"button",onClick:()=>h(t.value),className:`px-3 py-2 rounded-xl text-sm transition-colors ${a.preferences.includes(t.value)?"bg-green-500 text-white":"bg-white/10 text-gray-300 hover:bg-white/20"}`,children:[a.preferences.includes(t.value)&&e.jsx(D,{className:"w-3 h-3 inline mr-1"}),t.label]},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Exclude Ingredients (comma separated)"}),e.jsx("input",{type:"text",placeholder:"e.g., shellfish, peanuts, mushrooms",value:a.excludeIngredients,onChange:t=>i({...a,excludeIngredients:t.target.value}),className:`w-full px-4 py-3 bg-white/5 rounded-xl border border-white/10 text-white
                     placeholder-gray-500 focus:outline-none focus:border-green-500/50`})]}),e.jsxs(d,{type:"submit",variant:"primary",className:"w-full",disabled:n,children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),n?"Generating...":"Generate Meal Plan"]})]})}function Q({plan:s}){if(!s)return null;const n=new Date,r=new Date(s.startDate),a=Math.floor((n-r)/(1e3*60*60*24))+1;return e.jsxs(m,{className:"p-6 mb-6 border border-green-500/30 bg-green-500/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-green-500/20 flex items-center justify-center",children:e.jsx(y,{className:"w-7 h-7 text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:s.name}),e.jsx("span",{className:"px-2 py-0.5 bg-green-500/20 text-green-400 text-xs rounded-full",children:"Active"})]}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Day ",a," of ",s.durationDays]})]}),e.jsx(C,{to:`/nutrition/plans/${s.id}`,children:e.jsxs(d,{variant:"ghost",size:"sm",children:["View Plan",e.jsx(T,{className:"w-4 h-4 ml-1"})]})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:e.jsx(f.div,{className:"h-full bg-green-500 rounded-full",initial:{width:0},animate:{width:`${a/s.durationDays*100}%`},transition:{duration:.5}})}),e.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:[a," days completed"]}),e.jsxs("span",{children:[s.durationDays-a," days remaining"]})]})]})]})}function ue(){const s=k(),n=z(),{getMealPlans:r,getActivePlan:a,activatePlan:i,generateMealPlan:p}=_(),[h,j]=o.useState([]),[t,c]=o.useState(null),[b,N]=o.useState(!0),[M,u]=o.useState(!1),[G,w]=o.useState(!1),g=o.useCallback(async()=>{N(!0);try{const[l,x]=await Promise.all([r(),a()]);j(l),c(x)}catch{}finally{N(!1)}},[r,a]);o.useEffect(()=>{g()},[g]);const S=async l=>{try{await i(l),g()}catch{}},A=async l=>{w(!0);try{const x=await p(l);u(!1),g(),s(`/nutrition/plans/${x.id}`)}catch{}finally{w(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-950",children:[e.jsx(E,{}),e.jsx(L,{}),e.jsx(I,{}),e.jsx("main",{className:"lg:pl-64 pt-16 pb-24 lg:pb-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(C,{to:"/nutrition",children:e.jsx(d,{variant:"ghost",size:"sm",children:e.jsx(B,{className:"w-4 h-4"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white mb-1",children:"Meal Plans"}),e.jsx("p",{className:"text-gray-400",children:"Plan your meals for the week"})]})]}),e.jsxs(d,{variant:"primary",onClick:()=>u(!0),children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Generate Plan"]})]}),e.jsx(Q,{plan:t}),e.jsx(P,{children:M&&e.jsx(f.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs(m,{className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/20 flex items-center justify-center",children:e.jsx(R,{className:"w-5 h-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"AI Meal Plan Generator"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Create a personalized meal plan"})]})]}),e.jsx("button",{onClick:()=>u(!1),className:"text-gray-400 hover:text-white",children:"âœ•"})]}),e.jsx(U,{onGenerate:A,isGenerating:G,goals:n})]})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Your Meal Plans"}),b?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[1,2,3,4].map(l=>e.jsx(m,{className:"h-48 animate-pulse"},l))}):h.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsx(P,{mode:"popLayout",children:h.map(l=>e.jsx(O,{plan:l,onActivate:S,isActive:t?.id===l.id},l.id))})}):e.jsxs(m,{className:"p-12 text-center",children:[e.jsx(H,{className:"w-12 h-12 text-gray-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"No meal plans yet"}),e.jsxs(d,{variant:"primary",onClick:()=>u(!0),children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Generate Your First Plan"]})]})]})]})}),e.jsx($,{})]})}export{ue as default};
