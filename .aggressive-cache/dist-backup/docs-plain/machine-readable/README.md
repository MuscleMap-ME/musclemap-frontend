# Machine-Readable Documentation

> Structured data formats for bots, agents, and automated systems.

---

## Available Formats

| File | Format | Description |
|------|--------|-------------|
| [openapi.yaml](./openapi.yaml) | OpenAPI 3.0 | REST API specification |
| [graphql-schema.graphql](./graphql-schema.graphql) | GraphQL SDL | GraphQL schema |
| [features.json](./features.json) | JSON | Feature manifest |
| [endpoints.json](./endpoints.json) | JSON | Flat endpoint list |

---

## Usage

### For API Clients

Use `openapi.yaml` to generate client SDKs:

```bash
# Generate TypeScript client
npx openapi-generator-cli generate \
  -i openapi.yaml \
  -g typescript-fetch \
  -o ./generated-client

# Generate Python client
npx openapi-generator-cli generate \
  -i openapi.yaml \
  -g python \
  -o ./generated-client
```

### For AI Agents

The `features.json` provides a structured overview:

```json
{
  "features": [
    {
      "id": "muscle-visualization",
      "name": "Muscle Visualization",
      "description": "3D muscle model showing activation",
      "endpoints": ["/exercises/:id/activations"],
      "docs": "/docs-plain/features/muscle-visualization.md"
    }
  ]
}
```

### For Scrapers

The `endpoints.json` provides a flat list:

```json
{
  "endpoints": [
    {
      "method": "GET",
      "path": "/api/workouts",
      "auth": true,
      "description": "List user workouts"
    }
  ]
}
```

---

## Format Details

### OpenAPI Specification

```yaml
openapi: 3.0.3
info:
  title: MuscleMap API
  version: 1.0.0

servers:
  - url: https://musclemap.me/api

paths:
  /workouts:
    get:
      summary: List workouts
      security:
        - bearerAuth: []
```

### GraphQL Schema

```graphql
type Query {
  me: User
  workouts(limit: Int, cursor: String): WorkoutConnection
  exercises(search: String): [Exercise]
}

type Mutation {
  createWorkout(input: CreateWorkoutInput!): Workout
  logSet(input: LogSetInput!): Set
}
```

### Features JSON

```json
{
  "version": "1.0.0",
  "generated": "2026-01-15T00:00:00Z",
  "features": [
    {
      "id": "feature-id",
      "name": "Feature Name",
      "description": "What it does",
      "status": "stable|beta|alpha",
      "platforms": ["web", "ios", "android"],
      "docs": "/path/to/docs"
    }
  ]
}
```

### Endpoints JSON

```json
{
  "version": "1.0.0",
  "generated": "2026-01-15T00:00:00Z",
  "total": 791,
  "endpoints": [
    {
      "method": "GET|POST|PUT|PATCH|DELETE",
      "path": "/api/path",
      "auth": true|false,
      "module": "module-name",
      "description": "What it does"
    }
  ]
}
```

---

## Automation

These files are auto-generated by:

```bash
pnpm docs:generate
```

The generator extracts:
- Routes from Fastify handlers
- Schema from GraphQL definitions
- Features from page components
- Metadata from package.json files

---

## Update Frequency

| File | Updated |
|------|---------|
| openapi.yaml | On deploy |
| graphql-schema.graphql | On deploy |
| features.json | On deploy |
| endpoints.json | On deploy |

---

*For human-readable documentation, see the other sections.*
