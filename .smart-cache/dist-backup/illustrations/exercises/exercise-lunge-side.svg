<svg viewBox="0 0 400 600" xmlns="http://www.w3.org/2000/svg">
  <!--
    Exercise: Walking Lunge - Bottom Position
    View: Side
    Primary Muscles: Quadriceps (88%), Gluteus Maximus (85%), Hamstrings (60%), Core (45%)
  -->
  <defs>
    <linearGradient id="figureGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#475569"/>
      <stop offset="100%" stop-color="#334155"/>
    </linearGradient>
    <linearGradient id="activationMax" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#EF4444" stop-opacity="0.85"/>
      <stop offset="100%" stop-color="#DC2626" stop-opacity="0.65"/>
    </linearGradient>
    <linearGradient id="activationHigh" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#F97316" stop-opacity="0.75"/>
      <stop offset="100%" stop-color="#EA580C" stop-opacity="0.55"/>
    </linearGradient>
    <linearGradient id="activationMed" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#FB923C" stop-opacity="0.65"/>
      <stop offset="100%" stop-color="#F97316" stop-opacity="0.45"/>
    </linearGradient>
    <linearGradient id="activationLow" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#14B8A6" stop-opacity="0.55"/>
      <stop offset="100%" stop-color="#0D9488" stop-opacity="0.35"/>
    </linearGradient>
    <filter id="muscleGlow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="4" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- MUSCLE ACTIVATION LAYER -->
  <g id="muscles" opacity="0.85">
    <!-- Front Leg Quadriceps - PRIMARY (88%) -->
    <path id="muscle-quads-front" data-muscle="quadriceps-front-leg" data-activation="88"
      d="M 145 340 Q 175 330 195 355 Q 210 405 195 455 Q 160 470 140 450 Q 125 400 145 340"
      fill="url(#activationMax)" filter="url(#muscleGlow)">
      <animate attributeName="opacity" values="0.8;0.95;0.8" dur="2s" repeatCount="indefinite"/>
    </path>

    <!-- Front Leg Gluteus Maximus - PRIMARY (85%) -->
    <path id="muscle-glutes" data-muscle="gluteus-maximus" data-activation="85"
      d="M 205 280 Q 245 270 260 305 Q 270 355 250 395 Q 215 410 200 380 Q 190 335 205 280"
      fill="url(#activationMax)" filter="url(#muscleGlow)">
      <animate attributeName="opacity" values="0.78;0.92;0.78" dur="2s" repeatCount="indefinite" begin="0.15s"/>
    </path>

    <!-- Front Leg Hamstrings - SECONDARY (60%) -->
    <path id="muscle-hamstrings-front" data-muscle="hamstrings-front-leg" data-activation="60"
      d="M 200 365 Q 225 358 240 385 Q 250 430 235 465 Q 210 475 195 455 Q 188 415 200 365"
      fill="url(#activationMed)" filter="url(#muscleGlow)"/>

    <!-- Back Leg Hip Flexors (stretched) -->
    <ellipse id="muscle-hip-flexors" data-muscle="hip-flexors-back-leg" data-activation="50"
      cx="260" cy="320" rx="18" ry="25"
      fill="url(#activationLow)" filter="url(#muscleGlow)" transform="rotate(-30 260 320)"/>

    <!-- Back Leg Quadriceps (stretched/stabilizing) -->
    <path id="muscle-quads-back" data-muscle="quadriceps-back-leg" data-activation="45"
      d="M 280 355 Q 310 345 330 375 Q 345 425 330 475 Q 295 490 275 465 Q 265 415 280 355"
      fill="url(#activationLow)" filter="url(#muscleGlow)" opacity="0.6"/>

    <!-- Core - STABILIZER (45%) -->
    <path id="muscle-core" data-muscle="rectus-abdominis" data-activation="45"
      d="M 210 205 Q 230 200 240 220 Q 250 265 242 310 Q 225 320 212 310 Q 200 265 210 205"
      fill="url(#activationLow)" filter="url(#muscleGlow)"/>

    <!-- Gastrocnemius Front Leg (calf) -->
    <ellipse id="muscle-calf-front" data-muscle="gastrocnemius-front" data-activation="40"
      cx="140" cy="510" rx="14" ry="35"
      fill="url(#activationLow)" filter="url(#muscleGlow)" opacity="0.5" transform="rotate(5 140 510)"/>

    <!-- Adductors (inner thigh stabilization) -->
    <path id="muscle-adductors" data-muscle="adductors" data-activation="40"
      d="M 175 360 Q 190 355 200 375 Q 205 415 195 450 Q 178 458 170 440 Q 165 400 175 360"
      fill="url(#activationLow)" filter="url(#muscleGlow)" opacity="0.5"/>
  </g>

  <!-- FIGURE LAYER - Side View Lunge -->
  <g id="figure" fill="url(#figureGrad)" stroke="#64748B" stroke-width="1.5" filter="url(#softShadow)">
    <!-- Head -->
    <ellipse cx="220" cy="95" rx="30" ry="36"/>

    <!-- Neck -->
    <path d="M 210 128 Q 205 138 210 152 L 235 152 Q 240 138 235 128 Q 228 130 220 130 Q 215 130 210 128"/>

    <!-- Shoulder -->
    <ellipse cx="220" cy="175" rx="24" ry="20"/>

    <!-- Upper Arm (at side) -->
    <ellipse cx="235" cy="220" rx="15" ry="38"/>

    <!-- Forearm -->
    <ellipse cx="242" cy="290" rx="12" ry="35"/>

    <!-- Hand (relaxed) -->
    <ellipse cx="248" cy="340" rx="10" ry="16"/>

    <!-- Torso (upright) -->
    <path d="M 200 175 Q 185 190 190 230 Q 205 295 230 355 Q 255 375 270 360 Q 290 320 280 265 Q 268 210 250 180 Q 225 168 200 175"/>

    <!-- Pelvis/Hip -->
    <path d="M 230 340 Q 270 330 290 365 Q 305 410 285 455 Q 250 475 220 455 Q 200 415 230 340"/>

    <!-- FRONT LEG (bent, foot forward) -->
    <!-- Front Thigh (bent ~90 degrees) -->
    <path d="M 200 380 Q 165 395 150 440 Q 140 490 160 535 Q 195 550 230 535 Q 255 490 250 440 Q 245 400 220 385 Q 210 380 200 380"/>

    <!-- Front Knee -->
    <ellipse cx="165" cy="460" rx="25" ry="20"/>

    <!-- Front Lower Leg (vertical) -->
    <path d="M 145 470 Q 125 490 130 540 Q 135 580 145 610 Q 165 620 190 615 Q 210 585 205 540 Q 200 495 185 475 Q 165 468 145 470"/>

    <!-- Front Foot (flat on ground) -->
    <path d="M 125 610 Q 100 615 90 630 Q 88 650 110 660 Q 160 665 200 655 Q 215 640 205 620 Q 185 612 125 610"/>

    <!-- BACK LEG (extended behind) -->
    <!-- Back Thigh (extended) -->
    <path d="M 270 400 Q 300 390 325 420 Q 350 475 340 535 Q 310 555 280 540 Q 265 495 275 445 Q 270 420 270 400"/>

    <!-- Back Knee (hovering near ground) -->
    <ellipse cx="335" cy="530" rx="18" ry="15"/>

    <!-- Back Lower Leg (on toes) -->
    <path d="M 330 540 Q 350 555 358 595 Q 362 630 355 665 Q 340 680 320 675 Q 305 645 310 600 Q 315 560 320 545 Q 325 540 330 540"/>

    <!-- Back Foot (on toes) -->
    <path d="M 340 665 Q 355 660 365 680 Q 370 700 355 710 Q 330 715 315 705 Q 310 690 325 675 Q 335 668 340 665"/>
  </g>

  <!-- JOINT MARKERS -->
  <g id="joints" fill="#94A3B8" opacity="0.5">
    <circle cx="220" cy="152" r="4"/> <!-- Neck -->
    <circle cx="220" cy="175" r="4"/> <!-- Shoulder -->
    <circle cx="240" cy="260" r="3"/> <!-- Elbow -->
    <circle cx="248" cy="325" r="3"/> <!-- Wrist -->
    <circle cx="245" cy="385" r="5"/> <!-- Front Hip -->
    <circle cx="165" cy="460" r="4"/> <!-- Front Knee -->
    <circle cx="145" cy="610" r="4"/> <!-- Front Ankle -->
    <circle cx="275" cy="420" r="5"/> <!-- Back Hip -->
    <circle cx="335" cy="530" r="4"/> <!-- Back Knee -->
    <circle cx="340" cy="670" r="4"/> <!-- Back Ankle -->
  </g>

  <!-- MOVEMENT DIRECTION INDICATOR -->
  <g id="movement-indicator" opacity="0.6">
    <path d="M 55 400 L 55 350 L 45 375 Z" fill="#14B8A6"/>
    <text x="30" y="340" fill="#14B8A6" font-family="Inter, sans-serif" font-size="10">UP</text>
  </g>

  <!-- KNEE ANGLE INDICATORS -->
  <g id="angle-indicators" opacity="0.4">
    <!-- Front knee 90 degree indicator -->
    <path d="M 200 395 Q 165 460 145 540" fill="none" stroke="#14B8A6" stroke-width="1" stroke-dasharray="4,3"/>
    <text x="105" y="470" fill="#14B8A6" font-family="Inter, sans-serif" font-size="9">90Â°</text>
  </g>

  <!-- GROUND LINE -->
  <line x1="60" y1="660" x2="380" y2="715" stroke="#334155" stroke-width="2"/>

  <!-- VERTICAL ALIGNMENT LINE (torso upright) -->
  <line id="alignment" x1="230" y1="60" x2="230" y2="360" stroke="#14B8A6" stroke-width="1" stroke-dasharray="6,4" opacity="0.25"/>
</svg>
