<svg viewBox="0 0 390 600" xmlns="http://www.w3.org/2000/svg">
  <!--
    Onboarding Screen 4: "Join the Community"
    Visual: Multiple body silhouettes connected, world map, activity pulses
    Animation: Figures appear at different depths, connections draw, pulses emanate
  -->
  <defs>
    <!-- Background gradient -->
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#0a0a0f"/>
      <stop offset="50%" stop-color="#0f0f18"/>
      <stop offset="100%" stop-color="#0a0a0f"/>
    </linearGradient>

    <!-- Figure gradient -->
    <linearGradient id="figureGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#475569"/>
      <stop offset="100%" stop-color="#334155"/>
    </linearGradient>

    <!-- Figure gradient light (for depth) -->
    <linearGradient id="figureGradLight" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#64748B"/>
      <stop offset="100%" stop-color="#475569"/>
    </linearGradient>

    <!-- Figure gradient dark (for depth) -->
    <linearGradient id="figureGradDark" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#334155"/>
      <stop offset="100%" stop-color="#1E293B"/>
    </linearGradient>

    <!-- Connection gradient -->
    <linearGradient id="connectionGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#14B8A6" stop-opacity="0"/>
      <stop offset="50%" stop-color="#14FFEC" stop-opacity="0.8"/>
      <stop offset="100%" stop-color="#14B8A6" stop-opacity="0"/>
    </linearGradient>

    <!-- Map gradient -->
    <linearGradient id="mapGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#1E293B" stop-opacity="0.3"/>
      <stop offset="100%" stop-color="#0F172A" stop-opacity="0.1"/>
    </linearGradient>

    <!-- Pulse gradient -->
    <radialGradient id="pulseGrad" cx="50%" cy="50%" r="50%">
      <stop offset="0%" stop-color="#14FFEC" stop-opacity="0.8"/>
      <stop offset="100%" stop-color="#14FFEC" stop-opacity="0"/>
    </radialGradient>

    <!-- Glow filter -->
    <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur stdDeviation="3" result="blur"/>
      <feMerge>
        <feMergeNode in="blur"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Soft shadow -->
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.3"/>
    </filter>

    <!-- Mini figure symbol -->
    <symbol id="miniFigure" viewBox="0 0 40 80">
      <ellipse cx="20" cy="12" rx="10" ry="12" fill="currentColor"/>
      <path d="M 8 28 Q 20 22 32 28 Q 35 50 32 70 Q 20 75 8 70 Q 5 50 8 28" fill="currentColor"/>
      <ellipse cx="5" cy="45" rx="5" ry="15" fill="currentColor"/>
      <ellipse cx="35" cy="45" rx="5" ry="15" fill="currentColor"/>
    </symbol>

    <!-- Location pin symbol -->
    <symbol id="locationPin" viewBox="0 0 24 24">
      <path d="M12 2C8.13 2 5 5.13 5 9C5 14.25 12 22 12 22S19 14.25 19 9C19 5.13 15.87 2 12 2Z" fill="currentColor"/>
      <circle cx="12" cy="9" r="3" fill="#0F172A"/>
    </symbol>
  </defs>

  <!-- BACKGROUND -->
  <rect width="390" height="600" fill="url(#bgGrad)"/>

  <!-- ABSTRACT WORLD MAP (simplified) -->
  <g id="worldMap" transform="translate(195, 200)" opacity="0.3">
    <!-- Simplified continent shapes -->
    <path d="M -150 -20 Q -130 -40 -100 -35 Q -80 -30 -70 -15 Q -90 10 -120 5 Q -145 0 -150 -20"
          fill="url(#mapGrad)" stroke="#334155" stroke-width="0.5"/>
    <path d="M -40 -50 Q 0 -60 50 -45 Q 80 -30 70 0 Q 40 20 0 15 Q -30 5 -40 -50"
          fill="url(#mapGrad)" stroke="#334155" stroke-width="0.5"/>
    <path d="M 90 -20 Q 130 -40 160 -25 Q 170 0 150 30 Q 110 40 90 20 Q 85 0 90 -20"
          fill="url(#mapGrad)" stroke="#334155" stroke-width="0.5"/>
    <path d="M -80 40 Q -50 30 -20 45 Q 0 60 -30 80 Q -70 75 -80 40"
          fill="url(#mapGrad)" stroke="#334155" stroke-width="0.5"/>
    <path d="M 70 50 Q 100 40 130 55 Q 140 80 110 100 Q 80 95 70 50"
          fill="url(#mapGrad)" stroke="#334155" stroke-width="0.5"/>
  </g>

  <!-- LOCATION PINS with activity pulses -->
  <g id="locations" transform="translate(195, 200)">
    <!-- Location 1 - North America -->
    <g transform="translate(-120, -25)">
      <circle r="0" fill="url(#pulseGrad)">
        <animate attributeName="r" values="0;25;0" dur="2s" repeatCount="indefinite"/>
        <animate attributeName="opacity" values="0.8;0;0.8" dur="2s" repeatCount="indefinite"/>
      </circle>
      <use href="#locationPin" x="-8" y="-20" width="16" height="20" fill="#14B8A6"/>
    </g>

    <!-- Location 2 - Europe -->
    <g transform="translate(20, -35)">
      <circle r="0" fill="url(#pulseGrad)">
        <animate attributeName="r" values="0;20;0" dur="2s" repeatCount="indefinite" begin="0.5s"/>
        <animate attributeName="opacity" values="0.8;0;0.8" dur="2s" repeatCount="indefinite" begin="0.5s"/>
      </circle>
      <use href="#locationPin" x="-8" y="-20" width="16" height="20" fill="#14B8A6"/>
    </g>

    <!-- Location 3 - Asia -->
    <g transform="translate(130, -10)">
      <circle r="0" fill="url(#pulseGrad)">
        <animate attributeName="r" values="0;22;0" dur="2s" repeatCount="indefinite" begin="1s"/>
        <animate attributeName="opacity" values="0.8;0;0.8" dur="2s" repeatCount="indefinite" begin="1s"/>
      </circle>
      <use href="#locationPin" x="-8" y="-20" width="16" height="20" fill="#14B8A6"/>
    </g>

    <!-- Location 4 - South America -->
    <g transform="translate(-50, 55)">
      <circle r="0" fill="url(#pulseGrad)">
        <animate attributeName="r" values="0;18;0" dur="2s" repeatCount="indefinite" begin="1.5s"/>
        <animate attributeName="opacity" values="0.8;0;0.8" dur="2s" repeatCount="indefinite" begin="1.5s"/>
      </circle>
      <use href="#locationPin" x="-6" y="-16" width="12" height="16" fill="#14B8A6"/>
    </g>

    <!-- Location 5 - Australia -->
    <g transform="translate(105, 70)">
      <circle r="0" fill="url(#pulseGrad)">
        <animate attributeName="r" values="0;15;0" dur="2s" repeatCount="indefinite" begin="0.7s"/>
        <animate attributeName="opacity" values="0.8;0;0.8" dur="2s" repeatCount="indefinite" begin="0.7s"/>
      </circle>
      <use href="#locationPin" x="-6" y="-16" width="12" height="16" fill="#14B8A6"/>
    </g>
  </g>

  <!-- CONNECTION LINES between figures -->
  <g id="connections" stroke="url(#connectionGrad)" stroke-width="1.5" fill="none" opacity="0.6">
    <path d="M 80 340 Q 145 310 195 330">
      <animate attributeName="stroke-dasharray" values="0,200;200,0" dur="1s" fill="freeze" begin="0.5s"/>
    </path>
    <path d="M 310 340 Q 255 310 195 330">
      <animate attributeName="stroke-dasharray" values="0,200;200,0" dur="1s" fill="freeze" begin="0.7s"/>
    </path>
    <path d="M 50 400 Q 120 380 195 390">
      <animate attributeName="stroke-dasharray" values="0,200;200,0" dur="1s" fill="freeze" begin="0.9s"/>
    </path>
    <path d="M 340 400 Q 270 380 195 390">
      <animate attributeName="stroke-dasharray" values="0,200;200,0" dur="1s" fill="freeze" begin="1.1s"/>
    </path>
  </g>

  <!-- BODY SILHOUETTES at different scales (depth) -->
  <g id="figures">
    <!-- Central figure (largest, front) -->
    <g transform="translate(195, 370)" filter="url(#softShadow)">
      <use href="#miniFigure" x="-25" y="-50" width="50" height="100" fill="url(#figureGrad)"/>
      <!-- Activity indicator -->
      <circle cx="0" cy="-55" r="8" fill="#14B8A6" filter="url(#glow)">
        <animate attributeName="r" values="6;10;6" dur="1.5s" repeatCount="indefinite"/>
      </circle>
      <text x="0" y="-52" text-anchor="middle" font-family="Inter, sans-serif" font-size="8" font-weight="bold" fill="#0F172A">âœ“</text>
    </g>

    <!-- Left figure (medium) -->
    <g transform="translate(80, 365)" opacity="0.85">
      <use href="#miniFigure" x="-18" y="-36" width="36" height="72" fill="url(#figureGradLight)"/>
      <circle cx="0" cy="-40" r="6" fill="#F97316" filter="url(#glow)">
        <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite" begin="0.3s"/>
      </circle>
    </g>

    <!-- Right figure (medium) -->
    <g transform="translate(310, 365)" opacity="0.85">
      <use href="#miniFigure" x="-18" y="-36" width="36" height="72" fill="url(#figureGradLight)"/>
      <circle cx="0" cy="-40" r="6" fill="#A855F7" filter="url(#glow)">
        <animate attributeName="opacity" values="0.5;1;0.5" dur="2s" repeatCount="indefinite" begin="0.6s"/>
      </circle>
    </g>

    <!-- Far left figure (small, back) -->
    <g transform="translate(45, 410)" opacity="0.6">
      <use href="#miniFigure" x="-12" y="-24" width="24" height="48" fill="url(#figureGradDark)"/>
    </g>

    <!-- Far right figure (small, back) -->
    <g transform="translate(345, 410)" opacity="0.6">
      <use href="#miniFigure" x="-12" y="-24" width="24" height="48" fill="url(#figureGradDark)"/>
    </g>

    <!-- Extra small figures (very back) -->
    <g transform="translate(120, 430)" opacity="0.4">
      <use href="#miniFigure" x="-8" y="-16" width="16" height="32" fill="url(#figureGradDark)"/>
    </g>
    <g transform="translate(270, 430)" opacity="0.4">
      <use href="#miniFigure" x="-8" y="-16" width="16" height="32" fill="url(#figureGradDark)"/>
    </g>
  </g>

  <!-- ACTIVITY NOTIFICATIONS (floating) -->
  <g id="notifications" filter="url(#glow)">
    <!-- Notification 1 -->
    <g transform="translate(55, 310)" opacity="0.9">
      <rect x="-40" y="-12" width="80" height="24" rx="12" fill="#1E293B" stroke="#14B8A6" stroke-width="1"/>
      <circle cx="-28" cy="0" r="6" fill="#14B8A6"/>
      <text x="5" y="4" font-family="Inter, sans-serif" font-size="9" fill="#E2E8F0">Just trained!</text>
      <animate attributeName="opacity" values="0;0.9;0.9;0" dur="4s" repeatCount="indefinite"/>
    </g>

    <!-- Notification 2 -->
    <g transform="translate(320, 295)" opacity="0">
      <rect x="-45" y="-12" width="90" height="24" rx="12" fill="#1E293B" stroke="#F97316" stroke-width="1"/>
      <circle cx="-33" cy="0" r="6" fill="#F97316"/>
      <text x="5" y="4" font-family="Inter, sans-serif" font-size="9" fill="#E2E8F0">New PR! ðŸŽ‰</text>
      <animate attributeName="opacity" values="0;0;0.9;0.9;0" dur="4s" repeatCount="indefinite" begin="1.5s"/>
    </g>

    <!-- Notification 3 -->
    <g transform="translate(195, 280)" opacity="0">
      <rect x="-50" y="-12" width="100" height="24" rx="12" fill="#1E293B" stroke="#A855F7" stroke-width="1"/>
      <circle cx="-38" cy="0" r="6" fill="#A855F7"/>
      <text x="5" y="4" font-family="Inter, sans-serif" font-size="9" fill="#E2E8F0">Level up! ðŸ’ª</text>
      <animate attributeName="opacity" values="0;0;0;0.9;0.9;0" dur="4s" repeatCount="indefinite" begin="0.8s"/>
    </g>
  </g>

  <!-- MEMBER COUNT -->
  <g id="memberCount" transform="translate(195, 470)">
    <text x="0" y="0" text-anchor="middle" font-family="Inter, sans-serif" font-size="32" font-weight="700" fill="#14FFEC" filter="url(#glow)">
      50,000+
    </text>
    <text x="0" y="22" text-anchor="middle" font-family="Inter, sans-serif" font-size="12" fill="#94A3B8">
      athletes training together
    </text>
  </g>

  <!-- TEXT -->
  <g id="text">
    <text x="195" y="525" text-anchor="middle" font-family="Outfit, sans-serif" font-size="28" font-weight="700" fill="#FFFFFF">
      Join the Community
    </text>
    <text x="195" y="555" text-anchor="middle" font-family="Outfit, sans-serif" font-size="14" fill="#94A3B8">
      Train together. Grow together.
    </text>
  </g>

  <!-- PROGRESS DOTS -->
  <g id="progress" transform="translate(195, 580)">
    <circle cx="-50" cy="3" r="3" fill="#334155"/>
    <circle cx="-35" cy="3" r="3" fill="#334155"/>
    <circle cx="-20" cy="3" r="3" fill="#334155"/>
    <rect x="-7" y="0" width="24" height="6" rx="3" fill="#14B8A6"/>
    <circle cx="30" cy="3" r="3" fill="#334155"/>
  </g>
</svg>
