\documentclass[11pt,a4paper]{article}

% ============================================
% PACKAGES
% ============================================
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{lmodern}
\usepackage[margin=1in]{geometry}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{booktabs}
\usepackage{longtable}
\usepackage{fancyhdr}
\usepackage{titlesec}
\usepackage{tocloft}
\usepackage{parskip}
\usepackage{enumitem}

% ============================================
% COLORS (MuscleMap Brand)
% ============================================
\definecolor{brandblue}{HTML}{0066FF}
\definecolor{brandpulse}{HTML}{FF3366}
\definecolor{voidbase}{HTML}{0A0A0F}
\definecolor{textprimary}{HTML}{FFFFFF}
\definecolor{textsecondary}{HTML}{B3B3B3}
\definecolor{codebg}{HTML}{1A1A24}

% ============================================
% HYPERREF SETUP
% ============================================
\hypersetup{
    colorlinks=true,
    linkcolor=brandblue,
    filecolor=brandpulse,
    urlcolor=brandblue,
    pdftitle={MuscleMap Documentation},
    pdfauthor={MuscleMap Team},
}

% ============================================
% CODE LISTINGS
% ============================================
\lstset{
    backgroundcolor=\color{codebg},
    basicstyle=\ttfamily\small\color{textprimary},
    keywordstyle=\color{brandblue}\bfseries,
    stringstyle=\color{brandpulse},
    commentstyle=\color{textsecondary}\itshape,
    breaklines=true,
    frame=single,
    rulecolor=\color{textsecondary},
    tabsize=2,
    showstringspaces=false,
}

% ============================================
% SECTION FORMATTING
% ============================================
\titleformat{\section}{\Large\bfseries\color{brandblue}}{\thesection}{1em}{}
\titleformat{\subsection}{\large\bfseries\color{brandblue!80}}{\thesubsection}{1em}{}
\titleformat{\subsubsection}{\normalsize\bfseries\color{brandblue!60}}{\thesubsubsection}{1em}{}

% ============================================
% HEADER/FOOTER
% ============================================
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\textcolor{brandblue}{MuscleMap}}
\fancyhead[R]{\textcolor{textsecondary}{\nouppercase{\leftmark}}}
\fancyfoot[C]{\textcolor{textsecondary}{\thepage}}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}


\title{
    \textcolor{brandblue}{\Huge\textbf{MuscleMap}}\\[0.5em]
    \textcolor{textsecondary}{\Large Architecture Documentation}
}
\author{Auto-generated}
\date{2026-01-19}

\begin{document}

\maketitle
\tableofcontents
\newpage

% ============================================
\section{Overview}
% ============================================

MuscleMap is a cross-platform fitness tracking application with real-time muscle visualization. The architecture follows a modular, layered approach with clear separation of concerns.

\subsection{Design Principles}

\begin{itemize}[leftmargin=*]
    \item \textbf{Single Source of Truth}: PostgreSQL is the only data store
    \item \textbf{Cross-Platform}: One codebase serves web and mobile
    \item \textbf{Modular}: Clear package boundaries
    \item \textbf{Type-Safe}: TypeScript throughout
\end{itemize}

% ============================================
\section{Technology Stack}
% ============================================

\begin{table}[h]
\centering
\begin{tabular}{@{}lll@{}}
\toprule
\textbf{Layer} & \textbf{Technology} & \textbf{Purpose} \\
\midrule
Frontend Web & React + Vite + TailwindCSS & Single-page application \\
Frontend Mobile & React Native + Expo & iOS \& Android apps \\
API Server & Fastify + TypeScript & REST/GraphQL API \\
Database & PostgreSQL & Primary data store \\
Cache & Redis (optional) & Session/query caching \\
Reverse Proxy & Caddy & HTTPS termination \\
\bottomrule
\end{tabular}
\caption{Technology Stack}
\end{table}

% ============================================
\section{Packages}
% ============================================

The monorepo contains 6 packages:

\begin{table}[h]
\centering
\begin{tabular}{@{}ll@{}}
\toprule
\textbf{Package} & \textbf{Description} \\
\midrule
\texttt{@musclemap/client} & Shared client-side business logic for MuscleMap \\
\texttt{@musclemap/contracts} & Shared GraphQL schema and types for MuscleMap \\
\texttt{@musclemap/core} & Shared domain types and utilities for MuscleMap \\
\texttt{@musclemap/plugin-sdk} & SDK for building MuscleMap plugins \\
\texttt{@musclemap/shared} & Shared utilities and constants for MuscleMap apps \\
\texttt{@musclemap/ui} & Shared cross-platform UI components for MuscleMap \\
\bottomrule
\end{tabular}
\caption{Monorepo Packages}
\end{table}

% ============================================
\section{Frontend Pages}
% ============================================

The application contains 84 pages:

\begin{longtable}{@{}lcc@{}}
\toprule
\textbf{Page} & \textbf{Protected} & \textbf{Description} \\
\midrule
\endhead
Achievements & No & Achievements page \\
AchievementVerification & No & AchievementVerification page \\
AdminControl & No & AdminControl page \\
AdminDisputes & Yes & Admin Disputes Dashboard  Admin interfac \\
AdminFraud & No & AdminFraud page \\
AdminIssues & Yes & Admin Issues Page  Admin dashboard for m \\
AdminMetrics & Yes & Admin Metrics Dashboard  Beautiful visua \\
AdminMonitoring & Yes & Admin Monitoring Dashboard  Comprehensiv \\
AdventureMap & Yes & AdventureMap Page  Fullscreen adventure  \\
Buddy & No & Buddy page \\
CareerGoalPage & Yes & Career Goal Detail Page - MuscleMap  Sho \\
CareerPage & Yes & Career Page - MuscleMap Career Readiness \\
CareerReadiness & Yes & Career Readiness Page - MuscleMap Liquid \\
CareerStandardPage & Yes & Career Standard Detail Page - MuscleMap  \\
Collection & No & Collection page \\
CommandCenter & No & Command Center  A beautiful, hierarchica \\
CommunityBulletinBoard & No & Community Bulletin Board  A central hub  \\
CommunityDashboard & Yes & CommunityDashboard Page  Comprehensive c \\
Competitions & No & Competitions page \\
ContributeIdeas & No & Contribute Ideas Page  A page showcasing \\
Credits & No & Credits page \\
Crews & Yes & Crews Page  Crew management and Crew War \\
Dashboard & Yes & Dashboard - MuscleMap Liquid Glass Desig \\
DeploymentControl & No & Deployment Control Center  A sophisticat \\
Design & No & Design Page  Showcases MuscleMap's desig \\
DesignSystem & No & Design System Showcase  Demonstrates the \\
DevUpdates & No & Dev Updates Page  Development updates, a \\
Docs & No & Docs page \\
EmpireControl & Yes & Empire Control - Master Admin Panel  The \\
Exercises & No & Exercises page \\
Features & No & Features Page  Showcases MuscleMap featu \\
Goals & Yes & Goals Page - MuscleMap Liquid Glass Desi \\
Health & Yes & Health Page  Wearables integration and h \\
HighFives & No & HighFives page \\
IssueDetail & Yes & Issue Detail Page  Single issue view wit \\
Issues & Yes & Issues Page  Bug and issue tracker with: \\
Journey & No & Journey page \\
Landing & No & Landing page \\
Leaderboard & No & Leaderboard page \\
Limitations & Yes & Limitations Page - MuscleMap Liquid Glas \\
LiveActivityMonitor & No & LiveActivityMonitor Page  Real-time acti \\
Locations & No & Locations page \\
Login & Yes & Login page \\
MapExplore & No & MapExplore Page  Full-page interactive m \\
Marketplace & No & Marketplace page \\
MartialArts & No & MartialArts page \\
MealPlans & No & Meal Plans Page  Create and manage meal  \\
Messages & No & Messages page \\
MyIssues & Yes & My Issues Page  User's submitted issues: \\
MysteryBoxes & No & MysteryBoxes page \\
MyVerifications & No & MyVerifications page \\
NewIssue & No & New Issue Page  Create a new bug report, \\
Nutrition & No & Nutrition Page  Full nutrition tracking  \\
NutritionHistory & No & Nutrition History Page  View historical  \\
NutritionSettings & No & Nutrition Settings Page  Configure nutri \\
Onboarding & Yes & Handle archetype selection from Archetyp \\
PersonalRecords & No & Personal Records Page  Track and visuali \\
PluginGuide & No & Plugin Development Guide  A visual, step \\
PluginMarketplace & No & PluginMarketplace - Browse and install c \\
PluginSettings & No & PluginSettings - Manage installed plugin \\
Privacy & No & Privacy Policy Page  Required for App St \\
Profile & No & Profile page \\
Progress-photos & No & Progress Photos Page  Complete progress  \\
Progression & No & Progression page \\
PTTests & Yes & PT Tests Page - MuscleMap Liquid Glass D \\
Recipes & No & Recipes Page  Browse, create, and manage \\
Recovery & Yes & Recovery Page  Sleep tracking and recove \\
Rivals & Yes & Rivals Page  1v1 rivalry competition sys \\
Roadmap & No & Roadmap Page  Public roadmap showing: -  \\
Science & No & Science Page  Explains the science behin \\
Settings & No & Settings page \\
ShoppingList & No & Shopping List Page  Displays aggregated  \\
Signup & Yes & Signup page \\
Skills & No & Skills page \\
SkinsStore & No & SkinsStore page \\
Stats & Yes & Stats Page  Character stats display with \\
Technology & No & Technology Stack Page  Showcases MuscleM \\
TestScorecard & Yes & Test Scorecard Dashboard  Empire dashboa \\
Trading & No & Trading page \\
TrainerDashboard & No & TrainerDashboard page \\
Trainers & Yes & Trainers Page  Browse trainers, manage t \\
Wallet & No & Wallet page \\
WitnessAttestation & No & WitnessAttestation page \\
Workout & No & Workout page \\
\bottomrule
\caption{Frontend Pages}
\end{longtable}

% ============================================
\section{API Endpoints}
% ============================================

The API exposes 1054 endpoints:

\begin{longtable}{@{}lll@{}}
\toprule
\textbf{Method} & \textbf{Path} & \textbf{Handler} \\
\midrule
\endhead
\texttt{GET} & \texttt{/} & admin-beta-testers \\
\texttt{GET} & \texttt{/\_\_routes} & misc \\
\texttt{POST} & \texttt{/1rm} & one-rep-max \\
\texttt{DELETE} & \texttt{/1rm/:entryId} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/best} & one-rep-max \\
\texttt{POST} & \texttt{/1rm/calculate} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/classification} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/compound-total} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/exercise/:exerciseId} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/exercise/:exerciseId/pr} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/formulas} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/leaderboard/:exerciseId} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/progression/:exerciseId} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/rep-table} & one-rep-max \\
\texttt{POST} & \texttt{/1rm/reverse-calculate} & one-rep-max \\
\texttt{POST} & \texttt{/1rm/scores} & one-rep-max \\
\texttt{GET} & \texttt{/1rm/summary} & one-rep-max \\
\texttt{GET} & \texttt{/achievements/categories} & achievements \\
\texttt{GET} & \texttt{/achievements/definitions} & achievements \\
\texttt{GET} & \texttt{/achievements/definitions/:key} & achievements \\
\texttt{GET} & \texttt{/achievements/verification-required} & verifications \\
\texttt{GET} & \texttt{/admin-control/audit} & admin-control \\
\texttt{GET} & \texttt{/admin-control/audit/credits} & admin-control \\
\texttt{POST} & \texttt{/admin-control/credits/adjust} & admin-control \\
\texttt{POST} & \texttt{/admin-control/emergency/:action} & admin-control \\
\texttt{GET} & \texttt{/admin-control/emergency/status} & admin-control \\
\texttt{GET} & \texttt{/admin-control/groups} & admin-control \\
\texttt{GET} & \texttt{/admin-control/pipelines} & admin-control \\
\texttt{GET} & \texttt{/admin-control/scripts} & admin-control \\
\texttt{GET} & \texttt{/admin-control/system-status} & admin-control \\
\bottomrule
\caption{API Endpoints}
\end{longtable}

% ============================================
\section{Data Flow}
% ============================================

\begin{lstlisting}
+-------------+     +-------------+     +-------------+
|   Client    |---->|   Caddy     |---->|   Fastify   |
|  (React)    |<----|   (HTTPS)   |<----|   (API)     |
+-------------+     +-------------+     +-------------+
                                              |
                                              v
                                        +-------------+
                                        | PostgreSQL  |
                                        |  (Data)     |
                                        +-------------+
\end{lstlisting}

% ============================================
\section{Build Process}
% ============================================

\begin{lstlisting}[language=bash]
# Build order
pnpm build:packages  # shared -> core -> plugin-sdk -> client -> ui
pnpm build:api       # API server
pnpm build           # Frontend (Vite)

# Full deployment
./deploy.sh "commit message"
\end{lstlisting}

% ============================================
\section{Scripts}
% ============================================

\begin{table}[h]
\centering
\begin{tabular}{@{}ll@{}}
\toprule
\textbf{Script} & \textbf{Description} \\
\midrule
\texttt{build-fast.sh} & ================================================== \\
\texttt{build-safe.sh} & ================================================== \\
\texttt{build-vendors.sh} & ================================================== \\
\texttt{build-with-vendors.sh} & ================================================== \\
\texttt{check-duplicate-routes.sh} & Check for duplicate route definitions in the API c \\
\texttt{competitive-analysis.sh} & \# competitive-analysis.sh - Automated Competitive  \\
\texttt{compress-assets.sh} & ================================================== \\
\texttt{deploy-branch.sh} & \# deploy-branch.sh - Full deployment: commit, push \\
\texttt{deploy.sh} & Deployment helper for MuscleMap \\
\texttt{generate-docs.cjs} & MuscleMap Documentation Generator  PERFORMANCE OPT \\
\texttt{generate-icons.cjs} & App Icon Generator for MuscleMap Mobile App  Gener \\
\texttt{logs.sh} & Unified Log Viewer for MuscleMap \\
\texttt{maintain.sh} & --- preflight --- \\
\texttt{merge-all.sh} & \# merge-all.sh - Merge all worktree branches into  \\
\texttt{musclemap-start.sh} & \# MuscleMap Local Development Services - START \\
\bottomrule
\end{tabular}
\caption{Available Scripts}
\end{table}

\end{document}
