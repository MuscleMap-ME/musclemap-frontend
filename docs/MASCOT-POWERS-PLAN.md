# Mascot Powers Evolution Plan

This document outlines the progression system for mascot abilities, expanding beyond workout assistance to include meta-level features that help users manage their fitness journey, account, and engagement with the platform.

## Current Implementation (Phase 1: Workout Assist)

**Implemented:** The mascot can complete exercises on behalf of tired users.

| Companion Stage | Ability Name | Exercises/Workout | Daily Charges | Cooldown |
|-----------------|--------------|-------------------|---------------|----------|
| 1 (Novice) | Helping Hand | 1 | 1 | 4 hours |
| 2 (Bronze) | Training Buddy | 1 | 2 | 3 hours |
| 3 (Silver) | Dedicated Spotter | 2 | 2 | 2 hours |
| 4 (Gold) | Power Partner | 2 | 3 | 1 hour |
| 5 (Platinum) | Elite Ally | 3 | 4 | 30 min |
| 6 (Diamond) | Perfect Partner | 3 | 5 | 0 (no cooldown) |

**Rank Cap:** Abilities are only available for users at Champion rank (tier 6) or below. This ensures:
- New users get helpful assistance during the crucial early phase
- Advanced users don't rely on mascot help for their gains

---

## Phase 2: Credit & Economy Assistance

### 2.1 Credit Guardian
**Trigger:** Low credit balance approaching workout cost
**Action:** Mascot warns user before they start a workout they can't afford

| Stage | Feature |
|-------|---------|
| 1+ | Warning when balance < next workout cost |
| 2+ | Suggestion to earn credits (daily bonus, streaks) |
| 3+ | Auto-apply any available coupons/discounts |
| 4+ | Negotiate reduced rate for "mascot-sponsored" workout |
| 5+ | Front credits as a "loan" (repaid from next earnings) |
| 6 | Emergency credit grants (limited, special occasions) |

### 2.2 Streak Saver
**Trigger:** User about to lose a streak
**Action:** Mascot intervenes to protect valuable streaks

| Stage | Feature |
|-------|---------|
| 1+ | Push notification 2 hours before streak expires |
| 2+ | Offer "quick workout" options to maintain streak |
| 3+ | One free streak save per week |
| 4+ | Two free streak saves per week |
| 5+ | Three free streak saves per week |
| 6 | Unlimited streak saves (mascot "works out for you") |

**Credit Cost:** Each streak save costs the mascot "energy" which regenerates. At stage 6, regeneration is instant.

### 2.3 Bonus Multiplier
**Trigger:** Completing workouts consistently
**Action:** Mascot provides credit bonuses

| Stage | Bonus |
|-------|-------|
| 1 | +5% TU for first workout of the day |
| 2 | +10% TU for first workout |
| 3 | +10% TU + 5% for consecutive days |
| 4 | +15% TU + 10% consecutive day bonus |
| 5 | +20% TU + 15% consecutive + rare item chance |
| 6 | +25% TU + 20% consecutive + guaranteed daily item |

---

## Phase 3: Journey & Progress Assistance

### 3.1 Smart Scheduler
**Trigger:** User opens app without clear intent
**Action:** Mascot suggests optimal workout based on recovery and goals

| Stage | Feature |
|-------|---------|
| 1+ | Basic "time since last workout" reminders |
| 2+ | Muscle group rotation suggestions |
| 3+ | Recovery-aware recommendations |
| 4+ | Goal-aligned workout suggestions |
| 5+ | Periodization planning assistance |
| 6 | Full AI-powered training program management |

### 3.2 Form Finder
**Trigger:** User struggles with exercise selection
**Action:** Mascot helps find alternatives and progressions

| Stage | Feature |
|-------|---------|
| 1+ | Suggest similar exercises when one isn't available |
| 2+ | Offer easier/harder variations |
| 3+ | Remember user's equipment limitations |
| 4+ | Track which exercises user avoids and why |
| 5+ | Build custom routines based on preferences |
| 6 | Adapt in real-time during workouts |

### 3.3 Progress Tracker
**Trigger:** User views stats or achievements
**Action:** Mascot highlights progress and suggests next milestones

| Stage | Feature |
|-------|---------|
| 1+ | Celebrate PRs and milestones |
| 2+ | Show weekly progress summaries |
| 3+ | Predict when next rank/achievement will be reached |
| 4+ | Compare to similar users (privacy-respecting) |
| 5+ | Identify weaknesses and suggest focus areas |
| 6 | Full performance analytics with recommendations |

---

## Phase 4: Social & Community Assistance

### 4.1 Crew Helper
**Trigger:** User is part of a crew or looking for one
**Action:** Mascot facilitates social connections

| Stage | Feature |
|-------|---------|
| 1+ | Remind about crew workouts |
| 2+ | Suggest crews based on archetype |
| 3+ | Help coordinate workout times with crew |
| 4+ | Analyze crew performance and suggest improvements |
| 5+ | Find optimal crew compositions |
| 6 | Act as virtual "crew coach" |

### 4.2 Rivalry Manager
**Trigger:** Active rivalries or competition opportunities
**Action:** Mascot enhances competitive experience

| Stage | Feature |
|-------|---------|
| 1+ | Notify when rival completes a workout |
| 2+ | Suggest workouts to gain advantage |
| 3+ | Trash talk on user's behalf (fun, friendly) |
| 4+ | Analyze rival's patterns for strategic advantage |
| 5+ | Coordinate team rivalries |
| 6 | Tournament bracket management |

### 4.3 High-Five Helper
**Trigger:** Social interactions available
**Action:** Mascot automates positive social engagement

| Stage | Feature |
|-------|---------|
| 1+ | Prompt to high-five after seeing friends' workouts |
| 2+ | Auto-high-five close friends (if enabled) |
| 3+ | Craft personalized encouragement messages |
| 4+ | Identify friends who need motivation |
| 5+ | Coordinate group challenges |
| 6 | Full social manager mode |

---

## Phase 5: Account & Meta Assistance

### 5.1 Settings Optimizer
**Trigger:** Account settings review or issues
**Action:** Mascot helps optimize account configuration

| Stage | Feature |
|-------|---------|
| 1+ | Tutorial guidance for new users |
| 2+ | Suggest optimal notification settings |
| 3+ | Review privacy settings periodically |
| 4+ | Optimize app performance settings |
| 5+ | A/B test UI preferences for user |
| 6 | Full personalization management |

### 5.2 Data Guardian
**Trigger:** Data integrity or backup concerns
**Action:** Mascot protects user's fitness data

| Stage | Feature |
|-------|---------|
| 1+ | Remind about data export options |
| 2+ | Detect unusual activity patterns |
| 3+ | Alert about potential data issues |
| 4+ | Automatic backup reminders |
| 5+ | Cross-platform sync assistance |
| 6 | Full data integrity monitoring |

### 5.3 Subscription Assistant
**Trigger:** Premium features or subscription decisions
**Action:** Mascot helps users get maximum value

| Stage | Feature |
|-------|---------|
| 1+ | Explain premium features when relevant |
| 2+ | Track which premium features user would benefit from |
| 3+ | Suggest optimal subscription timing |
| 4+ | Apply available discounts automatically |
| 5+ | Predict ROI of premium for specific user |
| 6 | Personalized subscription recommendations |

---

## Phase 6: Advanced AI Abilities (High Stage Only)

### 6.1 Workout Generator
**Stage 5+ Only**

The mascot can generate complete workout plans:
- Analyze user's history, goals, and available equipment
- Create periodized programs
- Adapt based on recovery and performance
- Include deload weeks automatically

### 6.2 Injury Prevention
**Stage 4+ Only**

The mascot monitors for overtraining:
- Track volume per muscle group over time
- Warn about imbalances
- Suggest recovery days
- Recommend mobility work

### 6.3 Nutrition Hints
**Stage 3+ Only**

Light nutrition guidance (not a full meal planner):
- Remind about protein timing around workouts
- Suggest hydration
- Note when caloric intake might need adjustment
- Connect workout intensity to recovery nutrition needs

---

## Credit Integration

### How Mascot Powers Interact with Credits

1. **Power Unlock Credits**
   - Some abilities cost credits to unlock permanently
   - Others cost credits per use
   - High-stage mascots have reduced costs

2. **Credit Generation**
   - Mascot assists can generate "assisted TU" worth 80% of normal TU
   - Bonus multipliers increase credit earnings
   - Streak saves preserve earning multipliers

3. **Credit Protection**
   - Mascot can warn before spending large credit amounts
   - Suggest credit-efficient workout options
   - Help users avoid "credit traps" (expensive low-value actions)

### Cost Table

| Power | Base Cost | Stage 6 Cost |
|-------|-----------|--------------|
| Workout Assist | Free (charges) | Free |
| Streak Save | 50 credits | Free |
| Bonus Multiplier | Passive | Passive |
| Workout Generation | 100 credits | 25 credits |
| Full Program | 500 credits | 100 credits |
| Crew Coordination | 25 credits | Free |
| Rivalry Analysis | 50 credits | 10 credits |

---

## Implementation Priority

### Now (Phase 1) - DONE
- [x] Workout exercise assist
- [x] Daily charges system
- [x] Cooldown management
- [x] Stage-based ability scaling

### Next (Phase 2) - Credit Integration
1. Credit Guardian warnings
2. Streak Saver basics
3. Bonus Multiplier for TU earnings

### Then (Phase 3) - Journey Assistance
1. Smart Scheduler suggestions
2. Progress milestones
3. Form alternatives

### Future (Phases 4-6)
- Social assistance features
- Account meta-features
- Advanced AI capabilities

---

## Database Schema Extensions Needed

### Phase 2 Tables

```sql
-- Streak save tracking
CREATE TABLE mascot_streak_saves (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES users(id),
  streak_type VARCHAR(50) NOT NULL,
  streak_value INTEGER NOT NULL,
  credits_spent INTEGER DEFAULT 0,
  mascot_energy_used INTEGER DEFAULT 0,
  saved_at TIMESTAMPTZ DEFAULT NOW()
);

-- Credit guardian alerts
CREATE TABLE mascot_credit_alerts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES users(id),
  alert_type VARCHAR(50) NOT NULL,
  threshold_amount INTEGER,
  message TEXT,
  dismissed BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Bonus multiplier tracking
CREATE TABLE mascot_bonus_log (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES users(id),
  workout_id UUID REFERENCES workouts(id),
  bonus_type VARCHAR(50) NOT NULL,
  multiplier DECIMAL(3,2) NOT NULL,
  extra_tu_awarded INTEGER NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

### Phase 3 Tables

```sql
-- Smart scheduler preferences
CREATE TABLE mascot_scheduler_prefs (
  user_id UUID PRIMARY KEY REFERENCES users(id),
  preferred_times JSONB DEFAULT '[]',
  excluded_muscle_groups JSONB DEFAULT '[]',
  equipment_available JSONB DEFAULT '[]',
  goal_priority VARCHAR(50),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Progress milestone alerts
CREATE TABLE mascot_milestone_alerts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES users(id),
  milestone_type VARCHAR(50) NOT NULL,
  current_progress INTEGER,
  target_value INTEGER,
  estimated_completion DATE,
  notified BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## API Endpoints to Add

### Phase 2
- `GET /mascot/companion/credit-status` - Credit guardian status
- `POST /mascot/companion/streak-save` - Use streak save ability
- `GET /mascot/companion/bonus` - Current bonus multiplier status

### Phase 3
- `GET /mascot/companion/schedule` - Smart schedule suggestions
- `GET /mascot/companion/milestones` - Upcoming milestones
- `POST /mascot/companion/preferences` - Update scheduler preferences

### Phase 4+
- `GET /mascot/companion/social-actions` - Pending social actions
- `POST /mascot/companion/auto-highfive` - Configure auto high-fives
- `GET /mascot/companion/crew-insights` - Crew performance analysis

---

## UI Components to Build

1. **Mascot Status Widget** - Shows current charges, abilities, bonuses
2. **Mascot Alert Modal** - Credit warnings, streak saves
3. **Mascot Schedule View** - Smart scheduler interface
4. **Mascot Progress Dashboard** - Milestone tracking
5. **Mascot Social Panel** - Social automation settings

---

## Success Metrics

Track these to measure mascot effectiveness:

1. **Retention Impact**
   - Users with active mascot vs without
   - Streak length with/without streak saves
   - Workout frequency changes

2. **Credit Economy**
   - Credits spent on mascot features
   - Credit warnings â†’ prevented overspending
   - Bonus multiplier usage

3. **User Satisfaction**
   - NPS for mascot features
   - Feature engagement rates
   - Upgrade conversion (stage progression motivation)

---

## Open Questions

1. Should mascot abilities be purely beneficial or have trade-offs?
2. How aggressive should credit warnings be?
3. Should high-stage mascot users be able to "gift" assistance to friends?
4. Integration with subscription tiers - premium-only abilities?
5. Seasonal/event-based mascot power boosts?
